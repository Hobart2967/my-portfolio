var ZC=Object.defineProperty,EM=Object.getOwnPropertySymbols,JC=Object.prototype.hasOwnProperty,eA=Object.prototype.propertyIsEnumerable,MM=(jt,mt,ae)=>mt in jt?ZC(jt,mt,{enumerable:!0,configurable:!0,writable:!0,value:ae}):jt[mt]=ae,SM=(jt,mt)=>{for(var ae in mt||(mt={}))JC.call(mt,ae)&&MM(jt,ae,mt[ae]);if(EM)for(var ae of EM(mt))eA.call(mt,ae)&&MM(jt,ae,mt[ae]);return jt};(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[736],{4756:(jt,mt,ae)=>{"use strict";ae.d(mt,{Z:()=>bm});var G=ae(7758);const Y=new G.JOQ,Be=new G.iMs,Je=new G.FM8,_e=new G.Pa4,Me=new G.Pa4,Re=new G.Pa4,Ne=new G.yGw;class ze extends G.pBf{constructor(f,g,b){super(),b.style.touchAction="none";let I=null,z=null;const J=[],re=this;function me(){b.addEventListener("pointermove",De),b.addEventListener("pointerdown",Ge),b.addEventListener("pointerup",ke),b.addEventListener("pointerleave",ke)}function ue(){b.removeEventListener("pointermove",De),b.removeEventListener("pointerdown",Ge),b.removeEventListener("pointerup",ke),b.removeEventListener("pointerleave",ke),b.style.cursor=""}function De(Ze){if(!1!==re.enabled){if(et(Ze),Be.setFromCamera(Je,g),I)return Be.ray.intersectPlane(Y,Me)&&I.position.copy(Me.sub(_e).applyMatrix4(Ne)),void re.dispatchEvent({type:"drag",object:I});if("mouse"===Ze.pointerType||"pen"===Ze.pointerType)if(J.length=0,Be.setFromCamera(Je,g),Be.intersectObjects(f,!0,J),J.length>0){const Ie=J[0].object;Y.setFromNormalAndCoplanarPoint(g.getWorldDirection(Y.normal),Re.setFromMatrixPosition(Ie.matrixWorld)),z!==Ie&&null!==z&&(re.dispatchEvent({type:"hoveroff",object:z}),b.style.cursor="auto",z=null),z!==Ie&&(re.dispatchEvent({type:"hoveron",object:Ie}),b.style.cursor="pointer",z=Ie)}else null!==z&&(re.dispatchEvent({type:"hoveroff",object:z}),b.style.cursor="auto",z=null)}}function Ge(Ze){!1!==re.enabled&&(et(Ze),J.length=0,Be.setFromCamera(Je,g),Be.intersectObjects(f,!0,J),J.length>0&&(I=!0===re.transformGroup?f[0]:J[0].object,Y.setFromNormalAndCoplanarPoint(g.getWorldDirection(Y.normal),Re.setFromMatrixPosition(I.matrixWorld)),Be.ray.intersectPlane(Y,Me)&&(Ne.copy(I.parent.matrixWorld).invert(),_e.copy(Me).sub(Re.setFromMatrixPosition(I.matrixWorld))),b.style.cursor="move",re.dispatchEvent({type:"dragstart",object:I})))}function ke(){!1!==re.enabled&&(I&&(re.dispatchEvent({type:"dragend",object:I}),I=null),b.style.cursor=z?"pointer":"auto")}function et(Ze){const Ie=b.getBoundingClientRect();Je.x=(Ze.clientX-Ie.left)/Ie.width*2-1,Je.y=-(Ze.clientY-Ie.top)/Ie.height*2+1}me(),this.enabled=!0,this.transformGroup=!1,this.activate=me,this.deactivate=ue,this.dispose=function(){ue()},this.getObjects=function(){return f}}}var ne=ae(6995),te=ae(6804);const He=4294967296;function gt(d){return d.x}function Jt(d){return d.y}function Yt(d){return d.z}var Ot=Math.PI*(3-Math.sqrt(5)),dt=20*Math.PI/(9+Math.sqrt(221));function Mn(d,f){f=f||2;var b,g=Math.min(3,Math.max(1,Math.round(f))),I=1,z=.001,J=1-Math.pow(z,1/300),re=0,me=.6,ue=new Map,Te=(0,te.HT)(Ge),ge=(0,ne.Z)("tick","end"),De=function(){let d=1;return()=>(d=(1664525*d+1013904223)%He)/He}();function Ge(){ke(),ge.call("tick",b),I<z&&(Te.stop(),ge.call("end",b))}function ke(Ie){var It,Tt,wt=d.length;void 0===Ie&&(Ie=1);for(var st=0;st<Ie;++st)for(I+=(re-I)*J,ue.forEach(function(sn){sn(I)}),It=0;It<wt;++It)null==(Tt=d[It]).fx?Tt.x+=Tt.vx*=me:(Tt.x=Tt.fx,Tt.vx=0),g>1&&(null==Tt.fy?Tt.y+=Tt.vy*=me:(Tt.y=Tt.fy,Tt.vy=0)),g>2&&(null==Tt.fz?Tt.z+=Tt.vz*=me:(Tt.z=Tt.fz,Tt.vz=0));return b}function et(){for(var wt,Ie=0,It=d.length;Ie<It;++Ie){if((wt=d[Ie]).index=Ie,null!=wt.fx&&(wt.x=wt.fx),null!=wt.fy&&(wt.y=wt.fy),null!=wt.fz&&(wt.z=wt.fz),isNaN(wt.x)||g>1&&isNaN(wt.y)||g>2&&isNaN(wt.z)){var Tt=10*(g>2?Math.cbrt(.5+Ie):g>1?Math.sqrt(.5+Ie):Ie),st=Ie*Ot,sn=Ie*dt;1===g?wt.x=Tt:2===g?(wt.x=Tt*Math.cos(st),wt.y=Tt*Math.sin(st)):(wt.x=Tt*Math.sin(st)*Math.cos(sn),wt.y=Tt*Math.cos(st),wt.z=Tt*Math.sin(st)*Math.sin(sn))}(isNaN(wt.vx)||g>1&&isNaN(wt.vy)||g>2&&isNaN(wt.vz))&&(wt.vx=0,g>1&&(wt.vy=0),g>2&&(wt.vz=0))}}function Ze(Ie){return Ie.initialize&&Ie.initialize(d,De,g),Ie}return null==d&&(d=[]),et(),b={tick:ke,restart:function(){return Te.restart(Ge),b},stop:function(){return Te.stop(),b},numDimensions:function(Ie){return arguments.length?(g=Math.min(3,Math.max(1,Math.round(Ie))),ue.forEach(Ze),b):g},nodes:function(Ie){return arguments.length?(d=Ie,et(),ue.forEach(Ze),b):d},alpha:function(Ie){return arguments.length?(I=+Ie,b):I},alphaMin:function(Ie){return arguments.length?(z=+Ie,b):z},alphaDecay:function(Ie){return arguments.length?(J=+Ie,b):+J},alphaTarget:function(Ie){return arguments.length?(re=+Ie,b):re},velocityDecay:function(Ie){return arguments.length?(me=1-Ie,b):1-me},randomSource:function(Ie){return arguments.length?(De=Ie,ue.forEach(Ze),b):De},force:function(Ie,It){return arguments.length>1?(null==It?ue.delete(Ie):ue.set(Ie,Ze(It)),b):ue.get(Ie)},find:function(){var un,Ur,mi,ui,gi,As,Ie=Array.prototype.slice.call(arguments),It=Ie.shift()||0,wt=(g>1?Ie.shift():null)||0,Tt=(g>2?Ie.shift():null)||0,st=Ie.shift()||1/0,sn=0,Sn=d.length;for(st*=st,sn=0;sn<Sn;++sn)(ui=(un=It-(gi=d[sn]).x)*un+(Ur=wt-(gi.y||0))*Ur+(mi=Tt-(gi.z||0))*mi)<st&&(As=gi,st=ui);return As},on:function(Ie,It){return arguments.length>1?(ge.on(Ie,It),b):ge.on(Ie)}}}function fn(d){return function(){return d}}function Gn(d){return 1e-6*(d()-.5)}function ut(d){return d.index}function Wt(d,f){var g=d.get(f);if(!g)throw new Error("node not found: "+f);return g}function Tn(d){var b,z,J,re,me,ue,Te,f=ut,g=function(Ie){return 1/Math.min(me[Ie.source.index],me[Ie.target.index])},I=fn(30),ge=1;function Ge(Ie){for(var It=0,wt=d.length;It<ge;++It)for(var st,sn,Sn,ui,gi,Tt=0,un=0,Ur=0,mi=0;Tt<wt;++Tt)un=(Sn=(st=d[Tt]).target).x+Sn.vx-(sn=st.source).x-sn.vx||Gn(Te),re>1&&(Ur=Sn.y+Sn.vy-sn.y-sn.vy||Gn(Te)),re>2&&(mi=Sn.z+Sn.vz-sn.z-sn.vz||Gn(Te)),Ur*=ui=((ui=Math.sqrt(un*un+Ur*Ur+mi*mi))-z[Tt])/ui*Ie*b[Tt],mi*=ui,Sn.vx-=(un*=ui)*(gi=ue[Tt]),re>1&&(Sn.vy-=Ur*gi),re>2&&(Sn.vz-=mi*gi),sn.vx+=un*(gi=1-gi),re>1&&(sn.vy+=Ur*gi),re>2&&(sn.vz+=mi*gi)}function ke(){if(J){var Ie,st,It=J.length,wt=d.length,Tt=new Map(J.map((sn,Sn)=>[f(sn,Sn,J),sn]));for(Ie=0,me=new Array(It);Ie<wt;++Ie)(st=d[Ie]).index=Ie,"object"!=typeof st.source&&(st.source=Wt(Tt,st.source)),"object"!=typeof st.target&&(st.target=Wt(Tt,st.target)),me[st.source.index]=(me[st.source.index]||0)+1,me[st.target.index]=(me[st.target.index]||0)+1;for(Ie=0,ue=new Array(wt);Ie<wt;++Ie)ue[Ie]=me[(st=d[Ie]).source.index]/(me[st.source.index]+me[st.target.index]);b=new Array(wt),et(),z=new Array(wt),Ze()}}function et(){if(J)for(var Ie=0,It=d.length;Ie<It;++Ie)b[Ie]=+g(d[Ie],Ie,d)}function Ze(){if(J)for(var Ie=0,It=d.length;Ie<It;++Ie)z[Ie]=+I(d[Ie],Ie,d)}return null==d&&(d=[]),Ge.initialize=function(Ie,...It){J=Ie,Te=It.find(wt=>"function"==typeof wt)||Math.random,re=It.find(wt=>[1,2,3].includes(wt))||2,ke()},Ge.links=function(Ie){return arguments.length?(d=Ie,ke(),Ge):d},Ge.id=function(Ie){return arguments.length?(f=Ie,Ge):f},Ge.iterations=function(Ie){return arguments.length?(ge=+Ie,Ge):ge},Ge.strength=function(Ie){return arguments.length?(g="function"==typeof Ie?Ie:fn(+Ie),et(),Ge):g},Ge.distance=function(Ie){return arguments.length?(I="function"==typeof Ie?Ie:fn(+Ie),Ze(),Ge):I},Ge}function qn(d,f,g){if(isNaN(f))return d;var b,me,ue,Te,ge,De,I=d._root,z={data:g},J=d._x0,re=d._x1;if(!I)return d._root=z,d;for(;I.length;)if((Te=f>=(me=(J+re)/2))?J=me:re=me,b=I,!(I=I[ge=+Te]))return b[ge]=z,d;if(f===(ue=+d._x.call(null,I.data)))return z.next=I,b?b[ge]=z:d._root=z,d;do{b=b?b[ge]=new Array(2):d._root=new Array(2),(Te=f>=(me=(J+re)/2))?J=me:re=me}while((ge=+Te)==(De=+(ue>=me)));return b[De]=I,b[ge]=z,d}function vn(d,f,g){this.node=d,this.x0=f,this.x1=g}function kt(d){return d[0]}function jn(d,f){var g=new ln(null==f?kt:f,NaN,NaN);return null==d?g:g.addAll(d)}function ln(d,f,g){this._x=d,this._x0=f,this._x1=g,this._root=void 0}function ai(d){for(var f={data:d.data},g=f;d=d.next;)g=g.next={data:d.data};return f}var wr=jn.prototype=ln.prototype;function ye(d,f,g,b){if(isNaN(f)||isNaN(g))return d;var I,ge,De,Ge,ke,et,Ze,Ie,It,z=d._root,J={data:b},re=d._x0,me=d._y0,ue=d._x1,Te=d._y1;if(!z)return d._root=J,d;for(;z.length;)if((et=f>=(ge=(re+ue)/2))?re=ge:ue=ge,(Ze=g>=(De=(me+Te)/2))?me=De:Te=De,I=z,!(z=z[Ie=Ze<<1|et]))return I[Ie]=J,d;if(Ge=+d._x.call(null,z.data),ke=+d._y.call(null,z.data),f===Ge&&g===ke)return J.next=z,I?I[Ie]=J:d._root=J,d;do{I=I?I[Ie]=new Array(4):d._root=new Array(4),(et=f>=(ge=(re+ue)/2))?re=ge:ue=ge,(Ze=g>=(De=(me+Te)/2))?me=De:Te=De}while((Ie=Ze<<1|et)==(It=(ke>=De)<<1|Ge>=ge));return I[It]=z,I[Ie]=J,d}function Kt(d,f,g,b,I){this.node=d,this.x0=f,this.y0=g,this.x1=b,this.y1=I}function Di(d){return d[0]}function Ln(d){return d[1]}function Ji(d,f,g){var b=new ls(null==f?Di:f,null==g?Ln:g,NaN,NaN,NaN,NaN);return null==d?b:b.addAll(d)}function ls(d,f,g,b,I,z){this._x=d,this._y=f,this._x0=g,this._y0=b,this._x1=I,this._y1=z,this._root=void 0}function Ps(d){for(var f={data:d.data},g=f;d=d.next;)g=g.next={data:d.data};return f}wr.copy=function(){var g,b,d=new ln(this._x,this._x0,this._x1),f=this._root;if(!f)return d;if(!f.length)return d._root=ai(f),d;for(g=[{source:f,target:d._root=new Array(2)}];f=g.pop();)for(var I=0;I<2;++I)(b=f.source[I])&&(b.length?g.push({source:b,target:f.target[I]=new Array(2)}):f.target[I]=ai(b));return d},wr.add=function(d){var f=+this._x.call(null,d);return qn(this.cover(f),f,d)},wr.addAll=function(d){var f,b,g=d.length,I=new Array(g),z=1/0,J=-1/0;for(f=0;f<g;++f)isNaN(b=+this._x.call(null,d[f]))||(I[f]=b,b<z&&(z=b),b>J&&(J=b));if(z>J)return this;for(this.cover(z).cover(J),f=0;f<g;++f)qn(this,I[f],d[f]);return this},wr.cover=function(d){if(isNaN(d=+d))return this;var f=this._x0,g=this._x1;if(isNaN(f))g=(f=Math.floor(d))+1;else{for(var z,J,b=g-f||1,I=this._root;f>d||d>=g;)switch(J=+(d<f),z=new Array(2),z[J]=I,I=z,b*=2,J){case 0:g=f+b;break;case 1:f=g-b}this._root&&this._root.length&&(this._root=I)}return this._x0=f,this._x1=g,this},wr.data=function(){var d=[];return this.visit(function(f){if(!f.length)do{d.push(f.data)}while(f=f.next)}),d},wr.extent=function(d){return arguments.length?this.cover(+d[0][0]).cover(+d[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},wr.find=function(d,f){var g,I,z,ue,Te,b=this._x0,J=this._x1,re=[],me=this._root;for(me&&re.push(new vn(me,b,J)),null==f?f=1/0:(b=d-f,J=d+f);ue=re.pop();)if(!(!(me=ue.node)||(I=ue.x0)>J||(z=ue.x1)<b))if(me.length){var ge=(I+z)/2;re.push(new vn(me[1],ge,z),new vn(me[0],I,ge)),(Te=+(d>=ge))&&(ue=re[re.length-1],re[re.length-1]=re[re.length-1-Te],re[re.length-1-Te]=ue)}else{var De=Math.abs(d-+this._x.call(null,me.data));De<f&&(f=De,b=d-De,J=d+De,g=me.data)}return g},wr.remove=function(d){if(isNaN(me=+this._x.call(null,d)))return this;var f,b,I,z,me,ue,Te,ge,De,g=this._root,J=this._x0,re=this._x1;if(!g)return this;if(g.length)for(;;){if((Te=me>=(ue=(J+re)/2))?J=ue:re=ue,f=g,!(g=g[ge=+Te]))return this;if(!g.length)break;f[ge+1&1]&&(b=f,De=ge)}for(;g.data!==d;)if(I=g,!(g=g.next))return this;return(z=g.next)&&delete g.next,I?(z?I.next=z:delete I.next,this):f?(z?f[ge]=z:delete f[ge],(g=f[0]||f[1])&&g===(f[1]||f[0])&&!g.length&&(b?b[De]=g:this._root=g),this):(this._root=z,this)},wr.removeAll=function(d){for(var f=0,g=d.length;f<g;++f)this.remove(d[f]);return this},wr.root=function(){return this._root},wr.size=function(){var d=0;return this.visit(function(f){if(!f.length)do{++d}while(f=f.next)}),d},wr.visit=function(d){var g,I,z,J,f=[],b=this._root;for(b&&f.push(new vn(b,this._x0,this._x1));g=f.pop();)if(!d(b=g.node,z=g.x0,J=g.x1)&&b.length){var re=(z+J)/2;(I=b[1])&&f.push(new vn(I,re,J)),(I=b[0])&&f.push(new vn(I,z,re))}return this},wr.visitAfter=function(d){var b,f=[],g=[];for(this._root&&f.push(new vn(this._root,this._x0,this._x1));b=f.pop();){var I=b.node;if(I.length){var z,J=b.x0,re=b.x1,me=(J+re)/2;(z=I[0])&&f.push(new vn(z,J,me)),(z=I[1])&&f.push(new vn(z,me,re))}g.push(b)}for(;b=g.pop();)d(b.node,b.x0,b.x1);return this},wr.x=function(d){return arguments.length?(this._x=d,this):this._x};var Mi=Ji.prototype=ls.prototype;function Jn(d,f,g,b,I){if(isNaN(f)||isNaN(g)||isNaN(b))return d;var z,ke,et,Ze,Ie,It,wt,Tt,st,sn,Sn,un,J=d._root,re={data:I},me=d._x0,ue=d._y0,Te=d._z0,ge=d._x1,De=d._y1,Ge=d._z1;if(!J)return d._root=re,d;for(;J.length;)if((Tt=f>=(ke=(me+ge)/2))?me=ke:ge=ke,(st=g>=(et=(ue+De)/2))?ue=et:De=et,(sn=b>=(Ze=(Te+Ge)/2))?Te=Ze:Ge=Ze,z=J,!(J=J[Sn=sn<<2|st<<1|Tt]))return z[Sn]=re,d;if(Ie=+d._x.call(null,J.data),It=+d._y.call(null,J.data),wt=+d._z.call(null,J.data),f===Ie&&g===It&&b===wt)return re.next=J,z?z[Sn]=re:d._root=re,d;do{z=z?z[Sn]=new Array(8):d._root=new Array(8),(Tt=f>=(ke=(me+ge)/2))?me=ke:ge=ke,(st=g>=(et=(ue+De)/2))?ue=et:De=et,(sn=b>=(Ze=(Te+Ge)/2))?Te=Ze:Ge=Ze}while((Sn=sn<<2|st<<1|Tt)==(un=(wt>=Ze)<<2|(It>=et)<<1|Ie>=ke));return z[un]=J,z[Sn]=re,d}function sr(d,f,g,b,I,z,J){this.node=d,this.x0=f,this.y0=g,this.z0=b,this.x1=I,this.y1=z,this.z1=J}function ua(d){return d[0]}function qs(d){return d[1]}function gs(d){return d[2]}function Is(d,f,g,b){var I=new _a(null==f?ua:f,null==g?qs:g,null==b?gs:b,NaN,NaN,NaN,NaN,NaN,NaN);return null==d?I:I.addAll(d)}function _a(d,f,g,b,I,z,J,re,me){this._x=d,this._y=f,this._z=g,this._x0=b,this._y0=I,this._z0=z,this._x1=J,this._y1=re,this._z1=me,this._root=void 0}function Es(d){for(var f={data:d.data},g=f;d=d.next;)g=g.next={data:d.data};return f}Mi.copy=function(){var g,b,d=new ls(this._x,this._y,this._x0,this._y0,this._x1,this._y1),f=this._root;if(!f)return d;if(!f.length)return d._root=Ps(f),d;for(g=[{source:f,target:d._root=new Array(4)}];f=g.pop();)for(var I=0;I<4;++I)(b=f.source[I])&&(b.length?g.push({source:b,target:f.target[I]=new Array(4)}):f.target[I]=Ps(b));return d},Mi.add=function(d){const f=+this._x.call(null,d),g=+this._y.call(null,d);return ye(this.cover(f,g),f,g,d)},Mi.addAll=function(d){var f,g,I,z,b=d.length,J=new Array(b),re=new Array(b),me=1/0,ue=1/0,Te=-1/0,ge=-1/0;for(g=0;g<b;++g)isNaN(I=+this._x.call(null,f=d[g]))||isNaN(z=+this._y.call(null,f))||(J[g]=I,re[g]=z,I<me&&(me=I),I>Te&&(Te=I),z<ue&&(ue=z),z>ge&&(ge=z));if(me>Te||ue>ge)return this;for(this.cover(me,ue).cover(Te,ge),g=0;g<b;++g)ye(this,J[g],re[g],d[g]);return this},Mi.cover=function(d,f){if(isNaN(d=+d)||isNaN(f=+f))return this;var g=this._x0,b=this._y0,I=this._x1,z=this._y1;if(isNaN(g))I=(g=Math.floor(d))+1,z=(b=Math.floor(f))+1;else{for(var me,ue,J=I-g||1,re=this._root;g>d||d>=I||b>f||f>=z;)switch(ue=(f<b)<<1|d<g,me=new Array(4),me[ue]=re,re=me,J*=2,ue){case 0:I=g+J,z=b+J;break;case 1:g=I-J,z=b+J;break;case 2:I=g+J,b=z-J;break;case 3:g=I-J,b=z-J}this._root&&this._root.length&&(this._root=re)}return this._x0=g,this._y0=b,this._x1=I,this._y1=z,this},Mi.data=function(){var d=[];return this.visit(function(f){if(!f.length)do{d.push(f.data)}while(f=f.next)}),d},Mi.extent=function(d){return arguments.length?this.cover(+d[0][0],+d[0][1]).cover(+d[1][0],+d[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Mi.find=function(d,f,g){var b,J,re,me,ue,ke,et,I=this._x0,z=this._y0,Te=this._x1,ge=this._y1,De=[],Ge=this._root;for(Ge&&De.push(new Kt(Ge,I,z,Te,ge)),null==g?g=1/0:(I=d-g,z=f-g,Te=d+g,ge=f+g,g*=g);ke=De.pop();)if(!(!(Ge=ke.node)||(J=ke.x0)>Te||(re=ke.y0)>ge||(me=ke.x1)<I||(ue=ke.y1)<z))if(Ge.length){var Ze=(J+me)/2,Ie=(re+ue)/2;De.push(new Kt(Ge[3],Ze,Ie,me,ue),new Kt(Ge[2],J,Ie,Ze,ue),new Kt(Ge[1],Ze,re,me,Ie),new Kt(Ge[0],J,re,Ze,Ie)),(et=(f>=Ie)<<1|d>=Ze)&&(ke=De[De.length-1],De[De.length-1]=De[De.length-1-et],De[De.length-1-et]=ke)}else{var It=d-+this._x.call(null,Ge.data),wt=f-+this._y.call(null,Ge.data),Tt=It*It+wt*wt;if(Tt<g){var st=Math.sqrt(g=Tt);I=d-st,z=f-st,Te=d+st,ge=f+st,b=Ge.data}}return b},Mi.remove=function(d){if(isNaN(Te=+this._x.call(null,d))||isNaN(ge=+this._y.call(null,d)))return this;var f,b,I,z,Te,ge,De,Ge,ke,et,Ze,Ie,g=this._root,J=this._x0,re=this._y0,me=this._x1,ue=this._y1;if(!g)return this;if(g.length)for(;;){if((ke=Te>=(De=(J+me)/2))?J=De:me=De,(et=ge>=(Ge=(re+ue)/2))?re=Ge:ue=Ge,f=g,!(g=g[Ze=et<<1|ke]))return this;if(!g.length)break;(f[Ze+1&3]||f[Ze+2&3]||f[Ze+3&3])&&(b=f,Ie=Ze)}for(;g.data!==d;)if(I=g,!(g=g.next))return this;return(z=g.next)&&delete g.next,I?(z?I.next=z:delete I.next,this):f?(z?f[Ze]=z:delete f[Ze],(g=f[0]||f[1]||f[2]||f[3])&&g===(f[3]||f[2]||f[1]||f[0])&&!g.length&&(b?b[Ie]=g:this._root=g),this):(this._root=z,this)},Mi.removeAll=function(d){for(var f=0,g=d.length;f<g;++f)this.remove(d[f]);return this},Mi.root=function(){return this._root},Mi.size=function(){var d=0;return this.visit(function(f){if(!f.length)do{++d}while(f=f.next)}),d},Mi.visit=function(d){var g,I,z,J,re,me,f=[],b=this._root;for(b&&f.push(new Kt(b,this._x0,this._y0,this._x1,this._y1));g=f.pop();)if(!d(b=g.node,z=g.x0,J=g.y0,re=g.x1,me=g.y1)&&b.length){var ue=(z+re)/2,Te=(J+me)/2;(I=b[3])&&f.push(new Kt(I,ue,Te,re,me)),(I=b[2])&&f.push(new Kt(I,z,Te,ue,me)),(I=b[1])&&f.push(new Kt(I,ue,J,re,Te)),(I=b[0])&&f.push(new Kt(I,z,J,ue,Te))}return this},Mi.visitAfter=function(d){var b,f=[],g=[];for(this._root&&f.push(new Kt(this._root,this._x0,this._y0,this._x1,this._y1));b=f.pop();){var I=b.node;if(I.length){var z,J=b.x0,re=b.y0,me=b.x1,ue=b.y1,Te=(J+me)/2,ge=(re+ue)/2;(z=I[0])&&f.push(new Kt(z,J,re,Te,ge)),(z=I[1])&&f.push(new Kt(z,Te,re,me,ge)),(z=I[2])&&f.push(new Kt(z,J,ge,Te,ue)),(z=I[3])&&f.push(new Kt(z,Te,ge,me,ue))}g.push(b)}for(;b=g.pop();)d(b.node,b.x0,b.y0,b.x1,b.y1);return this},Mi.x=function(d){return arguments.length?(this._x=d,this):this._x},Mi.y=function(d){return arguments.length?(this._y=d,this):this._y};var Xi=Is.prototype=_a.prototype;function mo(){var d,f,g,b,I,J,z=fn(-30),re=1,me=1/0,ue=.81;function Te(ke){var et,Ze=d.length,Ie=(1===f?jn(d,gt):2===f?Ji(d,gt,Jt):3===f?Is(d,gt,Jt,Yt):null).visitAfter(De);for(I=ke,et=0;et<Ze;++et)g=d[et],Ie.visit(Ge)}function ge(){if(d){var ke,Ze,et=d.length;for(J=new Array(et),ke=0;ke<et;++ke)J[(Ze=d[ke]).index]=+z(Ze,ke,d)}}function De(ke){var Ze,Ie,wt,Tt,st,sn,et=0,It=0,Sn=ke.length;if(Sn){for(wt=Tt=st=sn=0;sn<Sn;++sn)(Ze=ke[sn])&&(Ie=Math.abs(Ze.value))&&(et+=Ze.value,It+=Ie,wt+=Ie*(Ze.x||0),Tt+=Ie*(Ze.y||0),st+=Ie*(Ze.z||0));et*=Math.sqrt(4/Sn),ke.x=wt/It,f>1&&(ke.y=Tt/It),f>2&&(ke.z=st/It)}else{(Ze=ke).x=Ze.data.x,f>1&&(Ze.y=Ze.data.y),f>2&&(Ze.z=Ze.data.z);do{et+=J[Ze.data.index]}while(Ze=Ze.next)}ke.value=et}function Ge(ke,et,Ze,Ie,It){if(!ke.value)return!0;var Tt=ke.x-g.x,st=f>1?ke.y-g.y:0,sn=f>2?ke.z-g.z:0,Sn=[Ze,Ie,It][f-1]-et,un=Tt*Tt+st*st+sn*sn;if(Sn*Sn/ue<un)return un<me&&(0===Tt&&(un+=(Tt=Gn(b))*Tt),f>1&&0===st&&(un+=(st=Gn(b))*st),f>2&&0===sn&&(un+=(sn=Gn(b))*sn),un<re&&(un=Math.sqrt(re*un)),g.vx+=Tt*ke.value*I/un,f>1&&(g.vy+=st*ke.value*I/un),f>2&&(g.vz+=sn*ke.value*I/un)),!0;if(!(ke.length||un>=me)){(ke.data!==g||ke.next)&&(0===Tt&&(un+=(Tt=Gn(b))*Tt),f>1&&0===st&&(un+=(st=Gn(b))*st),f>2&&0===sn&&(un+=(sn=Gn(b))*sn),un<re&&(un=Math.sqrt(re*un)));do{ke.data!==g&&(g.vx+=Tt*(Sn=J[ke.data.index]*I/un),f>1&&(g.vy+=st*Sn),f>2&&(g.vz+=sn*Sn))}while(ke=ke.next)}}return Te.initialize=function(ke,...et){d=ke,b=et.find(Ze=>"function"==typeof Ze)||Math.random,f=et.find(Ze=>[1,2,3].includes(Ze))||2,ge()},Te.strength=function(ke){return arguments.length?(z="function"==typeof ke?ke:fn(+ke),ge(),Te):z},Te.distanceMin=function(ke){return arguments.length?(re=ke*ke,Te):Math.sqrt(re)},Te.distanceMax=function(ke){return arguments.length?(me=ke*ke,Te):Math.sqrt(me)},Te.theta=function(ke){return arguments.length?(ue=ke*ke,Te):Math.sqrt(ue)},Te}function go(d,f,g){var b,I=1;function z(){var J,me,re=b.length,ue=0,Te=0,ge=0;for(J=0;J<re;++J)ue+=(me=b[J]).x||0,Te+=me.y||0,ge+=me.z||0;for(ue=(ue/re-d)*I,Te=(Te/re-f)*I,ge=(ge/re-g)*I,J=0;J<re;++J)me=b[J],ue&&(me.x-=ue),Te&&(me.y-=Te),ge&&(me.z-=ge)}return null==d&&(d=0),null==f&&(f=0),null==g&&(g=0),z.initialize=function(J){b=J},z.x=function(J){return arguments.length?(d=+J,z):d},z.y=function(J){return arguments.length?(f=+J,z):f},z.z=function(J){return arguments.length?(g=+J,z):g},z.strength=function(J){return arguments.length?(I=+J,z):I},z}Xi.copy=function(){var g,b,d=new _a(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),f=this._root;if(!f)return d;if(!f.length)return d._root=Es(f),d;for(g=[{source:f,target:d._root=new Array(8)}];f=g.pop();)for(var I=0;I<8;++I)(b=f.source[I])&&(b.length?g.push({source:b,target:f.target[I]=new Array(8)}):f.target[I]=Es(b));return d},Xi.add=function(d){var f=+this._x.call(null,d),g=+this._y.call(null,d),b=+this._z.call(null,d);return Jn(this.cover(f,g,b),f,g,b,d)},Xi.addAll=function(d){var f,g,I,z,J,b=d.length,re=new Array(b),me=new Array(b),ue=new Array(b),Te=1/0,ge=1/0,De=1/0,Ge=-1/0,ke=-1/0,et=-1/0;for(g=0;g<b;++g)isNaN(I=+this._x.call(null,f=d[g]))||isNaN(z=+this._y.call(null,f))||isNaN(J=+this._z.call(null,f))||(re[g]=I,me[g]=z,ue[g]=J,I<Te&&(Te=I),I>Ge&&(Ge=I),z<ge&&(ge=z),z>ke&&(ke=z),J<De&&(De=J),J>et&&(et=J));if(Te>Ge||ge>ke||De>et)return this;for(this.cover(Te,ge,De).cover(Ge,ke,et),g=0;g<b;++g)Jn(this,re[g],me[g],ue[g],d[g]);return this},Xi.cover=function(d,f,g){if(isNaN(d=+d)||isNaN(f=+f)||isNaN(g=+g))return this;var b=this._x0,I=this._y0,z=this._z0,J=this._x1,re=this._y1,me=this._z1;if(isNaN(b))J=(b=Math.floor(d))+1,re=(I=Math.floor(f))+1,me=(z=Math.floor(g))+1;else{for(var ge,De,ue=J-b||1,Te=this._root;b>d||d>=J||I>f||f>=re||z>g||g>=me;)switch(De=(g<z)<<2|(f<I)<<1|d<b,ge=new Array(8),ge[De]=Te,Te=ge,ue*=2,De){case 0:J=b+ue,re=I+ue,me=z+ue;break;case 1:b=J-ue,re=I+ue,me=z+ue;break;case 2:J=b+ue,I=re-ue,me=z+ue;break;case 3:b=J-ue,I=re-ue,me=z+ue;break;case 4:J=b+ue,re=I+ue,z=me-ue;break;case 5:b=J-ue,re=I+ue,z=me-ue;break;case 6:J=b+ue,I=re-ue,z=me-ue;break;case 7:b=J-ue,I=re-ue,z=me-ue}this._root&&this._root.length&&(this._root=Te)}return this._x0=b,this._y0=I,this._z0=z,this._x1=J,this._y1=re,this._z1=me,this},Xi.data=function(){var d=[];return this.visit(function(f){if(!f.length)do{d.push(f.data)}while(f=f.next)}),d},Xi.extent=function(d){return arguments.length?this.cover(+d[0][0],+d[0][1],+d[0][2]).cover(+d[1][0],+d[1][1],+d[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},Xi.find=function(d,f,g,b){var I,me,ue,Te,ge,De,Ge,wt,Tt,z=this._x0,J=this._y0,re=this._z0,ke=this._x1,et=this._y1,Ze=this._z1,Ie=[],It=this._root;for(It&&Ie.push(new sr(It,z,J,re,ke,et,Ze)),null==b?b=1/0:(z=d-b,J=f-b,re=g-b,ke=d+b,et=f+b,Ze=g+b,b*=b);wt=Ie.pop();)if(!(!(It=wt.node)||(me=wt.x0)>ke||(ue=wt.y0)>et||(Te=wt.z0)>Ze||(ge=wt.x1)<z||(De=wt.y1)<J||(Ge=wt.z1)<re))if(It.length){var st=(me+ge)/2,sn=(ue+De)/2,Sn=(Te+Ge)/2;Ie.push(new sr(It[7],st,sn,Sn,ge,De,Ge),new sr(It[6],me,sn,Sn,st,De,Ge),new sr(It[5],st,ue,Sn,ge,sn,Ge),new sr(It[4],me,ue,Sn,st,sn,Ge),new sr(It[3],st,sn,Te,ge,De,Sn),new sr(It[2],me,sn,Te,st,De,Sn),new sr(It[1],st,ue,Te,ge,sn,Sn),new sr(It[0],me,ue,Te,st,sn,Sn)),(Tt=(g>=Sn)<<2|(f>=sn)<<1|d>=st)&&(wt=Ie[Ie.length-1],Ie[Ie.length-1]=Ie[Ie.length-1-Tt],Ie[Ie.length-1-Tt]=wt)}else{var un=d-+this._x.call(null,It.data),Ur=f-+this._y.call(null,It.data),mi=g-+this._z.call(null,It.data),ui=un*un+Ur*Ur+mi*mi;if(ui<b){var gi=Math.sqrt(b=ui);z=d-gi,J=f-gi,re=g-gi,ke=d+gi,et=f+gi,Ze=g+gi,I=It.data}}return I},Xi.remove=function(d){if(isNaN(De=+this._x.call(null,d))||isNaN(Ge=+this._y.call(null,d))||isNaN(ke=+this._z.call(null,d)))return this;var f,b,I,z,De,Ge,ke,et,Ze,Ie,It,wt,Tt,st,sn,g=this._root,J=this._x0,re=this._y0,me=this._z0,ue=this._x1,Te=this._y1,ge=this._z1;if(!g)return this;if(g.length)for(;;){if((It=De>=(et=(J+ue)/2))?J=et:ue=et,(wt=Ge>=(Ze=(re+Te)/2))?re=Ze:Te=Ze,(Tt=ke>=(Ie=(me+ge)/2))?me=Ie:ge=Ie,f=g,!(g=g[st=Tt<<2|wt<<1|It]))return this;if(!g.length)break;(f[st+1&7]||f[st+2&7]||f[st+3&7]||f[st+4&7]||f[st+5&7]||f[st+6&7]||f[st+7&7])&&(b=f,sn=st)}for(;g.data!==d;)if(I=g,!(g=g.next))return this;return(z=g.next)&&delete g.next,I?(z?I.next=z:delete I.next,this):f?(z?f[st]=z:delete f[st],(g=f[0]||f[1]||f[2]||f[3]||f[4]||f[5]||f[6]||f[7])&&g===(f[7]||f[6]||f[5]||f[4]||f[3]||f[2]||f[1]||f[0])&&!g.length&&(b?b[sn]=g:this._root=g),this):(this._root=z,this)},Xi.removeAll=function(d){for(var f=0,g=d.length;f<g;++f)this.remove(d[f]);return this},Xi.root=function(){return this._root},Xi.size=function(){var d=0;return this.visit(function(f){if(!f.length)do{++d}while(f=f.next)}),d},Xi.visit=function(d){var g,I,z,J,re,me,ue,Te,f=[],b=this._root;for(b&&f.push(new sr(b,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));g=f.pop();)if(!d(b=g.node,z=g.x0,J=g.y0,re=g.z0,me=g.x1,ue=g.y1,Te=g.z1)&&b.length){var ge=(z+me)/2,De=(J+ue)/2,Ge=(re+Te)/2;(I=b[7])&&f.push(new sr(I,ge,De,Ge,me,ue,Te)),(I=b[6])&&f.push(new sr(I,z,De,Ge,ge,ue,Te)),(I=b[5])&&f.push(new sr(I,ge,J,Ge,me,De,Te)),(I=b[4])&&f.push(new sr(I,z,J,Ge,ge,De,Te)),(I=b[3])&&f.push(new sr(I,ge,De,re,me,ue,Ge)),(I=b[2])&&f.push(new sr(I,z,De,re,ge,ue,Ge)),(I=b[1])&&f.push(new sr(I,ge,J,re,me,De,Ge)),(I=b[0])&&f.push(new sr(I,z,J,re,ge,De,Ge))}return this},Xi.visitAfter=function(d){var b,f=[],g=[];for(this._root&&f.push(new sr(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));b=f.pop();){var I=b.node;if(I.length){var z,J=b.x0,re=b.y0,me=b.z0,ue=b.x1,Te=b.y1,ge=b.z1,De=(J+ue)/2,Ge=(re+Te)/2,ke=(me+ge)/2;(z=I[0])&&f.push(new sr(z,J,re,me,De,Ge,ke)),(z=I[1])&&f.push(new sr(z,De,re,me,ue,Ge,ke)),(z=I[2])&&f.push(new sr(z,J,Ge,me,De,Te,ke)),(z=I[3])&&f.push(new sr(z,De,Ge,me,ue,Te,ke)),(z=I[4])&&f.push(new sr(z,J,re,ke,De,Ge,ge)),(z=I[5])&&f.push(new sr(z,De,re,ke,ue,Ge,ge)),(z=I[6])&&f.push(new sr(z,J,Ge,ke,De,Te,ge)),(z=I[7])&&f.push(new sr(z,De,Ge,ke,ue,Te,ge))}g.push(b)}for(;b=g.pop();)d(b.node,b.x0,b.y0,b.z0,b.x1,b.y1,b.z1);return this},Xi.x=function(d){return arguments.length?(this._x=d,this):this._x},Xi.y=function(d){return arguments.length?(this._y=d,this):this._y},Xi.z=function(d){return arguments.length?(this._z=d,this):this._z};var il=ae(5401),Ua=ae.n(il),us=ae(5038),Ys=ae.n(us),Pr=ae(4553),Ms=ae.n(Pr);function Pi(d,f){return function(d){if(Array.isArray(d))return d}(d)||function(d,f){var g=d&&("undefined"!=typeof Symbol&&d[Symbol.iterator]||d["@@iterator"]);if(null!=g){var J,re,b=[],I=!0,z=!1;try{for(g=g.call(d);!(I=(J=g.next()).done)&&(b.push(J.value),!f||b.length!==f);I=!0);}catch(me){z=!0,re=me}finally{try{!I&&null!=g.return&&g.return()}finally{if(z)throw re}}return b}}(d,f)||function(d,f){if(d){if("string"==typeof d)return Xe(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);if("Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g)return Array.from(d);if("Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return Xe(d,f)}}(d,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(d,f){(null==f||f>d.length)&&(f=d.length);for(var g=0,b=new Array(f);g<f;g++)b[g]=d[g];return b}var ve=function d(f,g){var b=g.default,I=void 0===b?null:b,z=g.triggerUpdate,J=void 0===z||z,re=g.onChange,me=void 0===re?function(ue,Te){}:re;(function(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")})(this,d),this.name=f,this.defaultVal=I,this.triggerUpdate=J,this.onChange=me};const xt=function(d){var f=d.stateInit,g=void 0===f?function(){return{}}:f,b=d.props,I=void 0===b?{}:b,z=d.methods,J=void 0===z?{}:z,re=d.aliases,me=void 0===re?{}:re,ue=d.init,Te=void 0===ue?function(){}:ue,ge=d.update,De=void 0===ge?function(){}:ge,Ge=Object.keys(I).map(function(ke){return new ve(ke,I[ke])});return function(){var ke=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},et=Object.assign({},g instanceof Function?g(ke):g,{initialised:!1}),Ze={};function Ie(Tt){return It(Tt,ke),wt(),Ie}var It=function(st,sn){Te.call(Ie,st,et,sn),et.initialised=!0},wt=Ms()(function(){!et.initialised||(De.call(Ie,et,Ze),Ze={})},1);return Ge.forEach(function(Tt){var sn,Sn,un,Ur,mi,ui,gi,As;Ie[Tt.name]=(Sn=(sn=Tt).name,Ur=void 0!==(un=sn.triggerUpdate)&&un,ui=void 0===(mi=sn.onChange)?function(Oa,Ko){}:mi,As=void 0===(gi=sn.defaultVal)?null:gi,function(Oa){var Ko=et[Sn];if(!arguments.length)return Ko;var zl=void 0===Oa?As:Oa;return et[Sn]=zl,ui.call(Ie,zl,et,Ko),!Ze.hasOwnProperty(Sn)&&(Ze[Sn]=Ko),Ur&&wt(),Ie})}),Object.keys(J).forEach(function(Tt){Ie[Tt]=function(){for(var st,sn=arguments.length,Sn=new Array(sn),un=0;un<sn;un++)Sn[un]=arguments[un];return(st=J[Tt]).call.apply(st,[Ie,et].concat(Sn))}}),Object.entries(me).forEach(function(Tt){var st=Pi(Tt,2);return Ie[st[0]]=Ie[st[1]]}),Ie.resetProps=function(){return Ge.forEach(function(Tt){Ie[Tt.name](Tt.defaultVal)}),Ie},Ie.resetProps(),et._rerender=wt,Ie}},bn=function(d){return d instanceof Function?d:"string"==typeof d?function(f){return f[d]}:function(f){return d}};function Bn(d,f){let g;if(void 0===f)for(const b of d)null!=b&&(g>b||void 0===g&&b>=b)&&(g=b);else{let b=-1;for(let I of d)null!=(I=f(I,++b,d))&&(g>I||void 0===g&&I>=I)&&(g=I)}return g}function os(d,f){let g;if(void 0===f)for(const b of d)null!=b&&(g<b||void 0===g&&b>=b)&&(g=b);else{let b=-1;for(let I of d)null!=(I=f(I,++b,d))&&(g<I||void 0===g&&I>=I)&&(g=I)}return g}function Va(d,f){if(null==d)return{};var b,I,g=function(d,f){if(null==d)return{};var I,z,g={},b=Object.keys(d);for(z=0;z<b.length;z++)!(f.indexOf(I=b[z])>=0)&&(g[I]=d[I]);return g}(d,f);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(d);for(I=0;I<z.length;I++)!(f.indexOf(b=z[I])>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,b)||(g[b]=d[b]))}return g}function Go(d,f){return function(d){if(Array.isArray(d))return d}(d)||function(d,f){var g=d&&("undefined"!=typeof Symbol&&d[Symbol.iterator]||d["@@iterator"]);if(null!=g){var J,re,b=[],I=!0,z=!1;try{for(g=g.call(d);!(I=(J=g.next()).done)&&(b.push(J.value),!f||b.length!==f);I=!0);}catch(me){z=!0,re=me}finally{try{!I&&null!=g.return&&g.return()}finally{if(z)throw re}}return b}}(d,f)||Ll(d,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ss(d){return function(d){if(Array.isArray(d))return Xl(d)}(d)||function(d){if("undefined"!=typeof Symbol&&null!=d[Symbol.iterator]||null!=d["@@iterator"])return Array.from(d)}(d)||Ll(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ll(d,f){if(d){if("string"==typeof d)return Xl(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);if("Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g)return Array.from(d);if("Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return Xl(d,f)}}function Xl(d,f){(null==f||f>d.length)&&(f=d.length);for(var g=0,b=new Array(f);g<f;g++)b[g]=d[g];return b}function Xs(d){var f=function(d,f){if("object"!=typeof d||null===d)return d;var g=d[Symbol.toPrimitive];if(void 0!==g){var b=g.call(d,f);if("object"!=typeof b)return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(d)}(d,"string");return"symbol"==typeof f?f:String(f)}const Fi=function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],g=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],b=arguments.length>3&&void 0!==arguments[3]&&arguments[3],I=(f instanceof Array?f.length?f:[void 0]:[f]).map(function(re){return{keyAccessor:re,isProp:!(re instanceof Function)}}),z=d.reduce(function(re,me){var ue=re,Te=me;return I.forEach(function(ge,De){var et,Ge=ge.keyAccessor;if(ge.isProp){var Ie=Te[Ge],It=Va(Te,[Ge].map(Xs));et=Ie,Te=It}else et=Ge(Te,De);De+1<I.length?(ue.hasOwnProperty(et)||(ue[et]={}),ue=ue[et]):g?(ue.hasOwnProperty(et)||(ue[et]=[]),ue[et].push(Te)):ue[et]=Te}),re},{});g instanceof Function&&function re(me){var ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ue===I.length?Object.keys(me).forEach(function(Te){return me[Te]=g(me[Te])}):Object.values(me).forEach(function(Te){return re(Te,ue+1)})}(z);var J=z;return b&&(J=[],function re(me){var ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];ue.length===I.length?J.push({keys:ue,vals:me}):Object.entries(me).forEach(function(Te){var ge=Go(Te,2),De=ge[0];return re(ge[1],[].concat(Ss(ue),[De]))})}(z),f instanceof Array&&0===f.length&&1===J.length&&(J[0].keys=[])),J};function ol(d,f){var g=Object.keys(d);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(d);f&&(b=b.filter(function(I){return Object.getOwnPropertyDescriptor(d,I).enumerable})),g.push.apply(g,b)}return g}function Os(d,f,g){return f in d?Object.defineProperty(d,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[f]=g,d}function Jo(d,f){return function(d){if(Array.isArray(d))return d}(d)||function(d,f){var g=d&&("undefined"!=typeof Symbol&&d[Symbol.iterator]||d["@@iterator"]);if(null!=g){var J,re,b=[],I=!0,z=!1;try{for(g=g.call(d);!(I=(J=g.next()).done)&&(b.push(J.value),!f||b.length!==f);I=!0);}catch(me){z=!0,re=me}finally{try{!I&&null!=g.return&&g.return()}finally{if(z)throw re}}return b}}(d,f)||jo(d,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zs(d){return function(d){if(Array.isArray(d))return Oo(d)}(d)||function(d){if("undefined"!=typeof Symbol&&null!=d[Symbol.iterator]||null!=d["@@iterator"])return Array.from(d)}(d)||jo(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jo(d,f){if(d){if("string"==typeof d)return Oo(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);if("Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g)return Array.from(d);if("Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return Oo(d,f)}}function Oo(d,f){(null==f||f>d.length)&&(f=d.length);for(var g=0,b=new Array(f);g<f;g++)b[g]=d[g];return b}const Ea=function(d,f,g,b,I){var z=I.createObj,J=void 0===z?function(un){return{}}:z,re=I.updateObj,me=void 0===re?function(un,Ur){}:re,ue=I.exitObj,Te=void 0===ue?function(un){}:ue,ge=I.objBindAttr,De=void 0===ge?"__obj":ge,Ge=I.dataBindAttr,ke=void 0===Ge?"__data":Ge,et=function(d,f){if(null==d)return{};var b,I,g=function(d,f){if(null==d)return{};var I,z,g={},b=Object.keys(d);for(z=0;z<b.length;z++)!(f.indexOf(I=b[z])>=0)&&(g[I]=d[I]);return g}(d,f);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(d);for(I=0;I<z.length;I++)!(f.indexOf(b=z[I])>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,b)||(g[b]=d[b]))}return g}(I,["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"]),Ze=function(d,f,g){var b=g.objBindAttr,I=void 0===b?"__obj":b,z=g.dataBindAttr,J=void 0===z?"__data":z,re=g.idAccessor,me=g.purge,ue=void 0!==me&&me,Te=function(Ze){return Ze.hasOwnProperty(J)},ge=f.filter(function(et){return!Te(et)}),De=f.filter(Te).map(function(et){return et[J]}),ke=ue?{enter:d,exit:De,update:[]}:function(d,f,g){var b={enter:[],update:[],exit:[]};if(g){var J=Fi(d,g,!1),re=Fi(f,g,!1),me=Object.assign({},J,re);Object.entries(me).forEach(function(ue){var Te=Jo(ue,2),ge=Te[0],De=Te[1],Ge=J.hasOwnProperty(ge)?re.hasOwnProperty(ge)?"update":"exit":"enter";b[Ge].push("update"===Ge?[J[ge],re[ge]]:De)})}else{var I=new Set(d),z=new Set(f);new Set([].concat(zs(I),zs(z))).forEach(function(ue){var Te=I.has(ue)?z.has(ue)?"update":"exit":"enter";b[Te].push("update"===Te?[ue,ue]:ue)})}return b}(De,d,re);return ke.update=ke.update.map(function(et){var Ze=Jo(et,2),Ie=Ze[0],It=Ze[1];return Ie!==It&&(It[I]=Ie[I],It[I][J]=It),It}),ke.exit=ke.exit.concat(ge.map(function(et){return Os({},I,et)})),ke}(d,f,function(d){for(var f=1;f<arguments.length;f++){var g=null!=arguments[f]?arguments[f]:{};f%2?ol(Object(g),!0).forEach(function(b){Os(d,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):ol(Object(g)).forEach(function(b){Object.defineProperty(d,b,Object.getOwnPropertyDescriptor(g,b))})}return d}({objBindAttr:De,dataBindAttr:ke},et)),Ie=Ze.enter,It=Ze.update;Ze.exit.forEach(function(un){var Ur=un[De];delete un[De],Te(Ur),b(Ur)});var Ur,Tt=(Ur=[],Ie.forEach(function(mi){var ui=J(mi);ui&&(ui[ke]=mi,mi[De]=ui,Ur.push(ui))}),Ur);[].concat(zs(Ie),zs(It)).forEach(function(Ur){var mi=Ur[De];mi&&(mi[ke]=Ur,me(mi,Ur))}),Tt.forEach(g)};var fa=ae(965);const Kl=(0,ae(2357).Z)("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var Qc=ae(4902),Ns=ae.n(Qc);function Ga(d,f){var g=Object.keys(d);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(d);f&&(b=b.filter(function(I){return Object.getOwnPropertyDescriptor(d,I).enumerable})),g.push.apply(g,b)}return g}function ja(d){for(var f=1;f<arguments.length;f++){var g=null!=arguments[f]?arguments[f]:{};f%2?Ga(Object(g),!0).forEach(function(b){Sa(d,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):Ga(Object(g)).forEach(function(b){Object.defineProperty(d,b,Object.getOwnPropertyDescriptor(g,b))})}return d}function na(d){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function Ma(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function Sa(d,f,g){return f in d?Object.defineProperty(d,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[f]=g,d}function Nl(d,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),f&&ra(d,f)}function vo(d){return(vo=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(d)}function ra(d,f){return(ra=Object.setPrototypeOf||function(b,I){return b.__proto__=I,b})(d,f)}function Fs(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}function oo(d,f,g){return(oo=Fs()?Reflect.construct:function(I,z,J){var re=[null];re.push.apply(re,z);var ue=new(Function.bind.apply(I,re));return J&&ra(ue,J.prototype),ue}).apply(null,arguments)}function Ql(d,f){if(null==d)return{};var b,I,g=function(d,f){if(null==d)return{};var I,z,g={},b=Object.keys(d);for(z=0;z<b.length;z++)!(f.indexOf(I=b[z])>=0)&&(g[I]=d[I]);return g}(d,f);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(d);for(I=0;I<z.length;I++)!(f.indexOf(b=z[I])>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,b)||(g[b]=d[b]))}return g}function da(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function Zl(d,f){return!f||"object"!=typeof f&&"function"!=typeof f?da(d):f}function Jl(d){var f=Fs();return function(){var I,b=vo(d);if(f){var z=vo(this).constructor;I=Reflect.construct(b,arguments,z)}else I=b.apply(this,arguments);return Zl(this,I)}}function ys(d,f){return function(d){if(Array.isArray(d))return d}(d)||function(d,f){var g=null==d?null:"undefined"!=typeof Symbol&&d[Symbol.iterator]||d["@@iterator"];if(null!=g){var J,re,b=[],I=!0,z=!1;try{for(g=g.call(d);!(I=(J=g.next()).done)&&(b.push(J.value),!f||b.length!==f);I=!0);}catch(me){z=!0,re=me}finally{try{!I&&null!=g.return&&g.return()}finally{if(z)throw re}}return b}}(d,f)||Mt(d,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(d){return function(d){if(Array.isArray(d))return zt(d)}(d)||function(d){if("undefined"!=typeof Symbol&&null!=d[Symbol.iterator]||null!=d["@@iterator"])return Array.from(d)}(d)||Mt(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(d,f){if(d){if("string"==typeof d)return zt(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);if("Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g)return Array.from(d);if("Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return zt(d,f)}}function zt(d,f){(null==f||f>d.length)&&(f=d.length);for(var g=0,b=new Array(f);g<f;g++)b[g]=d[g];return b}var Qi=function d(f){f instanceof Array?f.forEach(d):(f.map&&f.map.dispose(),f.dispose())},zi=function d(f){f.geometry&&f.geometry.dispose(),f.material&&Qi(f.material),f.texture&&f.texture.dispose(),f.children&&f.children.forEach(d)},Gr=function(f){for(;f.children.length;){var g=f.children[0];f.remove(g),zi(g)}},kr=["objFilter"];function Yr(d,f){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},b=g.objFilter,I=void 0===b?function(){return!0}:b,z=Ql(g,kr);return Ea(d,f.children.filter(I),function(J){return f.add(J)},function(J){f.remove(J),Gr(J)},ja({objBindAttr:"__threeObj"},z))}var vs=function(f){return isNaN(f)?parseInt(Ns()(f).toHex(),16):f},No=function(f){return isNaN(f)?Ns()(f).getAlpha():1},hs=(0,fa.Z)(Kl);function Wo(d,f,g){!f||"string"!=typeof g||d.filter(function(b){return!b[g]}).forEach(function(b){b[g]=hs(f(b))})}var ar=window.THREE?window.THREE:{Group:G.ZAu,Mesh:G.Kj0,MeshLambertMaterial:G.YBo,Color:G.Ilk,BufferGeometry:G.u9r,BufferAttribute:G.TlE,Matrix4:G.yGw,Vector3:G.Pa4,SphereBufferGeometry:G.Aip,CylinderBufferGeometry:G.m_w,TubeBufferGeometry:G.Lcc,ConeBufferGeometry:G._3,Line:G.x12,LineBasicMaterial:G.nls,QuadraticBezierCurve3:G.mXe,CubicBezierCurve3:G.yj7,Box3:G.ZzF},Hs={graph:Ua(),forcelayout:Ys()},wo=(new ar.BufferGeometry).setAttribute?"setAttribute":"addAttribute",_s=(new ar.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix";const ks=function(d){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,g=arguments.length>2&&void 0!==arguments[2]&&arguments[2],b=function(I){Nl(J,I);var z=Jl(J);function J(){var re;Ma(this,J);for(var me=arguments.length,ue=new Array(me),Te=0;Te<me;Te++)ue[Te]=arguments[Te];return(re=z.call.apply(z,[this].concat(ue))).__kapsuleInstance=d().apply(void 0,[].concat(H(g?[da(re)]:[]),ue)),re}return J}(f);return Object.keys(d()).forEach(function(I){return b.prototype[I]=function(){var z,J=(z=this.__kapsuleInstance)[I].apply(z,arguments);return J===this.__kapsuleInstance?this:J}}),b}(xt({props:{jsonUrl:{onChange:function(f,g){var b=this;f&&!g.fetchingJson&&(g.fetchingJson=!0,g.onLoading(),fetch(f).then(function(I){return I.json()}).then(function(I){g.fetchingJson=!1,g.onFinishLoading(I),b.graphData(I)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(f,g){g.engineRunning=!1}},numDimensions:{default:3,onChange:function(f,g){var b=g.d3ForceLayout.force("charge");function I(z,J){z.forEach(function(re){delete re[J],delete re["v".concat(J)]})}b&&b.strength(f>2?-60:-30),f<3&&I(g.graphData.nodes,"z"),f<2&&I(g.graphData.nodes,"y")}},dagMode:{onChange:function(f,g){!f&&"d3"===g.forceEngine&&(g.graphData.nodes||[]).forEach(function(b){return b.fx=b.fy=b.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(f){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(f,g){g.d3ForceLayout.alphaDecay(f)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(f,g){g.d3ForceLayout.alphaTarget(f)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(f,g){g.d3ForceLayout.velocityDecay(f)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(f){return f._flushObjects=!0,f._rerender(),this},d3Force:function(f,g,b){return void 0===b?f.d3ForceLayout.force(g):(f.d3ForceLayout.force(g,b),this)},d3ReheatSimulation:function(f){return f.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(f){return f.cntTicks=0,f.startTickTime=new Date,f.engineRunning=!0,this},tickFrame:function(f){var J,re,me,g="ngraph"!==f.forceEngine;return f.engineRunning&&function(){++f.cntTicks>f.cooldownTicks||new Date-f.startTickTime>f.cooldownTime||g&&f.d3AlphaMin>0&&f.d3ForceLayout.alpha()<f.d3AlphaMin?(f.engineRunning=!1,f.onEngineStop()):(f.layout[g?"tick":"step"](),f.onEngineTick()),f.graphData.nodes.forEach(function(ge){var De=ge.__threeObj;if(De){var Ge=g?ge:f.layout.getNodePosition(ge[f.nodeId]);De.position.x=Ge.x,De.position.y=Ge.y||0,De.position.z=Ge.z||0}});var J=bn(f.linkWidth),re=bn(f.linkCurvature),me=bn(f.linkCurveRotation),ue=bn(f.linkThreeObjectExtend);f.graphData.links.forEach(function(ge){var De=ge.__lineObj;if(De){var Ge=g?ge:f.layout.getLinkPosition(f.layout.graph.getLink(ge.source,ge.target).id),ke=Ge[g?"source":"from"],et=Ge[g?"target":"to"];if(ke&&et&&ke.hasOwnProperty("x")&&et.hasOwnProperty("x")){!function(ge){var De=g?ge:f.layout.getLinkPosition(f.layout.graph.getLink(ge.source,ge.target).id),Ge=De[g?"source":"from"],ke=De[g?"target":"to"];if(Ge&&ke&&Ge.hasOwnProperty("x")&&ke.hasOwnProperty("x")){var et=re(ge);if(et){var wt,Ze=new ar.Vector3(Ge.x,Ge.y||0,Ge.z||0),Ie=new ar.Vector3(ke.x,ke.y||0,ke.z||0),It=Ze.distanceTo(Ie),Tt=me(ge);if(It>0){var st=ke.x-Ge.x,sn=ke.y-Ge.y||0,Sn=(new ar.Vector3).subVectors(Ie,Ze),un=Sn.clone().multiplyScalar(et).cross(0!==st||0!==sn?new ar.Vector3(0,0,1):new ar.Vector3(0,1,0)).applyAxisAngle(Sn.normalize(),Tt).add((new ar.Vector3).addVectors(Ze,Ie).divideScalar(2));wt=new ar.QuadraticBezierCurve3(Ze,un,Ie)}else{var Ur=70*et,mi=-Tt,ui=mi+Math.PI/2;wt=new ar.CubicBezierCurve3(Ze,new ar.Vector3(Ur*Math.cos(ui),Ur*Math.sin(ui),0).add(Ze),new ar.Vector3(Ur*Math.cos(mi),Ur*Math.sin(mi),0).add(Ze),Ie)}ge.__curve=wt}else ge.__curve=null}}(ge);var Ze=ue(ge);if(!f.linkPositionUpdate||!f.linkPositionUpdate(Ze?De.children[1]:De,{start:{x:ke.x,y:ke.y,z:ke.z},end:{x:et.x,y:et.y,z:et.z}},ge)||Ze){var It=ge.__curve,wt=De.children.length?De.children[0]:De;if("Line"===wt.type){if(It)wt.geometry.setFromPoints(It.getPoints(30));else{var Tt=wt.geometry.getAttribute("position");(!Tt||!Tt.array||6!==Tt.array.length)&&wt.geometry[wo]("position",Tt=new ar.BufferAttribute(new Float32Array(6),3)),Tt.array[0]=ke.x,Tt.array[1]=ke.y||0,Tt.array[2]=ke.z||0,Tt.array[3]=et.x,Tt.array[4]=et.y||0,Tt.array[5]=et.z||0,Tt.needsUpdate=!0}wt.geometry.computeBoundingSphere()}else if("Mesh"===wt.type)if(It){wt.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(wt.position.set(0,0,0),wt.rotation.set(0,0,0),wt.scale.set(1,1,1));var ui=Math.ceil(10*J(ge))/10,As=new ar.TubeBufferGeometry(It,30,ui/2,f.linkResolution,!1);wt.geometry.dispose(),wt.geometry=As}else{if(!wt.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var sn=Math.ceil(10*J(ge))/10/2,Sn=new ar.CylinderBufferGeometry(sn,sn,1,f.linkResolution,1,!1);Sn[_s]((new ar.Matrix4).makeTranslation(0,.5,0)),Sn[_s]((new ar.Matrix4).makeRotationX(Math.PI/2)),wt.geometry.dispose(),wt.geometry=Sn}var un=new ar.Vector3(ke.x,ke.y||0,ke.z||0),Ur=new ar.Vector3(et.x,et.y||0,et.z||0),mi=un.distanceTo(Ur);wt.position.x=un.x,wt.position.y=un.y,wt.position.z=un.z,wt.scale.z=mi,wt.parent.localToWorld(Ur),wt.lookAt(Ur)}}}}})}(),J=bn(f.linkDirectionalArrowRelPos),re=bn(f.linkDirectionalArrowLength),me=bn(f.nodeVal),f.graphData.links.forEach(function(ue){var Te=ue.__arrowObj;if(Te){var ge=g?ue:f.layout.getLinkPosition(f.layout.graph.getLink(ue.source,ue.target).id),De=ge[g?"source":"from"],Ge=ge[g?"target":"to"];if(De&&Ge&&De.hasOwnProperty("x")&&Ge.hasOwnProperty("x")){var ke=Math.sqrt(Math.max(0,me(De)||1))*f.nodeRelSize,et=Math.sqrt(Math.max(0,me(Ge)||1))*f.nodeRelSize,Ze=re(ue),Ie=J(ue),It=ue.__curve?function(un){return ue.__curve.getPoint(un)}:function(un){var Ur=function(ui,gi,As,Oa){return gi[ui]+(As[ui]-gi[ui])*Oa||0};return{x:Ur("x",De,Ge,un),y:Ur("y",De,Ge,un),z:Ur("z",De,Ge,un)}},wt=ue.__curve?ue.__curve.getLength():Math.sqrt(["x","y","z"].map(function(un){return Math.pow((Ge[un]||0)-(De[un]||0),2)}).reduce(function(un,Ur){return un+Ur},0)),Tt=ke+Ze+(wt-ke-et-Ze)*Ie,st=It(Tt/wt),sn=It((Tt-Ze)/wt);["x","y","z"].forEach(function(un){return Te.position[un]=sn[un]});var Sn=oo(ar.Vector3,H(["x","y","z"].map(function(un){return st[un]})));Te.parent.localToWorld(Sn),Te.lookAt(Sn)}}}),function(){var J=bn(f.linkDirectionalParticleSpeed);f.graphData.links.forEach(function(re){var me=re.__photonsObj&&re.__photonsObj.children,ue=re.__singleHopPhotonsObj&&re.__singleHopPhotonsObj.children;if(ue&&ue.length||me&&me.length){var Te=g?re:f.layout.getLinkPosition(f.layout.graph.getLink(re.source,re.target).id),ge=Te[g?"source":"from"],De=Te[g?"target":"to"];if(ge&&De&&ge.hasOwnProperty("x")&&De.hasOwnProperty("x")){var Ge=J(re),ke=re.__curve?function(Ze){return re.__curve.getPoint(Ze)}:function(Ze){var Ie=function(wt,Tt,st,sn){return Tt[wt]+(st[wt]-Tt[wt])*sn||0};return{x:Ie("x",ge,De,Ze),y:Ie("y",ge,De,Ze),z:Ie("z",ge,De,Ze)}};[].concat(H(me||[]),H(ue||[])).forEach(function(Ze,Ie){var It="singleHopPhotons"===Ze.parent.__linkThreeObjType;if(Ze.hasOwnProperty("__progressRatio")||(Ze.__progressRatio=It?0:Ie/me.length),Ze.__progressRatio+=Ge,Ze.__progressRatio>=1){if(It)return Ze.parent.remove(Ze),void Gr(Ze);Ze.__progressRatio=Ze.__progressRatio%1}var Tt=ke(Ze.__progressRatio);["x","y","z"].forEach(function(st){return Ze.position[st]=Tt[st]})})}}})}(),this},emitParticle:function(f,g){if(g){if(!g.__singleHopPhotonsObj){var b=new ar.Group;b.__linkThreeObjType="singleHopPhotons",g.__singleHopPhotonsObj=b,f.graphScene.add(b)}var I=bn(f.linkDirectionalParticleWidth),z=Math.ceil(10*I(g))/10/2,J=f.linkDirectionalParticleResolution,re=new ar.SphereBufferGeometry(z,J,J),me=bn(f.linkColor),Te=bn(f.linkDirectionalParticleColor)(g)||me(g)||"#f0f0f0",ge=new ar.Color(vs(Te)),Ge=new ar.MeshLambertMaterial({color:ge,transparent:!0,opacity:3*f.linkOpacity});g.__singleHopPhotonsObj.add(new ar.Mesh(re,Ge))}return this},getGraphBbox:function(f){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!f.initialised)return null;var b=function I(z){var J=[];if(z.geometry){z.geometry.computeBoundingBox();var re=new ar.Box3;re.copy(z.geometry.boundingBox).applyMatrix4(z.matrixWorld),J.push(re)}return J.concat.apply(J,H((z.children||[]).filter(function(me){return!me.hasOwnProperty("__graphObjType")||"node"===me.__graphObjType&&g(me.__data)}).map(I)))}(f.graphScene);return b.length?Object.assign.apply(Object,H(["x","y","z"].map(function(I){return Sa({},I,[Bn(b,function(z){return z.min[I]}),os(b,function(z){return z.max[I]})])}))):null}},stateInit:function(){return{d3ForceLayout:Mn().force("link",Tn()).force("charge",mo()).force("center",go()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(f,g){g.graphScene=f},update:function(f,g){var b=function(cr){return cr.some(function(ri){return g.hasOwnProperty(ri)})};if(f.engineRunning=!1,f.onUpdate(),null!==f.nodeAutoColorBy&&b(["nodeAutoColorBy","graphData","nodeColor"])&&Wo(f.graphData.nodes,bn(f.nodeAutoColorBy),f.nodeColor),null!==f.linkAutoColorBy&&b(["linkAutoColorBy","graphData","linkColor"])&&Wo(f.graphData.links,bn(f.linkAutoColorBy),f.linkColor),f._flushObjects||b(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var I=bn(f.nodeThreeObject),z=bn(f.nodeThreeObjectExtend),J=bn(f.nodeVal),re=bn(f.nodeColor),me=bn(f.nodeVisibility),ue={},Te={};Yr(f.graphData.nodes.filter(me),f.graphScene,{purge:f._flushObjects||b(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(cr){return"node"===cr.__graphObjType},createObj:function(cr){var En,ri=I(cr),Et=z(cr);return ri&&f.nodeThreeObject===ri&&(ri=ri.clone()),ri&&!Et?En=ri:((En=new ar.Mesh).__graphDefaultObj=!0,ri&&Et&&En.add(ri)),En.__graphObjType="node",En},updateObj:function(cr,ri){if(cr.__graphDefaultObj){var Et=J(ri)||1,En=Math.cbrt(Et)*f.nodeRelSize,Nn=f.nodeResolution;(!cr.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||cr.geometry.parameters.radius!==En||cr.geometry.parameters.widthSegments!==Nn)&&(ue.hasOwnProperty(Et)||(ue[Et]=new ar.SphereBufferGeometry(En,Nn,Nn)),cr.geometry.dispose(),cr.geometry=ue[Et]);var Qt=re(ri),ii=new ar.Color(vs(Qt||"#ffffaa")),ms=f.nodeOpacity*No(Qt);("MeshLambertMaterial"!==cr.material.type||!cr.material.color.equals(ii)||cr.material.opacity!==ms)&&(Te.hasOwnProperty(Qt)||(Te[Qt]=new ar.MeshLambertMaterial({color:ii,transparent:!0,opacity:ms})),cr.material.dispose(),cr.material=Te[Qt])}}})}if(f._flushObjects||b(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var ge=bn(f.linkThreeObject),De=bn(f.linkThreeObjectExtend),Ge=bn(f.linkMaterial),ke=bn(f.linkVisibility),et=bn(f.linkColor),Ze=bn(f.linkWidth),Ie={},It={},wt={},Tt=f.graphData.links.filter(ke);if(Yr(Tt,f.graphScene,{objBindAttr:"__lineObj",purge:f._flushObjects||b(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(cr){return"link"===cr.__graphObjType},createObj:function(cr){var En,ii,ri=ge(cr),Et=De(cr);if(ri&&f.linkThreeObject===ri&&(ri=ri.clone()),!ri||Et)if(Ze(cr))En=new ar.Mesh;else{var Qt=new ar.BufferGeometry;Qt[wo]("position",new ar.BufferAttribute(new Float32Array(6),3)),En=new ar.Line(Qt)}return ri?Et?((ii=new ar.Group).__graphDefaultObj=!0,ii.add(En),ii.add(ri)):ii=ri:(ii=En).__graphDefaultObj=!0,ii.renderOrder=10,ii.__graphObjType="link",ii},updateObj:function(cr,ri){if(cr.__graphDefaultObj){var Et=cr.children.length?cr.children[0]:cr,En=Math.ceil(10*Ze(ri))/10,Nn=!!En;if(Nn){var Qt=En/2,ii=f.linkResolution;if(!Et.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||Et.geometry.parameters.radiusTop!==Qt||Et.geometry.parameters.radialSegments!==ii){if(!Ie.hasOwnProperty(En)){var ms=new ar.CylinderBufferGeometry(Qt,Qt,1,ii,1,!1);ms[_s]((new ar.Matrix4).makeTranslation(0,.5,0)),ms[_s]((new ar.Matrix4).makeRotationX(Math.PI/2)),Ie[En]=ms}Et.geometry.dispose(),Et.geometry=Ie[En]}}var ia=Ge(ri);if(ia)Et.material=ia;else{var Qa=et(ri),Vc=new ar.Color(vs(Qa||"#f0f0f0")),Ml=f.linkOpacity*No(Qa),Sl=Nn?"MeshLambertMaterial":"LineBasicMaterial";if(Et.material.type!==Sl||!Et.material.color.equals(Vc)||Et.material.opacity!==Ml){var Co=Nn?It:wt;Co.hasOwnProperty(Qa)||(Co[Qa]=new ar[Sl]({color:Vc,transparent:Ml<1,opacity:Ml,depthWrite:Ml>=1})),Et.material.dispose(),Et.material=Co[Qa]}}}}}),f.linkDirectionalArrowLength||g.hasOwnProperty("linkDirectionalArrowLength")){var st=bn(f.linkDirectionalArrowLength),sn=bn(f.linkDirectionalArrowColor);Yr(Tt.filter(st),f.graphScene,{objBindAttr:"__arrowObj",objFilter:function(cr){return"arrow"===cr.__linkThreeObjType},createObj:function(){var cr=new ar.Mesh(void 0,new ar.MeshLambertMaterial({transparent:!0}));return cr.__linkThreeObjType="arrow",cr},updateObj:function(cr,ri){var Et=st(ri),En=f.linkDirectionalArrowResolution;if(!cr.geometry.type.match(/^Cone(Buffer)?Geometry$/)||cr.geometry.parameters.height!==Et||cr.geometry.parameters.radialSegments!==En){var Nn=new ar.ConeBufferGeometry(.25*Et,Et,En);Nn.translate(0,Et/2,0),Nn.rotateX(Math.PI/2),cr.geometry.dispose(),cr.geometry=Nn}cr.material.color=new ar.Color(sn(ri)||et(ri)||"#f0f0f0"),cr.material.opacity=3*f.linkOpacity}})}if(f.linkDirectionalParticles||g.hasOwnProperty("linkDirectionalParticles")){var Sn=bn(f.linkDirectionalParticles),un=bn(f.linkDirectionalParticleWidth),Ur=bn(f.linkDirectionalParticleColor),mi={},ui={};Yr(Tt.filter(Sn),f.graphScene,{objBindAttr:"__photonsObj",objFilter:function(cr){return"photons"===cr.__linkThreeObjType},createObj:function(){var cr=new ar.Group;return cr.__linkThreeObjType="photons",cr},updateObj:function(cr,ri){var ii,Et=Math.round(Math.abs(Sn(ri))),En=!!cr.children.length&&cr.children[0],Nn=Math.ceil(10*un(ri))/10/2,Qt=f.linkDirectionalParticleResolution;En&&En.geometry.parameters.radius===Nn&&En.geometry.parameters.widthSegments===Qt?ii=En.geometry:(ui.hasOwnProperty(Nn)||(ui[Nn]=new ar.SphereBufferGeometry(Nn,Qt,Qt)),ii=ui[Nn],En&&En.geometry.dispose());var Vc,ms=Ur(ri)||et(ri)||"#f0f0f0",ia=new ar.Color(vs(ms)),Qa=3*f.linkOpacity;En&&En.material.color.equals(ia)&&En.material.opacity===Qa?Vc=En.material:(mi.hasOwnProperty(ms)||(mi[ms]=new ar.MeshLambertMaterial({color:ia,transparent:!0,opacity:Qa})),Vc=mi[ms],En&&En.material.dispose()),Yr(H(new Array(Et)).map(function(Ml,Sl){return{idx:Sl}}),cr,{idAccessor:function(Sl){return Sl.idx},createObj:function(){return new ar.Mesh(ii,Vc)},updateObj:function(Sl){Sl.geometry=ii,Sl.material=Vc}})}})}}if(f._flushObjects=!1,b(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){f.engineRunning=!1,f.graphData.links.forEach(function(ni){ni.source=ni[f.linkSource],ni.target=ni[f.linkTarget]});var As,gi="ngraph"!==f.forceEngine;if(gi){(As=f.d3ForceLayout).stop().alpha(1).numDimensions(f.numDimensions).nodes(f.graphData.nodes);var Oa=f.d3ForceLayout.force("link");Oa&&Oa.id(function(ni){return ni[f.nodeId]}).links(f.graphData.links);var Ko=f.dagMode&&function(d,f){var b=d.links,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},z=I.nodeFilter,J=void 0===z?function(){return!0}:z,re=I.onLoopError,me=void 0===re?function(Ge){throw"Invalid DAG structure! Found cycle in node path: ".concat(Ge.join(" -> "),".")}:re,ue={};d.nodes.forEach(function(Ge){return ue[f(Ge)]={data:Ge,out:[],depth:-1,skip:!J(Ge)}}),b.forEach(function(Ge){var et=Ge.target,Ze=Tt(Ge.source),Ie=Tt(et);if(!ue.hasOwnProperty(Ze))throw"Missing source node with id: ".concat(Ze);if(!ue.hasOwnProperty(Ie))throw"Missing target node with id: ".concat(Ie);function Tt(st){return"object"===na(st)?f(st):st}ue[Ze].out.push(ue[Ie])});var Te=[];return De(Object.values(ue)),Object.assign.apply(Object,[{}].concat(H(Object.entries(ue).filter(function(Ge){return!ys(Ge,2)[1].skip}).map(function(Ge){var ke=ys(Ge,2);return Sa({},ke[0],ke[1].depth)}))));function De(Ge){for(var ke=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],et=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Ze=0,Ie=Ge.length;Ze<Ie;Ze++){var It=Ge[Ze];-1!==ke.indexOf(It)&&"continue"===function(){var Tt=[].concat(H(ke.slice(ke.indexOf(It))),[It]).map(function(st){return f(st.data)});return Te.some(function(st){return st.length===Tt.length&&st.every(function(sn,Sn){return sn===Tt[Sn]})})||(Te.push(Tt),me(Tt)),"continue"}()||et>It.depth&&(It.depth=et,De(It.out,[].concat(H(ke),[It]),et+(It.skip?0:1)))}}}(f.graphData,function(ni){return ni[f.nodeId]},{nodeFilter:f.dagNodeFilter,onLoopError:f.onDagError||void 0}),zl=Math.max.apply(Math,H(Object.values(Ko||[]))),Fu=f.dagLevelDistance||f.graphData.nodes.length/(zl||1)*2*(-1!==["radialin","radialout"].indexOf(f.dagMode)?.7:1);if(f.dagMode){var xc=function(cr,ri){return function(Et){return cr?(Ko[Et[f.nodeId]]-zl/2)*Fu*(ri?-1:1):void 0}},mh=xc(-1!==["lr","rl"].indexOf(f.dagMode),"rl"===f.dagMode),gh=xc(-1!==["td","bu"].indexOf(f.dagMode),"td"===f.dagMode),Uc=xc(-1!==["zin","zout"].indexOf(f.dagMode),"zout"===f.dagMode);f.graphData.nodes.filter(f.dagNodeFilter).forEach(function(ni){ni.fx=mh(ni),ni.fy=gh(ni),ni.fz=Uc(ni)})}f.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(f.dagMode)?function(d,f,g,b){var I,z,re,me,J=fn(.1);function ue(ge){for(var De=0,Ge=I.length;De<Ge;++De){var ke=I[De],et=ke.x-f||1e-6,Ze=(ke.y||0)-g||1e-6,Ie=(ke.z||0)-b||1e-6,It=Math.sqrt(et*et+Ze*Ze+Ie*Ie),wt=(me[De]-It)*re[De]*ge/It;ke.vx+=et*wt,z>1&&(ke.vy+=Ze*wt),z>2&&(ke.vz+=Ie*wt)}}function Te(){if(I){var ge,De=I.length;for(re=new Array(De),me=new Array(De),ge=0;ge<De;++ge)me[ge]=+d(I[ge],ge,I),re[ge]=isNaN(me[ge])?0:+J(I[ge],ge,I)}}return"function"!=typeof d&&(d=fn(+d)),null==f&&(f=0),null==g&&(g=0),null==b&&(b=0),ue.initialize=function(ge,...De){I=ge,z=De.find(Ge=>[1,2,3].includes(Ge))||2,Te()},ue.strength=function(ge){return arguments.length?(J="function"==typeof ge?ge:fn(+ge),Te(),ue):J},ue.radius=function(ge){return arguments.length?(d="function"==typeof ge?ge:fn(+ge),Te(),ue):d},ue.x=function(ge){return arguments.length?(f=+ge,ue):f},ue.y=function(ge){return arguments.length?(g=+ge,ue):g},ue.z=function(ge){return arguments.length?(b=+ge,ue):b},ue}(function(ni){var cr=Ko[ni[f.nodeId]]||-1;return("radialin"===f.dagMode?zl-cr:cr)*Fu}).strength(function(ni){return f.dagNodeFilter(ni)?1:0}):null)}else{var To=Hs.graph();f.graphData.nodes.forEach(function(ni){To.addNode(ni[f.nodeId])}),f.graphData.links.forEach(function(ni){To.addLink(ni.source,ni.target)}),(As=Hs.forcelayout(To,ja({dimensions:f.numDimensions},f.ngraphPhysics))).graph=To}for(var iu=0;iu<f.warmupTicks&&!(gi&&f.d3AlphaMin>0&&f.d3ForceLayout.alpha()<f.d3AlphaMin);iu++)As[gi?"tick":"step"]();f.layout=As,this.resetCountdown()}f.engineRunning=!0,f.onFinishUpdate()}}),(window.THREE?window.THREE:{Group:G.ZAu}).Group,!0),vl={type:"change"},ec={type:"start"},tc={type:"end"};class _l extends G.pBf{constructor(f,g){super(),void 0===g&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),g===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const b=this;this.object=f,this.domElement=g,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:G.RsA.ROTATE,MIDDLE:G.RsA.DOLLY,RIGHT:G.RsA.PAN},this.target=new G.Pa4;const z=1e-6,J=new G.Pa4;let re=1,me=-1,ue=-1,Te=0,ge=0,De=0;const Ge=new G.Pa4,ke=new G.FM8,et=new G.FM8,Ze=new G.Pa4,Ie=new G.FM8,It=new G.FM8,wt=new G.FM8,Tt=new G.FM8,st=[],sn={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const Et=b.domElement.getBoundingClientRect(),En=b.domElement.ownerDocument.documentElement;b.screen.left=Et.left+window.pageXOffset-En.clientLeft,b.screen.top=Et.top+window.pageYOffset-En.clientTop,b.screen.width=Et.width,b.screen.height=Et.height};const Sn=function(){const Et=new G.FM8;return function(Nn,Qt){return Et.set((Nn-b.screen.left)/b.screen.width,(Qt-b.screen.top)/b.screen.height),Et}}(),un=function(){const Et=new G.FM8;return function(Nn,Qt){return Et.set((Nn-.5*b.screen.width-b.screen.left)/(.5*b.screen.width),(b.screen.height+2*(b.screen.top-Qt))/b.screen.width),Et}}();function Ur(Et){!1!==b.enabled&&(0===st.length&&(b.domElement.setPointerCapture(Et.pointerId),b.domElement.addEventListener("pointermove",mi),b.domElement.addEventListener("pointerup",ui)),function(Et){st.push(Et)}(Et),"touch"===Et.pointerType?function(Et){switch(cr(Et),st.length){case 1:me=3,et.copy(un(st[0].pageX,st[0].pageY)),ke.copy(et);break;default:me=4;const En=st[0].pageX-st[1].pageX,Nn=st[0].pageY-st[1].pageY;ge=Te=Math.sqrt(En*En+Nn*Nn),wt.copy(Sn((st[0].pageX+st[1].pageX)/2,(st[0].pageY+st[1].pageY)/2)),Tt.copy(wt)}b.dispatchEvent(ec)}(Et):function(Et){if(-1===me)switch(Et.button){case b.mouseButtons.LEFT:me=0;break;case b.mouseButtons.MIDDLE:me=1;break;case b.mouseButtons.RIGHT:me=2;break;default:me=-1}const En=-1!==ue?ue:me;0!==En||b.noRotate?1!==En||b.noZoom?2===En&&!b.noPan&&(wt.copy(Sn(Et.pageX,Et.pageY)),Tt.copy(wt)):(Ie.copy(Sn(Et.pageX,Et.pageY)),It.copy(Ie)):(et.copy(un(Et.pageX,Et.pageY)),ke.copy(et)),b.dispatchEvent(ec)}(Et))}function mi(Et){!1!==b.enabled&&("touch"===Et.pointerType?function(Et){switch(cr(Et),st.length){case 1:ke.copy(et),et.copy(un(Et.pageX,Et.pageY));break;default:const En=function(Et){return sn[(Et.pointerId===st[0].pointerId?st[1]:st[0]).pointerId]}(Et),Nn=Et.pageX-En.x,Qt=Et.pageY-En.y;ge=Math.sqrt(Nn*Nn+Qt*Qt),Tt.copy(Sn((Et.pageX+En.x)/2,(Et.pageY+En.y)/2))}}(Et):function(Et){const En=-1!==ue?ue:me;0!==En||b.noRotate?1!==En||b.noZoom?2===En&&!b.noPan&&Tt.copy(Sn(Et.pageX,Et.pageY)):It.copy(Sn(Et.pageX,Et.pageY)):(ke.copy(et),et.copy(un(Et.pageX,Et.pageY)))}(Et))}function ui(Et){!1!==b.enabled&&("touch"===Et.pointerType?function(Et){switch(st.length){case 0:me=-1;break;case 1:me=3,et.copy(un(Et.pageX,Et.pageY)),ke.copy(et);break;case 2:me=4,et.copy(un(Et.pageX-ke.pageX,Et.pageY-ke.pageY)),ke.copy(et)}b.dispatchEvent(tc)}(Et):(me=-1,b.dispatchEvent(tc)),ni(Et),0===st.length&&(b.domElement.releasePointerCapture(Et.pointerId),b.domElement.removeEventListener("pointermove",mi),b.domElement.removeEventListener("pointerup",ui)))}function gi(Et){ni(Et)}function As(Et){!1!==b.enabled&&(window.removeEventListener("keydown",As),-1===ue&&(Et.code!==b.keys[0]||b.noRotate?Et.code!==b.keys[1]||b.noZoom?Et.code===b.keys[2]&&!b.noPan&&(ue=2):ue=1:ue=0))}function Oa(){!1!==b.enabled&&(ue=-1,window.addEventListener("keydown",As))}function xc(Et){if(!1!==b.enabled&&!0!==b.noZoom){switch(Et.preventDefault(),Et.deltaMode){case 2:Ie.y-=.025*Et.deltaY;break;case 1:Ie.y-=.01*Et.deltaY;break;default:Ie.y-=25e-5*Et.deltaY}b.dispatchEvent(ec),b.dispatchEvent(tc)}}function To(Et){!1!==b.enabled&&Et.preventDefault()}function ni(Et){delete sn[Et.pointerId];for(let En=0;En<st.length;En++)if(st[En].pointerId==Et.pointerId)return void st.splice(En,1)}function cr(Et){let En=sn[Et.pointerId];void 0===En&&(En=new G.FM8,sn[Et.pointerId]=En),En.set(Et.pageX,Et.pageY)}this.rotateCamera=function(){const Et=new G.Pa4,En=new G._fP,Nn=new G.Pa4,Qt=new G.Pa4,ii=new G.Pa4,ms=new G.Pa4;return function(){ms.set(et.x-ke.x,et.y-ke.y,0);let Qa=ms.length();Qa?(Ge.copy(b.object.position).sub(b.target),Nn.copy(Ge).normalize(),Qt.copy(b.object.up).normalize(),ii.crossVectors(Qt,Nn).normalize(),Qt.setLength(et.y-ke.y),ii.setLength(et.x-ke.x),ms.copy(Qt.add(ii)),Et.crossVectors(ms,Ge).normalize(),Qa*=b.rotateSpeed,En.setFromAxisAngle(Et,Qa),Ge.applyQuaternion(En),b.object.up.applyQuaternion(En),Ze.copy(Et),De=Qa):!b.staticMoving&&De&&(De*=Math.sqrt(1-b.dynamicDampingFactor),Ge.copy(b.object.position).sub(b.target),En.setFromAxisAngle(Ze,De),Ge.applyQuaternion(En),b.object.up.applyQuaternion(En)),ke.copy(et)}}(),this.zoomCamera=function(){let Et;4===me?(Et=Te/ge,Te=ge,b.object.isPerspectiveCamera?Ge.multiplyScalar(Et):b.object.isOrthographicCamera?(b.object.zoom*=Et,b.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(Et=1+(It.y-Ie.y)*b.zoomSpeed,1!==Et&&Et>0&&(b.object.isPerspectiveCamera?Ge.multiplyScalar(Et):b.object.isOrthographicCamera?(b.object.zoom/=Et,b.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),b.staticMoving?Ie.copy(It):Ie.y+=(It.y-Ie.y)*this.dynamicDampingFactor)},this.panCamera=function(){const Et=new G.FM8,En=new G.Pa4,Nn=new G.Pa4;return function(){if(Et.copy(Tt).sub(wt),Et.lengthSq()){if(b.object.isOrthographicCamera){const ms=(b.object.top-b.object.bottom)/b.object.zoom/b.domElement.clientWidth;Et.x*=(b.object.right-b.object.left)/b.object.zoom/b.domElement.clientWidth,Et.y*=ms}Et.multiplyScalar(Ge.length()*b.panSpeed),Nn.copy(Ge).cross(b.object.up).setLength(Et.x),Nn.add(En.copy(b.object.up).setLength(Et.y)),b.object.position.add(Nn),b.target.add(Nn),b.staticMoving?wt.copy(Tt):wt.add(Et.subVectors(Tt,wt).multiplyScalar(b.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!b.noZoom||!b.noPan)&&(Ge.lengthSq()>b.maxDistance*b.maxDistance&&(b.object.position.addVectors(b.target,Ge.setLength(b.maxDistance)),Ie.copy(It)),Ge.lengthSq()<b.minDistance*b.minDistance&&(b.object.position.addVectors(b.target,Ge.setLength(b.minDistance)),Ie.copy(It)))},this.update=function(){Ge.subVectors(b.object.position,b.target),b.noRotate||b.rotateCamera(),b.noZoom||b.zoomCamera(),b.noPan||b.panCamera(),b.object.position.addVectors(b.target,Ge),b.object.isPerspectiveCamera?(b.checkDistances(),b.object.lookAt(b.target),J.distanceToSquared(b.object.position)>z&&(b.dispatchEvent(vl),J.copy(b.object.position))):b.object.isOrthographicCamera?(b.object.lookAt(b.target),(J.distanceToSquared(b.object.position)>z||re!==b.object.zoom)&&(b.dispatchEvent(vl),J.copy(b.object.position),re=b.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){me=-1,ue=-1,b.target.copy(b.target0),b.object.position.copy(b.position0),b.object.up.copy(b.up0),b.object.zoom=b.zoom0,b.object.updateProjectionMatrix(),Ge.subVectors(b.object.position,b.target),b.object.lookAt(b.target),b.dispatchEvent(vl),J.copy(b.object.position),re=b.object.zoom},this.dispose=function(){b.domElement.removeEventListener("contextmenu",To),b.domElement.removeEventListener("pointerdown",Ur),b.domElement.removeEventListener("pointercancel",gi),b.domElement.removeEventListener("wheel",xc),b.domElement.removeEventListener("pointermove",mi),b.domElement.removeEventListener("pointerup",ui),window.removeEventListener("keydown",As),window.removeEventListener("keyup",Oa)},this.domElement.addEventListener("contextmenu",To),this.domElement.addEventListener("pointerdown",Ur),this.domElement.addEventListener("pointercancel",gi),this.domElement.addEventListener("wheel",xc,{passive:!1}),window.addEventListener("keydown",As),window.addEventListener("keyup",Oa),this.handleResize(),this.update()}}const Zc={type:"change"},Q={type:"start"},x={type:"end"};class S extends G.pBf{constructor(f,g){super(),void 0===g&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),g===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=f,this.domElement=g,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new G.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:G.RsA.ROTATE,MIDDLE:G.RsA.DOLLY,RIGHT:G.RsA.PAN},this.touches={ONE:G.QmN.ROTATE,TWO:G.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return re.phi},this.getAzimuthalAngle=function(){return re.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(ft){ft.addEventListener("keydown",tf),this._domElementKeyEvents=ft},this.saveState=function(){b.target0.copy(b.target),b.position0.copy(b.object.position),b.zoom0=b.object.zoom},this.reset=function(){b.target.copy(b.target0),b.object.position.copy(b.position0),b.object.zoom=b.zoom0,b.object.updateProjectionMatrix(),b.dispatchEvent(Zc),b.update(),z=I.NONE},this.update=function(){const ft=new G.Pa4,Er=(new G._fP).setFromUnitVectors(f.up,new G.Pa4(0,1,0)),Bo=Er.clone().invert(),sa=new G.Pa4,Gl=new G._fP,Bu=2*Math.PI;return function(){const bh=b.object.position;ft.copy(bh).sub(b.target),ft.applyQuaternion(Er),re.setFromVector3(ft),b.autoRotate&&z===I.NONE&&Ur(2*Math.PI/60/60*b.autoRotateSpeed),b.enableDamping?(re.theta+=me.theta*b.dampingFactor,re.phi+=me.phi*b.dampingFactor):(re.theta+=me.theta,re.phi+=me.phi);let cc=b.minAzimuthAngle,Cl=b.maxAzimuthAngle;return isFinite(cc)&&isFinite(Cl)&&(cc<-Math.PI?cc+=Bu:cc>Math.PI&&(cc-=Bu),Cl<-Math.PI?Cl+=Bu:Cl>Math.PI&&(Cl-=Bu),re.theta=cc<=Cl?Math.max(cc,Math.min(Cl,re.theta)):re.theta>(cc+Cl)/2?Math.max(cc,re.theta):Math.min(Cl,re.theta)),re.phi=Math.max(b.minPolarAngle,Math.min(b.maxPolarAngle,re.phi)),re.makeSafe(),re.radius*=ue,re.radius=Math.max(b.minDistance,Math.min(b.maxDistance,re.radius)),!0===b.enableDamping?b.target.addScaledVector(Te,b.dampingFactor):b.target.add(Te),ft.setFromSpherical(re),ft.applyQuaternion(Bo),bh.copy(b.target).add(ft),b.object.lookAt(b.target),!0===b.enableDamping?(me.theta*=1-b.dampingFactor,me.phi*=1-b.dampingFactor,Te.multiplyScalar(1-b.dampingFactor)):(me.set(0,0,0),Te.set(0,0,0)),ue=1,!!(ge||sa.distanceToSquared(b.object.position)>J||8*(1-Gl.dot(b.object.quaternion))>J)&&(b.dispatchEvent(Zc),sa.copy(b.object.position),Gl.copy(b.object.quaternion),ge=!1,!0)}}(),this.dispose=function(){b.domElement.removeEventListener("contextmenu",au),b.domElement.removeEventListener("pointerdown",Ml),b.domElement.removeEventListener("pointercancel",zc),b.domElement.removeEventListener("wheel",su),b.domElement.removeEventListener("pointermove",Sl),b.domElement.removeEventListener("pointerup",Co),null!==b._domElementKeyEvents&&b._domElementKeyEvents.removeEventListener("keydown",tf)};const b=this,I={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let z=I.NONE;const J=1e-6,re=new G.$V,me=new G.$V;let ue=1;const Te=new G.Pa4;let ge=!1;const De=new G.FM8,Ge=new G.FM8,ke=new G.FM8,et=new G.FM8,Ze=new G.FM8,Ie=new G.FM8,It=new G.FM8,wt=new G.FM8,Tt=new G.FM8,st=[],sn={};function un(){return Math.pow(.95,b.zoomSpeed)}function Ur(ft){me.theta-=ft}function mi(ft){me.phi-=ft}const ui=function(){const ft=new G.Pa4;return function(Bo,sa){ft.setFromMatrixColumn(sa,0),ft.multiplyScalar(-Bo),Te.add(ft)}}(),gi=function(){const ft=new G.Pa4;return function(Bo,sa){!0===b.screenSpacePanning?ft.setFromMatrixColumn(sa,1):(ft.setFromMatrixColumn(sa,0),ft.crossVectors(b.object.up,ft)),ft.multiplyScalar(Bo),Te.add(ft)}}(),As=function(){const ft=new G.Pa4;return function(Bo,sa){const Gl=b.domElement;if(b.object.isPerspectiveCamera){ft.copy(b.object.position).sub(b.target);let _h=ft.length();_h*=Math.tan(b.object.fov/2*Math.PI/180),ui(2*Bo*_h/Gl.clientHeight,b.object.matrix),gi(2*sa*_h/Gl.clientHeight,b.object.matrix)}else b.object.isOrthographicCamera?(ui(Bo*(b.object.right-b.object.left)/b.object.zoom/Gl.clientWidth,b.object.matrix),gi(sa*(b.object.top-b.object.bottom)/b.object.zoom/Gl.clientHeight,b.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),b.enablePan=!1)}}();function Oa(ft){b.object.isPerspectiveCamera?ue/=ft:b.object.isOrthographicCamera?(b.object.zoom=Math.max(b.minZoom,Math.min(b.maxZoom,b.object.zoom*ft)),b.object.updateProjectionMatrix(),ge=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),b.enableZoom=!1)}function Ko(ft){b.object.isPerspectiveCamera?ue*=ft:b.object.isOrthographicCamera?(b.object.zoom=Math.max(b.minZoom,Math.min(b.maxZoom,b.object.zoom/ft)),b.object.updateProjectionMatrix(),ge=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),b.enableZoom=!1)}function zl(ft){De.set(ft.clientX,ft.clientY)}function xc(ft){et.set(ft.clientX,ft.clientY)}function cr(){1===st.length?De.set(st[0].pageX,st[0].pageY):De.set(.5*(st[0].pageX+st[1].pageX),.5*(st[0].pageY+st[1].pageY))}function ri(){1===st.length?et.set(st[0].pageX,st[0].pageY):et.set(.5*(st[0].pageX+st[1].pageX),.5*(st[0].pageY+st[1].pageY))}function Et(){const ft=st[0].pageX-st[1].pageX,Er=st[0].pageY-st[1].pageY,Bo=Math.sqrt(ft*ft+Er*Er);It.set(0,Bo)}function Qt(ft){if(1==st.length)Ge.set(ft.pageX,ft.pageY);else{const Bo=ku(ft);Ge.set(.5*(ft.pageX+Bo.x),.5*(ft.pageY+Bo.y))}ke.subVectors(Ge,De).multiplyScalar(b.rotateSpeed);const Er=b.domElement;Ur(2*Math.PI*ke.x/Er.clientHeight),mi(2*Math.PI*ke.y/Er.clientHeight),De.copy(Ge)}function ii(ft){if(1===st.length)Ze.set(ft.pageX,ft.pageY);else{const Er=ku(ft);Ze.set(.5*(ft.pageX+Er.x),.5*(ft.pageY+Er.y))}Ie.subVectors(Ze,et).multiplyScalar(b.panSpeed),As(Ie.x,Ie.y),et.copy(Ze)}function ms(ft){const Er=ku(ft),Bo=ft.pageX-Er.x,sa=ft.pageY-Er.y,Gl=Math.sqrt(Bo*Bo+sa*sa);wt.set(0,Gl),Tt.set(0,Math.pow(wt.y/It.y,b.zoomSpeed)),Oa(Tt.y),It.copy(wt)}function Ml(ft){!1!==b.enabled&&(0===st.length&&(b.domElement.setPointerCapture(ft.pointerId),b.domElement.addEventListener("pointermove",Sl),b.domElement.addEventListener("pointerup",Co)),function(ft){st.push(ft)}(ft),"touch"===ft.pointerType?function(ft){switch(vh(ft),st.length){case 1:switch(b.touches.ONE){case G.QmN.ROTATE:if(!1===b.enableRotate)return;cr(),z=I.TOUCH_ROTATE;break;case G.QmN.PAN:if(!1===b.enablePan)return;ri(),z=I.TOUCH_PAN;break;default:z=I.NONE}break;case 2:switch(b.touches.TWO){case G.QmN.DOLLY_PAN:if(!1===b.enableZoom&&!1===b.enablePan)return;b.enableZoom&&Et(),b.enablePan&&ri(),z=I.TOUCH_DOLLY_PAN;break;case G.QmN.DOLLY_ROTATE:if(!1===b.enableZoom&&!1===b.enableRotate)return;b.enableZoom&&Et(),b.enableRotate&&cr(),z=I.TOUCH_DOLLY_ROTATE;break;default:z=I.NONE}break;default:z=I.NONE}z!==I.NONE&&b.dispatchEvent(Q)}(ft):function(ft){let Er;switch(ft.button){case 0:Er=b.mouseButtons.LEFT;break;case 1:Er=b.mouseButtons.MIDDLE;break;case 2:Er=b.mouseButtons.RIGHT;break;default:Er=-1}switch(Er){case G.RsA.DOLLY:if(!1===b.enableZoom)return;(function(ft){It.set(ft.clientX,ft.clientY)})(ft),z=I.DOLLY;break;case G.RsA.ROTATE:if(ft.ctrlKey||ft.metaKey||ft.shiftKey){if(!1===b.enablePan)return;xc(ft),z=I.PAN}else{if(!1===b.enableRotate)return;zl(ft),z=I.ROTATE}break;case G.RsA.PAN:if(ft.ctrlKey||ft.metaKey||ft.shiftKey){if(!1===b.enableRotate)return;zl(ft),z=I.ROTATE}else{if(!1===b.enablePan)return;xc(ft),z=I.PAN}break;default:z=I.NONE}z!==I.NONE&&b.dispatchEvent(Q)}(ft))}function Sl(ft){!1!==b.enabled&&("touch"===ft.pointerType?function(ft){switch(vh(ft),z){case I.TOUCH_ROTATE:if(!1===b.enableRotate)return;Qt(ft),b.update();break;case I.TOUCH_PAN:if(!1===b.enablePan)return;ii(ft),b.update();break;case I.TOUCH_DOLLY_PAN:if(!1===b.enableZoom&&!1===b.enablePan)return;(function(ft){b.enableZoom&&ms(ft),b.enablePan&&ii(ft)})(ft),b.update();break;case I.TOUCH_DOLLY_ROTATE:if(!1===b.enableZoom&&!1===b.enableRotate)return;(function(ft){b.enableZoom&&ms(ft),b.enableRotate&&Qt(ft)})(ft),b.update();break;default:z=I.NONE}}(ft):function(ft){if(!1!==b.enabled)switch(z){case I.ROTATE:if(!1===b.enableRotate)return;!function(ft){Ge.set(ft.clientX,ft.clientY),ke.subVectors(Ge,De).multiplyScalar(b.rotateSpeed);const Er=b.domElement;Ur(2*Math.PI*ke.x/Er.clientHeight),mi(2*Math.PI*ke.y/Er.clientHeight),De.copy(Ge),b.update()}(ft);break;case I.DOLLY:if(!1===b.enableZoom)return;!function(ft){wt.set(ft.clientX,ft.clientY),Tt.subVectors(wt,It),Tt.y>0?Oa(un()):Tt.y<0&&Ko(un()),It.copy(wt),b.update()}(ft);break;case I.PAN:if(!1===b.enablePan)return;!function(ft){Ze.set(ft.clientX,ft.clientY),Ie.subVectors(Ze,et).multiplyScalar(b.panSpeed),As(Ie.x,Ie.y),et.copy(Ze),b.update()}(ft)}}(ft))}function Co(ft){!1!==b.enabled&&(b.dispatchEvent(x),z=I.NONE,lc(ft),0===st.length&&(b.domElement.releasePointerCapture(ft.pointerId),b.domElement.removeEventListener("pointermove",Sl),b.domElement.removeEventListener("pointerup",Co)))}function zc(ft){lc(ft)}function su(ft){!1===b.enabled||!1===b.enableZoom||z!==I.NONE&&z!==I.ROTATE||(ft.preventDefault(),b.dispatchEvent(Q),function(ft){ft.deltaY<0?Ko(un()):ft.deltaY>0&&Oa(un()),b.update()}(ft),b.dispatchEvent(x))}function tf(ft){!1===b.enabled||!1===b.enablePan||function(ft){let Er=!1;switch(ft.code){case b.keys.UP:As(0,b.keyPanSpeed),Er=!0;break;case b.keys.BOTTOM:As(0,-b.keyPanSpeed),Er=!0;break;case b.keys.LEFT:As(b.keyPanSpeed,0),Er=!0;break;case b.keys.RIGHT:As(-b.keyPanSpeed,0),Er=!0}Er&&(ft.preventDefault(),b.update())}(ft)}function au(ft){!1!==b.enabled&&ft.preventDefault()}function lc(ft){delete sn[ft.pointerId];for(let Er=0;Er<st.length;Er++)if(st[Er].pointerId==ft.pointerId)return void st.splice(Er,1)}function vh(ft){let Er=sn[ft.pointerId];void 0===Er&&(Er=new G.FM8,sn[ft.pointerId]=Er),Er.set(ft.pageX,ft.pageY)}function ku(ft){return sn[(ft.pointerId===st[0].pointerId?st[1]:st[0]).pointerId]}b.domElement.addEventListener("contextmenu",au),b.domElement.addEventListener("pointerdown",Ml),b.domElement.addEventListener("pointercancel",zc),b.domElement.addEventListener("wheel",su,{passive:!1}),this.update()}}const K={type:"change"};class he extends G.pBf{constructor(f,g){super(),void 0===g&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),g=document),this.object=f,this.domElement=g,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const b=this,I=1e-6,z=new G._fP,J=new G.Pa4;this.tmpQuaternion=new G._fP,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new G.Pa4(0,0,0),this.rotationVector=new G.Pa4(0,0,0),this.keydown=function(De){if(!De.altKey){switch(De.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(De){switch(De.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(De){if(this.dragToLook)this.mouseStatus++;else{switch(De.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(De){if(!this.dragToLook||this.mouseStatus>0){const Ge=this.getContainerDimensions(),ke=Ge.size[0]/2,et=Ge.size[1]/2;this.moveState.yawLeft=-(De.pageX-Ge.offset[0]-ke)/ke,this.moveState.pitchDown=(De.pageY-Ge.offset[1]-et)/et,this.updateRotationVector()}},this.mouseup=function(De){if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(De.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(De){const Ge=De*b.movementSpeed,ke=De*b.rollSpeed;b.object.translateX(b.moveVector.x*Ge),b.object.translateY(b.moveVector.y*Ge),b.object.translateZ(b.moveVector.z*Ge),b.tmpQuaternion.set(b.rotationVector.x*ke,b.rotationVector.y*ke,b.rotationVector.z*ke,1).normalize(),b.object.quaternion.multiply(b.tmpQuaternion),(J.distanceToSquared(b.object.position)>I||8*(1-z.dot(b.object.quaternion))>I)&&(b.dispatchEvent(K),z.copy(b.object.quaternion),J.copy(b.object.position))},this.updateMovementVector=function(){const De=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-De+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",Ce),this.domElement.removeEventListener("mousedown",me),this.domElement.removeEventListener("mousemove",re),this.domElement.removeEventListener("mouseup",ue),window.removeEventListener("keydown",Te),window.removeEventListener("keyup",ge)};const re=this.mousemove.bind(this),me=this.mousedown.bind(this),ue=this.mouseup.bind(this),Te=this.keydown.bind(this),ge=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",Ce),this.domElement.addEventListener("mousemove",re),this.domElement.addEventListener("mousedown",me),this.domElement.addEventListener("mouseup",ue),window.addEventListener("keydown",Te),window.addEventListener("keyup",ge),this.updateMovementVector(),this.updateRotationVector()}}function Ce(d){d.preventDefault()}var Le={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"};class nt{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const Rt=new G.iKG(-1,1,1,-1,0,1),dn=new G.u9r;dn.setAttribute("position",new G.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),dn.setAttribute("uv",new G.a$l([0,2,0,0,2,0],2));class zn{constructor(f){this._mesh=new G.Kj0(dn,f)}dispose(){this._mesh.geometry.dispose()}render(f){f.render(this._mesh,Rt)}get material(){return this._mesh.material}set material(f){this._mesh.material=f}}class Cr extends nt{constructor(f,g){super(),this.textureID=void 0!==g?g:"tDiffuse",f instanceof G.jyz?(this.uniforms=f.uniforms,this.material=f):f&&(this.uniforms=G.rDY.clone(f.uniforms),this.material=new G.jyz({defines:Object.assign({},f.defines),uniforms:this.uniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader})),this.fsQuad=new zn(this.material)}render(f,g,b){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=b.texture),this.fsQuad.material=this.material,this.renderToScreen?(f.setRenderTarget(null),this.fsQuad.render(f)):(f.setRenderTarget(g),this.clear&&f.clear(f.autoClearColor,f.autoClearDepth,f.autoClearStencil),this.fsQuad.render(f))}}class Xr extends nt{constructor(f,g){super(),this.scene=f,this.camera=g,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(f,g,b){const I=f.getContext(),z=f.state;let J,re;z.buffers.color.setMask(!1),z.buffers.depth.setMask(!1),z.buffers.color.setLocked(!0),z.buffers.depth.setLocked(!0),this.inverse?(J=0,re=1):(J=1,re=0),z.buffers.stencil.setTest(!0),z.buffers.stencil.setOp(I.REPLACE,I.REPLACE,I.REPLACE),z.buffers.stencil.setFunc(I.ALWAYS,J,4294967295),z.buffers.stencil.setClear(re),z.buffers.stencil.setLocked(!0),f.setRenderTarget(b),this.clear&&f.clear(),f.render(this.scene,this.camera),f.setRenderTarget(g),this.clear&&f.clear(),f.render(this.scene,this.camera),z.buffers.color.setLocked(!1),z.buffers.depth.setLocked(!1),z.buffers.stencil.setLocked(!1),z.buffers.stencil.setFunc(I.EQUAL,1,4294967295),z.buffers.stencil.setOp(I.KEEP,I.KEEP,I.KEEP),z.buffers.stencil.setLocked(!0)}}class at extends nt{constructor(){super(),this.needsSwap=!1}render(f){f.state.buffers.stencil.setLocked(!1),f.state.buffers.stencil.setTest(!1)}}class On{constructor(f,g){if(this.renderer=f,void 0===g){const b={minFilter:G.wem,magFilter:G.wem,format:G.wk1},I=f.getSize(new G.FM8);this._pixelRatio=f.getPixelRatio(),this._width=I.width,this._height=I.height,(g=new G.dd2(this._width*this._pixelRatio,this._height*this._pixelRatio,b)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=g.width,this._height=g.height;this.renderTarget1=g,this.renderTarget2=g.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===Le&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Cr&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Cr(Le),this.clock=new G.SUY}swapBuffers(){const f=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=f}addPass(f){this.passes.push(f),f.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(f,g){this.passes.splice(g,0,f),f.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(f){const g=this.passes.indexOf(f);-1!==g&&this.passes.splice(g,1)}isLastEnabledPass(f){for(let g=f+1;g<this.passes.length;g++)if(this.passes[g].enabled)return!1;return!0}render(f){void 0===f&&(f=this.clock.getDelta());const g=this.renderer.getRenderTarget();let b=!1;for(let I=0,z=this.passes.length;I<z;I++){const J=this.passes[I];if(!1!==J.enabled){if(J.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(I),J.render(this.renderer,this.writeBuffer,this.readBuffer,f,b),J.needsSwap){if(b){const re=this.renderer.getContext(),me=this.renderer.state.buffers.stencil;me.setFunc(re.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,f),me.setFunc(re.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Xr&&(J instanceof Xr?b=!0:J instanceof at&&(b=!1))}}this.renderer.setRenderTarget(g)}reset(f){if(void 0===f){const g=this.renderer.getSize(new G.FM8);this._pixelRatio=this.renderer.getPixelRatio(),this._width=g.width,this._height=g.height,(f=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=f,this.renderTarget2=f.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(f,g){this._width=f,this._height=g;const b=this._width*this._pixelRatio,I=this._height*this._pixelRatio;this.renderTarget1.setSize(b,I),this.renderTarget2.setSize(b,I);for(let z=0;z<this.passes.length;z++)this.passes[z].setSize(b,I)}setPixelRatio(f){this._pixelRatio=f,this.setSize(this._width,this._height)}}new G.iKG(-1,1,1,-1,0,1);const Ii=new G.u9r;Ii.setAttribute("position",new G.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),Ii.setAttribute("uv",new G.a$l([0,2,0,0,2,0],2));class bs extends nt{constructor(f,g,b,I,z){super(),this.scene=f,this.camera=g,this.overrideMaterial=b,this.clearColor=I,this.clearAlpha=void 0!==z?z:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new G.Ilk}render(f,g,b){const I=f.autoClear;let z,J;f.autoClear=!1,void 0!==this.overrideMaterial&&(J=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(f.getClearColor(this._oldClearColor),z=f.getClearAlpha(),f.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&f.clearDepth(),f.setRenderTarget(this.renderToScreen?null:b),this.clear&&f.clear(f.autoClearColor,f.autoClearDepth,f.autoClearStencil),f.render(this.scene,this.camera),this.clearColor&&f.setClearColor(this._oldClearColor,z),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=J),f.autoClear=I}}function ci(){return(ci=Object.assign||function(d){for(var f=1;f<arguments.length;f++){var g=arguments[f];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(d[b]=g[b])}return d}).apply(this,arguments)}function xs(d,f){return(xs=Object.setPrototypeOf||function(b,I){return b.__proto__=I,b})(d,f)}function Hi(d){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(d)}function Fl(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}function Ta(d,f,g){return(Ta=Fl()?Reflect.construct:function(I,z,J){var re=[null];re.push.apply(re,z);var ue=new(Function.bind.apply(I,re));return J&&xs(ue,J.prototype),ue}).apply(null,arguments)}function ts(d){var f="function"==typeof Map?new Map:void 0;return(ts=function(b){if(null===b||!function(d){return-1!==Function.toString.call(d).indexOf("[native code]")}(b))return b;if("function"!=typeof b)throw new TypeError("Super expression must either be null or a function");if(void 0!==f){if(f.has(b))return f.get(b);f.set(b,I)}function I(){return Ta(b,arguments,Hi(this).constructor)}return I.prototype=Object.create(b.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),xs(I,b)})(d)}var Un=function(d){function f(g){return function(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(d.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+g+" for more information.")||this)}return function(d,f){d.prototype=Object.create(f.prototype),d.prototype.constructor=d,xs(d,f)}(f,d),f}(ts(Error));function Ei(d){return Math.round(255*d)}function ps(d,f,g){return Ei(d)+","+Ei(f)+","+Ei(g)}function So(d,f,g,b){if(void 0===b&&(b=ps),0===f)return b(g,g,g);var I=(d%360+360)%360/60,z=(1-Math.abs(2*g-1))*f,J=z*(1-Math.abs(I%2-1)),re=0,me=0,ue=0;I>=0&&I<1?(re=z,me=J):I>=1&&I<2?(re=J,me=z):I>=2&&I<3?(me=z,ue=J):I>=3&&I<4?(me=J,ue=z):I>=4&&I<5?(re=J,ue=z):I>=5&&I<6&&(re=z,ue=J);var Te=g-z/2;return b(re+Te,me+Te,ue+Te)}var Qs={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Zs=/^#[a-fA-F0-9]{6}$/,_o=/^#[a-fA-F0-9]{8}$/,Ul=/^#[a-fA-F0-9]{3}$/,Bs=/^#[a-fA-F0-9]{4}$/,yt=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,Dn=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,Ht=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Rn=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function gn(d){if("string"!=typeof d)throw new Un(3);var f=function(d){if("string"!=typeof d)return d;var f=d.toLowerCase();return Qs[f]?"#"+Qs[f]:d}(d);if(f.match(Zs))return{red:parseInt(""+f[1]+f[2],16),green:parseInt(""+f[3]+f[4],16),blue:parseInt(""+f[5]+f[6],16)};if(f.match(_o)){var g=parseFloat((parseInt(""+f[7]+f[8],16)/255).toFixed(2));return{red:parseInt(""+f[1]+f[2],16),green:parseInt(""+f[3]+f[4],16),blue:parseInt(""+f[5]+f[6],16),alpha:g}}if(f.match(Ul))return{red:parseInt(""+f[1]+f[1],16),green:parseInt(""+f[2]+f[2],16),blue:parseInt(""+f[3]+f[3],16)};if(f.match(Bs)){var b=parseFloat((parseInt(""+f[4]+f[4],16)/255).toFixed(2));return{red:parseInt(""+f[1]+f[1],16),green:parseInt(""+f[2]+f[2],16),blue:parseInt(""+f[3]+f[3],16),alpha:b}}var I=yt.exec(f);if(I)return{red:parseInt(""+I[1],10),green:parseInt(""+I[2],10),blue:parseInt(""+I[3],10)};var z=Dn.exec(f.substring(0,50));if(z)return{red:parseInt(""+z[1],10),green:parseInt(""+z[2],10),blue:parseInt(""+z[3],10),alpha:parseFloat(""+z[4])};var J=Ht.exec(f);if(J){var Te="rgb("+So(parseInt(""+J[1],10),parseInt(""+J[2],10)/100,parseInt(""+J[3],10)/100)+")",ge=yt.exec(Te);if(!ge)throw new Un(4,f,Te);return{red:parseInt(""+ge[1],10),green:parseInt(""+ge[2],10),blue:parseInt(""+ge[3],10)}}var De=Rn.exec(f.substring(0,50));if(De){var Ze="rgb("+So(parseInt(""+De[1],10),parseInt(""+De[2],10)/100,parseInt(""+De[3],10)/100)+")",Ie=yt.exec(Ze);if(!Ie)throw new Un(4,f,Ze);return{red:parseInt(""+Ie[1],10),green:parseInt(""+Ie[2],10),blue:parseInt(""+Ie[3],10),alpha:parseFloat(""+De[4])}}throw new Un(5)}var rn=function(f){return 7===f.length&&f[1]===f[2]&&f[3]===f[4]&&f[5]===f[6]?"#"+f[1]+f[3]+f[5]:f};function Br(d){var f=d.toString(16);return 1===f.length?"0"+f:f}function Js(d,f,g){if("number"==typeof d&&"number"==typeof f&&"number"==typeof g)return rn("#"+Br(d)+Br(f)+Br(g));if("object"==typeof d&&void 0===f&&void 0===g)return rn("#"+Br(d.red)+Br(d.green)+Br(d.blue));throw new Un(6)}function yc(d,f,g){return function(){var I=g.concat(Array.prototype.slice.call(arguments));return I.length>=f?d.apply(this,I):yc(d,f,I)}}function Vl(d){return yc(d,d.length,[])}function Ia(d,f,g){return Math.max(d,Math.min(f,g))}function Rd(d,f){if("transparent"===f)return f;var g=gn(f);return function(d,f,g,b){if("string"==typeof d&&"number"==typeof f){var I=gn(d);return"rgba("+I.red+","+I.green+","+I.blue+","+f+")"}if("number"==typeof d&&"number"==typeof f&&"number"==typeof g&&"number"==typeof b)return b>=1?Js(d,f,g):"rgba("+d+","+f+","+g+","+b+")";if("object"==typeof d&&void 0===f&&void 0===g&&void 0===b)return d.alpha>=1?Js(d.red,d.green,d.blue):"rgba("+d.red+","+d.green+","+d.blue+","+d.alpha+")";throw new Un(7)}(ci({},g,{alpha:Ia(0,1,(100*("number"==typeof g.alpha?g.alpha:1)+100*parseFloat(d))/100)}))}var d,lh=Vl(Rd),Pu={Linear:{None:function(d){return d}},Quadratic:{In:function(d){return d*d},Out:function(d){return d*(2-d)},InOut:function(d){return(d*=2)<1?.5*d*d:-.5*(--d*(d-2)-1)}},Cubic:{In:function(d){return d*d*d},Out:function(d){return--d*d*d+1},InOut:function(d){return(d*=2)<1?.5*d*d*d:.5*((d-=2)*d*d+2)}},Quartic:{In:function(d){return d*d*d*d},Out:function(d){return 1- --d*d*d*d},InOut:function(d){return(d*=2)<1?.5*d*d*d*d:-.5*((d-=2)*d*d*d-2)}},Quintic:{In:function(d){return d*d*d*d*d},Out:function(d){return--d*d*d*d*d+1},InOut:function(d){return(d*=2)<1?.5*d*d*d*d*d:.5*((d-=2)*d*d*d*d+2)}},Sinusoidal:{In:function(d){return 1-Math.cos(d*Math.PI/2)},Out:function(d){return Math.sin(d*Math.PI/2)},InOut:function(d){return.5*(1-Math.cos(Math.PI*d))}},Exponential:{In:function(d){return 0===d?0:Math.pow(1024,d-1)},Out:function(d){return 1===d?1:1-Math.pow(2,-10*d)},InOut:function(d){return 0===d?0:1===d?1:(d*=2)<1?.5*Math.pow(1024,d-1):.5*(2-Math.pow(2,-10*(d-1)))}},Circular:{In:function(d){return 1-Math.sqrt(1-d*d)},Out:function(d){return Math.sqrt(1- --d*d)},InOut:function(d){return(d*=2)<1?-.5*(Math.sqrt(1-d*d)-1):.5*(Math.sqrt(1-(d-=2)*d)+1)}},Elastic:{In:function(d){return 0===d?0:1===d?1:-Math.pow(2,10*(d-1))*Math.sin(5*(d-1.1)*Math.PI)},Out:function(d){return 0===d?0:1===d?1:Math.pow(2,-10*d)*Math.sin(5*(d-.1)*Math.PI)+1},InOut:function(d){return 0===d?0:1===d?1:(d*=2)<1?-.5*Math.pow(2,10*(d-1))*Math.sin(5*(d-1.1)*Math.PI):.5*Math.pow(2,-10*(d-1))*Math.sin(5*(d-1.1)*Math.PI)+1}},Back:{In:function(d){var f=1.70158;return d*d*((f+1)*d-f)},Out:function(d){var f=1.70158;return--d*d*((f+1)*d+f)+1},InOut:function(d){var f=2.5949095;return(d*=2)<1?d*d*((f+1)*d-f)*.5:.5*((d-=2)*d*((f+1)*d+f)+2)}},Bounce:{In:function(d){return 1-Pu.Bounce.Out(1-d)},Out:function(d){return d<1/2.75?7.5625*d*d:d<2/2.75?7.5625*(d-=1.5/2.75)*d+.75:d<2.5/2.75?7.5625*(d-=2.25/2.75)*d+.9375:7.5625*(d-=2.625/2.75)*d+.984375},InOut:function(d){return d<.5?.5*Pu.Bounce.In(2*d):.5*Pu.Bounce.Out(2*d-1)+.5}}},kc="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var d=process.hrtime();return 1e3*d[0]+d[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},Bc=function(){function d(){this._tweens={},this._tweensAddedDuringUpdate={}}return d.prototype.getAll=function(){var f=this;return Object.keys(this._tweens).map(function(g){return f._tweens[g]})},d.prototype.removeAll=function(){this._tweens={}},d.prototype.add=function(f){this._tweens[f.getId()]=f,this._tweensAddedDuringUpdate[f.getId()]=f},d.prototype.remove=function(f){delete this._tweens[f.getId()],delete this._tweensAddedDuringUpdate[f.getId()]},d.prototype.update=function(f,g){void 0===f&&(f=kc()),void 0===g&&(g=!1);var b=Object.keys(this._tweens);if(0===b.length)return!1;for(;b.length>0;){this._tweensAddedDuringUpdate={};for(var I=0;I<b.length;I++){var z=this._tweens[b[I]];z&&!1===z.update(f,!g)&&!g&&delete this._tweens[b[I]]}b=Object.keys(this._tweensAddedDuringUpdate)}return!0},d}(),Lu={Linear:function(d,f){var g=d.length-1,b=g*f,I=Math.floor(b),z=Lu.Utils.Linear;return f<0?z(d[0],d[1],b):f>1?z(d[g],d[g-1],g-b):z(d[I],d[I+1>g?g:I+1],b-I)},Bezier:function(d,f){for(var g=0,b=d.length-1,I=Math.pow,z=Lu.Utils.Bernstein,J=0;J<=b;J++)g+=I(1-f,b-J)*I(f,J)*d[J]*z(b,J);return g},CatmullRom:function(d,f){var g=d.length-1,b=g*f,I=Math.floor(b),z=Lu.Utils.CatmullRom;return d[0]===d[g]?(f<0&&(I=Math.floor(b=g*(1+f))),z(d[(I-1+g)%g],d[I],d[(I+1)%g],d[(I+2)%g],b-I)):f<0?d[0]-(z(d[0],d[0],d[1],d[1],-b)-d[0]):f>1?d[g]-(z(d[g],d[g],d[g-1],d[g-1],b-g)-d[g]):z(d[I?I-1:0],d[I],d[g<I+1?g:I+1],d[g<I+2?g:I+2],b-I)},Utils:{Linear:function(d,f,g){return(f-d)*g+d},Bernstein:function(d,f){var g=Lu.Utils.Factorial;return g(d)/g(f)/g(d-f)},Factorial:(d=[1],function(f){var g=1;if(d[f])return d[f];for(var b=f;b>1;b--)g*=b;return d[f]=g,g}),CatmullRom:function(d,f,g,b,I){var z=.5*(g-d),J=.5*(b-f),re=I*I;return(2*f-2*g+z+J)*(I*re)+(-3*f+3*g-2*z-J)*re+z*I+f}}},Bf=function(){function d(){}return d.nextId=function(){return d._nextId++},d._nextId=0,d}(),Nd=new Bc,nm=function(){function d(f,g){void 0===g&&(g=Nd),this._object=f,this._group=g,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Pu.Linear.None,this._interpolationFunction=Lu.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Bf.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return d.prototype.getId=function(){return this._id},d.prototype.isPlaying=function(){return this._isPlaying},d.prototype.isPaused=function(){return this._isPaused},d.prototype.to=function(f,g){return this._valuesEnd=Object.create(f),void 0!==g&&(this._duration=g),this},d.prototype.duration=function(f){return this._duration=f,this},d.prototype.start=function(f){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var g in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(g),this._valuesStart[g]=this._valuesStartRepeat[g];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==f?"string"==typeof f?kc()+parseFloat(f):f:kc(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},d.prototype._setupProperties=function(f,g,b,I){for(var z in b){var J=f[z],re=Array.isArray(J),me=re?"array":typeof J,ue=!re&&Array.isArray(b[z]);if("undefined"!==me&&"function"!==me){if(ue){var Te=b[z];if(0===Te.length)continue;Te=Te.map(this._handleRelativeValue.bind(this,J)),b[z]=[J].concat(Te)}if("object"!==me&&!re||!J||ue)void 0===g[z]&&(g[z]=J),re||(g[z]*=1),I[z]=ue?b[z].slice().reverse():g[z]||0;else{for(var ge in g[z]=re?[]:{},J)g[z][ge]=J[ge];I[z]=re?[]:{},this._setupProperties(J,g[z],b[z],I[z])}}}},d.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},d.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},d.prototype.pause=function(f){return void 0===f&&(f=kc()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=f,this._group&&this._group.remove(this)),this},d.prototype.resume=function(f){return void 0===f&&(f=kc()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=f-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},d.prototype.stopChainedTweens=function(){for(var f=0,g=this._chainedTweens.length;f<g;f++)this._chainedTweens[f].stop();return this},d.prototype.group=function(f){return this._group=f,this},d.prototype.delay=function(f){return this._delayTime=f,this},d.prototype.repeat=function(f){return this._initialRepeat=f,this._repeat=f,this},d.prototype.repeatDelay=function(f){return this._repeatDelayTime=f,this},d.prototype.yoyo=function(f){return this._yoyo=f,this},d.prototype.easing=function(f){return this._easingFunction=f,this},d.prototype.interpolation=function(f){return this._interpolationFunction=f,this},d.prototype.chain=function(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];return this._chainedTweens=f,this},d.prototype.onStart=function(f){return this._onStartCallback=f,this},d.prototype.onUpdate=function(f){return this._onUpdateCallback=f,this},d.prototype.onRepeat=function(f){return this._onRepeatCallback=f,this},d.prototype.onComplete=function(f){return this._onCompleteCallback=f,this},d.prototype.onStop=function(f){return this._onStopCallback=f,this},d.prototype.update=function(f,g){if(void 0===f&&(f=kc()),void 0===g&&(g=!0),this._isPaused)return!0;var b,I;if(!this._goToEnd&&!this._isPlaying){if(f>this._startTime+this._duration)return!1;g&&this.start(f)}if(this._goToEnd=!1,f<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),I=(f-this._startTime)/this._duration;var J=this._easingFunction(I=0===this._duration||I>1?1:I);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,J),this._onUpdateCallback&&this._onUpdateCallback(this._object,I),1===I){if(this._repeat>0){for(b in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)!this._yoyo&&"string"==typeof this._valuesEnd[b]&&(this._valuesStartRepeat[b]=this._valuesStartRepeat[b]+parseFloat(this._valuesEnd[b])),this._yoyo&&this._swapEndStartRepeatValues(b),this._valuesStart[b]=this._valuesStartRepeat[b];return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0!==this._repeatDelayTime?f+this._repeatDelayTime:f+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var re=0,me=this._chainedTweens.length;re<me;re++)this._chainedTweens[re].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},d.prototype._updateProperties=function(f,g,b,I){for(var z in b)if(void 0!==g[z]){var J=g[z]||0,re=b[z],me=Array.isArray(f[z]),ue=Array.isArray(re);!me&&ue?f[z]=this._interpolationFunction(re,I):"object"==typeof re&&re?this._updateProperties(f[z],J,re,I):"number"==typeof(re=this._handleRelativeValue(J,re))&&(f[z]=J+(re-J)*I)}},d.prototype._handleRelativeValue=function(f,g){return"string"!=typeof g?g:"+"===g.charAt(0)||"-"===g.charAt(0)?f+parseFloat(g):parseFloat(g)},d.prototype._swapEndStartRepeatValues=function(f){var g=this._valuesStartRepeat[f],b=this._valuesEnd[f];this._valuesStartRepeat[f]="string"==typeof b?this._valuesStartRepeat[f]+parseFloat(b):this._valuesEnd[f],this._valuesEnd[f]=g},d}(),_c=Bf.nextId,La=Nd,Fd=La.getAll.bind(La),im=La.removeAll.bind(La),sm=La.add.bind(La),om=La.remove.bind(La),am=La.update.bind(La);const Ou={Easing:Pu,Group:Bc,Interpolation:Lu,now:kc,Sequence:Bf,nextId:_c,Tween:nm,VERSION:"18.6.4",getAll:Fd,removeAll:im,add:sm,remove:om,update:am};function hm(d,f,g){return f in d?Object.defineProperty(d,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[f]=g,d}function fm(d,f){return function(d){if(Array.isArray(d))return d}(d)||function(d,f){var g=null==d?null:"undefined"!=typeof Symbol&&d[Symbol.iterator]||d["@@iterator"];if(null!=g){var J,re,b=[],I=!0,z=!1;try{for(g=g.call(d);!(I=(J=g.next()).done)&&(b.push(J.value),!f||b.length!==f);I=!0);}catch(me){z=!0,re=me}finally{try{!I&&null!=g.return&&g.return()}finally{if(z)throw re}}return b}}(d,f)||Nu(d,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kh(d){return function(d){if(Array.isArray(d))return Qh(d)}(d)||function(d){if("undefined"!=typeof Symbol&&null!=d[Symbol.iterator]||null!=d["@@iterator"])return Array.from(d)}(d)||Nu(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nu(d,f){if(d){if("string"==typeof d)return Qh(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);if("Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g)return Array.from(d);if("Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return Qh(d,f)}}function Qh(d,f){(null==f||f>d.length)&&(f=d.length);for(var g=0,b=new Array(f);g<f;g++)b[g]=d[g];return b}!function(d,f){void 0===f&&(f={});var g=f.insertAt;if("undefined"!=typeof document){var b=document.head||document.getElementsByTagName("head")[0],I=document.createElement("style");I.type="text/css","top"===g&&b.firstChild?b.insertBefore(I,b.firstChild):b.appendChild(I),I.styleSheet?I.styleSheet.cssText=d:I.appendChild(document.createTextNode(d))}}(".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}");var uo=window.THREE?window.THREE:{WebGLRenderer:G.CP7,Scene:G.xsS,PerspectiveCamera:G.cPb,Raycaster:G.iMs,TextureLoader:G.dpR,Vector2:G.FM8,Vector3:G.Pa4,Box3:G.ZzF,Color:G.Ilk,Mesh:G.Kj0,SphereGeometry:G.xo$,MeshBasicMaterial:G.vBJ,BackSide:G._Li,EventDispatcher:G.pBf,MOUSE:G.RsA,Quaternion:G._fP,Spherical:G.$V,Clock:G.SUY};const pm=xt({props:{width:{default:window.innerWidth,onChange:function(f,g,b){isNaN(f)&&(g.width=b)}},height:{default:window.innerHeight,onChange:function(f,g,b){isNaN(f)&&(g.height=b)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(f,g){g.hoverObj=null,g.toolTipElem&&(g.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(f){if(f.initialised){if(f.controls.update&&f.controls.update(f.clock.getDelta()),f.postProcessingComposer?f.postProcessingComposer.render():f.renderer.render(f.scene,f.camera),f.extraRenderers.forEach(function(z){return z.render(f.scene,f.camera)}),f.enablePointerInteraction){var g=null;if(f.hoverDuringDrag||!f.isPointerDragging){var b=this.intersectingObjects(f.pointerPos.x,f.pointerPos.y).filter(function(z){return f.hoverFilter(z.object)}).sort(function(z,J){return f.hoverOrderComparator(z.object,J.object)}),I=b.length?b[0]:null;g=I?I.object:null,f.intersectionPoint=I?I.point:null}g!==f.hoverObj&&(f.onHover(g,f.hoverObj),f.toolTipElem.innerHTML=g&&bn(f.tooltipContent)(g)||"",f.hoverObj=g)}Ou.update()}return this},getPointerPos:function(f){var g=f.pointerPos;return{x:g.x,y:g.y}},cameraPosition:function(f,g,b,I){var z=f.camera;if(g&&f.initialised){var J=g,re=b||{x:0,y:0,z:0};if(I){var me=Object.assign({},z.position),ue=De();new Ou.Tween(me).to(J,I).easing(Ou.Easing.Quadratic.Out).onUpdate(Te).start(),new Ou.Tween(ue).to(re,I/3).easing(Ou.Easing.Quadratic.Out).onUpdate(ge).start()}else Te(J),ge(re);return this}return Object.assign({},z.position,{lookAt:De()});function Te(Ge){var ke=Ge.x,et=Ge.y,Ze=Ge.z;void 0!==ke&&(z.position.x=ke),void 0!==et&&(z.position.y=et),void 0!==Ze&&(z.position.z=Ze)}function ge(Ge){f.controls.target=new uo.Vector3(Ge.x,Ge.y,Ge.z)}function De(){return Object.assign(new uo.Vector3(0,0,-1e3).applyQuaternion(z.quaternion).add(z.position))}},zoomToFit:function(f){for(var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,I=arguments.length,z=new Array(I>3?I-3:0),J=3;J<I;J++)z[J-3]=arguments[J];return this.fitToBbox(this.getBbox.apply(this,z),g,b)},fitToBbox:function(f,g){var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,z=f.camera;if(g){var J=new uo.Vector3(0,0,0),re=2*Math.max.apply(Math,Kh(Object.entries(g).map(function(Ge){var ke=fm(Ge,2),et=ke[0];return Math.max.apply(Math,Kh(ke[1].map(function(Ie){return Math.abs(J[et]-Ie)})))}))),me=(1-2*I/f.height)*z.fov,ue=re/Math.atan(me*Math.PI/180),Te=ue/z.aspect,ge=Math.max(ue,Te);if(ge>0){var De=J.clone().sub(z.position).normalize().multiplyScalar(-ge);this.cameraPosition(De,J,b)}}return this},getBbox:function(f){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},b=new uo.Box3(new uo.Vector3(0,0,0),new uo.Vector3(0,0,0)),I=f.objects.filter(g);return I.length?(I.forEach(function(z){return b.expandByObject(z)}),Object.assign.apply(Object,Kh(["x","y","z"].map(function(z){return hm({},z,[b.min[z],b.max[z]])})))):null},getScreenCoords:function(f,g,b,I){var z=new uo.Vector3(g,b,I);return z.project(this.camera()),{x:(z.x+1)*f.width/2,y:-(z.y-1)*f.height/2}},getSceneCoords:function(f,g,b){var I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,z=new uo.Vector2(g/f.width*2-1,-b/f.height*2+1),J=new uo.Raycaster;return J.setFromCamera(z,f.camera),Object.assign({},J.ray.at(I,new uo.Vector3))},intersectingObjects:function(f,g,b){var I=new uo.Vector2(g/f.width*2-1,-b/f.height*2+1),z=new uo.Raycaster;return z.params.Line.threshold=f.lineHoverPrecision,z.setFromCamera(I,f.camera),z.intersectObjects(f.objects,!0)},renderer:function(f){return f.renderer},scene:function(f){return f.scene},camera:function(f){return f.camera},postProcessingComposer:function(f){return f.postProcessingComposer},controls:function(f){return f.controls},tbControls:function(f){return f.controls}},stateInit:function(){return{scene:new uo.Scene,camera:new uo.PerspectiveCamera,clock:new uo.Clock}},init:function(f,g){var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},I=b.controlType,z=void 0===I?"trackball":I,J=b.rendererConfig,re=void 0===J?{}:J,me=b.extraRenderers,ue=void 0===me?[]:me,Te=b.waitForLoadComplete,ge=void 0===Te||Te;f.innerHTML="",f.appendChild(g.container=document.createElement("div")),g.container.className="scene-container",g.container.style.position="relative",g.container.appendChild(g.navInfo=document.createElement("div")),g.navInfo.className="scene-nav-info",g.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[z]||"",g.navInfo.style.display=g.showNavInfo?null:"none",g.toolTipElem=document.createElement("div"),g.toolTipElem.classList.add("scene-tooltip"),g.container.appendChild(g.toolTipElem),g.pointerPos=new uo.Vector2,g.pointerPos.x=-2,g.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(De){return g.container.addEventListener(De,function(Ge){if("pointerdown"===De&&(g.isPointerPressed=!0),!g.isPointerDragging&&"pointermove"===Ge.type&&(Ge.pressure>0||g.isPointerPressed)&&("touch"!==Ge.pointerType||void 0===Ge.movementX||[Ge.movementX,Ge.movementY].some(function(Ze){return Math.abs(Ze)>1}))&&(g.isPointerDragging=!0),g.enablePointerInteraction){var ke=(Ie=g.container.getBoundingClientRect(),It=window.pageXOffset||document.documentElement.scrollLeft,wt=window.pageYOffset||document.documentElement.scrollTop,{top:Ie.top+wt,left:Ie.left+It});g.pointerPos.x=Ge.pageX-ke.left,g.pointerPos.y=Ge.pageY-ke.top,g.toolTipElem.style.top="".concat(g.pointerPos.y,"px"),g.toolTipElem.style.left="".concat(g.pointerPos.x,"px"),g.toolTipElem.style.transform="translate(-".concat(g.pointerPos.x/g.width*100,"%, 21px)")}var Ie,It,wt},{passive:!0})}),g.container.addEventListener("pointerup",function(De){g.isPointerPressed=!1,(!g.isPointerDragging||(g.isPointerDragging=!1,g.clickAfterDrag))&&requestAnimationFrame(function(){0===De.button&&g.onClick(g.hoverObj||null,De,g.intersectionPoint),2===De.button&&g.onRightClick&&g.onRightClick(g.hoverObj||null,De,g.intersectionPoint)})},{passive:!0,capture:!0}),g.container.addEventListener("contextmenu",function(De){g.onRightClick&&De.preventDefault()}),g.renderer=new uo.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},re)),g.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),g.container.appendChild(g.renderer.domElement),g.extraRenderers=ue,g.extraRenderers.forEach(function(De){De.domElement.style.position="absolute",De.domElement.style.top="0px",De.domElement.style.pointerEvents="none",g.container.appendChild(De.domElement)}),g.postProcessingComposer=new On(g.renderer),g.postProcessingComposer.addPass(new bs(g.scene,g.camera)),g.controls=new{trackball:_l,orbit:S,fly:he}[z](g.camera,g.renderer.domElement),"fly"===z&&(g.controls.movementSpeed=300,g.controls.rollSpeed=Math.PI/6,g.controls.dragToLook=!0),("trackball"===z||"orbit"===z)&&(g.controls.minDistance=.1,g.controls.maxDistance=g.skyRadius,g.controls.addEventListener("start",function(){g.controlsEngaged=!0}),g.controls.addEventListener("change",function(){g.controlsEngaged&&(g.controlsDragging=!0)}),g.controls.addEventListener("end",function(){g.controlsEngaged=!1,g.controlsDragging=!1})),[g.renderer,g.postProcessingComposer].concat(Kh(g.extraRenderers)).forEach(function(De){return De.setSize(g.width,g.height)}),g.camera.aspect=g.width/g.height,g.camera.updateProjectionMatrix(),g.camera.position.z=1e3,g.scene.add(g.skysphere=new uo.Mesh),g.skysphere.visible=!1,g.loadComplete=g.scene.visible=!ge,window.scene=g.scene},update:function(f,g){if(f.width&&f.height&&(g.hasOwnProperty("width")||g.hasOwnProperty("height"))&&(f.container.style.width=f.width,f.container.style.height=f.height,[f.renderer,f.postProcessingComposer].concat(Kh(f.extraRenderers)).forEach(function(z){return z.setSize(f.width,f.height)}),f.camera.aspect=f.width/f.height,f.camera.updateProjectionMatrix()),g.hasOwnProperty("skyRadius")&&f.skyRadius&&(f.controls.hasOwnProperty("maxDistance")&&g.skyRadius&&(f.controls.maxDistance=f.skyRadius),f.camera.far=2.5*f.skyRadius,f.camera.updateProjectionMatrix(),f.skysphere.geometry=new uo.SphereGeometry(f.skyRadius)),g.hasOwnProperty("backgroundColor")){var b=gn(f.backgroundColor).alpha;void 0===b&&(b=1),f.renderer.setClearColor(new uo.Color(lh(1,f.backgroundColor)),b)}function I(){f.loadComplete=f.scene.visible=!0}g.hasOwnProperty("backgroundImageUrl")&&(f.backgroundImageUrl?(new uo.TextureLoader).load(f.backgroundImageUrl,function(z){f.skysphere.material=new uo.MeshBasicMaterial({map:z,side:uo.BackSide}),f.skysphere.visible=!0,f.onBackgroundImageLoaded&&setTimeout(f.onBackgroundImageLoaded),!f.loadComplete&&I()}):(f.skysphere.visible=!1,f.skysphere.material.map=null,!f.loadComplete&&I())),g.hasOwnProperty("showNavInfo")&&(f.navInfo.style.display=f.showNavInfo?null:"none"),g.hasOwnProperty("objects")&&((g.objects||[]).forEach(function(z){return f.scene.remove(z)}),f.objects.forEach(function(z){return f.scene.add(z)}))}});function Zh(d,f){var g=Object.keys(d);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(d);f&&(b=b.filter(function(I){return Object.getOwnPropertyDescriptor(d,I).enumerable})),g.push.apply(g,b)}return g}function zf(d){for(var f=1;f<arguments.length;f++){var g=null!=arguments[f]?arguments[f]:{};f%2?Zh(Object(g),!0).forEach(function(b){Jh(d,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):Zh(Object(g)).forEach(function(b){Object.defineProperty(d,b,Object.getOwnPropertyDescriptor(g,b))})}return d}function Jh(d,f,g){return f in d?Object.defineProperty(d,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[f]=g,d}function dh(d){return function(d){if(Array.isArray(d))return Hf(d)}(d)||function(d){if("undefined"!=typeof Symbol&&null!=d[Symbol.iterator]||null!=d["@@iterator"])return Array.from(d)}(d)||function(d,f){if(d){if("string"==typeof d)return Hf(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);if("Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g)return Array.from(d);if("Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return Hf(d,f)}}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hf(d,f){(null==f||f>d.length)&&(f=d.length);for(var g=0,b=new Array(f);g<f;g++)b[g]=d[g];return b}function ph(d,f){var g=new f;return{linkProp:function(I){return{default:g[I](),onChange:function(J,re){re[d][I](J)},triggerUpdate:!1}},linkMethod:function(I){return function(z){for(var J=z[d],re=arguments.length,me=new Array(re>1?re-1:0),ue=1;ue<re;ue++)me[ue-1]=arguments[ue];var Te=J[I].apply(J,me);return Te===J?this:Te}}}}!function(d,f){void 0===f&&(f={});var g=f.insertAt;if("undefined"!=typeof document){var b=document.head||document.getElementsByTagName("head")[0],I=document.createElement("style");I.type="text/css","top"===g&&b.firstChild?b.insertBefore(I,b.firstChild):b.appendChild(I),I.styleSheet?I.styleSheet.cssText=d:I.appendChild(document.createTextNode(d))}}(".graph-info-msg {\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: lavender;\n  opacity: 0.7;\n  font-size: 22px;\n  position: absolute;\n  font-family: Sans-serif;\n}\n\n.scene-container .clickable {\n  cursor: pointer;\n}\n\n.scene-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.scene-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}");var Gf=window.THREE?window.THREE:{AmbientLight:G.Mig,DirectionalLight:G.Ox3,Vector3:G.Pa4},zd=ph("forceGraph",ks),ho=Object.assign.apply(Object,dh(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(d){return Jh({},d,zd.linkProp(d))}))),vm=Object.assign.apply(Object,dh(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(d){return Jh({},d,zd.linkMethod(d))}))),ef=ph("renderObjs",pm),Wf=Object.assign.apply(Object,dh(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(d){return Jh({},d,ef.linkProp(d))}))),Hd=Object.assign.apply(Object,dh(["cameraPosition","postProcessingComposer"].map(function(d){return Jh({},d,ef.linkMethod(d))})).concat([{graph2ScreenCoords:ef.linkMethod("getScreenCoords"),screen2GraphCoords:ef.linkMethod("getSceneCoords")}]));function bc(d){for(var f=d;f&&!f.hasOwnProperty("__graphObjType");)f=f.parent;return f}const bm=xt({props:zf(zf({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(f,g){return g.renderObjs.lineHoverPrecision(f)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(f,g){var b=g.renderObjs.controls();b&&(b.enabled=f)},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},ho),Wf),methods:zf(zf({zoomToFit:function(f,g,b){for(var I,z=arguments.length,J=new Array(z>3?z-3:0),re=3;re<z;re++)J[re-3]=arguments[re];return f.renderObjs.fitToBbox((I=f.forceGraph).getGraphBbox.apply(I,J),g,b),this},pauseAnimation:function(f){return null!==f.animationFrameRequestId&&(cancelAnimationFrame(f.animationFrameRequestId),f.animationFrameRequestId=null),this},resumeAnimation:function(f){return null===f.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(f){f.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),f.forceGraph.tickFrame(),f.renderObjs.tick(),f.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(f){return f.renderObjs.scene()},camera:function(f){return f.renderObjs.camera()},renderer:function(f){return f.renderObjs.renderer()},controls:function(f){return f.renderObjs.controls()},tbControls:function(f){return f.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},vm),Hd),stateInit:function(f){var g=f.controlType,b=f.rendererConfig,I=f.extraRenderers;return{forceGraph:new ks,renderObjs:pm({controlType:g,rendererConfig:b,extraRenderers:I})}},init:function(f,g){f.innerHTML="",f.appendChild(g.container=document.createElement("div")),g.container.style.position="relative";var b=document.createElement("div");g.container.appendChild(b),g.renderObjs(b);var re,I=g.renderObjs.camera(),z=g.renderObjs.renderer(),J=g.renderObjs.controls();J.enabled=!!g.enableNavigationControls,g.lastSetCameraZ=I.position.z,g.container.appendChild(re=document.createElement("div")),re.className="graph-info-msg",re.textContent="",g.forceGraph.onLoading(function(){re.textContent="Loading..."}).onFinishLoading(function(){re.textContent=""}).onUpdate(function(){g.graphData=g.forceGraph.graphData(),0===I.position.x&&0===I.position.y&&I.position.z===g.lastSetCameraZ&&g.graphData.nodes.length&&(I.lookAt(g.forceGraph.position),g.lastSetCameraZ=I.position.z=170*Math.cbrt(g.graphData.nodes.length))}).onFinishUpdate(function(){if(g._dragControls){var me=g.graphData.nodes.find(function(Te){return Te.__initialFixedPos&&!Te.__disposeControlsAfterDrag});me?me.__disposeControlsAfterDrag=!0:g._dragControls.dispose(),g._dragControls=void 0}if(g.enableNodeDrag&&g.enablePointerInteraction&&"d3"===g.forceEngine){var ue=g._dragControls=new ze(g.graphData.nodes.map(function(Te){return Te.__threeObj}).filter(function(Te){return Te}),I,z.domElement);ue.addEventListener("dragstart",function(Te){J.enabled=!1,Te.object.__initialPos=Te.object.position.clone(),Te.object.__prevPos=Te.object.position.clone();var ge=bc(Te.object).__data;!ge.__initialFixedPos&&(ge.__initialFixedPos={fx:ge.fx,fy:ge.fy,fz:ge.fz}),!ge.__initialPos&&(ge.__initialPos={x:ge.x,y:ge.y,z:ge.z}),["x","y","z"].forEach(function(De){return ge["f".concat(De)]=ge[De]}),z.domElement.classList.add("grabbable")}),ue.addEventListener("drag",function(Te){var ge=bc(Te.object);if(!Te.object.hasOwnProperty("__graphObjType")){var De=Te.object.__initialPos,Ge=Te.object.__prevPos,ke=Te.object.position;ge.position.add(ke.clone().sub(Ge)),Ge.copy(ke),ke.copy(De)}var et=ge.__data,Ze=ge.position,Ie={x:Ze.x-et.x,y:Ze.y-et.y,z:Ze.z-et.z};["x","y","z"].forEach(function(It){return et["f".concat(It)]=et[It]=Ze[It]}),g.forceGraph.d3AlphaTarget(.3).resetCountdown(),et.__dragged=!0,g.onNodeDrag(et,Ie)}),ue.addEventListener("dragend",function(Te){delete Te.object.__initialPos,delete Te.object.__prevPos;var ge=bc(Te.object).__data;ge.__disposeControlsAfterDrag&&(ue.dispose(),delete ge.__disposeControlsAfterDrag);var De=ge.__initialFixedPos,Ge=ge.__initialPos,ke={x:Ge.x-ge.x,y:Ge.y-ge.y,z:Ge.z-ge.z};De&&(["x","y","z"].forEach(function(et){var Ze="f".concat(et);void 0===De[Ze]&&delete ge[Ze]}),delete ge.__initialFixedPos,delete ge.__initialPos,ge.__dragged&&(delete ge.__dragged,g.onNodeDragEnd(ge,ke))),g.forceGraph.d3AlphaTarget(0).resetCountdown(),g.enableNavigationControls&&(J.enabled=!0,J.domElement&&J.domElement.ownerDocument&&J.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),z.domElement.classList.remove("grabbable")})}}),g.renderObjs.objects([new Gf.AmbientLight(12303291),new Gf.DirectionalLight(16777215,.6),g.forceGraph]).hoverOrderComparator(function(me,ue){var Te=bc(me);if(!Te)return 1;var ge=bc(ue);if(!ge)return-1;var De=function(ke){return"node"===ke.__graphObjType};return De(ge)-De(Te)}).tooltipContent(function(me){var ue=bc(me);return ue&&bn(g["".concat(ue.__graphObjType,"Label")])(ue.__data)||""}).hoverDuringDrag(!1).onHover(function(me){var ue=bc(me);if(ue!==g.hoverObj){var Te=g.hoverObj?g.hoverObj.__graphObjType:null,ge=g.hoverObj?g.hoverObj.__data:null,De=ue?ue.__graphObjType:null,Ge=ue?ue.__data:null;if(Te&&Te!==De){var ke=g["on".concat("node"===Te?"Node":"Link","Hover")];ke&&ke(null,ge)}if(De){var et=g["on".concat("node"===De?"Node":"Link","Hover")];et&&et(Ge,Te===De?ge:null)}z.domElement.classList[ue&&g["on".concat("node"===De?"Node":"Link","Click")]||!ue&&g.onBackgroundClick?"add":"remove"]("clickable"),g.hoverObj=ue}}).clickAfterDrag(!1).onClick(function(me,ue){var Te=bc(me);if(Te){var ge=g["on".concat("node"===Te.__graphObjType?"Node":"Link","Click")];ge&&ge(Te.__data,ue)}else g.onBackgroundClick&&g.onBackgroundClick(ue)}).onRightClick(function(me,ue){var Te=bc(me);if(Te){var ge=g["on".concat("node"===Te.__graphObjType?"Node":"Link","RightClick")];ge&&ge(Te.__data,ue)}else g.onBackgroundRightClick&&g.onBackgroundRightClick(ue)}),this._animationCycle()}})},7238:(jt,mt,ae)=>{"use strict";ae.d(mt,{l3:()=>Be,_j:()=>G,LC:()=>Y,ZN:()=>Jt,jt:()=>_e,vP:()=>Re,SB:()=>ze,oB:()=>Ne,eR:()=>te,X$:()=>Je,ZE:()=>Yt,k1:()=>qt});class G{}class Y{}const Be="*";function Je(Ot,dt){return{type:7,name:Ot,definitions:dt,options:{}}}function _e(Ot,dt=null){return{type:4,styles:dt,timings:Ot}}function Re(Ot,dt=null){return{type:2,steps:Ot,options:dt}}function Ne(Ot){return{type:6,styles:Ot,offset:null}}function ze(Ot,dt,Mn){return{type:0,name:Ot,styles:dt,options:Mn}}function te(Ot,dt,Mn=null){return{type:1,expr:Ot,animation:dt,options:Mn}}function gt(Ot){Promise.resolve(null).then(Ot)}class Jt{constructor(dt=0,Mn=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=dt+Mn}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(dt=>dt()),this._onDoneFns=[])}onStart(dt){this._onStartFns.push(dt)}onDone(dt){this._onDoneFns.push(dt)}onDestroy(dt){this._onDestroyFns.push(dt)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){gt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(dt=>dt()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(dt=>dt()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(dt){this._position=this.totalTime?dt*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(dt){const Mn="start"==dt?this._onStartFns:this._onDoneFns;Mn.forEach(fn=>fn()),Mn.length=0}}class Yt{constructor(dt){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=dt;let Mn=0,fn=0,Gn=0;const ut=this.players.length;0==ut?gt(()=>this._onFinish()):this.players.forEach(Wt=>{Wt.onDone(()=>{++Mn==ut&&this._onFinish()}),Wt.onDestroy(()=>{++fn==ut&&this._onDestroy()}),Wt.onStart(()=>{++Gn==ut&&this._onStart()})}),this.totalTime=this.players.reduce((Wt,Tn)=>Math.max(Wt,Tn.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(dt=>dt()),this._onDoneFns=[])}init(){this.players.forEach(dt=>dt.init())}onStart(dt){this._onStartFns.push(dt)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(dt=>dt()),this._onStartFns=[])}onDone(dt){this._onDoneFns.push(dt)}onDestroy(dt){this._onDestroyFns.push(dt)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(dt=>dt.play())}pause(){this.players.forEach(dt=>dt.pause())}restart(){this.players.forEach(dt=>dt.restart())}finish(){this._onFinish(),this.players.forEach(dt=>dt.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(dt=>dt.destroy()),this._onDestroyFns.forEach(dt=>dt()),this._onDestroyFns=[])}reset(){this.players.forEach(dt=>dt.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(dt){const Mn=dt*this.totalTime;this.players.forEach(fn=>{const Gn=fn.totalTime?Math.min(1,Mn/fn.totalTime):1;fn.setPosition(Gn)})}getPosition(){const dt=this.players.reduce((Mn,fn)=>null===Mn||fn.totalTime>Mn.totalTime?fn:Mn,null);return null!=dt?dt.getPosition():0}beforeDestroy(){this.players.forEach(dt=>{dt.beforeDestroy&&dt.beforeDestroy()})}triggerCallback(dt){const Mn="start"==dt?this._onStartFns:this._onDoneFns;Mn.forEach(fn=>fn()),Mn.length=0}}const qt="!"},8583:(jt,mt,ae)=>{"use strict";ae.d(mt,{mr:()=>Yt,Ov:()=>al,ez:()=>Ga,K0:()=>Re,Do:()=>Ot,V_:()=>ne,Ye:()=>dt,S$:()=>gt,mk:()=>ir,sg:()=>os,O5:()=>Go,PC:()=>io,b0:()=>qt,lw:()=>Ne,EM:()=>gl,JF:()=>ys,w_:()=>Me,bD:()=>ja,q:()=>Be,Mx:()=>xt,HT:()=>_e});var G=ae(639);let Y=null;function Be(){return Y}function _e(H){Y||(Y=H)}class Me{}const Re=new G.OlP("DocumentToken");let Ne=(()=>{class H{historyGo(j){throw new Error("Not implemented")}}return H.\u0275fac=function(j){return new(j||H)},H.\u0275prov=(0,G.Yz7)({factory:ze,token:H,providedIn:"platform"}),H})();function ze(){return(0,G.LFG)(te)}const ne=new G.OlP("Location Initialized");let te=(()=>{class H extends Ne{constructor(j){super(),this._doc=j,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Be().getBaseHref(this._doc)}onPopState(j){const oe=Be().getGlobalEventTarget(this._doc,"window");return oe.addEventListener("popstate",j,!1),()=>oe.removeEventListener("popstate",j)}onHashChange(j){const oe=Be().getGlobalEventTarget(this._doc,"window");return oe.addEventListener("hashchange",j,!1),()=>oe.removeEventListener("hashchange",j)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(j){this.location.pathname=j}pushState(j,oe,Ve){xe()?this._history.pushState(j,oe,Ve):this.location.hash=Ve}replaceState(j,oe,Ve){xe()?this._history.replaceState(j,oe,Ve):this.location.hash=Ve}forward(){this._history.forward()}back(){this._history.back()}historyGo(j=0){this._history.go(j)}getState(){return this._history.state}}return H.\u0275fac=function(j){return new(j||H)(G.LFG(Re))},H.\u0275prov=(0,G.Yz7)({factory:Ue,token:H,providedIn:"platform"}),H})();function xe(){return!!window.history.pushState}function Ue(){return new te((0,G.LFG)(Re))}function He(H,ee){if(0==H.length)return ee;if(0==ee.length)return H;let j=0;return H.endsWith("/")&&j++,ee.startsWith("/")&&j++,2==j?H+ee.substring(1):1==j?H+ee:H+"/"+ee}function tt(H){const ee=H.match(/#|\?|$/),j=ee&&ee.index||H.length;return H.slice(0,j-("/"===H[j-1]?1:0))+H.slice(j)}function We(H){return H&&"?"!==H[0]?"?"+H:H}let gt=(()=>{class H{historyGo(j){throw new Error("Not implemented")}}return H.\u0275fac=function(j){return new(j||H)},H.\u0275prov=(0,G.Yz7)({factory:Jt,token:H,providedIn:"root"}),H})();function Jt(H){const ee=(0,G.LFG)(Re).location;return new qt((0,G.LFG)(Ne),ee&&ee.origin||"")}const Yt=new G.OlP("appBaseHref");let qt=(()=>{class H extends gt{constructor(j,oe){if(super(),this._platformLocation=j,this._removeListenerFns=[],null==oe&&(oe=this._platformLocation.getBaseHrefFromDOM()),null==oe)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=oe}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}prepareExternalUrl(j){return He(this._baseHref,j)}path(j=!1){const oe=this._platformLocation.pathname+We(this._platformLocation.search),Ve=this._platformLocation.hash;return Ve&&j?`${oe}${Ve}`:oe}pushState(j,oe,Ve,Mt){const zt=this.prepareExternalUrl(Ve+We(Mt));this._platformLocation.pushState(j,oe,zt)}replaceState(j,oe,Ve,Mt){const zt=this.prepareExternalUrl(Ve+We(Mt));this._platformLocation.replaceState(j,oe,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var oe,Ve;null===(Ve=(oe=this._platformLocation).historyGo)||void 0===Ve||Ve.call(oe,j)}}return H.\u0275fac=function(j){return new(j||H)(G.LFG(Ne),G.LFG(Yt,8))},H.\u0275prov=G.Yz7({token:H,factory:H.\u0275fac}),H})(),Ot=(()=>{class H extends gt{constructor(j,oe){super(),this._platformLocation=j,this._baseHref="",this._removeListenerFns=[],null!=oe&&(this._baseHref=oe)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}path(j=!1){let oe=this._platformLocation.hash;return null==oe&&(oe="#"),oe.length>0?oe.substring(1):oe}prepareExternalUrl(j){const oe=He(this._baseHref,j);return oe.length>0?"#"+oe:oe}pushState(j,oe,Ve,Mt){let zt=this.prepareExternalUrl(Ve+We(Mt));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.pushState(j,oe,zt)}replaceState(j,oe,Ve,Mt){let zt=this.prepareExternalUrl(Ve+We(Mt));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.replaceState(j,oe,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var oe,Ve;null===(Ve=(oe=this._platformLocation).historyGo)||void 0===Ve||Ve.call(oe,j)}}return H.\u0275fac=function(j){return new(j||H)(G.LFG(Ne),G.LFG(Yt,8))},H.\u0275prov=G.Yz7({token:H,factory:H.\u0275fac}),H})(),dt=(()=>{class H{constructor(j,oe){this._subject=new G.vpe,this._urlChangeListeners=[],this._platformStrategy=j;const Ve=this._platformStrategy.getBaseHref();this._platformLocation=oe,this._baseHref=tt(Gn(Ve)),this._platformStrategy.onPopState(Mt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Mt.state,type:Mt.type})})}path(j=!1){return this.normalize(this._platformStrategy.path(j))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(j,oe=""){return this.path()==this.normalize(j+We(oe))}normalize(j){return H.stripTrailingSlash(function(H,ee){return H&&ee.startsWith(H)?ee.substring(H.length):ee}(this._baseHref,Gn(j)))}prepareExternalUrl(j){return j&&"/"!==j[0]&&(j="/"+j),this._platformStrategy.prepareExternalUrl(j)}go(j,oe="",Ve=null){this._platformStrategy.pushState(Ve,"",j,oe),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+We(oe)),Ve)}replaceState(j,oe="",Ve=null){this._platformStrategy.replaceState(Ve,"",j,oe),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+We(oe)),Ve)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(j=0){var oe,Ve;null===(Ve=(oe=this._platformStrategy).historyGo)||void 0===Ve||Ve.call(oe,j)}onUrlChange(j){this._urlChangeListeners.push(j),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(oe=>{this._notifyUrlChangeListeners(oe.url,oe.state)}))}_notifyUrlChangeListeners(j="",oe){this._urlChangeListeners.forEach(Ve=>Ve(j,oe))}subscribe(j,oe,Ve){return this._subject.subscribe({next:j,error:oe,complete:Ve})}}return H.\u0275fac=function(j){return new(j||H)(G.LFG(gt),G.LFG(Ne))},H.normalizeQueryParams=We,H.joinWithSlash=He,H.stripTrailingSlash=tt,H.\u0275prov=(0,G.Yz7)({factory:Mn,token:H,providedIn:"root"}),H})();function Mn(){return new dt((0,G.LFG)(gt),(0,G.LFG)(Ne))}function Gn(H){return H.replace(/\/index.html$/,"")}var Tn=(()=>((Tn=Tn||{})[Tn.Zero=0]="Zero",Tn[Tn.One=1]="One",Tn[Tn.Two=2]="Two",Tn[Tn.Few=3]="Few",Tn[Tn.Many=4]="Many",Tn[Tn.Other=5]="Other",Tn))();const ye=G.kL8;class Xe{}let ve=(()=>{class H extends Xe{constructor(j){super(),this.locale=j}getPluralCategory(j,oe){switch(ye(oe||this.locale)(j)){case Tn.Zero:return"zero";case Tn.One:return"one";case Tn.Two:return"two";case Tn.Few:return"few";case Tn.Many:return"many";default:return"other"}}}return H.\u0275fac=function(j){return new(j||H)(G.LFG(G.soG))},H.\u0275prov=G.Yz7({token:H,factory:H.\u0275fac}),H})();function xt(H,ee){ee=encodeURIComponent(ee);for(const j of H.split(";")){const oe=j.indexOf("="),[Ve,Mt]=-1==oe?[j,""]:[j.slice(0,oe),j.slice(oe+1)];if(Ve.trim()===ee)return decodeURIComponent(Mt)}return null}let ir=(()=>{class H{constructor(j,oe,Ve,Mt){this._iterableDiffers=j,this._keyValueDiffers=oe,this._ngEl=Ve,this._renderer=Mt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(j){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof j?j.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(j){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof j?j.split(/\s+/):j,this._rawClass&&((0,G.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const j=this._iterableDiffer.diff(this._rawClass);j&&this._applyIterableChanges(j)}else if(this._keyValueDiffer){const j=this._keyValueDiffer.diff(this._rawClass);j&&this._applyKeyValueChanges(j)}}_applyKeyValueChanges(j){j.forEachAddedItem(oe=>this._toggleClass(oe.key,oe.currentValue)),j.forEachChangedItem(oe=>this._toggleClass(oe.key,oe.currentValue)),j.forEachRemovedItem(oe=>{oe.previousValue&&this._toggleClass(oe.key,!1)})}_applyIterableChanges(j){j.forEachAddedItem(oe=>{if("string"!=typeof oe.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,G.AaK)(oe.item)}`);this._toggleClass(oe.item,!0)}),j.forEachRemovedItem(oe=>this._toggleClass(oe.item,!1))}_applyClasses(j){j&&(Array.isArray(j)||j instanceof Set?j.forEach(oe=>this._toggleClass(oe,!0)):Object.keys(j).forEach(oe=>this._toggleClass(oe,!!j[oe])))}_removeClasses(j){j&&(Array.isArray(j)||j instanceof Set?j.forEach(oe=>this._toggleClass(oe,!1)):Object.keys(j).forEach(oe=>this._toggleClass(oe,!1)))}_toggleClass(j,oe){(j=j.trim())&&j.split(/\s+/g).forEach(Ve=>{oe?this._renderer.addClass(this._ngEl.nativeElement,Ve):this._renderer.removeClass(this._ngEl.nativeElement,Ve)})}}return H.\u0275fac=function(j){return new(j||H)(G.Y36(G.ZZ4),G.Y36(G.aQg),G.Y36(G.SBq),G.Y36(G.Qsj))},H.\u0275dir=G.lG2({type:H,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),H})();class Bn{constructor(ee,j,oe,Ve){this.$implicit=ee,this.ngForOf=j,this.index=oe,this.count=Ve}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let os=(()=>{class H{constructor(j,oe,Ve){this._viewContainer=j,this._template=oe,this._differs=Ve,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(j){this._ngForOf=j,this._ngForOfDirty=!0}set ngForTrackBy(j){this._trackByFn=j}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(j){j&&(this._template=j)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const j=this._ngForOf;if(!this._differ&&j)try{this._differ=this._differs.find(j).create(this.ngForTrackBy)}catch(oe){throw new Error(`Cannot find a differ supporting object '${j}' of type '${function(H){return H.name||typeof H}(j)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const j=this._differ.diff(this._ngForOf);j&&this._applyChanges(j)}}_applyChanges(j){const oe=[];j.forEachOperation((Ve,Mt,zt)=>{if(null==Ve.previousIndex){const or=this._viewContainer.createEmbeddedView(this._template,new Bn(null,this._ngForOf,-1,-1),null===zt?void 0:zt),yr=new bo(Ve,or);oe.push(yr)}else if(null==zt)this._viewContainer.remove(null===Mt?void 0:Mt);else if(null!==Mt){const or=this._viewContainer.get(Mt);this._viewContainer.move(or,zt);const yr=new bo(Ve,or);oe.push(yr)}});for(let Ve=0;Ve<oe.length;Ve++)this._perViewChange(oe[Ve].view,oe[Ve].record);for(let Ve=0,Mt=this._viewContainer.length;Ve<Mt;Ve++){const zt=this._viewContainer.get(Ve);zt.context.index=Ve,zt.context.count=Mt,zt.context.ngForOf=this._ngForOf}j.forEachIdentityChange(Ve=>{this._viewContainer.get(Ve.currentIndex).context.$implicit=Ve.item})}_perViewChange(j,oe){j.context.$implicit=oe.item}static ngTemplateContextGuard(j,oe){return!0}}return H.\u0275fac=function(j){return new(j||H)(G.Y36(G.s_b),G.Y36(G.Rgc),G.Y36(G.ZZ4))},H.\u0275dir=G.lG2({type:H,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),H})();class bo{constructor(ee,j){this.record=ee,this.view=j}}let Go=(()=>{class H{constructor(j,oe){this._viewContainer=j,this._context=new Ss,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=oe}set ngIf(j){this._context.$implicit=this._context.ngIf=j,this._updateView()}set ngIfThen(j){xo("ngIfThen",j),this._thenTemplateRef=j,this._thenViewRef=null,this._updateView()}set ngIfElse(j){xo("ngIfElse",j),this._elseTemplateRef=j,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(j,oe){return!0}}return H.\u0275fac=function(j){return new(j||H)(G.Y36(G.s_b),G.Y36(G.Rgc))},H.\u0275dir=G.lG2({type:H,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),H})();class Ss{constructor(){this.$implicit=null,this.ngIf=null}}function xo(H,ee){if(ee&&!ee.createEmbeddedView)throw new Error(`${H} must be a TemplateRef, but received '${(0,G.AaK)(ee)}'.`)}let io=(()=>{class H{constructor(j,oe,Ve){this._ngEl=j,this._differs=oe,this._renderer=Ve,this._ngStyle=null,this._differ=null}set ngStyle(j){this._ngStyle=j,!this._differ&&j&&(this._differ=this._differs.find(j).create())}ngDoCheck(){if(this._differ){const j=this._differ.diff(this._ngStyle);j&&this._applyChanges(j)}}_setStyle(j,oe){const[Ve,Mt]=j.split(".");null!=(oe=null!=oe&&Mt?`${oe}${Mt}`:oe)?this._renderer.setStyle(this._ngEl.nativeElement,Ve,oe):this._renderer.removeStyle(this._ngEl.nativeElement,Ve)}_applyChanges(j){j.forEachRemovedItem(oe=>this._setStyle(oe.key,null)),j.forEachAddedItem(oe=>this._setStyle(oe.key,oe.currentValue)),j.forEachChangedItem(oe=>this._setStyle(oe.key,oe.currentValue))}}return H.\u0275fac=function(j){return new(j||H)(G.Y36(G.SBq),G.Y36(G.aQg),G.Y36(G.Qsj))},H.\u0275dir=G.lG2({type:H,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),H})();class ol{createSubscription(ee,j){return ee.subscribe({next:j,error:oe=>{throw oe}})}dispose(ee){ee.unsubscribe()}onDestroy(ee){ee.unsubscribe()}}class Lo{createSubscription(ee,j){return ee.then(j,oe=>{throw oe})}dispose(ee){}onDestroy(ee){}}const Os=new Lo,ba=new ol;let al=(()=>{class H{constructor(j){this._ref=j,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(j){return this._obj?j!==this._obj?(this._dispose(),this.transform(j)):this._latestValue:(j&&this._subscribe(j),this._latestValue)}_subscribe(j){this._obj=j,this._strategy=this._selectStrategy(j),this._subscription=this._strategy.createSubscription(j,oe=>this._updateLatestValue(j,oe))}_selectStrategy(j){if((0,G.QGY)(j))return Os;if((0,G.F4k)(j))return ba;throw function(H,ee){return Error(`InvalidPipeArgument: '${ee}' for pipe '${(0,G.AaK)(H)}'`)}(H,j)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(j,oe){j===this._obj&&(this._latestValue=oe,this._ref.markForCheck())}}return H.\u0275fac=function(j){return new(j||H)(G.Y36(G.sBO,16))},H.\u0275pipe=G.Yjl({name:"async",type:H,pure:!1}),H})(),Ga=(()=>{class H{}return H.\u0275fac=function(j){return new(j||H)},H.\u0275mod=G.oAB({type:H}),H.\u0275inj=G.cJS({providers:[{provide:Xe,useClass:ve}]}),H})();const ja="browser";let gl=(()=>{class H{}return H.\u0275prov=(0,G.Yz7)({token:H,providedIn:"root",factory:()=>new Ql((0,G.LFG)(Re),window)}),H})();class Ql{constructor(ee,j){this.document=ee,this.window=j,this.offset=()=>[0,0]}setOffset(ee){this.offset=Array.isArray(ee)?()=>ee:ee}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ee){this.supportsScrolling()&&this.window.scrollTo(ee[0],ee[1])}scrollToAnchor(ee){if(!this.supportsScrolling())return;const j=function(H,ee){const j=H.getElementById(ee)||H.getElementsByName(ee)[0];if(j)return j;if("function"==typeof H.createTreeWalker&&H.body&&(H.body.createShadowRoot||H.body.attachShadow)){const oe=H.createTreeWalker(H.body,NodeFilter.SHOW_ELEMENT);let Ve=oe.currentNode;for(;Ve;){const Mt=Ve.shadowRoot;if(Mt){const zt=Mt.getElementById(ee)||Mt.querySelector(`[name="${ee}"]`);if(zt)return zt}Ve=oe.nextNode()}}return null}(this.document,ee);j&&(this.scrollToElement(j),this.attemptFocus(j))}setHistoryScrollRestoration(ee){if(this.supportScrollRestoration()){const j=this.window.history;j&&j.scrollRestoration&&(j.scrollRestoration=ee)}}scrollToElement(ee){const j=ee.getBoundingClientRect(),oe=j.left+this.window.pageXOffset,Ve=j.top+this.window.pageYOffset,Mt=this.offset();this.window.scrollTo(oe-Mt[0],Ve-Mt[1])}attemptFocus(ee){return ee.focus(),this.document.activeElement===ee}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ee=da(this.window.history)||da(Object.getPrototypeOf(this.window.history));return!(!ee||!ee.writable&&!ee.set)}catch(ee){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ee){return!1}}}function da(H){return Object.getOwnPropertyDescriptor(H,"scrollRestoration")}class ys{}},639:(jt,mt,ae)=>{"use strict";ae.d(mt,{deG:()=>Ei,tb:()=>OE,AFp:()=>PE,ip1:()=>Wb,CZH:()=>Gp,hGG:()=>tC,z2F:()=>iy,sBO:()=>$M,Sil:()=>ry,_Vd:()=>Ja,EJc:()=>FE,SBq:()=>Qu,qLn:()=>Ko,vpe:()=>Zu,gxx:()=>Wl,tBr:()=>ch,XFs:()=>Xn,OlP:()=>mr,zs3:()=>ds,ZZ4:()=>uv,aQg:()=>hv,soG:()=>wv,YKP:()=>bw,v3s:()=>OT,h0i:()=>Md,PXZ:()=>AT,R0b:()=>Ic,FiY:()=>Fc,Lbi:()=>LE,g9A:()=>IE,Qsj:()=>PM,FYo:()=>cv,JOm:()=>Co,Tiy:()=>_b,q3G:()=>ho,tp0:()=>ru,EAV:()=>BT,Rgc:()=>Wg,dDg:()=>VE,DyG:()=>lr,GfV:()=>fw,s_b:()=>pv,ifc:()=>Jn,eFA:()=>$E,G48:()=>xT,_c5:()=>YT,VLi:()=>bT,c2e:()=>NE,zSh:()=>Wc,wAp:()=>r,vHH:()=>Mn,EiD:()=>Gf,mCW:()=>fh,qzn:()=>La,JVY:()=>im,pB0:()=>lm,eBb:()=>om,L6k:()=>sm,LAX:()=>am,cg1:()=>nv,Tjo:()=>$T,kL8:()=>pb,yhl:()=>Fd,dqk:()=>sr,sIi:()=>dd,CqO:()=>Ap,QGY:()=>Cp,F4k:()=>V_,RDi:()=>Mt,AaK:()=>We,z3N:()=>_c,qOj:()=>bf,TTD:()=>Fs,xp6:()=>Py,uIk:()=>Ef,Suo:()=>lE,Xpm:()=>cs,lG2:()=>il,Yz7:()=>ye,cJS:()=>Se,oAB:()=>mo,Yjl:()=>Ua,Y36:()=>Tf,_UZ:()=>B_,qZA:()=>Dg,TgZ:()=>Ag,EpF:()=>Pg,n5z:()=>ie,Ikx:()=>tv,LFG:()=>$s,$8M:()=>$e,NdJ:()=>Dp,CRH:()=>cE,kcU:()=>Un,O4$:()=>Si,oxw:()=>O0,ALo:()=>eE,lcZ:()=>tE,Dn7:()=>nE,gM2:()=>rE,Q6J:()=>Tg,VKq:()=>Yw,iGM:()=>oE,MAs:()=>g0,Jf7:()=>Nn,CHM:()=>F,LSH:()=>Wf,kYT:()=>go,YNc:()=>p0,W1O:()=>dE,_uU:()=>Do,Gf:()=>aE});var G=ae(7574),Y=ae(4869),Be=ae(3282),Je=ae(6693),Me=ae(9765),Re=ae(5319),Ne=ae(2441);var te=ae(1307);function xe(){return new Me.xQ}function He(t){for(let n in t)if(t[n]===He)return n;throw Error("Could not find renamed property on target object.")}function tt(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function We(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(We).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function gt(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Jt=He({__forward_ref__:He});function Yt(t){return t.__forward_ref__=Yt,t.toString=function(){return We(this())},t}function qt(t){return Ot(t)?t():t}function Ot(t){return"function"==typeof t&&t.hasOwnProperty(Jt)&&t.__forward_ref__===Yt}class Mn extends Error{constructor(n,i){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,i)),this.code=n}}function ut(t){return"string"==typeof t?t:null==t?"":String(t)}function Wt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ut(t)}function Fn(t,n){const i=n?` in ${n}`:"";throw new Mn("201",`No provider for ${Wt(t)} found${i}`)}function jn(t,n){null==t&&function(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function ye(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Se(t){return{providers:t.providers||[],imports:t.imports||[]}}function $t(t){return Cn(t,Jr)||Cn(t,Vs)}function Cn(t,n){return t.hasOwnProperty(n)?t[n]:null}function fi(t){return t&&(t.hasOwnProperty(Ti)||t.hasOwnProperty(Ni))?t[Ti]:null}const Jr=He({\u0275prov:He}),Ti=He({\u0275inj:He}),Vs=He({ngInjectableDef:He}),Ni=He({ngInjectorDef:He});var Xn=(()=>((Xn=Xn||{})[Xn.Default=0]="Default",Xn[Xn.Host=1]="Host",Xn[Xn.Self=2]="Self",Xn[Xn.SkipSelf=4]="SkipSelf",Xn[Xn.Optional=8]="Optional",Xn))();let Di;function Ln(t){const n=Di;return Di=t,n}function Po(t,n,i){const o=$t(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&Xn.Optional?null:void 0!==n?n:void Fn(We(t),"Injector")}function ls(t){return{toString:t}.toString()}var Ps=(()=>((Ps=Ps||{})[Ps.OnPush=0]="OnPush",Ps[Ps.Default=1]="Default",Ps))(),Jn=(()=>((Jn=Jn||{})[Jn.Emulated=0]="Emulated",Jn[Jn.None=2]="None",Jn[Jn.ShadowDom=3]="ShadowDom",Jn))();const rl="undefined"!=typeof globalThis&&globalThis,Ri="undefined"!=typeof window&&window,Io="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Rr="undefined"!=typeof global&&global,sr=rl||Rr||Ri||Io,no={},xi=[],ro=He({\u0275cmp:He}),po=He({\u0275dir:He}),Ui=He({\u0275pipe:He}),ua=He({\u0275mod:He}),Ba=He({\u0275loc:He}),qs=He({\u0275fac:He}),Zo=He({__NG_ELEMENT_ID__:He});let gs=0;function cs(t){return ls(()=>{const i={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ps.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||xi,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Jn.Emulated,id:"c",styles:t.styles||xi,_:null,setInput:null,schemas:t.schemas||null,tView:null},l=t.directives,h=t.features,v=t.pipes;return o.id+=gs++,o.inputs=Ho(t.inputs,i),o.outputs=Ho(t.outputs),h&&h.forEach(E=>E(o)),o.directiveDefs=l?()=>("function"==typeof l?l():l).map(_a):null,o.pipeDefs=v?()=>("function"==typeof v?v():v).map(Es):null,o})}function _a(t){return us(t)||function(t){return t[po]||null}(t)}function Es(t){return function(t){return t[Ui]||null}(t)}const Xi={};function mo(t){return ls(()=>{const n={type:t.type,bootstrap:t.bootstrap||xi,declarations:t.declarations||xi,imports:t.imports||xi,exports:t.exports||xi,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Xi[t.id]=t.type),n})}function go(t,n){return ls(()=>{const i=Ms(t,!0);i.declarations=n.declarations||xi,i.imports=n.imports||xi,i.exports=n.exports||xi})}function Ho(t,n){if(null==t)return no;const i={};for(const o in t)if(t.hasOwnProperty(o)){let l=t[o],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),i[l]=o,n&&(n[l]=h)}return i}const il=cs;function Ua(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function us(t){return t[ro]||null}function Ms(t,n){const i=t[ua]||null;if(!i&&!0===n)throw new Error(`Type ${We(t)} does not have '\u0275mod' property.`);return i}function Lo(t){return Array.isArray(t)&&"object"==typeof t[1]}function Os(t){return Array.isArray(t)&&!0===t[1]}function ba(t){return 0!=(8&t.flags)}function al(t){return 2==(2&t.flags)}function Jo(t){return 1==(1&t.flags)}function zs(t){return null!==t.template}function za(t){return 0!=(512&t[2])}function vo(t,n){return t.hasOwnProperty(qs)?t[qs]:null}class ra{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function Fs(){return oo}function oo(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ql),gl}function gl(){const t=Zl(this),n=null==t?void 0:t.current;if(n){const i=t.previous;if(i===no)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function Ql(t,n,i,o){const l=Zl(t)||function(t,n){return t[da]=n}(t,{previous:no,current:null}),h=l.current||(l.current={}),v=l.previous,E=this.declaredInputs[i],D=v[E];h[E]=new ra(D&&D.currentValue,n,v===no),t[o]=n}Fs.ngInherit=!0;const da="__ngSimpleChanges__";function Zl(t){return t[da]||null}const j="http://www.w3.org/2000/svg";let Ve;function Mt(t){Ve=t}function yr(t){return!!t.listen}const zi={createRenderer:(t,n)=>void 0!==Ve?Ve:"undefined"!=typeof document?document:void 0};function kr(t){for(;Array.isArray(t);)t=t[0];return t}function hs(t,n){return kr(n[t.index])}function pa(t,n){return t.data[n]}function ar(t,n){return t[n]}function Hs(t,n){const i=n[t];return Lo(i)?i:i[0]}function yl(t){return 4==(4&t[2])}function wo(t){return 128==(128&t[2])}function $o(t,n){return null==n?null:t[n]}function qo(t){t[18]=0}function Wa(t,n){t[5]+=n;let i=t,o=t[3];for(;null!==o&&(1===n&&1===i[5]||-1===n&&0===i[5]);)o[5]+=n,i=o,o=o[3]}const er={lFrame:$a(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function _l(){return er.bindingsEnabled}function x(){return er.lFrame.lView}function S(){return er.lFrame.tView}function F(t){return er.lFrame.contextLView=t,t[8]}function K(){let t=he();for(;null!==t&&64===t.type;)t=t.parent;return t}function he(){return er.lFrame.currentTNode}function Le(t,n){const i=er.lFrame;i.currentTNode=t,i.isParent=n}function nt(){return er.lFrame.isParent}function Cr(){return er.isInCheckNoChangesMode}function Xr(t){er.isInCheckNoChangesMode=t}function at(){const t=er.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Ci(){return er.lFrame.bindingIndex++}function ci(t,n){const i=er.lFrame;i.bindingIndex=i.bindingRootIndex=t,xs(n)}function xs(t){er.lFrame.currentDirectiveIndex=t}function Hi(){return er.lFrame.currentQueryIndex}function pe(t){er.lFrame.currentQueryIndex=t}function Fl(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Ta(t,n,i){if(i&Xn.SkipSelf){let l=n,h=t;for(;!(l=l.parent,null!==l||i&Xn.Host||(l=Fl(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;n=l,t=h}const o=er.lFrame=Fo();return o.currentTNode=n,o.lView=t,!0}function ts(t){const n=Fo(),i=t[1];er.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Fo(){const t=er.lFrame,n=null===t?null:t.child;return null===n?$a(t):n}function $a(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Hn(){const t=er.lFrame;return er.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const rr=Hn;function dr(){const t=Hn();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Wr(){return er.lFrame.selectedIndex}function Gi(t){er.lFrame.selectedIndex=t}function di(){const t=er.lFrame;return pa(t.tView,t.selectedIndex)}function Si(){er.lFrame.currentNamespace=j}function Un(){er.lFrame.currentNamespace=null}function qa(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const h=t.data[i].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:U,ngOnDestroy:q}=h;v&&(t.contentHooks||(t.contentHooks=[])).push(-i,v),E&&((t.contentHooks||(t.contentHooks=[])).push(i,E),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(i,E)),D&&(t.viewHooks||(t.viewHooks=[])).push(-i,D),U&&((t.viewHooks||(t.viewHooks=[])).push(i,U),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(i,U)),null!=q&&(t.destroyHooks||(t.destroyHooks=[])).push(i,q)}}function cl(t,n,i){ul(t,n,3,i)}function Aa(t,n,i,o){(3&t[2])===i&&ul(t,n,i,o)}function Mo(t,n){let i=t[2];(3&i)===n&&(i&=2047,i+=1,t[2]=i)}function ul(t,n,i,o){const h=null!=o?o:-1,v=n.length-1;let E=0;for(let D=void 0!==o?65535&t[18]:0;D<v;D++)if("number"==typeof n[D+1]){if(E=n[D],null!=o&&E>=o)break}else n[D]<0&&(t[18]+=65536),(E<h||-1==h)&&(hl(t,i,n,D),t[18]=(4294901760&t[18])+D+2),D++}function hl(t,n,i,o){const l=i[o]<0,h=i[o+1],E=t[l?-i[o]:i[o]];if(l){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{h.call(E)}finally{}}}else try{h.call(E)}finally{}}class wi{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function Ks(t,n,i){const o=yr(t);let l=0;for(;l<i.length;){const h=i[l];if("number"==typeof h){if(0!==h)break;l++;const v=i[l++],E=i[l++],D=i[l++];o?t.setAttribute(n,E,D,v):n.setAttributeNS(v,E,D)}else{const v=h,E=i[++l];Gs(v)?o&&t.setProperty(n,v,E):o?t.setAttribute(n,v,E):n.setAttribute(v,E),l++}}return l}function rc(t){return 3===t||4===t||6===t}function Gs(t){return 64===t.charCodeAt(0)}function ic(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const l=n[o];"number"==typeof l?i=l:0===i||eu(t,i,l,null,-1===i||2===i?n[++o]:null)}}return t}function eu(t,n,i,o,l){let h=0,v=t.length;if(-1===n)v=-1;else for(;h<t.length;){const E=t[h++];if("number"==typeof E){if(E===n){v=-1;break}if(E>n){v=h-1;break}}}for(;h<t.length;){const E=t[h];if("number"==typeof E)break;if(E===i){if(null===o)return void(null!==l&&(t[h+1]=l));if(o===t[h+1])return void(t[h+2]=l)}h++,null!==o&&h++,null!==l&&h++}-1!==v&&(t.splice(v,0,n),h=v+1),t.splice(h++,0,i),null!==o&&t.splice(h++,0,o),null!==l&&t.splice(h++,0,l)}function bl(t){return-1!==t}function Ya(t){return 32767&t}function kl(t,n){let i=function(t){return t>>16}(t),o=n;for(;i>0;)o=o[15],i--;return o}let sc=!0;function Da(t){const n=sc;return sc=t,n}let th=0;function fl(t,n){const i=Bl(t,n);if(-1!==i)return i;const o=n[1];o.firstCreatePass&&(t.injectorIndex=n.length,Su(o.data,t),Su(n,null),Su(o.blueprint,null));const l=Oc(t,n),h=t.injectorIndex;if(bl(l)){const v=Ya(l),E=kl(l,n),D=E[1].data;for(let U=0;U<8;U++)n[h+U]=E[v+U]|D[v+U]}return n[h+8]=l,h}function Su(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Bl(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Oc(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,l=n;for(;null!==l;){const h=l[1],v=h.type;if(o=2===v?h.declTNode:1===v?l[6]:null,null===o)return-1;if(i++,l=l[15],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return-1}function pi(t,n,i){!function(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(Zo)&&(o=i[Zo]),null==o&&(o=i[Zo]=th++);const l=255&o;n.data[t+(l>>5)]|=1<<l}(t,n,i)}function Pa(t,n,i){if(i&Xn.Optional)return t;Fn(n,"NodeInjector")}function mc(t,n,i,o){if(i&Xn.Optional&&void 0===o&&(o=null),0==(i&(Xn.Self|Xn.Host))){const l=t[9],h=Ln(void 0);try{return l?l.get(n,o,i&Xn.Optional):Po(n,o,i&Xn.Optional)}finally{Ln(h)}}return Pa(o,n,i)}function Xa(t,n,i,o=Xn.Default,l){if(null!==t){const h=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Zo)?t[Zo]:void 0;return"number"==typeof n?n>=0?255&n:L:n}(i);if("function"==typeof h){if(!Ta(n,t,o))return o&Xn.Host?Pa(l,i,o):mc(n,i,o,l);try{const v=h(o);if(null!=v||o&Xn.Optional)return v;Fn(i)}finally{rr()}}else if("number"==typeof h){let v=null,E=Bl(t,n),D=-1,U=o&Xn.Host?n[16][6]:null;for((-1===E||o&Xn.SkipSelf)&&(D=-1===E?Oc(t,n):n[E+8],-1!==D&&$(o,!1)?(v=n[1],E=Ya(D),n=kl(D,n)):E=-1);-1!==E;){const q=n[1];if(N(h,E,q.data)){const se=C(E,n,i,v,o,U);if(se!==oc)return se}D=n[E+8],-1!==D&&$(o,n[1].data[E+8]===U)&&N(h,E,n)?(v=q,E=Ya(D),n=kl(D,n)):E=-1}}}return mc(n,i,o,l)}const oc={};function L(){return new X(K(),x())}function C(t,n,i,o,l,h){const v=n[1],E=v.data[t+8],q=u(E,v,i,null==o?al(E)&&sc:o!=v&&0!=(3&E.type),l&Xn.Host&&h===E);return null!==q?_(n,v,q,E):oc}function u(t,n,i,o,l){const h=t.providerIndexes,v=n.data,E=1048575&h,D=t.directiveStart,q=h>>20,fe=l?E+q:t.directiveEnd;for(let Oe=o?E:E+q;Oe<fe;Oe++){const Ye=v[Oe];if(Oe<D&&i===Ye||Oe>=D&&Ye.type===i)return Oe}if(l){const Oe=v[D];if(Oe&&zs(Oe)&&Oe.type===i)return D}return null}function _(t,n,i,o){let l=t[i];const h=n.data;if(function(t){return t instanceof wi}(l)){const v=l;v.resolving&&function(t,n){throw new Mn("200",`Circular dependency in DI detected for ${t}`)}(Wt(h[i]));const E=Da(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Ln(v.injectImpl):null;Ta(t,o,Xn.Default);try{l=t[i]=v.factory(void 0,h,t,o),n.firstCreatePass&&i>=o.directiveStart&&function(t,n,i){const{ngOnChanges:o,ngOnInit:l,ngDoCheck:h}=n.type.prototype;if(o){const v=oo(n);(i.preOrderHooks||(i.preOrderHooks=[])).push(t,v),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,v)}l&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-t,l),h&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t,h),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,h))}(i,h[i],n)}finally{null!==D&&Ln(D),Da(E),v.resolving=!1,rr()}}return l}function N(t,n,i){return!!(i[n+(t>>5)]&1<<t)}function $(t,n){return!(t&Xn.Self||t&Xn.Host&&n)}class X{constructor(n,i){this._tNode=n,this._lView=i}get(n,i){return Xa(this._tNode,this._lView,n,void 0,i)}}function ie(t){return ls(()=>{const n=t.prototype.constructor,i=n[qs]||Ae(n),o=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==o;){const h=l[qs]||Ae(l);if(h&&h!==i)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function Ae(t){return Ot(t)?()=>{const n=Ae(qt(t));return n&&n()}:vo(t)}function $e(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let l=0;for(;l<o;){const h=i[l];if(rc(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<o&&"string"==typeof i[l];)l++;else{if(h===n)return i[l+1];l+=2}}}return null}(K(),t)}const pt="__parameters__";function tr(t,n,i){return ls(()=>{const o=function(t){return function(...i){if(t){const o=t(...i);for(const l in o)this[l]=o[l]}}}(n);function l(...h){if(this instanceof l)return o.apply(this,h),this;const v=new l(...h);return E.annotation=v,E;function E(D,U,q){const se=D.hasOwnProperty(pt)?D[pt]:Object.defineProperty(D,pt,{value:[]})[pt];for(;se.length<=q;)se.push(null);return(se[q]=se[q]||[]).push(v),D}}return i&&(l.prototype=Object.create(i.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}class mr{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=ye({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ei=new mr("AnalyzeForEntryComponents"),lr=Function;function Wi(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let o=t[i];Array.isArray(o)?(n===t&&(n=t.slice(0,i)),Wi(o,n)):n!==t&&n.push(o)}return n}function Bi(t,n){t.forEach(i=>Array.isArray(i)?Bi(i,n):n(i))}function is(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function as(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}const El={},sh="__NG_DI_FLAG__",co="ngTempTokenPath",ah=/\n/gm,Nc="__source",lh=He({provide:String,useValue:He});let Ru;function tu(t){const n=Ru;return Ru=t,n}function vc(t,n=Xn.Default){if(void 0===Ru)throw new Error("inject() must be called from an injection context");return null===Ru?Po(t,void 0,n):Ru.get(t,n&Xn.Optional?null:void 0,n)}function $s(t,n=Xn.Default){return(Di||vc)(qt(t),n)}function nu(t){const n=[];for(let i=0;i<t.length;i++){const o=qt(t[i]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let l,h=Xn.Default;for(let v=0;v<o.length;v++){const E=o[v],D=Yh(E);"number"==typeof D?-1===D?l=E.token:h|=D:l=E}n.push($s(l,h))}else n.push($s(o))}return n}function qh(t,n){return t[sh]=n,t.prototype[sh]=n,t}function Yh(t){return t[sh]}function Xp(t,n,i,o){const l=t[co];throw n[Nc]&&l.unshift(n[Nc]),t.message=function(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let l=We(n);if(Array.isArray(n))l=n.map(We).join(" -> ");else if("object"==typeof n){let h=[];for(let v in n)if(n.hasOwnProperty(v)){let E=n[v];h.push(v+":"+("string"==typeof E?JSON.stringify(E):We(E)))}l=`{${h.join(", ")}}`}return`${i}${o?"("+o+")":""}[${l}]: ${t.replace(ah,"\n  ")}`}("\n"+t.message,l,i,o),t.ngTokenPath=l,t[co]=null,t}const ch=qh(tr("Inject",t=>({token:t})),-1),Fc=qh(tr("Optional"),8),ru=qh(tr("SkipSelf"),4);let Nf;function hh(t){var n;return(null===(n=function(){if(void 0===Nf&&(Nf=null,sr.trustedTypes))try{Nf=sr.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Nf}())||void 0===n?void 0:n.createHTML(t))||t}class Bc{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Lu extends Bc{getTypeName(){return"HTML"}}class Bf extends Bc{getTypeName(){return"Style"}}class Nd extends Bc{getTypeName(){return"Script"}}class nm extends Bc{getTypeName(){return"URL"}}class rm extends Bc{getTypeName(){return"ResourceURL"}}function _c(t){return t instanceof Bc?t.changingThisBreaksApplicationSecurity:t}function La(t,n){const i=Fd(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see https://g.co/ng/security#xss)`)}return i===n}function Fd(t){return t instanceof Bc&&t.getTypeName()||null}function im(t){return new Lu(t)}function sm(t){return new Bf(t)}function om(t){return new Nd(t)}function am(t){return new nm(t)}function lm(t){return new rm(t)}class cm{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(hh(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch(i){return null}}}class um{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const i=this.inertDocument.createElement("html");this.inertDocument.appendChild(i);const o=this.inertDocument.createElement("body");i.appendChild(o)}}getInertBodyElement(n){const i=this.inertDocument.createElement("template");if("content"in i)return i.innerHTML=hh(n),i;const o=this.inertDocument.createElement("body");return o.innerHTML=hh(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(n){const i=n.attributes;for(let l=i.length-1;0<l;l--){const v=i.item(l).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&n.removeAttribute(v)}let o=n.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const fm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,dm=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function fh(t){return(t=String(t)).match(fm)||t.match(dm)?t:"unsafe:"+t}function ac(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function Nu(...t){const n={};for(const i of t)for(const o in i)i.hasOwnProperty(o)&&(n[o]=!0);return n}const Qh=ac("area,br,col,hr,img,wbr"),Bd=ac("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ud=ac("rp,rt"),Uf=Nu(Qh,Nu(Bd,ac("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nu(Ud,ac("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Nu(Ud,Bd)),Vf=ac("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zh=ac("srcset"),dh=Nu(Vf,Zh,ac("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ac("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mm=ac("script,style,template");class gm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,o=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?o=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,o&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let l=this.checkClobberedElement(i,i.nextSibling);if(l){i=l;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!Uf.hasOwnProperty(i))return this.sanitizedSomething=!0,!mm.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const o=n.attributes;for(let l=0;l<o.length;l++){const h=o.item(l),v=h.name,E=v.toLowerCase();if(!dh.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let D=h.value;Vf[E]&&(D=fh(D)),Zh[E]&&(t=D,D=(t=String(t)).split(",").map(n=>fh(n.trim())).join(", ")),this.buf.push(" ",v,'="',Vd(D),'"')}var t;return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();Uf.hasOwnProperty(i)&&!Qh.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(Vd(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const ym=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hf=/([^\#-~ |!])/g;function Vd(t){return t.replace(/&/g,"&amp;").replace(ym,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Hf,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ph;function Gf(t,n){let i=null;try{ph=ph||function(t){const n=new um(t);return function(){try{return!!(new window.DOMParser).parseFromString(hh(""),"text/html")}catch(t){return!1}}()?new cm(n):n}(t);let o=n?String(n):"";i=ph.getInertBodyElement(o);let l=5,h=o;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,o=h,h=i.innerHTML,i=ph.getInertBodyElement(o)}while(o!==h);return hh((new gm).sanitizeChildren(jf(i)||i))}finally{if(i){const o=jf(i)||i;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function jf(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ho=(()=>((ho=ho||{})[ho.NONE=0]="NONE",ho[ho.HTML=1]="HTML",ho[ho.STYLE=2]="STYLE",ho[ho.SCRIPT=3]="SCRIPT",ho[ho.URL=4]="URL",ho[ho.RESOURCE_URL=5]="RESOURCE_URL",ho))();function Wf(t){const n=function(){const t=x();return t&&t[12]}();return n?n.sanitize(ho.URL,t)||"":La(t,"URL")?_c(t):fh(ut(t))}const me="__ngContext__";function ue(t,n){t[me]=n}function ge(t){const n=function(t){return t[me]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function gi(t){return t.ngOriginalError}function Oa(t,...n){t.error(...n)}class Ko{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n),o=this._findContext(n),l=(t=n)&&t.ngErrorLogger||Oa;var t;l(this._console,"ERROR",n),i&&l(this._console,"ORIGINAL ERROR",i),o&&l(this._console,"ERROR CONTEXT",o)}_findContext(n){return n?n.ngDebugContext||this._findContext(gi(n)):null}_findOriginalError(n){let i=n&&gi(n);for(;i&&gi(i);)i=gi(i);return i||null}}const En=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(sr))();function Nn(t){return t.ownerDocument.defaultView}function ia(t){return t instanceof Function?t():t}var Co=(()=>((Co=Co||{})[Co.Important=1]="Important",Co[Co.DashCase=2]="DashCase",Co))();function Hc(t,n){return undefined(t,n)}function su(t){const n=t[3];return Os(n)?n[3]:n}function Tl(t){return au(t[13])}function yh(t){return au(t[4])}function au(t){for(;null!==t&&!Os(t);)t=t[4];return t}function lc(t,n,i,o,l){if(null!=o){let h,v=!1;Os(o)?h=o:Lo(o)&&(v=!0,o=o[0]);const E=kr(o);0===t&&null!==i?null==l?xy(n,i,E):xh(n,i,E,l||null,!0):1===t&&null!==i?xh(n,i,E,l||null,!0):2===t?function(t,n,i){const o=Gd(t,n);o&&function(t,n,i,o){yr(t)?t.removeChild(n,i,o):n.removeChild(i)}(t,o,n,i)}(n,E,v):3===t&&n.destroyNode(E),null!=h&&function(t,n,i,o,l){const h=i[7];h!==kr(i)&&lc(n,t,o,h,l);for(let E=10;E<i.length;E++){const D=i[E];jc(D[1],D,t,n,o,h)}}(n,t,h,i,l)}}function Er(t,n,i){return yr(t)?t.createElement(n,i):null===i?t.createElement(n):t.createElementNS(i,n)}function cc(t,n){const i=t[9],o=i.indexOf(n),l=n[3];1024&n[2]&&(n[2]&=-1025,Wa(l,-1)),i.splice(o,1)}function Cl(t,n){if(t.length<=10)return;const i=10+n,o=t[i];if(o){const l=o[17];null!==l&&l!==t&&cc(l,o),n>0&&(t[i-1][4]=o[4]);const h=as(t,10+n);!function(t,n){jc(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(o[1],o);const v=h[19];null!==v&&v.detachView(h[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function wm(t,n){if(!(256&n[2])){const i=n[11];yr(i)&&i.destroyNode&&jc(t,n,i,3,null,null),function(t){let n=t[13];if(!n)return $f(t[1],t);for(;n;){let i=null;if(Lo(n))i=n[13];else{const o=n[10];o&&(i=o)}if(!i){for(;n&&!n[4]&&n!==t;)Lo(n)&&$f(n[1],n),n=n[3];null===n&&(n=t),Lo(n)&&$f(n[1],n),i=n&&n[4]}n=i}}(n)}}function $f(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const l=n[i[o]];if(!(l instanceof wi)){const h=i[o+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const E=l[h[v]],D=h[v+1];try{D.call(E)}finally{}}else try{h.call(l)}finally{}}}}(t,n),function(t,n){const i=t.cleanup,o=n[7];let l=-1;if(null!==i)for(let h=0;h<i.length-1;h+=2)if("string"==typeof i[h]){const v=i[h+1],E="function"==typeof v?v(n):kr(n[v]),D=o[l=i[h+2]],U=i[h+3];"boolean"==typeof U?E.removeEventListener(i[h],D,U):U>=0?o[l=U]():o[l=-U].unsubscribe(),h+=2}else{const v=o[l=i[h+1]];i[h].call(v)}if(null!==o){for(let h=l+1;h<o.length;h++)o[h]();n[7]=null}}(t,n),1===n[1].type&&yr(n[11])&&n[11].destroy();const i=n[17];if(null!==i&&Os(n[3])){i!==n[3]&&cc(i,n);const o=n[19];null!==o&&o.detachView(t)}}}function _y(t,n,i){return function(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[0];if(2&o.flags){const l=t.data[o.directiveStart].encapsulation;if(l===Jn.None||l===Jn.Emulated)return null}return hs(o,i)}(t,n.parent,i)}function xh(t,n,i,o,l){yr(t)?t.insertBefore(n,i,o,l):n.insertBefore(i,o,l)}function xy(t,n,i){yr(t)?t.appendChild(n,i):n.appendChild(i)}function wy(t,n,i,o,l){null!==o?xh(t,n,i,o,l):xy(t,n,i)}function Gd(t,n){return yr(t)?t.parentNode(n):n.parentNode}let Tm=function(t,n,i){return 40&t.type?hs(t,i):null};function qf(t,n,i,o){const l=_y(t,o,n),h=n[11],E=function(t,n,i){return Tm(t,n,i)}(o.parent||n[6],o,n);if(null!=l)if(Array.isArray(i))for(let D=0;D<i.length;D++)wy(h,l,i[D],E,!1);else wy(h,l,i,E,!1)}function Yf(t,n){if(null!==n){const i=n.type;if(3&i)return hs(n,t);if(4&i)return jd(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return Yf(t,o);{const l=t[n.index];return Os(l)?jd(-1,l):kr(l)}}if(32&i)return Hc(n,t)()||kr(t[n.index]);{const o=Am(t,n);return null!==o?Array.isArray(o)?o[0]:Yf(su(t[16]),o):Yf(t,n.next)}}return null}function Am(t,n){return null!==n?t[16][6].projection[n.projection]:null}function jd(t,n){const i=10+t+1;if(i<n.length){const o=n[i],l=o[1].firstChild;if(null!==l)return Yf(o,l)}return n[7]}function Wd(t,n,i,o,l,h,v){for(;null!=i;){const E=o[i.index],D=i.type;if(v&&0===n&&(E&&ue(kr(E),o),i.flags|=4),64!=(64&i.flags))if(8&D)Wd(t,n,i.child,o,l,h,!1),lc(n,t,l,E,h);else if(32&D){const U=Hc(i,o);let q;for(;q=U();)lc(n,t,l,q,h);lc(n,t,l,E,h)}else 16&D?Na(t,n,o,i,l,h):lc(n,t,l,E,h);i=v?i.projectionNext:i.next}}function jc(t,n,i,o,l,h){Wd(i,o,t.firstChild,n,l,h,!1)}function Na(t,n,i,o,l,h){const v=i[16],D=v[6].projection[o.projection];if(Array.isArray(D))for(let U=0;U<D.length;U++)lc(n,t,l,D[U],h);else Wd(t,n,D,v[3],l,h,!0)}function Sy(t,n,i){yr(t)?t.setAttribute(n,"style",i):n.style.cssText=i}function Rm(t,n,i){yr(t)?""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i):n.className=i}function Ty(t,n,i){let o=t.length;for(;;){const l=t.indexOf(n,i);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const h=n.length;if(l+h===o||t.charCodeAt(l+h)<=32)return l}i=l+1}}const Cy="ng-template";function Vv(t,n,i){let o=0;for(;o<t.length;){let l=t[o++];if(i&&"class"===l){if(l=t[o],-1!==Ty(l.toLowerCase(),n,0))return!0}else if(1===l){for(;o<t.length&&"string"==typeof(l=t[o++]);)if(l.toLowerCase()===n)return!0;return!1}}return!1}function Ay(t){return 4===t.type&&t.value!==Cy}function zv(t,n,i){return n===(4!==t.type||i?t.value:Cy)}function Hv(t,n,i){let o=4;const l=t.attrs||[],h=function(t){for(let n=0;n<t.length;n++)if(rc(t[n]))return n;return t.length}(l);let v=!1;for(let E=0;E<n.length;E++){const D=n[E];if("number"!=typeof D){if(!v)if(4&o){if(o=2|1&o,""!==D&&!zv(t,D,i)||""===D&&1===n.length){if(wc(o))return!1;v=!0}}else{const U=8&o?D:n[++E];if(8&o&&null!==t.attrs){if(!Vv(t.attrs,U,i)){if(wc(o))return!1;v=!0}continue}const se=Gv(8&o?"class":D,l,Ay(t),i);if(-1===se){if(wc(o))return!1;v=!0;continue}if(""!==U){let fe;fe=se>h?"":l[se+1].toLowerCase();const Oe=8&o?fe:null;if(Oe&&-1!==Ty(Oe,U,0)||2&o&&U!==fe){if(wc(o))return!1;v=!0}}}}else{if(!v&&!wc(o)&&!wc(D))return!1;if(v&&wc(D))continue;v=!1,o=D|1&o}}return wc(o)||v}function wc(t){return 0==(1&t)}function Gv(t,n,i,o){if(null===n)return-1;let l=0;if(o||!i){let h=!1;for(;l<n.length;){const v=n[l];if(v===t)return l;if(3===v||6===v)h=!0;else{if(1===v||2===v){let E=n[++l];for(;"string"==typeof E;)E=n[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=h?1:2}return-1}return function(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function Dy(t,n,i=!1){for(let o=0;o<n.length;o++)if(Hv(t,n[o],i))return!0;return!1}function Ry(t,n){return t?":not("+n.trim()+")":n}function Yv(t){let n=t[0],i=1,o=2,l="",h=!1;for(;i<t.length;){let v=t[i];if("string"==typeof v)if(2&o){const E=t[++i];l+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&o?l+="."+v:4&o&&(l+=" "+v);else""!==l&&!wc(v)&&(n+=Ry(h,l),l=""),o=v,h=h||!wc(o);i++}return""!==l&&(n+=Ry(h,l)),n}const si={};function Py(t){Iy(S(),x(),Wr()+t,Cr())}function Iy(t,n,i,o){if(!o)if(3==(3&n[2])){const h=t.preOrderCheckHooks;null!==h&&cl(n,h,i)}else{const h=t.preOrderHooks;null!==h&&Aa(n,h,0,i)}Gi(i)}function zy(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const l=i[o],h=i[o+1];if(-1!==h){const v=t.data[h];pe(l),v.contentQueries(2,n[h],h)}}}function Kf(t,n,i,o,l,h,v,E,D,U){const q=n.blueprint.slice();return q[0]=l,q[2]=140|o,qo(q),q[3]=q[15]=t,q[8]=i,q[10]=v||t&&t[10],q[11]=E||t&&t[11],q[12]=D||t&&t[12]||null,q[9]=U||t&&t[9]||null,q[6]=h,q[16]=2==n.type?t[16]:q,q}function nf(t,n,i,o,l){let h=t.data[n];if(null===h)h=function(t,n,i,o,l){const h=he(),v=nt(),D=t.data[n]=function(t,n,i,o,l,h){return{type:i,index:o,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,i,n,o,l);return null===t.firstChild&&(t.firstChild=D),null!==h&&(v?null==h.child&&null!==D.parent&&(h.child=D):null===h.next&&(h.next=D)),D}(t,n,i,o,l),er.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=i,h.value=o,h.attrs=l;const v=function(){const t=er.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return Le(h,!0),h}function rf(t,n,i,o){if(0===i)return-1;const l=n.length;for(let h=0;h<i;h++)n.push(o),t.blueprint.push(o),t.data.push(null);return l}function Qf(t,n,i){ts(n);try{const o=t.viewQuery;null!==o&&lp(1,o,i);const l=t.template;null!==l&&Wy(t,n,l,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&zy(t,n),t.staticViewQueries&&lp(2,t.viewQuery,i);const h=t.components;null!==h&&function(t,n){for(let i=0;i<n.length;i++)f_(t,n[i])}(n,h)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[2]&=-5,dr()}}function sf(t,n,i,o){const l=n[2];if(256==(256&l))return;ts(n);const h=Cr();try{qo(n),function(t){er.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&Wy(t,n,i,2,o);const v=3==(3&l);if(!h)if(v){const U=t.preOrderCheckHooks;null!==U&&cl(n,U,null)}else{const U=t.preOrderHooks;null!==U&&Aa(n,U,0,null),Mo(n,0)}if(function(t){for(let n=Tl(t);null!==n;n=yh(n)){if(!n[2])continue;const i=n[9];for(let o=0;o<i.length;o++){const l=i[o],h=l[3];0==(1024&l[2])&&Wa(h,1),l[2]|=1024}}}(n),function(t){for(let n=Tl(t);null!==n;n=yh(n))for(let i=10;i<n.length;i++){const o=n[i],l=o[1];wo(o)&&sf(l,o,l.template,o[8])}}(n),null!==t.contentQueries&&zy(t,n),!h)if(v){const U=t.contentCheckHooks;null!==U&&cl(n,U)}else{const U=t.contentHooks;null!==U&&Aa(n,U,1),Mo(n,1)}!function(t,n){const i=t.hostBindingOpCodes;if(null!==i)try{for(let o=0;o<i.length;o++){const l=i[o];if(l<0)Gi(~l);else{const h=l,v=i[++o],E=i[++o];ci(v,h),E(2,n[h])}}}finally{Gi(-1)}}(t,n);const E=t.components;null!==E&&function(t,n){for(let i=0;i<n.length;i++)Qy(t,n[i])}(n,E);const D=t.viewQuery;if(null!==D&&lp(2,D,o),!h)if(v){const U=t.viewCheckHooks;null!==U&&cl(n,U)}else{const U=t.viewHooks;null!==U&&Aa(n,U,2),Mo(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),h||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Wa(n[3],-1))}finally{dr()}}function jy(t,n,i,o){const l=n[10],h=!Cr(),v=yl(n);try{h&&!v&&l.begin&&l.begin(),v&&Qf(t,n,o),sf(t,n,i,o)}finally{h&&!v&&l.end&&l.end()}}function Wy(t,n,i,o,l){const h=Wr(),v=2&o;try{Gi(-1),v&&n.length>20&&Iy(t,n,20,Cr()),i(o,l)}finally{Gi(h)}}function Zf(t,n,i){!_l()||(function(t,n,i,o){const l=i.directiveStart,h=i.directiveEnd;t.firstCreatePass||fl(i,n),ue(o,n);const v=i.initialInputs;for(let E=l;E<h;E++){const D=t.data[E],U=zs(D);U&&Xy(n,i,D);const q=_(n,t,E,i);ue(q,n),null!==v&&$m(0,E-l,q,D,0,v),U&&(Hs(i.index,n)[8]=q)}}(t,n,i,hs(i,n)),128==(128&i.flags)&&function(t,n,i){const o=i.directiveStart,l=i.directiveEnd,v=i.index,E=er.lFrame.currentDirectiveIndex;try{Gi(v);for(let D=o;D<l;D++){const U=t.data[D],q=n[D];xs(D),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&wh(U,q)}}finally{Gi(-1),xs(E)}}(t,n,i))}function Hm(t,n,i=hs){const o=n.localNames;if(null!==o){let l=n.index+1;for(let h=0;h<o.length;h+=2){const v=o[h+1],E=-1===v?i(n,t):t[v];t[l++]=E}}}function $y(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Jf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Jf(t,n,i,o,l,h,v,E,D,U){const q=20+o,se=q+l,fe=function(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:si);return i}(q,se),Oe="function"==typeof U?U():U;return fe[1]={type:t,blueprint:fe,template:i,queries:null,viewQuery:E,declTNode:n,data:fe.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Oe,incompleteFirstPass:!1}}function Hu(t,n,i,o){const l=Qm(n);null===i?l.push(o):(l.push(i),t.firstCreatePass&&oa(t).push(o,l.length-1))}function ep(t,n,i){for(let o in t)if(t.hasOwnProperty(o)){const l=t[o];(i=null===i?{}:i).hasOwnProperty(o)?i[o].push(n,l):i[o]=[n,l]}return i}function jl(t,n,i,o,l,h,v,E){const D=hs(n,i);let q,U=n.inputs;!E&&null!=U&&(q=U[o])?(eg(t,i,q,o,l),al(n)&&function(t,n){const i=Hs(n,t);16&i[2]||(i[2]|=64)}(i,n.index)):3&n.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),l=null!=v?v(l,n.value||"",o):l,yr(h)?h.setProperty(D,o,l):Gs(o)||(D.setProperty?D.setProperty(o,l):D[o]=l))}function uu(t,n,i,o){let l=!1;if(_l()){const h=function(t,n,i){const o=t.directiveRegistry;let l=null;if(o)for(let h=0;h<o.length;h++){const v=o[h];Dy(i,v.selectors,!1)&&(l||(l=[]),pi(fl(i,n),t,v.type),zs(v)?(cf(t,i),l.unshift(v)):l.push(v))}return l}(t,n,i),v=null===o?null:{"":-1};if(null!==h){l=!0,uf(i,t.data.length,h.length);for(let q=0;q<h.length;q++){const se=h[q];se.providersResolver&&se.providersResolver(se)}let E=!1,D=!1,U=rf(t,n,h.length,null);for(let q=0;q<h.length;q++){const se=h[q];i.mergedAttrs=ic(i.mergedAttrs,se.hostAttrs),rd(t,i,n,U,se),np(U,se,v),null!==se.contentQueries&&(i.flags|=8),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(i.flags|=128);const fe=se.type.prototype;!E&&(fe.ngOnChanges||fe.ngOnInit||fe.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i.index),E=!0),!D&&(fe.ngOnChanges||fe.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i.index),D=!0),U++}!function(t,n){const o=n.directiveEnd,l=t.data,h=n.attrs,v=[];let E=null,D=null;for(let U=n.directiveStart;U<o;U++){const q=l[U],se=q.inputs,fe=null===h||Ay(n)?null:ip(se,h);v.push(fe),E=ep(se,U,E),D=ep(q.outputs,U,D)}null!==E&&(E.hasOwnProperty("class")&&(n.flags|=16),E.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=v,n.inputs=E,n.outputs=D}(t,i)}v&&function(t,n,i){if(n){const o=t.localNames=[];for(let l=0;l<n.length;l+=2){const h=i[n[l+1]];if(null==h)throw new Mn("301",`Export of name '${n[l+1]}' not found!`);o.push(n[l],h)}}}(i,o,v)}return i.mergedAttrs=ic(i.mergedAttrs,i.attrs),l}function tp(t,n,i,o,l,h){const v=h.hostBindings;if(v){let E=t.hostBindingOpCodes;null===E&&(E=t.hostBindingOpCodes=[]);const D=~n.index;(function(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(E)!=D&&E.push(D),E.push(o,l,v)}}function wh(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function cf(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function np(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;zs(n)&&(i[""]=t)}}function uf(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}function rd(t,n,i,o,l){t.data[o]=l;const h=l.factory||(l.factory=vo(l.type)),v=new wi(h,zs(l),null);t.blueprint[o]=v,i[o]=v,tp(t,n,0,o,rf(t,i,l.hostVars,si),l)}function Xy(t,n,i){const o=hs(n,t),l=$y(i),h=t[10],v=hf(t,Kf(t,l,null,i.onPush?64:16,o,n,h,h.createRenderer(o,i),null,null));t[n.index]=v}function uc(t,n,i,o,l,h){const v=hs(t,n);!function(t,n,i,o,l,h,v){if(null==h)yr(t)?t.removeAttribute(n,l,i):n.removeAttribute(l);else{const E=null==v?ut(h):v(h,o||"",l);yr(t)?t.setAttribute(n,l,E,i):i?n.setAttributeNS(i,l,E):n.setAttribute(l,E)}}(n[11],v,h,t.value,i,o,l)}function $m(t,n,i,o,l,h){const v=h[n];if(null!==v){const E=o.setInput;for(let D=0;D<v.length;){const U=v[D++],q=v[D++],se=v[D++];null!==E?o.setInput(i,se,U,q):i[q]=se}}}function ip(t,n){let i=null,o=0;for(;o<n.length;){const l=n[o];if(0!==l)if(5!==l){if("number"==typeof l)break;t.hasOwnProperty(l)&&(null===i&&(i=[]),i.push(l,t[l],n[o+1])),o+=2}else o+=2;else o+=4}return i}function Ym(t,n,i,o){return new Array(t,!0,!1,n,null,0,o,i,null,null)}function Qy(t,n){const i=Hs(n,t);if(wo(i)){const o=i[1];80&i[2]?sf(o,i,o.template,i[8]):i[5]>0&&sp(i)}}function sp(t){for(let o=Tl(t);null!==o;o=yh(o))for(let l=10;l<o.length;l++){const h=o[l];if(1024&h[2]){const v=h[1];sf(v,h,v.template,h[8])}else h[5]>0&&sp(h)}const i=t[1].components;if(null!==i)for(let o=0;o<i.length;o++){const l=Hs(i[o],t);wo(l)&&l[5]>0&&sp(l)}}function f_(t,n){const i=Hs(n,t),o=i[1];(function(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])})(o,i),Qf(o,i,i[8])}function hf(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function id(t){for(;t;){t[2]|=64;const n=su(t);if(za(t)&&!n)return t;t=n}return null}function Xm(t,n,i){const o=n[10];o.begin&&o.begin();try{sf(t,n,t.template,i)}catch(l){throw Jm(n,l),l}finally{o.end&&o.end()}}function ap(t){!function(t){for(let n=0;n<t.components.length;n++){const i=t.components[n],o=ge(i),l=o[1];jy(l,o,l.template,i)}}(t[8])}function lp(t,n,i){pe(0),n(t,i)}const sd=(()=>Promise.resolve(null))();function Qm(t){return t[7]||(t[7]=[])}function oa(t){return t.cleanup||(t.cleanup=[])}function Jm(t,n){const i=t[9],o=i?i.get(Ko,null):null;o&&o.handleError(n)}function eg(t,n,i,o,l){for(let h=0;h<i.length;){const v=i[h++],E=i[h++],D=n[v],U=t.data[v];null!==U.setInput?U.setInput(D,l,o,E):D[E]=l}}function Eh(t,n,i){let o=i?t.styles:null,l=i?t.classes:null,h=0;if(null!==n)for(let v=0;v<n.length;v++){const E=n[v];"number"==typeof E?h=E:1==h?l=gt(l,E):2==h&&(o=gt(o,E+": "+n[++v]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=l:t.classesWithoutHost=l}const Wl=new mr("INJECTOR",-1);class tg{get(n,i=El){if(i===El){const o=new Error(`NullInjectorError: No provider for ${We(n)}!`);throw o.name="NullInjectorError",o}return i}}const Wc=new mr("Set Injector scope."),pf={},ng={};let mf;function od(){return void 0===mf&&(mf=new tg),mf}function rg(t,n=null,i=null,o){return new p_(t,i,n||od(),o)}class p_{constructor(n,i,o,l=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];i&&Bi(i,E=>this.processProvider(E,n,i)),Bi([n],E=>this.processInjectorType(E,[],h)),this.records.set(Wl,hc(void 0,this));const v=this.records.get(Wc);this.scope=null!=v?v.value:null,this.source=l||("object"==typeof n?null:We(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,i=El,o=Xn.Default){this.assertNotDestroyed();const l=tu(this),h=Ln(void 0);try{if(!(o&Xn.SkipSelf)){let E=this.records.get(n);if(void 0===E){const D=("function"==typeof(t=n)||"object"==typeof t&&t instanceof mr)&&$t(n);E=D&&this.injectableDefInScope(D)?hc(up(n),pf):null,this.records.set(n,E)}if(null!=E)return this.hydrate(n,E)}return(o&Xn.Self?od():this.parent).get(n,i=o&Xn.Optional&&i===El?null:i)}catch(v){if("NullInjectorError"===v.name){if((v[co]=v[co]||[]).unshift(We(n)),l)throw v;return Xp(v,n,"R3InjectorError",this.source)}throw v}finally{Ln(h),tu(l)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((o,l)=>n.push(We(l))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,i,o){if(!(n=qt(n)))return!1;let l=fi(n);const h=null==l&&n.ngModule||void 0,v=void 0===h?n:h,E=-1!==o.indexOf(v);if(void 0!==h&&(l=fi(h)),null==l)return!1;if(null!=l.imports&&!E){let q;o.push(v);try{Bi(l.imports,se=>{this.processInjectorType(se,i,o)&&(void 0===q&&(q=[]),q.push(se))})}finally{}if(void 0!==q)for(let se=0;se<q.length;se++){const{ngModule:fe,providers:Oe}=q[se];Bi(Oe,Ye=>this.processProvider(Ye,fe,Oe||xi))}}this.injectorDefTypes.add(v);const D=vo(v)||(()=>new v);this.records.set(v,hc(D,pf));const U=l.providers;if(null!=U&&!E){const q=n;Bi(U,se=>this.processProvider(se,q,U))}return void 0!==h&&void 0!==n.providers}processProvider(n,i,o){let l=hu(n=qt(n))?n:qt(n&&n.provide);const h=gf(t=n)?hc(void 0,t.useValue):hc(function(t,n,i){let o;if(hu(t)){const l=qt(t);return vo(l)||up(l)}if(gf(t))o=()=>qt(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...nu(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>$s(qt(t.useExisting));else{const l=qt(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vo(l)||up(l);o=()=>new l(...nu(t.deps))}return o}(t),pf);var t;if(hu(n)||!0!==n.multi)this.records.get(l);else{let v=this.records.get(l);v||(v=hc(void 0,pf,!0),v.factory=()=>nu(v.multi),this.records.set(l,v)),l=n,v.multi.push(n)}this.records.set(l,h)}hydrate(n,i){return i.value===pf&&(i.value=ng,i.value=i.factory()),"object"==typeof i.value&&i.value&&null!==(t=i.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(i.value),i.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const i=qt(n.providedIn);return"string"==typeof i?"any"===i||i===this.scope:this.injectorDefTypes.has(i)}}function up(t){const n=$t(t),i=null!==n?n.factory:vo(t);if(null!==i)return i;if(t instanceof mr)throw new Error(`Token ${We(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const o=function(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}(n,"?");throw new Error(`Can't resolve all parameters for ${We(t)}: (${o.join(", ")}).`)}const i=function(t){const n=t&&(t[Jr]||t[Vs]);if(n){const i=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),n}return null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Error("unreachable")}function hc(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function gf(t){return null!==t&&"object"==typeof t&&lh in t}function hu(t){return"function"==typeof t}const sg=function(t,n,i){return function(t,n=null,i=null,o){const l=rg(t,n,i,o);return l._resolveInjectorDefTypes(),l}({name:i},n,t,i)};class ds{static create(n,i){return Array.isArray(n)?sg(n,i,""):sg(n.providers,n.parent,n.name||"")}}function vp(t,n){qa(ge(t)[1],K())}function bf(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let l;if(zs(t))l=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");l=n.\u0275dir}if(l){if(i){o.push(l);const v=t;v.inputs=Th(t.inputs),v.declaredInputs=Th(t.declaredInputs),v.outputs=Th(t.outputs);const E=l.hostBindings;E&&f0(t,E);const D=l.viewQuery,U=l.contentQueries;if(D&&A_(t,D),U&&h0(t,U),tt(t.inputs,l.inputs),tt(t.declaredInputs,l.declaredInputs),tt(t.outputs,l.outputs),zs(l)&&l.data.animation){const q=t.data;q.animation=(q.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let v=0;v<h.length;v++){const E=h[v];E&&E.ngInherit&&E(t),E===bf&&(i=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const l=t[o];l.hostVars=n+=l.hostVars,l.hostAttrs=ic(l.hostAttrs,i=ic(i,l.hostAttrs))}}(o)}function Th(t){return t===no?{}:t===xi?[]:t}function A_(t,n){const i=t.viewQuery;t.viewQuery=i?(o,l)=>{n(o,l),i(o,l)}:n}function h0(t,n){const i=t.contentQueries;t.contentQueries=i?(o,l,h)=>{n(o,l,h),i(o,l,h)}:n}function f0(t,n){const i=t.hostBindings;t.hostBindings=i?(o,l)=>{n(o,l),i(o,l)}:n}ds.THROW_IF_NOT_FOUND=El,ds.NULL=new tg,ds.\u0275prov=ye({token:ds,providedIn:"any",factory:()=>$s(Wl)}),ds.__NG_ELEMENT_ID__=-1;let fc=null;function Ch(){if(!fc){const t=sr.Symbol;if(t&&t.iterator)fc=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<n.length;++i){const o=n[i];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(fc=o)}}}return fc}class aa{constructor(n){this.wrapped=n}static wrap(n){return new aa(n)}static unwrap(n){return aa.isWrapped(n)?n.wrapped:n}static isWrapped(n){return n instanceof aa}}function dd(t){return!!xf(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ch()in t)}function xf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Al(t,n,i){return t[n]=i}function la(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Ac(t,n,i,o){const l=la(t,n,i);return la(t,n+1,o)||l}function Ef(t,n,i,o){const l=x();return la(l,Ci(),n)&&(S(),uc(di(),l,t,n,i,o)),Ef}function p0(t,n,i,o,l,h,v,E){const D=x(),U=S(),q=t+20,se=U.firstCreatePass?function(t,n,i,o,l,h,v,E,D){const U=n.consts,q=nf(n,t,4,v||null,$o(U,E));uu(n,i,q,$o(U,D)),qa(n,q);const se=q.tViews=Jf(2,q,o,l,h,n.directiveRegistry,n.pipeRegistry,null,n.schemas,U);return null!==n.queries&&(n.queries.template(n,q),se.queries=n.queries.embeddedTView(q)),q}(q,U,D,n,i,o,l,h,v):U.data[q];Le(se,!1);const fe=D[11].createComment("");qf(U,D,fe,se),ue(fe,D),hf(D,D[q]=Ym(fe,D,fe,se)),Jo(se)&&Zf(U,D,se),null!=v&&Hm(D,se,E)}function g0(t){return ar(er.lFrame.contextLView,20+t)}function Tf(t,n=Xn.Default){const i=x();return null===i?$s(t,n):Xa(K(),i,qt(t),n)}function Tg(t,n,i){const o=x();return la(o,Ci(),n)&&jl(S(),di(),o,t,n,o[11],i,!1),Tg}function Cg(t,n,i,o,l){const v=l?"class":"style";eg(t,i,n.inputs[v],v,o)}function Ag(t,n,i,o){const l=x(),h=S(),v=20+t,E=l[11],D=l[v]=Er(E,n,er.lFrame.currentNamespace),U=h.firstCreatePass?function(t,n,i,o,l,h,v){const E=n.consts,U=nf(n,t,2,l,$o(E,h));return uu(n,i,U,$o(E,v)),null!==U.attrs&&Eh(U,U.attrs,!1),null!==U.mergedAttrs&&Eh(U,U.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,U),U}(v,h,l,0,n,i,o):h.data[v];Le(U,!0);const q=U.mergedAttrs;null!==q&&Ks(E,D,q);const se=U.classes;null!==se&&Rm(E,D,se);const fe=U.styles;null!==fe&&Sy(E,D,fe),64!=(64&U.flags)&&qf(h,l,D,U),0===er.lFrame.elementDepthCount&&ue(D,l),er.lFrame.elementDepthCount++,Jo(U)&&(Zf(h,l,U),function(t,n,i){if(ba(n)){const l=n.directiveEnd;for(let h=n.directiveStart;h<l;h++){const v=t.data[h];v.contentQueries&&v.contentQueries(1,i[h],h)}}}(h,U,l)),null!==o&&Hm(l,U)}function Dg(){let t=K();nt()?er.lFrame.isParent=!1:(t=t.parent,Le(t,!1));const n=t;er.lFrame.elementDepthCount--;const i=S();i.firstCreatePass&&(qa(i,t),ba(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&Cg(i,n,x(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&Cg(i,n,x(),n.stylesWithoutHost,!1)}function B_(t,n,i,o){Ag(t,n,i,o),Dg()}function Pg(){return x()}function Cp(t){return!!t&&"function"==typeof t.then}function V_(t){return!!t&&"function"==typeof t.subscribe}const Ap=V_;function Dp(t,n,i,o){const l=x(),h=S(),v=K();return function(t,n,i,o,l,h,v,E){const D=Jo(o),q=t.firstCreatePass&&oa(t),se=n[8],fe=Qm(n);let Oe=!0;if(3&o.type||E){const lt=hs(o,n),cn=E?E(lt):lt,Ft=fe.length,Tr=E?qr=>E(kr(qr[o.index])):o.index;if(yr(i)){let qr=null;if(!E&&D&&(qr=function(t,n,i,o){const l=t.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const v=l[h];if(v===i&&l[h+1]===o){const E=n[7],D=l[h+2];return E.length>D?E[D]:null}"string"==typeof v&&(h+=2)}return null}(t,n,l,o.index)),null!==qr)(qr.__ngLastListenerFn__||qr).__ngNextListenerFn__=h,qr.__ngLastListenerFn__=h,Oe=!1;else{h=L0(o,n,se,h,!1);const Yi=i.listen(cn,l,h);fe.push(h,Yi),q&&q.push(l,Tr,Ft,Ft+1)}}else h=L0(o,n,se,h,!0),cn.addEventListener(l,h,v),fe.push(h),q&&q.push(l,Tr,Ft,v)}else h=L0(o,n,se,h,!1);const Ye=o.outputs;let bt;if(Oe&&null!==Ye&&(bt=Ye[l])){const lt=bt.length;if(lt)for(let cn=0;cn<lt;cn+=2){const ka=n[bt[cn]][bt[cn+1]].subscribe(h),Kc=fe.length;fe.push(h,ka),q&&q.push(l,o.index,Kc,-(Kc+1))}}}(h,l,l[11],v,t,n,!!i,o),Dp}function Yu(t,n,i,o){try{return!1!==i(o)}catch(l){return Jm(t,l),!1}}function L0(t,n,i,o,l){return function h(v){if(v===Function)return o;const E=2&t.flags?Hs(t.index,n):n;0==(32&n[2])&&id(E);let D=Yu(n,0,o,v),U=h.__ngNextListenerFn__;for(;U;)D=Yu(n,0,U,v)&&D,U=U.__ngNextListenerFn__;return l&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function O0(t=1){return function(t){return(er.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,er.lFrame.contextLView))[8]}(t)}function Do(t,n=""){const i=x(),o=S(),l=t+20,h=o.firstCreatePass?nf(o,l,1,n,null):o.data[l],v=i[l]=function(t,n){return yr(t)?t.createText(n):t.createTextNode(n)}(i[11],n);qf(o,i,v,h),Le(h,!1)}function tv(t,n,i){const o=x();return la(o,Ci(),n)&&jl(S(),di(),o,t,n,o[11],i,!0),tv}const Af=void 0;var uw=["en",[["a","p"],["AM","PM"],Af],[["AM","PM"],Af,Af],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Af,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Af,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Af,"{1} 'at' {0}",Af],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let Ed={};function nv(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=p(n);if(i)return i;const o=n.split("-")[0];if(i=p(o),i)return i;if("en"===o)return uw;throw new Error(`Missing locale data for the locale "${t}".`)}function pb(t){return nv(t)[r.PluralCase]}function p(t){return t in Ed||(Ed[t]=sr.ng&&sr.ng.common&&sr.ng.common.locales&&sr.ng.common.locales[t]),Ed[t]}var r=(()=>((r=r||{})[r.LocaleId=0]="LocaleId",r[r.DayPeriodsFormat=1]="DayPeriodsFormat",r[r.DayPeriodsStandalone=2]="DayPeriodsStandalone",r[r.DaysFormat=3]="DaysFormat",r[r.DaysStandalone=4]="DaysStandalone",r[r.MonthsFormat=5]="MonthsFormat",r[r.MonthsStandalone=6]="MonthsStandalone",r[r.Eras=7]="Eras",r[r.FirstDayOfWeek=8]="FirstDayOfWeek",r[r.WeekendRange=9]="WeekendRange",r[r.DateFormat=10]="DateFormat",r[r.TimeFormat=11]="TimeFormat",r[r.DateTimeFormat=12]="DateTimeFormat",r[r.NumberSymbols=13]="NumberSymbols",r[r.NumberFormats=14]="NumberFormats",r[r.CurrencyCode=15]="CurrencyCode",r[r.CurrencySymbol=16]="CurrencySymbol",r[r.CurrencyName=17]="CurrencyName",r[r.Currencies=18]="Currencies",r[r.Directionality=19]="Directionality",r[r.PluralCase=20]="PluralCase",r[r.ExtraData=21]="ExtraData",r))();const m="en-US";let R=m;function O(t){jn(t,"Expected localeId to be defined"),"string"==typeof t&&(R=t.toLowerCase().replace(/_/g,"-"))}class _u{}const Ku="ngComponent";class va{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${We(t)}. Did you add it to @NgModule.entryComponents?`);return n[Ku]=t,n}(n)}}class Ja{}function lv(...t){}function Fp(t,n){return new Qu(hs(t,n))}Ja.NULL=new va;const RM=function(){return Fp(K(),x())};let Qu=(()=>{class t{constructor(i){this.nativeElement=i}}return t.__NG_ELEMENT_ID__=RM,t})();function hw(t){return t instanceof Qu?t.nativeElement:t}class cv{}let PM=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>LM(),t})();const LM=function(){const t=x(),i=Hs(K().index,t);return function(t){return t[11]}(Lo(i)?i:t)};let _b=(()=>{class t{}return t.\u0275prov=ye({token:t,providedIn:"root",factory:()=>null}),t})();class fw{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const dw=new fw("12.2.3");class pw{constructor(){}supports(n){return dd(n)}create(n){return new kM(n)}}const FM=(t,n)=>n;class kM{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||FM}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,l=0,h=null;for(;i||o;){const v=!o||i&&i.currentIndex<gw(o,l,h)?i:o,E=gw(v,l,h),D=v.currentIndex;if(v===o)l--,o=o._nextRemoved;else if(i=i._next,null==v.previousIndex)l++;else{h||(h=[]);const U=E-l,q=D-l;if(U!=q){for(let fe=0;fe<U;fe++){const Oe=fe<h.length?h[fe]:h[fe]=0,Ye=Oe+fe;q<=Ye&&Ye<U&&(h[fe]=Oe+1)}h[v.previousIndex]=q-U}}E!==D&&n(v,E,D)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!dd(n))throw new Error(`Error trying to diff '${We(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let l,h,v,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let E=0;E<this.length;E++)h=n[E],v=this._trackByFn(E,h),null!==i&&Object.is(i.trackById,v)?(o&&(i=this._verifyReinsertion(i,h,v,E)),Object.is(i.item,h)||this._addIdentityChange(i,h)):(i=this._mismatch(i,h,v,E),o=!0),i=i._next}else l=0,function(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Ch()]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,E=>{v=this._trackByFn(l,E),null!==i&&Object.is(i.trackById,v)?(o&&(i=this._verifyReinsertion(i,E,v,l)),Object.is(i.item,E)||this._addIdentityChange(i,E)):(i=this._mismatch(i,E,v,l),o=!0),i=i._next,l++}),this.length=l;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,l){let h;return null===n?h=this._itTail:(h=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,h,l)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,l))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,h,l)):n=this._addAfter(new BM(i,o),h,l),n}_verifyReinsertion(n,i,o,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==h?n=this._reinsertAfter(h,n._prev,l):n.currentIndex!=l&&(n.currentIndex=l,this._addToMoves(n,l)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const l=n._prevRemoved,h=n._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const l=null===i?this._itHead:i._next;return n._next=l,n._prev=i,null===l?this._itTail=n:l._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new mw),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mw),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class BM{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class UM{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class mw{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new UM,this.map.set(i,o)),o.add(n)}get(n,i){const l=this.map.get(n);return l?l.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gw(t,n,i){const o=t.previousIndex;if(null===o)return o;let l=0;return i&&o<i.length&&(l=i[o]),o+n+l}class yw{constructor(){}supports(n){return n instanceof Map||xf(n)}create(){return new VM}}class VM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||xf(n)))throw new Error(`Error trying to diff '${We(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,l)=>{if(i&&i.key===l)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const h=this._getOrCreateRecordForKey(l,o);i=this._insertBeforeOrAppend(i,h)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const l=this._records.get(n);this._maybeAddToChanges(l,i);const h=l._prev,v=l._next;return h&&(h._next=v),v&&(v._prev=h),l._next=null,l._prev=null,l}const o=new zM(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class zM{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vw(){return new uv([new pw])}let uv=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(null!=o){const l=o.factories.slice();i=i.concat(l)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||vw()),deps:[[t,new ru,new Fc]]}}find(i){const o=this.factories.find(l=>l.supports(i));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(t){return t.name||typeof t}(i)}'`)}}return t.\u0275prov=ye({token:t,providedIn:"root",factory:vw}),t})();function _w(){return new hv([new yw])}let hv=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(o){const l=o.factories.slice();i=i.concat(l)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||_w()),deps:[[t,new ru,new Fc]]}}find(i){const o=this.factories.find(l=>l.supports(i));if(o)return o;throw new Error(`Cannot find a differ supporting object '${i}'`)}}return t.\u0275prov=ye({token:t,providedIn:"root",factory:_w}),t})();function fv(t,n,i,o,l=!1){for(;null!==i;){const h=n[i.index];if(null!==h&&o.push(kr(h)),Os(h))for(let E=10;E<h.length;E++){const D=h[E],U=D[1].firstChild;null!==U&&fv(D[1],D,U,o)}const v=i.type;if(8&v)fv(t,n,i.child,o);else if(32&v){const E=Hc(i,n);let D;for(;D=E();)o.push(D)}else if(16&v){const E=Am(n,i);if(Array.isArray(E))o.push(...E);else{const D=su(n[16]);fv(D[1],D,E,o,!0)}}i=l?i.projectionNext:i.next}return o}class jg{constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,i=n[1];return fv(i,n,i.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Os(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(Cl(n,o),as(i,o))}this._attachedToViewContainer=!1}wm(this._lView[1],this._lView)}onDestroy(n){Hu(this._lView[1],this._lView,null,n)}markForCheck(){id(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xm(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,i){Xr(!0);try{Xm(t,n,i)}finally{Xr(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,jc(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class GM extends jg{constructor(n){super(n),this._view=n}detectChanges(){ap(this._view)}checkNoChanges(){!function(t){Xr(!0);try{ap(t)}finally{Xr(!1)}}(this._view)}get context(){return null}}const WM=function(t){return function(t,n,i){if(al(t)&&!i){const o=Hs(t.index,n);return new jg(o,o)}return 47&t.type?new jg(n[16],n):null}(K(),x(),16==(16&t))};let $M=(()=>{class t{}return t.__NG_ELEMENT_ID__=WM,t})();const XM=[new yw],QM=new uv([new pw]),ZM=new hv(XM),eS=function(){return dv(K(),x())};let Wg=(()=>{class t{}return t.__NG_ELEMENT_ID__=eS,t})();const tS=Wg,nS=class extends tS{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}createEmbeddedView(n){const i=this._declarationTContainer.tViews,o=Kf(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(o[19]=h.createEmbeddedView(i)),Qf(i,o,n),new jg(o)}};function dv(t,n){return 4&t.type?new nS(n,t,Fp(t,n)):null}class Md{}class bw{}const sS=function(){return Ew(K(),x())};let pv=(()=>{class t{}return t.__NG_ELEMENT_ID__=sS,t})();const aS=pv,xw=class extends aS{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Fp(this._hostTNode,this._hostLView)}get injector(){return new X(this._hostTNode,this._hostLView)}get parentInjector(){const n=Oc(this._hostTNode,this._hostLView);if(bl(n)){const i=kl(n,this._hostLView),o=Ya(n);return new X(i[1].data[o+8],i)}return new X(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=ww(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,i,o){const l=n.createEmbeddedView(i||{});return this.insert(l,o),l}createComponent(n,i,o,l,h){const v=o||this.parentInjector;if(!h&&null==n.ngModule&&v){const D=v.get(Md,null);D&&(h=D)}const E=n.create(v,l,void 0,h);return this.insert(E.hostView,i),E}insert(n,i){const o=n._lView,l=o[1];if(Os(o[3])){const q=this.indexOf(n);if(-1!==q)this.detach(q);else{const se=o[3],fe=new xw(se,se[6],se[3]);fe.detach(fe.indexOf(n))}}const h=this._adjustIndex(i),v=this._lContainer;!function(t,n,i,o){const l=10+o,h=i.length;o>0&&(i[l-1][4]=n),o<h-10?(n[4]=i[l],is(i,10+o,n)):(i.push(n),n[4]=null),n[3]=i;const v=n[17];null!==v&&i!==v&&function(t,n){const i=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===i?t[9]=[n]:i.push(n)}(v,n);const E=n[19];null!==E&&E.insertView(t),n[2]|=128}(l,o,v,h);const E=jd(h,v),D=o[11],U=Gd(D,v[7]);return null!==U&&function(t,n,i,o,l,h){o[0]=l,o[6]=n,jc(t,o,i,1,l,h)}(l,v[6],D,o,U,E),n.attachToViewContainerRef(),is(bb(v),h,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=ww(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=Cl(this._lContainer,i);o&&(as(bb(this._lContainer),i),wm(o[1],o))}detach(n){const i=this._adjustIndex(n,-1),o=Cl(this._lContainer,i);return o&&null!=as(bb(this._lContainer),i)?new jg(o):null}_adjustIndex(n,i=0){return null==n?this.length+i:n}};function ww(t){return t[8]}function bb(t){return t[8]||(t[8]=[])}function Ew(t,n){let i;const o=n[t.index];if(Os(o))i=o;else{let l;if(8&t.type)l=kr(o);else{const h=n[11];l=h.createComment("");const v=hs(t,n);xh(h,Gd(h,v),l,function(t,n){return yr(t)?t.nextSibling(n):n.nextSibling}(h,v),!1)}n[t.index]=i=Ym(o,n,l,t),hf(n,i)}return new xw(i,t,n)}const Vp={};class Gw extends Ja{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=us(n);return new Ww(i,this.ngModule)}}function jw(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}const r1=new mr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>En});class Ww extends _u{constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=n.selectors.map(Yv).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return jw(this.componentDef.inputs)}get outputs(){return jw(this.componentDef.outputs)}create(n,i,o,l){const h=(l=l||this.ngModule)?function(t,n){return{get:(i,o,l)=>{const h=t.get(i,Vp,l);return h!==Vp||o===Vp?h:n.get(i,o,l)}}}(n,l.injector):n,v=h.get(cv,zi),E=h.get(_b,null),D=v.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",q=o?function(t,n,i){if(yr(t))return t.selectRootElement(n,i===Jn.ShadowDom);let o="string"==typeof n?t.querySelector(n):n;return o.textContent="",o}(D,o,this.componentDef.encapsulation):Er(v.createRenderer(null,this.componentDef),U,function(t){const n=t.toLowerCase();return"svg"===n?j:"math"===n?"http://www.w3.org/1998/MathML/":null}(U)),se=this.componentDef.onPush?576:528,fe=function(t,n){return{components:[],scheduler:t||En,clean:sd,playerHandler:n||null,flags:0}}(),Oe=Jf(0,null,null,1,0,null,null,null,null,null),Ye=Kf(null,Oe,fe,se,null,null,v,D,E,h);let bt,lt;ts(Ye);try{const cn=function(t,n,i,o,l,h){const v=i[1];i[20]=t;const D=nf(v,20,2,"#host",null),U=D.mergedAttrs=n.hostAttrs;null!==U&&(Eh(D,U,!0),null!==t&&(Ks(l,t,U),null!==D.classes&&Rm(l,t,D.classes),null!==D.styles&&Sy(l,t,D.styles)));const q=o.createRenderer(t,n),se=Kf(i,$y(n),null,n.onPush?64:16,i[20],D,o,q,h||null,null);return v.firstCreatePass&&(pi(fl(D,i),v,n.type),cf(v,D),uf(D,i.length,1)),hf(i,se),i[20]=se}(q,this.componentDef,Ye,v,D);if(q)if(o)Ks(D,q,["ng-version",dw.full]);else{const{attrs:Ft,classes:Tr}=function(t){const n=[],i=[];let o=1,l=2;for(;o<t.length;){let h=t[o];if("string"==typeof h)2===l?""!==h&&n.push(h,t[++o]):8===l&&i.push(h);else{if(!wc(l))break;l=h}o++}return{attrs:n,classes:i}}(this.componentDef.selectors[0]);Ft&&Ks(D,q,Ft),Tr&&Tr.length>0&&Rm(D,q,Tr.join(" "))}if(lt=pa(Oe,20),void 0!==i){const Ft=lt.projection=[];for(let Tr=0;Tr<this.ngContentSelectors.length;Tr++){const qr=i[Tr];Ft.push(null!=qr?Array.from(qr):null)}}bt=function(t,n,i,o,l){const h=i[1],v=function(t,n,i){const o=K();t.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),rd(t,o,n,rf(t,n,1,null),i));const l=_(n,t,o.directiveStart,o);ue(l,n);const h=hs(o,n);return h&&ue(h,n),l}(h,i,n);if(o.components.push(v),t[8]=v,l&&l.forEach(D=>D(v,n)),n.contentQueries){const D=K();n.contentQueries(1,v,D.directiveStart)}const E=K();return!h.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Gi(E.index),tp(i[1],E,0,E.directiveStart,E.directiveEnd,n),wh(n,v)),v}(cn,this.componentDef,Ye,fe,[vp]),Qf(Oe,Ye,null)}finally{dr()}return new o1(this.componentType,bt,Fp(lt,Ye),Ye,lt)}}class o1 extends class{}{constructor(n,i,o,l,h){super(),this.location=o,this._rootLView=l,this._tNode=h,this.instance=i,this.hostView=this.changeDetectorRef=new GM(l),this.componentType=n}get injector(){return new X(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const zp=new Map;class c1 extends Md{constructor(n,i){super(),this._parent=i,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Gw(this);const o=Ms(n),l=n[Ba]||null;l&&O(l),this._bootstrapComponents=ia(o.bootstrap),this._r3Injector=rg(n,i,[{provide:Md,useValue:this},{provide:Ja,useValue:this.componentFactoryResolver}],We(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,i=ds.THROW_IF_NOT_FOUND,o=Xn.Default){return n===ds||n===Md||n===Wl?this:this._r3Injector.get(n,i,o)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Lb extends bw{constructor(n){super(),this.moduleType=n,null!==Ms(n)&&function(t){const n=new Set;!function i(o){const l=Ms(o,!0),h=l.id;null!==h&&(function(t,n,i){if(n&&n!==i)throw new Error(`Duplicate module registered for ${t} - ${We(n)} vs ${We(n.name)}`)}(h,zp.get(h),o),zp.set(h,o));const v=ia(l.imports);for(const E of v)n.has(E)||(n.add(E),i(E))}(t)}(n)}create(n){return new c1(this.moduleType,n)}}function Yw(t,n,i,o){return Xw(x(),at(),t,n,i,o)}function Jg(t,n){const i=t[n];return i===si?void 0:i}function Xw(t,n,i,o,l,h){const v=n+i;return la(t,v,l)?Al(t,v+1,h?o.call(h,l):o(l)):Jg(t,v+1)}function Qw(t,n,i,o,l,h,v,E){const D=n+i;return function(t,n,i,o,l){const h=Ac(t,n,i,o);return la(t,n+2,l)||h}(t,D,l,h,v)?Al(t,D+3,E?o.call(E,l,h,v):o(l,h,v)):Jg(t,D+3)}function Zw(t,n,i,o,l,h,v,E,D){const U=n+i;return function(t,n,i,o,l,h){const v=Ac(t,n,i,o);return Ac(t,n+2,l,h)||v}(t,U,l,h,v,E)?Al(t,U+4,D?o.call(D,l,h,v,E):o(l,h,v,E)):Jg(t,U+4)}function eE(t,n){const i=S();let o;const l=t+20;i.firstCreatePass?(o=function(t,n){if(n)for(let i=n.length-1;i>=0;i--){const o=n[i];if(t===o.name)return o}throw new Mn("302",`The pipe '${t}' could not be found!`)}(n,i.pipeRegistry),i.data[l]=o,o.onDestroy&&(i.destroyHooks||(i.destroyHooks=[])).push(l,o.onDestroy)):o=i.data[l];const h=o.factory||(o.factory=vo(o.type)),v=Ln(Tf);try{const E=Da(!1),D=h();return Da(E),function(t,n,i,o){i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),n[i]=o}(i,x(),l,D),D}finally{Ln(v)}}function tE(t,n,i){const o=t+20,l=x(),h=ar(l,o);return ty(l,ey(l,o)?Xw(l,at(),n,h.transform,i,h):h.transform(i))}function nE(t,n,i,o,l){const h=t+20,v=x(),E=ar(v,h);return ty(v,ey(v,h)?Qw(v,at(),n,E.transform,i,o,l,E):E.transform(i,o,l))}function rE(t,n,i,o,l,h){const v=t+20,E=x(),D=ar(E,v);return ty(E,ey(E,v)?Zw(E,at(),n,D.transform,i,o,l,h,D):D.transform(i,o,l,h))}function ey(t,n){return t[1].data[n].pure}function ty(t,n){return aa.isWrapped(n)&&(n=aa.unwrap(n),t[er.lFrame.bindingIndex]=si),n}function Ob(t){return n=>{setTimeout(t,void 0,n)}}const Zu=class extends Me.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){var l,h,v;let E=n,D=i||(()=>null),U=o;if(n&&"object"==typeof n){const se=n;E=null===(l=se.next)||void 0===l?void 0:l.bind(se),D=null===(h=se.error)||void 0===h?void 0:h.bind(se),U=null===(v=se.complete)||void 0===v?void 0:v.bind(se)}this.__isAsync&&(D=Ob(D),E&&(E=Ob(E)),U&&(U=Ob(U)));const q=super.subscribe({next:E,error:D,complete:U});return n instanceof Re.w&&n.add(q),q}};function E1(){return this._results[Ch()]()}class _v{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=Ch(),o=_v.prototype;o[i]||(o[i]=E1)}get changes(){return this._changes||(this._changes=new Zu)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const l=Wi(n);(this._changesDetected=!function(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let l=t[o],h=n[o];if(i&&(l=i(l),h=i(h)),h!==l)return!1}return!0}(o._results,l,i))&&(o._results=l,o.length=l.length,o.last=l[this.length-1],o.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Nb{constructor(n){this.queryList=n,this.matches=null}clone(){return new Nb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fb{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,l=[];for(let h=0;h<o;h++){const v=i.getByIndex(h);l.push(this.queries[v.indexInDeclarationView].clone())}return new Fb(l)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==fE(n,i).matches&&this.queries[i].setDirty()}}class iE{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class kb{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const l=null!==i?i.length:0,h=this.getByIndex(o).embeddedTView(n,l);h&&(h.indexInDeclarationView=o,null!==i?i.push(h):i=[h])}return null!==i?new kb(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Bb{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Bb(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let l=0;l<o.length;l++){const h=o[l];this.matchTNodeWithReadOption(n,i,T1(i,h)),this.matchTNodeWithReadOption(n,i,u(i,n,h,!1,!1))}else o===Wg?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,u(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const l=this.metadata.read;if(null!==l)if(l===Qu||l===pv||l===Wg&&4&i.type)this.addMatch(i.index,-2);else{const h=u(i,n,l,!1,!1);null!==h&&this.addMatch(i.index,h)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function T1(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function A1(t,n,i,o){return-1===i?function(t,n){return 11&t.type?Fp(t,n):4&t.type?dv(t,n):null}(n,t):-2===i?function(t,n,i){return i===Qu?Fp(n,t):i===Wg?dv(n,t):i===pv?Ew(n,t):void 0}(t,n,o):_(t,t[1],i,n)}function sE(t,n,i,o){const l=n[19].queries[o];if(null===l.matches){const h=t.data,v=i.matches,E=[];for(let D=0;D<v.length;D+=2){const U=v[D];E.push(U<0?null:A1(n,h[U],v[D+1],i.metadata.read))}l.matches=E}return l.matches}function Ub(t,n,i,o){const l=t.queries.getByIndex(i),h=l.matches;if(null!==h){const v=sE(t,n,l,i);for(let E=0;E<h.length;E+=2){const D=h[E];if(D>0)o.push(v[E/2]);else{const U=h[E+1],q=n[-D];for(let se=10;se<q.length;se++){const fe=q[se];fe[17]===fe[3]&&Ub(fe[1],fe,U,o)}if(null!==q[9]){const se=q[9];for(let fe=0;fe<se.length;fe++){const Oe=se[fe];Ub(Oe[1],Oe,U,o)}}}}}return o}function oE(t){const n=x(),i=S(),o=Hi();pe(o+1);const l=fE(i,o);if(t.dirty&&yl(n)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const h=l.crossesNgTemplate?Ub(i,n,o,[]):sE(i,n,l,o);t.reset(h,hw),t.notifyOnChanges()}return!0}return!1}function aE(t,n,i){const o=S();o.firstCreatePass&&(hE(o,new iE(t,n,i),-1),2==(2&n)&&(o.staticViewQueries=!0)),uE(o,x(),n)}function lE(t,n,i,o){const l=S();if(l.firstCreatePass){const h=K();hE(l,new iE(n,i,o),h.index),function(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(l,t),2==(2&i)&&(l.staticContentQueries=!0)}uE(l,x(),i)}function cE(){return t=x(),n=Hi(),t[19].queries[n].queryList;var t,n}function uE(t,n,i){const o=new _v(4==(4&i));Hu(t,n,o,o.destroy),null===n[19]&&(n[19]=new Fb),n[19].queries.push(new Nb(o))}function hE(t,n,i){null===t.queries&&(t.queries=new kb),t.queries.track(new Bb(n,i))}function fE(t,n){return t.queries.getByIndex(n)}function dE(t,n){return dv(t,n)}const Wb=new mr("Application Initializer");let Gp=(()=>{class t{constructor(i){this.appInits=i,this.resolve=lv,this.reject=lv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,l)=>{this.resolve=o,this.reject=l})}runInitializers(){if(this.initialized)return;const i=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Cp(h))i.push(h);else if(Ap(h)){const v=new Promise((E,D)=>{h.subscribe({complete:E,error:D})});i.push(v)}}Promise.all(i).then(()=>{o()}).catch(l=>{this.reject(l)}),0===i.length&&o(),this.initialized=!0}}return t.\u0275fac=function(i){return new(i||t)($s(Wb,8))},t.\u0275prov=ye({token:t,factory:t.\u0275fac}),t})();const PE=new mr("AppId"),iT={provide:PE,useFactory:function(){return`${$b()}${$b()}${$b()}`},deps:[]};function $b(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const IE=new mr("Platform Initializer"),LE=new mr("Platform ID"),OE=new mr("appBootstrapListener");let NE=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ye({token:t,factory:t.\u0275fac}),t})();const wv=new mr("LocaleId"),FE=new mr("DefaultCurrencyCode");class oT{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}const qb=function(t){return new Lb(t)},aT=qb,lT=function(t){return Promise.resolve(qb(t))},kE=function(t){const n=qb(t),o=ia(Ms(t).declarations).reduce((l,h)=>{const v=us(h);return v&&l.push(new Ww(v)),l},[]);return new oT(n,o)},cT=kE,uT=function(t){return Promise.resolve(kE(t))};let ry=(()=>{class t{constructor(){this.compileModuleSync=aT,this.compileModuleAsync=lT,this.compileModuleAndAllComponentsSync=cT,this.compileModuleAndAllComponentsAsync=uT}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ye({token:t,factory:t.\u0275fac}),t})();const dT=(()=>Promise.resolve(0))();function Yb(t){"undefined"==typeof Zone?dT.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ic{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zu(!1),this.onMicrotaskEmpty=new Zu(!1),this.onStable=new Zu(!1),this.onError=new Zu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!o&&i,l.shouldCoalesceRunChangeDetection=o,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let t=sr.requestAnimationFrame,n=sr.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(sr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Kb(t),t.isCheckStableRunning=!0,Xb(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Kb(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,l,h,v,E)=>{try{return BE(t),i.invokeTask(l,h,v,E)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||t.shouldCoalesceRunChangeDetection)&&n(),UE(t)}},onInvoke:(i,o,l,h,v,E,D)=>{try{return BE(t),i.invoke(l,h,v,E,D)}finally{t.shouldCoalesceRunChangeDetection&&n(),UE(t)}},onHasTask:(i,o,l,h)=>{i.hasTask(l,h),o===l&&("microTask"==h.change?(t._hasPendingMicrotasks=h.microTask,Kb(t),Xb(t)):"macroTask"==h.change&&(t.hasPendingMacrotasks=h.macroTask))},onHandleError:(i,o,l,h)=>(i.handleError(l,h),t.runOutsideAngular(()=>t.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ic.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ic.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,l){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+l,n,mT,lv,lv);try{return h.runTask(v,i,o)}finally{h.cancelTask(v)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const mT={};function Xb(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Kb(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function BE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function UE(t){t._nesting--,Xb(t)}class vT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zu,this.onMicrotaskEmpty=new Zu,this.onStable=new Zu,this.onError=new Zu}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,l){return n.apply(i,o)}}let VE=(()=>{class t{constructor(i){this._ngZone=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ic.assertNotInAngularZone(),Yb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yb(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,l){let h=-1;o&&o>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:h,updateCb:l})}whenStable(i,o,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(i,o,l){return[]}}return t.\u0275fac=function(i){return new(i||t)($s(Ic))},t.\u0275prov=ye({token:t,factory:t.\u0275fac}),t})(),zE=(()=>{class t{constructor(){this._applications=new Map,Qb.addToWindow(this)}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return Qb.findTestabilityInTree(this,i,o)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ye({token:t,factory:t.\u0275fac}),t})();class _T{addToWindow(n){}findTestabilityInTree(n,i,o){return null}}function bT(t){Qb=t}let Qb=new _T,HE=!0,GE=!1;function xT(){if(GE)throw new Error("Cannot enable prod mode after platform setup.");HE=!1}let wu;const WE=new mr("AllowMultipleToken");class AT{constructor(n,i){this.name=n,this.token=i}}function $E(t,n,i=[]){const o=`Platform: ${n}`,l=new mr(o);return(h=[])=>{let v=qE();if(!v||v.injector.get(WE,!1))if(t)t(i.concat(h).concat({provide:l,useValue:!0}));else{const E=i.concat(h).concat({provide:l,useValue:!0},{provide:Wc,useValue:"platform"});!function(t){if(wu&&!wu.destroyed&&!wu.injector.get(WE,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");wu=t.get(YE);const n=t.get(IE,null);n&&n.forEach(i=>i())}(ds.create({providers:E,name:o}))}return function(t){const n=qE();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(l)}}function qE(){return wu&&!wu.destroyed?wu:null}let YE=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const E=function(t,n){let i;return i="noop"===t?new vT:("zone.js"===t?void 0:t)||new Ic({enableLongStackTrace:(GE=!0,HE),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),i}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),D=[{provide:Ic,useValue:E}];return E.run(()=>{const U=ds.create({providers:D,parent:this.injector,name:i.moduleType.name}),q=i.create(U),se=q.injector.get(Ko,null);if(!se)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return E.runOutsideAngular(()=>{const fe=E.onError.subscribe({next:Oe=>{se.handleError(Oe)}});q.onDestroy(()=>{Zb(this._modules,q),fe.unsubscribe()})}),function(t,n,i){try{const o=i();return Cp(o)?o.catch(l=>{throw n.runOutsideAngular(()=>t.handleError(l)),l}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(se,E,()=>{const fe=q.injector.get(Gp);return fe.runInitializers(),fe.donePromise.then(()=>(O(q.injector.get(wv,m)||m),this._moduleDoBootstrap(q),q))})})}bootstrapModule(i,o=[]){const l=XE({},o);return function(t,n,i){const o=new Lb(i);return Promise.resolve(o)}(0,0,i).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(i){const o=i.injector.get(iy);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(l=>o.bootstrap(l));else{if(!i.instance.ngDoBootstrap)throw new Error(`The module ${We(i.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(i){return new(i||t)($s(ds))},t.\u0275prov=ye({token:t,factory:t.\u0275fac}),t})();function XE(t,n){return Array.isArray(n)?n.reduce(XE,t):Object.assign(Object.assign({},t),n)}let iy=(()=>{class t{constructor(i,o,l,h,v){this._zone=i,this._injector=o,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new G.y(U=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{U.next(this._stable),U.complete()})}),D=new G.y(U=>{let q;this._zone.runOutsideAngular(()=>{q=this._zone.onStable.subscribe(()=>{Ic.assertNotInAngularZone(),Yb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,U.next(!0))})})});const se=this._zone.onUnstable.subscribe(()=>{Ic.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{U.next(!1)}))});return()=>{q.unsubscribe(),se.unsubscribe()}});this.isStable=function(...t){let n=Number.POSITIVE_INFINITY,i=null,o=t[t.length-1];return(0,Y.K)(o)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof o&&(n=t.pop()),null===i&&1===t.length&&t[0]instanceof G.y?t[0]:(0,Be.J)(n)((0,Je.n)(t,i))}(E,D.pipe(t=>(0,te.x)()(function(t,n){return function(o){let l;l="function"==typeof t?t:function(){return t};const h=Object.create(o,Ne.N);return h.source=o,h.subjectFactory=l,h}}(xe)(t))))}bootstrap(i,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=i instanceof _u?i:this._componentFactoryResolver.resolveComponentFactory(i),this.componentTypes.push(l.componentType);const h=function(t){return t.isBoundToModule}(l)?void 0:this._injector.get(Md),E=l.create(ds.NULL,[],o||l.selector,h),D=E.location.nativeElement,U=E.injector.get(VE,null),q=U&&E.injector.get(zE);return U&&q&&q.registerApplication(D,U),E.onDestroy(()=>{this.detachView(E.hostView),Zb(this.components,E),q&&q.unregisterApplication(D)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;Zb(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(OE,[]).concat(this._bootstrapListeners).forEach(l=>l(i))}ngOnDestroy(){this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(i){return new(i||t)($s(Ic),$s(ds),$s(Ko),$s(Ja),$s(Gp))},t.\u0275prov=ye({token:t,factory:t.\u0275fac}),t})();function Zb(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}class OT{}class FT{}const kT={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let BT=(()=>{class t{constructor(i,o){this._compiler=i,this._config=o||kT}load(i){return this.loadAndCompile(i)}loadAndCompile(i){let[o,l]=i.split("#");return void 0===l&&(l="default"),ae(8255)(o).then(h=>h[l]).then(h=>JE(h,o,l)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(i){let[o,l]=i.split("#"),h="NgFactory";return void 0===l&&(l="default",h=""),ae(8255)(this._config.factoryPathPrefix+o+this._config.factoryPathSuffix).then(v=>v[l+h]).then(v=>JE(v,o,l))}}return t.\u0275fac=function(i){return new(i||t)($s(ry),$s(FT,8))},t.\u0275prov=ye({token:t,factory:t.\u0275fac}),t})();function JE(t,n,i){if(!t)throw new Error(`Cannot find '${i}' in '${n}'`);return t}const $T=function(t){return null},YT=$E(null,"core",[{provide:LE,useValue:"unknown"},{provide:YE,deps:[ds]},{provide:zE,deps:[]},{provide:NE,deps:[]}]),JT=[{provide:iy,useClass:iy,deps:[Ic,ds,Ko,Ja,Gp]},{provide:r1,deps:[Ic],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(i){n.push(i)}}},{provide:Gp,useClass:Gp,deps:[[new Fc,Wb]]},{provide:ry,useClass:ry,deps:[]},iT,{provide:uv,useFactory:function(){return QM},deps:[]},{provide:hv,useFactory:function(){return ZM},deps:[]},{provide:wv,useFactory:function(t){return O(t=t||"undefined"!=typeof $localize&&$localize.locale||m),t},deps:[[new ch(wv),new Fc,new ru]]},{provide:FE,useValue:"USD"}];let tC=(()=>{class t{constructor(i){}}return t.\u0275fac=function(i){return new(i||t)($s(iy))},t.\u0275mod=mo({type:t}),t.\u0275inj=Se({providers:JT}),t})()},6237:(jt,mt,ae)=>{"use strict";ae.d(mt,{PW:()=>_l});var G=ae(639),Y=ae(9075),Be=ae(7238);function Je(){return"undefined"!=typeof window&&void 0!==window.document}function _e(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Me(Q){switch(Q.length){case 0:return new Be.ZN;case 1:return Q[0];default:return new Be.ZE(Q)}}function Re(Q,x,S,F,K={},he={}){const Ce=[],Le=[];let nt=-1,Rt=null;if(F.forEach(dn=>{const zn=dn.offset,Cr=zn==nt,Xr=Cr&&Rt||{};Object.keys(dn).forEach(at=>{let On=at,jr=dn[at];if("offset"!==at)switch(On=x.normalizePropertyName(On,Ce),jr){case Be.k1:jr=K[at];break;case Be.l3:jr=he[at];break;default:jr=x.normalizeStyleValue(at,On,jr,Ce)}Xr[On]=jr}),Cr||Le.push(Xr),Rt=Xr,nt=zn}),Ce.length){const dn="\n - ";throw new Error(`Unable to animate due to the following errors:${dn}${Ce.join(dn)}`)}return Le}function Ne(Q,x,S,F){switch(x){case"start":Q.onStart(()=>F(S&&ze(S,"start",Q)));break;case"done":Q.onDone(()=>F(S&&ze(S,"done",Q)));break;case"destroy":Q.onDestroy(()=>F(S&&ze(S,"destroy",Q)))}}function ze(Q,x,S){const F=S.totalTime,he=ne(Q.element,Q.triggerName,Q.fromState,Q.toState,x||Q.phaseName,null==F?Q.totalTime:F,!!S.disabled),Ce=Q._data;return null!=Ce&&(he._data=Ce),he}function ne(Q,x,S,F,K="",he=0,Ce){return{element:Q,triggerName:x,fromState:S,toState:F,phaseName:K,totalTime:he,disabled:!!Ce}}function te(Q,x,S){let F;return Q instanceof Map?(F=Q.get(x),F||Q.set(x,F=S)):(F=Q[x],F||(F=Q[x]=S)),F}function xe(Q){const x=Q.indexOf(":");return[Q.substring(1,x),Q.substr(x+1)]}let Ue=(Q,x)=>!1,tt=(Q,x)=>!1,gt=(Q,x,S)=>[];const Yt=_e();(Yt||"undefined"!=typeof Element)&&(Ue=Je()?(Q,x)=>{for(;x&&x!==document.documentElement;){if(x===Q)return!0;x=x.parentNode||x.host}return!1}:(Q,x)=>Q.contains(x),tt=(()=>{if(Yt||Element.prototype.matches)return(Q,x)=>Q.matches(x);{const Q=Element.prototype,x=Q.matchesSelector||Q.mozMatchesSelector||Q.msMatchesSelector||Q.oMatchesSelector||Q.webkitMatchesSelector;return x?(S,F)=>x.apply(S,[F]):tt}})(),gt=(Q,x,S)=>{let F=[];if(S){const K=Q.querySelectorAll(x);for(let he=0;he<K.length;he++)F.push(K[he])}else{const K=Q.querySelector(x);K&&F.push(K)}return F});let Ot=null,dt=!1;function Mn(Q){Ot||(Ot=("undefined"!=typeof document?document.body:null)||{},dt=!!Ot.style&&"WebkitAppearance"in Ot.style);let x=!0;return Ot.style&&!function(Q){return"ebkit"==Q.substring(1,6)}(Q)&&(x=Q in Ot.style,!x&&dt&&(x="Webkit"+Q.charAt(0).toUpperCase()+Q.substr(1)in Ot.style)),x}const Gn=tt,ut=Ue,Wt=gt;function Tn(Q){const x={};return Object.keys(Q).forEach(S=>{const F=S.replace(/([a-z])([A-Z])/g,"$1-$2");x[F]=Q[S]}),x}let br=(()=>{class Q{validateStyleProperty(S){return Mn(S)}matchesElement(S,F){return Gn(S,F)}containsElement(S,F){return ut(S,F)}query(S,F,K){return Wt(S,F,K)}computeStyle(S,F,K){return K||""}animate(S,F,K,he,Ce,Le=[],nt){return new Be.ZN(K,he)}}return Q.\u0275fac=function(S){return new(S||Q)},Q.\u0275prov=G.Yz7({token:Q,factory:Q.\u0275fac}),Q})();class qn{}qn.NOOP=new br;const en="ng-enter",vn="ng-leave",ss="ng-trigger",Ai=".ng-trigger",ca="ng-animating",Us=".ng-animating";function wn(Q){if("number"==typeof Q)return Q;const x=Q.match(/^(-?[\.\d]+)(m?s)/);return!x||x.length<2?0:kt(parseFloat(x[1]),x[2])}function kt(Q,x){switch(x){case"s":return 1e3*Q;default:return Q}}function mn(Q,x,S){return Q.hasOwnProperty("duration")?Q:function(Q,x,S){let K,he=0,Ce="";if("string"==typeof Q){const Le=Q.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Le)return x.push(`The provided timing value "${Q}" is invalid.`),{duration:0,delay:0,easing:""};K=kt(parseFloat(Le[1]),Le[2]);const nt=Le[3];null!=nt&&(he=kt(parseFloat(nt),Le[4]));const Rt=Le[5];Rt&&(Ce=Rt)}else K=Q;if(!S){let Le=!1,nt=x.length;K<0&&(x.push("Duration values below 0 are not allowed for this animation step."),Le=!0),he<0&&(x.push("Delay values below 0 are not allowed for this animation step."),Le=!0),Le&&x.splice(nt,0,`The provided timing value "${Q}" is invalid.`)}return{duration:K,delay:he,easing:Ce}}(Q,x,S)}function ln(Q,x={}){return Object.keys(Q).forEach(S=>{x[S]=Q[S]}),x}function wr(Q,x,S={}){if(x)for(let F in Q)S[F]=Q[F];else ln(Q,S);return S}function to(Q,x,S){return S?x+":"+S+";":""}function ye(Q){let x="";for(let S=0;S<Q.style.length;S++){const F=Q.style.item(S);x+=to(0,F,Q.style.getPropertyValue(F))}for(const S in Q.style)Q.style.hasOwnProperty(S)&&!S.startsWith("_")&&(x+=to(0,Ni(S),Q.style[S]));Q.setAttribute("style",x)}function qe(Q,x,S){Q.style&&(Object.keys(x).forEach(F=>{const K=Vs(F);S&&!S.hasOwnProperty(F)&&(S[F]=Q.style[K]),Q.style[K]=x[F]}),_e()&&ye(Q))}function Se(Q,x){Q.style&&(Object.keys(x).forEach(S=>{const F=Vs(S);Q.style[F]=""}),_e()&&ye(Q))}function $t(Q){return Array.isArray(Q)?1==Q.length?Q[0]:(0,Be.vP)(Q):Q}const Kt=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ir(Q){let x=[];if("string"==typeof Q){let S;for(;S=Kt.exec(Q);)x.push(S[1]);Kt.lastIndex=0}return x}function fi(Q,x,S){const F=Q.toString(),K=F.replace(Kt,(he,Ce)=>{let Le=x[Ce];return x.hasOwnProperty(Ce)||(S.push(`Please provide a value for the animation param ${Ce}`),Le=""),Le.toString()});return K==F?Q:K}function Jr(Q){const x=[];let S=Q.next();for(;!S.done;)x.push(S.value),S=Q.next();return x}const Ti=/-+([a-z0-9])/g;function Vs(Q){return Q.replace(Ti,(...x)=>x[1].toUpperCase())}function Ni(Q){return Q.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Xn(Q,x){return 0===Q||0===x}function Di(Q,x,S){const F=Object.keys(S);if(F.length&&x.length){let he=x[0],Ce=[];if(F.forEach(Le=>{he.hasOwnProperty(Le)||Ce.push(Le),he[Le]=S[Le]}),Ce.length)for(var K=1;K<x.length;K++){let Le=x[K];Ce.forEach(function(nt){Le[nt]=Ln(Q,nt)})}}return x}function kn(Q,x,S){switch(x.type){case 7:return Q.visitTrigger(x,S);case 0:return Q.visitState(x,S);case 1:return Q.visitTransition(x,S);case 2:return Q.visitSequence(x,S);case 3:return Q.visitGroup(x,S);case 4:return Q.visitAnimate(x,S);case 5:return Q.visitKeyframes(x,S);case 6:return Q.visitStyle(x,S);case 8:return Q.visitReference(x,S);case 9:return Q.visitAnimateChild(x,S);case 10:return Q.visitAnimateRef(x,S);case 11:return Q.visitQuery(x,S);case 12:return Q.visitStagger(x,S);default:throw new Error(`Unable to resolve animation metadata node #${x.type}`)}}function Ln(Q,x){return window.getComputedStyle(Q)[x]}function Ji(Q,x){const S=[];return"string"==typeof Q?Q.split(/\s*,\s*/).forEach(F=>function(Q,x,S){if(":"==Q[0]){const nt=function(Q,x){switch(Q){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(S,F)=>parseFloat(F)>parseFloat(S);case":decrement":return(S,F)=>parseFloat(F)<parseFloat(S);default:return x.push(`The transition alias value "${Q}" is not supported`),"* => *"}}(Q,S);if("function"==typeof nt)return void x.push(nt);Q=nt}const F=Q.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==F||F.length<4)return S.push(`The provided transition expression "${Q}" is not supported`),x;const K=F[1],he=F[2],Ce=F[3];x.push(Jn(K,Ce));"<"==he[0]&&!("*"==K&&"*"==Ce)&&x.push(Jn(Ce,K))}(F,S,x)):S.push(Q),S}const Mi=new Set(["true","1"]),ml=new Set(["false","0"]);function Jn(Q,x){const S=Mi.has(Q)||ml.has(Q),F=Mi.has(x)||ml.has(x);return(K,he)=>{let Ce="*"==Q||Q==K,Le="*"==x||x==he;return!Ce&&S&&"boolean"==typeof K&&(Ce=K?Mi.has(Q):ml.has(Q)),!Le&&F&&"boolean"==typeof he&&(Le=he?Mi.has(x):ml.has(x)),Ce&&Le}}const Ri=new RegExp("s*:selfs*,?","g");function Io(Q,x,S){return new sr(Q).build(x,S)}class sr{constructor(x){this._driver=x}build(x,S){const F=new no(S);return this._resetContextStyleTimingState(F),kn(this,$t(x),F)}_resetContextStyleTimingState(x){x.currentQuerySelector="",x.collectedStyles={},x.collectedStyles[""]={},x.currentTime=0}visitTrigger(x,S){let F=S.queryCount=0,K=S.depCount=0;const he=[],Ce=[];return"@"==x.name.charAt(0)&&S.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),x.definitions.forEach(Le=>{if(this._resetContextStyleTimingState(S),0==Le.type){const nt=Le,Rt=nt.name;Rt.toString().split(/\s*,\s*/).forEach(dn=>{nt.name=dn,he.push(this.visitState(nt,S))}),nt.name=Rt}else if(1==Le.type){const nt=this.visitTransition(Le,S);F+=nt.queryCount,K+=nt.depCount,Ce.push(nt)}else S.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:x.name,states:he,transitions:Ce,queryCount:F,depCount:K,options:null}}visitState(x,S){const F=this.visitStyle(x.styles,S),K=x.options&&x.options.params||null;if(F.containsDynamicStyles){const he=new Set,Ce=K||{};if(F.styles.forEach(Le=>{if(ro(Le)){const nt=Le;Object.keys(nt).forEach(Rt=>{Ir(nt[Rt]).forEach(dn=>{Ce.hasOwnProperty(dn)||he.add(dn)})})}}),he.size){const Le=Jr(he.values());S.errors.push(`state("${x.name}", ...) must define default values for all the following style substitutions: ${Le.join(", ")}`)}}return{type:0,name:x.name,style:F,options:K?{params:K}:null}}visitTransition(x,S){S.queryCount=0,S.depCount=0;const F=kn(this,$t(x.animation),S);return{type:1,matchers:Ji(x.expr,S.errors),animation:F,queryCount:S.queryCount,depCount:S.depCount,options:Ui(x.options)}}visitSequence(x,S){return{type:2,steps:x.steps.map(F=>kn(this,F,S)),options:Ui(x.options)}}visitGroup(x,S){const F=S.currentTime;let K=0;const he=x.steps.map(Ce=>{S.currentTime=F;const Le=kn(this,Ce,S);return K=Math.max(K,S.currentTime),Le});return S.currentTime=K,{type:3,steps:he,options:Ui(x.options)}}visitAnimate(x,S){const F=function(Q,x){let S=null;if(Q.hasOwnProperty("duration"))S=Q;else if("number"==typeof Q)return ua(mn(Q,x).duration,0,"");const F=Q;if(F.split(/\s+/).some(he=>"{"==he.charAt(0)&&"{"==he.charAt(1))){const he=ua(0,0,"");return he.dynamic=!0,he.strValue=F,he}return S=S||mn(F,x),ua(S.duration,S.delay,S.easing)}(x.timings,S.errors);S.currentAnimateTimings=F;let K,he=x.styles?x.styles:(0,Be.oB)({});if(5==he.type)K=this.visitKeyframes(he,S);else{let Ce=x.styles,Le=!1;if(!Ce){Le=!0;const Rt={};F.easing&&(Rt.easing=F.easing),Ce=(0,Be.oB)(Rt)}S.currentTime+=F.duration+F.delay;const nt=this.visitStyle(Ce,S);nt.isEmptyStep=Le,K=nt}return S.currentAnimateTimings=null,{type:4,timings:F,style:K,options:null}}visitStyle(x,S){const F=this._makeStyleAst(x,S);return this._validateStyleAst(F,S),F}_makeStyleAst(x,S){const F=[];Array.isArray(x.styles)?x.styles.forEach(Ce=>{"string"==typeof Ce?Ce==Be.l3?F.push(Ce):S.errors.push(`The provided style string value ${Ce} is not allowed.`):F.push(Ce)}):F.push(x.styles);let K=!1,he=null;return F.forEach(Ce=>{if(ro(Ce)){const Le=Ce,nt=Le.easing;if(nt&&(he=nt,delete Le.easing),!K)for(let Rt in Le)if(Le[Rt].toString().indexOf("{{")>=0){K=!0;break}}}),{type:6,styles:F,easing:he,offset:x.offset,containsDynamicStyles:K,options:null}}_validateStyleAst(x,S){const F=S.currentAnimateTimings;let K=S.currentTime,he=S.currentTime;F&&he>0&&(he-=F.duration+F.delay),x.styles.forEach(Ce=>{"string"!=typeof Ce&&Object.keys(Ce).forEach(Le=>{if(!this._driver.validateStyleProperty(Le))return void S.errors.push(`The provided animation property "${Le}" is not a supported CSS property for animations`);const nt=S.collectedStyles[S.currentQuerySelector],Rt=nt[Le];let dn=!0;Rt&&(he!=K&&he>=Rt.startTime&&K<=Rt.endTime&&(S.errors.push(`The CSS property "${Le}" that exists between the times of "${Rt.startTime}ms" and "${Rt.endTime}ms" is also being animated in a parallel animation between the times of "${he}ms" and "${K}ms"`),dn=!1),he=Rt.startTime),dn&&(nt[Le]={startTime:he,endTime:K}),S.options&&function(Q,x,S){const F=x.params||{},K=Ir(Q);K.length&&K.forEach(he=>{F.hasOwnProperty(he)||S.push(`Unable to resolve the local animation param ${he} in the given list of values`)})}(Ce[Le],S.options,S.errors)})})}visitKeyframes(x,S){const F={type:5,styles:[],options:null};if(!S.currentAnimateTimings)return S.errors.push("keyframes() must be placed inside of a call to animate()"),F;let he=0;const Ce=[];let Le=!1,nt=!1,Rt=0;const dn=x.steps.map(Ci=>{const Ii=this._makeStyleAst(Ci,S);let Li=null!=Ii.offset?Ii.offset:function(Q){if("string"==typeof Q)return null;let x=null;if(Array.isArray(Q))Q.forEach(S=>{if(ro(S)&&S.hasOwnProperty("offset")){const F=S;x=parseFloat(F.offset),delete F.offset}});else if(ro(Q)&&Q.hasOwnProperty("offset")){const S=Q;x=parseFloat(S.offset),delete S.offset}return x}(Ii.styles),bs=0;return null!=Li&&(he++,bs=Ii.offset=Li),nt=nt||bs<0||bs>1,Le=Le||bs<Rt,Rt=bs,Ce.push(bs),Ii});nt&&S.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),Le&&S.errors.push("Please ensure that all keyframe offsets are in order");const zn=x.steps.length;let Cr=0;he>0&&he<zn?S.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==he&&(Cr=1/(zn-1));const Xr=zn-1,at=S.currentTime,On=S.currentAnimateTimings,jr=On.duration;return dn.forEach((Ci,Ii)=>{const Li=Cr>0?Ii==Xr?1:Cr*Ii:Ce[Ii],bs=Li*jr;S.currentTime=at+On.delay+bs,On.duration=bs,this._validateStyleAst(Ci,S),Ci.offset=Li,F.styles.push(Ci)}),F}visitReference(x,S){return{type:8,animation:kn(this,$t(x.animation),S),options:Ui(x.options)}}visitAnimateChild(x,S){return S.depCount++,{type:9,options:Ui(x.options)}}visitAnimateRef(x,S){return{type:10,animation:this.visitReference(x.animation,S),options:Ui(x.options)}}visitQuery(x,S){const F=S.currentQuerySelector,K=x.options||{};S.queryCount++,S.currentQuery=x;const[he,Ce]=function(Q){const x=!!Q.split(/\s*,\s*/).find(S=>":self"==S);return x&&(Q=Q.replace(Ri,"")),[Q=Q.replace(/@\*/g,Ai).replace(/@\w+/g,S=>Ai+"-"+S.substr(1)).replace(/:animating/g,Us),x]}(x.selector);S.currentQuerySelector=F.length?F+" "+he:he,te(S.collectedStyles,S.currentQuerySelector,{});const Le=kn(this,$t(x.animation),S);return S.currentQuery=null,S.currentQuerySelector=F,{type:11,selector:he,limit:K.limit||0,optional:!!K.optional,includeSelf:Ce,animation:Le,originalSelector:x.selector,options:Ui(x.options)}}visitStagger(x,S){S.currentQuery||S.errors.push("stagger() can only be used inside of query()");const F="full"===x.timings?{duration:0,delay:0,easing:"full"}:mn(x.timings,S.errors,!0);return{type:12,animation:kn(this,$t(x.animation),S),timings:F,options:null}}}class no{constructor(x){this.errors=x,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ro(Q){return!Array.isArray(Q)&&"object"==typeof Q}function Ui(Q){return Q?(Q=ln(Q)).params&&(Q.params=function(Q){return Q?ln(Q):null}(Q.params)):Q={},Q}function ua(Q,x,S){return{duration:Q,delay:x,easing:S}}function Ba(Q,x,S,F,K,he,Ce=null,Le=!1){return{type:1,element:Q,keyframes:x,preStyleProps:S,postStyleProps:F,duration:K,delay:he,totalTime:K+he,easing:Ce,subTimeline:Le}}class qs{constructor(){this._map=new Map}consume(x){let S=this._map.get(x);return S?this._map.delete(x):S=[],S}append(x,S){let F=this._map.get(x);F||this._map.set(x,F=[]),F.push(...S)}has(x){return this._map.has(x)}clear(){this._map.clear()}}const cs=new RegExp(":enter","g"),_a=new RegExp(":leave","g");function Es(Q,x,S,F,K,he={},Ce={},Le,nt,Rt=[]){return(new Xi).buildKeyframes(Q,x,S,F,K,he,Ce,Le,nt,Rt)}class Xi{buildKeyframes(x,S,F,K,he,Ce,Le,nt,Rt,dn=[]){Rt=Rt||new qs;const zn=new go(x,S,Rt,K,he,dn,[]);zn.options=nt,zn.currentTimeline.setStyles([Ce],null,zn.errors,nt),kn(this,F,zn);const Cr=zn.timelines.filter(Xr=>Xr.containsAnimation());if(Cr.length&&Object.keys(Le).length){const Xr=Cr[Cr.length-1];Xr.allowOnlyTimelineStyles()||Xr.setStyles([Le],null,zn.errors,nt)}return Cr.length?Cr.map(Xr=>Xr.buildKeyframes()):[Ba(S,[],[],[],0,0,"",!1)]}visitTrigger(x,S){}visitState(x,S){}visitTransition(x,S){}visitAnimateChild(x,S){const F=S.subInstructions.consume(S.element);if(F){const K=S.createSubContext(x.options),he=S.currentTimeline.currentTime,Ce=this._visitSubInstructions(F,K,K.options);he!=Ce&&S.transformIntoNewTimeline(Ce)}S.previousNode=x}visitAnimateRef(x,S){const F=S.createSubContext(x.options);F.transformIntoNewTimeline(),this.visitReference(x.animation,F),S.transformIntoNewTimeline(F.currentTimeline.currentTime),S.previousNode=x}_visitSubInstructions(x,S,F){let he=S.currentTimeline.currentTime;const Ce=null!=F.duration?wn(F.duration):null,Le=null!=F.delay?wn(F.delay):null;return 0!==Ce&&x.forEach(nt=>{const Rt=S.appendInstructionToTimeline(nt,Ce,Le);he=Math.max(he,Rt.duration+Rt.delay)}),he}visitReference(x,S){S.updateOptions(x.options,!0),kn(this,x.animation,S),S.previousNode=x}visitSequence(x,S){const F=S.subContextCount;let K=S;const he=x.options;if(he&&(he.params||he.delay)&&(K=S.createSubContext(he),K.transformIntoNewTimeline(),null!=he.delay)){6==K.previousNode.type&&(K.currentTimeline.snapshotCurrentStyles(),K.previousNode=mo);const Ce=wn(he.delay);K.delayNextStep(Ce)}x.steps.length&&(x.steps.forEach(Ce=>kn(this,Ce,K)),K.currentTimeline.applyStylesToKeyframe(),K.subContextCount>F&&K.transformIntoNewTimeline()),S.previousNode=x}visitGroup(x,S){const F=[];let K=S.currentTimeline.currentTime;const he=x.options&&x.options.delay?wn(x.options.delay):0;x.steps.forEach(Ce=>{const Le=S.createSubContext(x.options);he&&Le.delayNextStep(he),kn(this,Ce,Le),K=Math.max(K,Le.currentTimeline.currentTime),F.push(Le.currentTimeline)}),F.forEach(Ce=>S.currentTimeline.mergeTimelineCollectedStyles(Ce)),S.transformIntoNewTimeline(K),S.previousNode=x}_visitTiming(x,S){if(x.dynamic){const F=x.strValue;return mn(S.params?fi(F,S.params,S.errors):F,S.errors)}return{duration:x.duration,delay:x.delay,easing:x.easing}}visitAnimate(x,S){const F=S.currentAnimateTimings=this._visitTiming(x.timings,S),K=S.currentTimeline;F.delay&&(S.incrementTime(F.delay),K.snapshotCurrentStyles());const he=x.style;5==he.type?this.visitKeyframes(he,S):(S.incrementTime(F.duration),this.visitStyle(he,S),K.applyStylesToKeyframe()),S.currentAnimateTimings=null,S.previousNode=x}visitStyle(x,S){const F=S.currentTimeline,K=S.currentAnimateTimings;!K&&F.getCurrentStyleProperties().length&&F.forwardFrame();const he=K&&K.easing||x.easing;x.isEmptyStep?F.applyEmptyStep(he):F.setStyles(x.styles,he,S.errors,S.options),S.previousNode=x}visitKeyframes(x,S){const F=S.currentAnimateTimings,K=S.currentTimeline.duration,he=F.duration,Le=S.createSubContext().currentTimeline;Le.easing=F.easing,x.styles.forEach(nt=>{Le.forwardTime((nt.offset||0)*he),Le.setStyles(nt.styles,nt.easing,S.errors,S.options),Le.applyStylesToKeyframe()}),S.currentTimeline.mergeTimelineCollectedStyles(Le),S.transformIntoNewTimeline(K+he),S.previousNode=x}visitQuery(x,S){const F=S.currentTimeline.currentTime,K=x.options||{},he=K.delay?wn(K.delay):0;he&&(6===S.previousNode.type||0==F&&S.currentTimeline.getCurrentStyleProperties().length)&&(S.currentTimeline.snapshotCurrentStyles(),S.previousNode=mo);let Ce=F;const Le=S.invokeQuery(x.selector,x.originalSelector,x.limit,x.includeSelf,!!K.optional,S.errors);S.currentQueryTotal=Le.length;let nt=null;Le.forEach((Rt,dn)=>{S.currentQueryIndex=dn;const zn=S.createSubContext(x.options,Rt);he&&zn.delayNextStep(he),Rt===S.element&&(nt=zn.currentTimeline),kn(this,x.animation,zn),zn.currentTimeline.applyStylesToKeyframe(),Ce=Math.max(Ce,zn.currentTimeline.currentTime)}),S.currentQueryIndex=0,S.currentQueryTotal=0,S.transformIntoNewTimeline(Ce),nt&&(S.currentTimeline.mergeTimelineCollectedStyles(nt),S.currentTimeline.snapshotCurrentStyles()),S.previousNode=x}visitStagger(x,S){const F=S.parentContext,K=S.currentTimeline,he=x.timings,Ce=Math.abs(he.duration),Le=Ce*(S.currentQueryTotal-1);let nt=Ce*S.currentQueryIndex;switch(he.duration<0?"reverse":he.easing){case"reverse":nt=Le-nt;break;case"full":nt=F.currentStaggerTime}const dn=S.currentTimeline;nt&&dn.delayNextStep(nt);const zn=dn.currentTime;kn(this,x.animation,S),S.previousNode=x,F.currentStaggerTime=K.currentTime-zn+(K.startTime-F.currentTimeline.startTime)}}const mo={};class go{constructor(x,S,F,K,he,Ce,Le,nt){this._driver=x,this.element=S,this.subInstructions=F,this._enterClassName=K,this._leaveClassName=he,this.errors=Ce,this.timelines=Le,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=nt||new Ho(this._driver,S,0),Le.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(x,S){if(!x)return;const F=x;let K=this.options;null!=F.duration&&(K.duration=wn(F.duration)),null!=F.delay&&(K.delay=wn(F.delay));const he=F.params;if(he){let Ce=K.params;Ce||(Ce=this.options.params={}),Object.keys(he).forEach(Le=>{(!S||!Ce.hasOwnProperty(Le))&&(Ce[Le]=fi(he[Le],Ce,this.errors))})}}_copyOptions(){const x={};if(this.options){const S=this.options.params;if(S){const F=x.params={};Object.keys(S).forEach(K=>{F[K]=S[K]})}}return x}createSubContext(x=null,S,F){const K=S||this.element,he=new go(this._driver,K,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(K,F||0));return he.previousNode=this.previousNode,he.currentAnimateTimings=this.currentAnimateTimings,he.options=this._copyOptions(),he.updateOptions(x),he.currentQueryIndex=this.currentQueryIndex,he.currentQueryTotal=this.currentQueryTotal,he.parentContext=this,this.subContextCount++,he}transformIntoNewTimeline(x){return this.previousNode=mo,this.currentTimeline=this.currentTimeline.fork(this.element,x),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(x,S,F){const K={duration:null!=S?S:x.duration,delay:this.currentTimeline.currentTime+(null!=F?F:0)+x.delay,easing:""},he=new il(this._driver,x.element,x.keyframes,x.preStyleProps,x.postStyleProps,K,x.stretchStartingKeyframe);return this.timelines.push(he),K}incrementTime(x){this.currentTimeline.forwardTime(this.currentTimeline.duration+x)}delayNextStep(x){x>0&&this.currentTimeline.delayNextStep(x)}invokeQuery(x,S,F,K,he,Ce){let Le=[];if(K&&Le.push(this.element),x.length>0){x=(x=x.replace(cs,"."+this._enterClassName)).replace(_a,"."+this._leaveClassName);let Rt=this._driver.query(this.element,x,1!=F);0!==F&&(Rt=F<0?Rt.slice(Rt.length+F,Rt.length):Rt.slice(0,F)),Le.push(...Rt)}return!he&&0==Le.length&&Ce.push(`\`query("${S}")\` returned zero elements. (Use \`query("${S}", { optional: true })\` if you wish to allow this.)`),Le}}class Ho{constructor(x,S,F,K){this._driver=x,this.element=S,this.startTime=F,this._elementTimelineStylesLookup=K,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(S),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(S,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(x){const S=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||S?(this.forwardTime(this.currentTime+x),S&&this.snapshotCurrentStyles()):this.startTime+=x}fork(x,S){return this.applyStylesToKeyframe(),new Ho(this._driver,x,S||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(x){this.applyStylesToKeyframe(),this.duration=x,this._loadKeyframe()}_updateStyle(x,S){this._localTimelineStyles[x]=S,this._globalTimelineStyles[x]=S,this._styleSummary[x]={time:this.currentTime,value:S}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(x){x&&(this._previousKeyframe.easing=x),Object.keys(this._globalTimelineStyles).forEach(S=>{this._backFill[S]=this._globalTimelineStyles[S]||Be.l3,this._currentKeyframe[S]=Be.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(x,S,F,K){S&&(this._previousKeyframe.easing=S);const he=K&&K.params||{},Ce=function(Q,x){const S={};let F;return Q.forEach(K=>{"*"===K?(F=F||Object.keys(x),F.forEach(he=>{S[he]=Be.l3})):wr(K,!1,S)}),S}(x,this._globalTimelineStyles);Object.keys(Ce).forEach(Le=>{const nt=fi(Ce[Le],he,F);this._pendingStyles[Le]=nt,this._localTimelineStyles.hasOwnProperty(Le)||(this._backFill[Le]=this._globalTimelineStyles.hasOwnProperty(Le)?this._globalTimelineStyles[Le]:Be.l3),this._updateStyle(Le,nt)})}applyStylesToKeyframe(){const x=this._pendingStyles,S=Object.keys(x);0!=S.length&&(this._pendingStyles={},S.forEach(F=>{this._currentKeyframe[F]=x[F]}),Object.keys(this._localTimelineStyles).forEach(F=>{this._currentKeyframe.hasOwnProperty(F)||(this._currentKeyframe[F]=this._localTimelineStyles[F])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(x=>{const S=this._localTimelineStyles[x];this._pendingStyles[x]=S,this._updateStyle(x,S)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const x=[];for(let S in this._currentKeyframe)x.push(S);return x}mergeTimelineCollectedStyles(x){Object.keys(x._styleSummary).forEach(S=>{const F=this._styleSummary[S],K=x._styleSummary[S];(!F||K.time>F.time)&&this._updateStyle(S,K.value)})}buildKeyframes(){this.applyStylesToKeyframe();const x=new Set,S=new Set,F=1===this._keyframes.size&&0===this.duration;let K=[];this._keyframes.forEach((Le,nt)=>{const Rt=wr(Le,!0);Object.keys(Rt).forEach(dn=>{const zn=Rt[dn];zn==Be.k1?x.add(dn):zn==Be.l3&&S.add(dn)}),F||(Rt.offset=nt/this.duration),K.push(Rt)});const he=x.size?Jr(x.values()):[],Ce=S.size?Jr(S.values()):[];if(F){const Le=K[0],nt=ln(Le);Le.offset=0,nt.offset=1,K=[Le,nt]}return Ba(this.element,K,he,Ce,this.duration,this.startTime,this.easing,!1)}}class il extends Ho{constructor(x,S,F,K,he,Ce,Le=!1){super(x,S,Ce.delay),this.keyframes=F,this.preStyleProps=K,this.postStyleProps=he,this._stretchStartingKeyframe=Le,this.timings={duration:Ce.duration,delay:Ce.delay,easing:Ce.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let x=this.keyframes,{delay:S,duration:F,easing:K}=this.timings;if(this._stretchStartingKeyframe&&S){const he=[],Ce=F+S,Le=S/Ce,nt=wr(x[0],!1);nt.offset=0,he.push(nt);const Rt=wr(x[0],!1);Rt.offset=Ua(Le),he.push(Rt);const dn=x.length-1;for(let zn=1;zn<=dn;zn++){let Cr=wr(x[zn],!1);Cr.offset=Ua((S+Cr.offset*F)/Ce),he.push(Cr)}F=Ce,S=0,K="",x=he}return Ba(this.element,x,this.preStyleProps,this.postStyleProps,F,S,K,!0)}}function Ua(Q,x=3){const S=Math.pow(10,x-1);return Math.round(Q*S)/S}class Pr{}class sl extends Pr{normalizePropertyName(x,S){return Vs(x)}normalizeStyleValue(x,S,F,K){let he="";const Ce=F.toString().trim();if(_n[S]&&0!==F&&"0"!==F)if("number"==typeof F)he="px";else{const Le=F.match(/^[+-]?[\d\.]+([a-z]*)$/);Le&&0==Le[1].length&&K.push(`Please provide a CSS unit value for ${x}:${F}`)}return Ce+he}}const _n=(()=>function(Q){const x={};return Q.forEach(S=>x[S]=!0),x}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function li(Q,x,S,F,K,he,Ce,Le,nt,Rt,dn,zn,Cr){return{type:0,element:Q,triggerName:x,isRemovalTransition:K,fromState:S,fromStyles:he,toState:F,toStyles:Ce,timelines:Le,queriedElements:nt,preStyleProps:Rt,postStyleProps:dn,totalTime:zn,errors:Cr}}const Xe={};class je{constructor(x,S,F){this._triggerName=x,this.ast=S,this._stateStyles=F}match(x,S,F,K){return function(Q,x,S,F,K){return Q.some(he=>he(x,S,F,K))}(this.ast.matchers,x,S,F,K)}buildStyles(x,S,F){const K=this._stateStyles["*"],he=this._stateStyles[x],Ce=K?K.buildStyles(S,F):{};return he?he.buildStyles(S,F):Ce}build(x,S,F,K,he,Ce,Le,nt,Rt,dn){const zn=[],Cr=this.ast.options&&this.ast.options.params||Xe,at=this.buildStyles(F,Le&&Le.params||Xe,zn),On=nt&&nt.params||Xe,jr=this.buildStyles(K,On,zn),Ci=new Set,Ii=new Map,Li=new Map,bs="void"===K,ci={params:Object.assign(Object.assign({},Cr),On)},Cs=dn?[]:Es(x,S,this.ast.animation,he,Ce,at,jr,ci,Rt,zn);let xs=0;if(Cs.forEach(Hi=>{xs=Math.max(Hi.duration+Hi.delay,xs)}),zn.length)return li(S,this._triggerName,F,K,bs,at,jr,[],[],Ii,Li,xs,zn);Cs.forEach(Hi=>{const pe=Hi.element,Fl=te(Ii,pe,{});Hi.preStyleProps.forEach(ts=>Fl[ts]=!0);const Ta=te(Li,pe,{});Hi.postStyleProps.forEach(ts=>Ta[ts]=!0),pe!==S&&Ci.add(pe)});const Yo=Jr(Ci.values());return li(S,this._triggerName,F,K,bs,at,jr,Cs,Yo,Ii,Li,xs)}}class rt{constructor(x,S,F){this.styles=x,this.defaultParams=S,this.normalizer=F}buildStyles(x,S){const F={},K=ln(this.defaultParams);return Object.keys(x).forEach(he=>{const Ce=x[he];null!=Ce&&(K[he]=Ce)}),this.styles.styles.forEach(he=>{if("string"!=typeof he){const Ce=he;Object.keys(Ce).forEach(Le=>{let nt=Ce[Le];nt.length>1&&(nt=fi(nt,K,S));const Rt=this.normalizer.normalizePropertyName(Le,S);nt=this.normalizer.normalizeStyleValue(Le,Rt,nt,S),F[Rt]=nt})}}),F}}class ir{constructor(x,S,F){this.name=x,this.ast=S,this._normalizer=F,this.transitionFactories=[],this.states={},S.states.forEach(K=>{this.states[K.name]=new rt(K.style,K.options&&K.options.params||{},F)}),Bn(this.states,"true","1"),Bn(this.states,"false","0"),S.transitions.forEach(K=>{this.transitionFactories.push(new je(x,K,this.states))}),this.fallbackTransition=function(Q,x,S){return new je(Q,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ce,Le)=>!0],options:null,queryCount:0,depCount:0},x)}(x,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(x,S,F,K){return this.transitionFactories.find(Ce=>Ce.match(x,S,F,K))||null}matchStyles(x,S,F){return this.fallbackTransition.buildStyles(x,S,F)}}function Bn(Q,x,S){Q.hasOwnProperty(x)?Q.hasOwnProperty(S)||(Q[S]=Q[x]):Q.hasOwnProperty(S)&&(Q[x]=Q[S])}const os=new qs;class bo{constructor(x,S,F){this.bodyNode=x,this._driver=S,this._normalizer=F,this._animations={},this._playersById={},this.players=[]}register(x,S){const F=[],K=Io(this._driver,S,F);if(F.length)throw new Error(`Unable to build the animation due to the following errors: ${F.join("\n")}`);this._animations[x]=K}_buildPlayer(x,S,F){const K=x.element,he=Re(0,this._normalizer,0,x.keyframes,S,F);return this._driver.animate(K,he,x.duration,x.delay,x.easing,[],!0)}create(x,S,F={}){const K=[],he=this._animations[x];let Ce;const Le=new Map;if(he?(Ce=Es(this._driver,S,he,en,vn,{},{},F,os,K),Ce.forEach(dn=>{const zn=te(Le,dn.element,{});dn.postStyleProps.forEach(Cr=>zn[Cr]=null)})):(K.push("The requested animation doesn't exist or has already been destroyed"),Ce=[]),K.length)throw new Error(`Unable to create the animation due to the following errors: ${K.join("\n")}`);Le.forEach((dn,zn)=>{Object.keys(dn).forEach(Cr=>{dn[Cr]=this._driver.computeStyle(zn,Cr,Be.l3)})});const Rt=Me(Ce.map(dn=>{const zn=Le.get(dn.element);return this._buildPlayer(dn,{},zn)}));return this._playersById[x]=Rt,Rt.onDestroy(()=>this.destroy(x)),this.players.push(Rt),Rt}destroy(x){const S=this._getPlayer(x);S.destroy(),delete this._playersById[x];const F=this.players.indexOf(S);F>=0&&this.players.splice(F,1)}_getPlayer(x){const S=this._playersById[x];if(!S)throw new Error(`Unable to find the timeline player referenced by ${x}`);return S}listen(x,S,F,K){const he=ne(S,"","","");return Ne(this._getPlayer(x),F,he,K),()=>{}}command(x,S,F,K){if("register"==F)return void this.register(x,K[0]);if("create"==F)return void this.create(x,S,K[0]||{});const he=this._getPlayer(x);switch(F){case"play":he.play();break;case"pause":he.pause();break;case"reset":he.reset();break;case"restart":he.restart();break;case"finish":he.finish();break;case"init":he.init();break;case"setPosition":he.setPosition(parseFloat(K[0]));break;case"destroy":this.destroy(x)}}}const Va="ng-animate-queued",Ss="ng-animate-disabled",xo=".ng-animate-disabled",Vi=[],Ll={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Xl={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ki="__ng_removed";class ha{constructor(x,S=""){this.namespaceId=S;const F=x&&x.hasOwnProperty("value");if(this.value=null!=(Q=F?x.value:x)?Q:null,F){const he=ln(x);delete he.value,this.options=he}else this.options={};var Q;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(x){const S=x.params;if(S){const F=this.options.params;Object.keys(S).forEach(K=>{null==F[K]&&(F[K]=S[K])})}}}const io="void",Xs=new ha(io);class yo{constructor(x,S,F){this.id=x,this.hostElement=S,this._engine=F,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+x,Ts(S,this._hostClassName)}listen(x,S,F,K){if(!this._triggers.hasOwnProperty(S))throw new Error(`Unable to listen on the animation trigger event "${F}" because the animation trigger "${S}" doesn't exist!`);if(null==F||0==F.length)throw new Error(`Unable to listen on the animation trigger "${S}" because the provided event is undefined!`);if("start"!=(Q=F)&&"done"!=Q)throw new Error(`The provided animation trigger event "${F}" for the animation trigger "${S}" is not supported!`);var Q;const he=te(this._elementListeners,x,[]),Ce={name:S,phase:F,callback:K};he.push(Ce);const Le=te(this._engine.statesByElement,x,{});return Le.hasOwnProperty(S)||(Ts(x,ss),Ts(x,ss+"-"+S),Le[S]=Xs),()=>{this._engine.afterFlush(()=>{const nt=he.indexOf(Ce);nt>=0&&he.splice(nt,1),this._triggers[S]||delete Le[S]})}}register(x,S){return!this._triggers[x]&&(this._triggers[x]=S,!0)}_getTrigger(x){const S=this._triggers[x];if(!S)throw new Error(`The provided animation trigger "${x}" has not been registered!`);return S}trigger(x,S,F,K=!0){const he=this._getTrigger(S),Ce=new ol(this.id,S,x);let Le=this._engine.statesByElement.get(x);Le||(Ts(x,ss),Ts(x,ss+"-"+S),this._engine.statesByElement.set(x,Le={}));let nt=Le[S];const Rt=new ha(F,this.id);if(!(F&&F.hasOwnProperty("value"))&&nt&&Rt.absorbOptions(nt.options),Le[S]=Rt,nt||(nt=Xs),Rt.value!==io&&nt.value===Rt.value){if(!function(Q,x){const S=Object.keys(Q),F=Object.keys(x);if(S.length!=F.length)return!1;for(let K=0;K<S.length;K++){const he=S[K];if(!x.hasOwnProperty(he)||Q[he]!==x[he])return!1}return!0}(nt.params,Rt.params)){const On=[],jr=he.matchStyles(nt.value,nt.params,On),Ci=he.matchStyles(Rt.value,Rt.params,On);On.length?this._engine.reportError(On):this._engine.afterFlush(()=>{Se(x,jr),qe(x,Ci)})}return}const Cr=te(this._engine.playersByElement,x,[]);Cr.forEach(On=>{On.namespaceId==this.id&&On.triggerName==S&&On.queued&&On.destroy()});let Xr=he.matchTransition(nt.value,Rt.value,x,Rt.params),at=!1;if(!Xr){if(!K)return;Xr=he.fallbackTransition,at=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:x,triggerName:S,transition:Xr,fromState:nt,toState:Rt,player:Ce,isFallbackTransition:at}),at||(Ts(x,Va),Ce.onStart(()=>{jo(x,Va)})),Ce.onDone(()=>{let On=this.players.indexOf(Ce);On>=0&&this.players.splice(On,1);const jr=this._engine.playersByElement.get(x);if(jr){let Ci=jr.indexOf(Ce);Ci>=0&&jr.splice(Ci,1)}}),this.players.push(Ce),Cr.push(Ce),Ce}deregister(x){delete this._triggers[x],this._engine.statesByElement.forEach((S,F)=>{delete S[x]}),this._elementListeners.forEach((S,F)=>{this._elementListeners.set(F,S.filter(K=>K.name!=x))})}clearElementCache(x){this._engine.statesByElement.delete(x),this._elementListeners.delete(x);const S=this._engine.playersByElement.get(x);S&&(S.forEach(F=>F.destroy()),this._engine.playersByElement.delete(x))}_signalRemovalForInnerTriggers(x,S){const F=this._engine.driver.query(x,Ai,!0);F.forEach(K=>{if(K[Ki])return;const he=this._engine.fetchNamespacesByElement(K);he.size?he.forEach(Ce=>Ce.triggerLeaveAnimation(K,S,!1,!0)):this.clearElementCache(K)}),this._engine.afterFlushAnimationsDone(()=>F.forEach(K=>this.clearElementCache(K)))}triggerLeaveAnimation(x,S,F,K){const he=this._engine.statesByElement.get(x);if(he){const Ce=[];if(Object.keys(he).forEach(Le=>{if(this._triggers[Le]){const nt=this.trigger(x,Le,io,K);nt&&Ce.push(nt)}}),Ce.length)return this._engine.markElementAsRemoved(this.id,x,!0,S),F&&Me(Ce).onDone(()=>this._engine.processLeaveNode(x)),!0}return!1}prepareLeaveAnimationListeners(x){const S=this._elementListeners.get(x),F=this._engine.statesByElement.get(x);if(S&&F){const K=new Set;S.forEach(he=>{const Ce=he.name;if(K.has(Ce))return;K.add(Ce);const nt=this._triggers[Ce].fallbackTransition,Rt=F[Ce]||Xs,dn=new ha(io),zn=new ol(this.id,Ce,x);this._engine.totalQueuedPlayers++,this._queue.push({element:x,triggerName:Ce,transition:nt,fromState:Rt,toState:dn,player:zn,isFallbackTransition:!0})})}}removeNode(x,S){const F=this._engine;if(x.childElementCount&&this._signalRemovalForInnerTriggers(x,S),this.triggerLeaveAnimation(x,S,!0))return;let K=!1;if(F.totalAnimations){const he=F.players.length?F.playersByQueriedElement.get(x):[];if(he&&he.length)K=!0;else{let Ce=x;for(;Ce=Ce.parentNode;)if(F.statesByElement.get(Ce)){K=!0;break}}}if(this.prepareLeaveAnimationListeners(x),K)F.markElementAsRemoved(this.id,x,!1,S);else{const he=x[Ki];(!he||he===Ll)&&(F.afterFlush(()=>this.clearElementCache(x)),F.destroyInnerAnimations(x),F._onRemovalComplete(x,S))}}insertNode(x,S){Ts(x,this._hostClassName)}drainQueuedTransitions(x){const S=[];return this._queue.forEach(F=>{const K=F.player;if(K.destroyed)return;const he=F.element,Ce=this._elementListeners.get(he);Ce&&Ce.forEach(Le=>{if(Le.name==F.triggerName){const nt=ne(he,F.triggerName,F.fromState.value,F.toState.value);nt._data=x,Ne(F.player,Le.phase,nt,Le.callback)}}),K.markedForDestroy?this._engine.afterFlush(()=>{K.destroy()}):S.push(F)}),this._queue=[],S.sort((F,K)=>{const he=F.transition.ast.depCount,Ce=K.transition.ast.depCount;return 0==he||0==Ce?he-Ce:this._engine.driver.containsElement(F.element,K.element)?1:-1})}destroy(x){this.players.forEach(S=>S.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,x)}elementContainsData(x){let S=!1;return this._elementListeners.has(x)&&(S=!0),S=!!this._queue.find(F=>F.element===x)||S,S}}class Fi{constructor(x,S,F){this.bodyNode=x,this.driver=S,this._normalizer=F,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(K,he)=>{}}_onRemovalComplete(x,S){this.onRemovalComplete(x,S)}get queuedPlayers(){const x=[];return this._namespaceList.forEach(S=>{S.players.forEach(F=>{F.queued&&x.push(F)})}),x}createNamespace(x,S){const F=new yo(x,S,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,S)?this._balanceNamespaceList(F,S):(this.newHostElements.set(S,F),this.collectEnterElement(S)),this._namespaceLookup[x]=F}_balanceNamespaceList(x,S){const F=this._namespaceList.length-1;if(F>=0){let K=!1;for(let he=F;he>=0;he--)if(this.driver.containsElement(this._namespaceList[he].hostElement,S)){this._namespaceList.splice(he+1,0,x),K=!0;break}K||this._namespaceList.splice(0,0,x)}else this._namespaceList.push(x);return this.namespacesByHostElement.set(S,x),x}register(x,S){let F=this._namespaceLookup[x];return F||(F=this.createNamespace(x,S)),F}registerTrigger(x,S,F){let K=this._namespaceLookup[x];K&&K.register(S,F)&&this.totalAnimations++}destroy(x,S){if(!x)return;const F=this._fetchNamespace(x);this.afterFlush(()=>{this.namespacesByHostElement.delete(F.hostElement),delete this._namespaceLookup[x];const K=this._namespaceList.indexOf(F);K>=0&&this._namespaceList.splice(K,1)}),this.afterFlushAnimationsDone(()=>F.destroy(S))}_fetchNamespace(x){return this._namespaceLookup[x]}fetchNamespacesByElement(x){const S=new Set,F=this.statesByElement.get(x);if(F){const K=Object.keys(F);for(let he=0;he<K.length;he++){const Ce=F[K[he]].namespaceId;if(Ce){const Le=this._fetchNamespace(Ce);Le&&S.add(Le)}}}return S}trigger(x,S,F,K){if(ba(S)){const he=this._fetchNamespace(x);if(he)return he.trigger(S,F,K),!0}return!1}insertNode(x,S,F,K){if(!ba(S))return;const he=S[Ki];if(he&&he.setForRemoval){he.setForRemoval=!1,he.setForMove=!0;const Ce=this.collectedLeaveElements.indexOf(S);Ce>=0&&this.collectedLeaveElements.splice(Ce,1)}if(x){const Ce=this._fetchNamespace(x);Ce&&Ce.insertNode(S,F)}K&&this.collectEnterElement(S)}collectEnterElement(x){this.collectedEnterElements.push(x)}markElementAsDisabled(x,S){S?this.disabledNodes.has(x)||(this.disabledNodes.add(x),Ts(x,Ss)):this.disabledNodes.has(x)&&(this.disabledNodes.delete(x),jo(x,Ss))}removeNode(x,S,F,K){if(ba(S)){const he=x?this._fetchNamespace(x):null;if(he?he.removeNode(S,K):this.markElementAsRemoved(x,S,!1,K),F){const Ce=this.namespacesByHostElement.get(S);Ce&&Ce.id!==x&&Ce.removeNode(S,K)}}else this._onRemovalComplete(S,K)}markElementAsRemoved(x,S,F,K){this.collectedLeaveElements.push(S),S[Ki]={namespaceId:x,setForRemoval:K,hasAnimation:F,removedBeforeQueried:!1}}listen(x,S,F,K,he){return ba(S)?this._fetchNamespace(x).listen(S,F,K,he):()=>{}}_buildInstruction(x,S,F,K,he){return x.transition.build(this.driver,x.element,x.fromState.value,x.toState.value,F,K,x.fromState.options,x.toState.options,S,he)}destroyInnerAnimations(x){let S=this.driver.query(x,Ai,!0);S.forEach(F=>this.destroyActiveAnimationsForElement(F)),0!=this.playersByQueriedElement.size&&(S=this.driver.query(x,Us,!0),S.forEach(F=>this.finishActiveQueriedAnimationOnElement(F)))}destroyActiveAnimationsForElement(x){const S=this.playersByElement.get(x);S&&S.forEach(F=>{F.queued?F.markedForDestroy=!0:F.destroy()})}finishActiveQueriedAnimationOnElement(x){const S=this.playersByQueriedElement.get(x);S&&S.forEach(F=>F.finish())}whenRenderingDone(){return new Promise(x=>{if(this.players.length)return Me(this.players).onDone(()=>x());x()})}processLeaveNode(x){const S=x[Ki];if(S&&S.setForRemoval){if(x[Ki]=Ll,S.namespaceId){this.destroyInnerAnimations(x);const F=this._fetchNamespace(S.namespaceId);F&&F.clearElementCache(x)}this._onRemovalComplete(x,S.setForRemoval)}this.driver.matchesElement(x,xo)&&this.markElementAsDisabled(x,!1),this.driver.query(x,xo,!0).forEach(F=>{this.markElementAsDisabled(F,!1)})}flush(x=-1){let S=[];if(this.newHostElements.size&&(this.newHostElements.forEach((F,K)=>this._balanceNamespaceList(F,K)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let F=0;F<this.collectedEnterElements.length;F++)Ts(this.collectedEnterElements[F],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const F=[];try{S=this._flushAnimations(F,x)}finally{for(let K=0;K<F.length;K++)F[K]()}}else for(let F=0;F<this.collectedLeaveElements.length;F++)this.processLeaveNode(this.collectedLeaveElements[F]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(F=>F()),this._flushFns=[],this._whenQuietFns.length){const F=this._whenQuietFns;this._whenQuietFns=[],S.length?Me(S).onDone(()=>{F.forEach(K=>K())}):F.forEach(K=>K())}}reportError(x){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${x.join("\n")}`)}_flushAnimations(x,S){const F=new qs,K=[],he=new Map,Ce=[],Le=new Map,nt=new Map,Rt=new Map,dn=new Set;this.disabledNodes.forEach(Hn=>{dn.add(Hn);const rr=this.driver.query(Hn,".ng-animate-queued",!0);for(let dr=0;dr<rr.length;dr++)dn.add(rr[dr])});const zn=this.bodyNode,Cr=Array.from(this.statesByElement.keys()),Xr=za(Cr,this.collectedEnterElements),at=new Map;let On=0;Xr.forEach((Hn,rr)=>{const dr=en+On++;at.set(rr,dr),Hn.forEach(Kr=>Ts(Kr,dr))});const jr=[],Ci=new Set,Ii=new Set;for(let Hn=0;Hn<this.collectedLeaveElements.length;Hn++){const rr=this.collectedLeaveElements[Hn],dr=rr[Ki];dr&&dr.setForRemoval&&(jr.push(rr),Ci.add(rr),dr.hasAnimation?this.driver.query(rr,".ng-star-inserted",!0).forEach(Kr=>Ci.add(Kr)):Ii.add(rr))}const Li=new Map,bs=za(Cr,Array.from(Ci));bs.forEach((Hn,rr)=>{const dr=vn+On++;Li.set(rr,dr),Hn.forEach(Kr=>Ts(Kr,dr))}),x.push(()=>{Xr.forEach((Hn,rr)=>{const dr=at.get(rr);Hn.forEach(Kr=>jo(Kr,dr))}),bs.forEach((Hn,rr)=>{const dr=Li.get(rr);Hn.forEach(Kr=>jo(Kr,dr))}),jr.forEach(Hn=>{this.processLeaveNode(Hn)})});const ci=[],Cs=[];for(let Hn=this._namespaceList.length-1;Hn>=0;Hn--)this._namespaceList[Hn].drainQueuedTransitions(S).forEach(dr=>{const Kr=dr.player,ns=dr.element;if(ci.push(Kr),this.collectedEnterElements.length){const Un=ns[Ki];if(Un&&Un.setForMove)return void Kr.destroy()}const Wr=!zn||!this.driver.containsElement(zn,ns),Gi=Li.get(ns),di=at.get(ns),Si=this._buildInstruction(dr,F,di,Gi,Wr);if(Si.errors&&Si.errors.length)Cs.push(Si);else{if(Wr)return Kr.onStart(()=>Se(ns,Si.fromStyles)),Kr.onDestroy(()=>qe(ns,Si.toStyles)),void K.push(Kr);if(dr.isFallbackTransition)return Kr.onStart(()=>Se(ns,Si.fromStyles)),Kr.onDestroy(()=>qe(ns,Si.toStyles)),void K.push(Kr);Si.timelines.forEach(Un=>Un.stretchStartingKeyframe=!0),F.append(ns,Si.timelines),Ce.push({instruction:Si,player:Kr,element:ns}),Si.queriedElements.forEach(Un=>te(Le,Un,[]).push(Kr)),Si.preStyleProps.forEach((Un,Ca)=>{const nc=Object.keys(Un);if(nc.length){let Eo=nt.get(Ca);Eo||nt.set(Ca,Eo=new Set),nc.forEach(qa=>Eo.add(qa))}}),Si.postStyleProps.forEach((Un,Ca)=>{const nc=Object.keys(Un);let Eo=Rt.get(Ca);Eo||Rt.set(Ca,Eo=new Set),nc.forEach(qa=>Eo.add(qa))})}});if(Cs.length){const Hn=[];Cs.forEach(rr=>{Hn.push(`@${rr.triggerName} has failed due to:\n`),rr.errors.forEach(dr=>Hn.push(`- ${dr}\n`))}),ci.forEach(rr=>rr.destroy()),this.reportError(Hn)}const xs=new Map,Yo=new Map;Ce.forEach(Hn=>{const rr=Hn.element;F.has(rr)&&(Yo.set(rr,rr),this._beforeAnimationBuild(Hn.player.namespaceId,Hn.instruction,xs))}),K.forEach(Hn=>{const rr=Hn.element;this._getPreviousPlayers(rr,!1,Hn.namespaceId,Hn.triggerName,null).forEach(Kr=>{te(xs,rr,[]).push(Kr),Kr.destroy()})});const Hi=jr.filter(Hn=>wa(Hn,nt,Rt)),pe=new Map;zs(pe,this.driver,Ii,Rt,Be.l3).forEach(Hn=>{wa(Hn,nt,Rt)&&Hi.push(Hn)});const Ta=new Map;Xr.forEach((Hn,rr)=>{zs(Ta,this.driver,new Set(Hn),nt,Be.k1)}),Hi.forEach(Hn=>{const rr=pe.get(Hn),dr=Ta.get(Hn);pe.set(Hn,Object.assign(Object.assign({},rr),dr))});const ts=[],Fo=[],$a={};Ce.forEach(Hn=>{const{element:rr,player:dr,instruction:Kr}=Hn;if(F.has(rr)){if(dn.has(rr))return dr.onDestroy(()=>qe(rr,Kr.toStyles)),dr.disabled=!0,dr.overrideTotalTime(Kr.totalTime),void K.push(dr);let ns=$a;if(Yo.size>1){let Gi=rr;const di=[];for(;Gi=Gi.parentNode;){const Si=Yo.get(Gi);if(Si){ns=Si;break}di.push(Gi)}di.forEach(Si=>Yo.set(Si,ns))}const Wr=this._buildAnimation(dr.namespaceId,Kr,xs,he,Ta,pe);if(dr.setRealPlayer(Wr),ns===$a)ts.push(dr);else{const Gi=this.playersByElement.get(ns);Gi&&Gi.length&&(dr.parentPlayer=Me(Gi)),K.push(dr)}}else Se(rr,Kr.fromStyles),dr.onDestroy(()=>qe(rr,Kr.toStyles)),Fo.push(dr),dn.has(rr)&&K.push(dr)}),Fo.forEach(Hn=>{const rr=he.get(Hn.element);if(rr&&rr.length){const dr=Me(rr);Hn.setRealPlayer(dr)}}),K.forEach(Hn=>{Hn.parentPlayer?Hn.syncPlayerEvents(Hn.parentPlayer):Hn.destroy()});for(let Hn=0;Hn<jr.length;Hn++){const rr=jr[Hn],dr=rr[Ki];if(jo(rr,vn),dr&&dr.hasAnimation)continue;let Kr=[];if(Le.size){let Wr=Le.get(rr);Wr&&Wr.length&&Kr.push(...Wr);let Gi=this.driver.query(rr,Us,!0);for(let di=0;di<Gi.length;di++){let Si=Le.get(Gi[di]);Si&&Si.length&&Kr.push(...Si)}}const ns=Kr.filter(Wr=>!Wr.destroyed);ns.length?Oo(this,rr,ns):this.processLeaveNode(rr)}return jr.length=0,ts.forEach(Hn=>{this.players.push(Hn),Hn.onDone(()=>{Hn.destroy();const rr=this.players.indexOf(Hn);this.players.splice(rr,1)}),Hn.play()}),ts}elementContainsData(x,S){let F=!1;const K=S[Ki];return K&&K.setForRemoval&&(F=!0),this.playersByElement.has(S)&&(F=!0),this.playersByQueriedElement.has(S)&&(F=!0),this.statesByElement.has(S)&&(F=!0),this._fetchNamespace(x).elementContainsData(S)||F}afterFlush(x){this._flushFns.push(x)}afterFlushAnimationsDone(x){this._whenQuietFns.push(x)}_getPreviousPlayers(x,S,F,K,he){let Ce=[];if(S){const Le=this.playersByQueriedElement.get(x);Le&&(Ce=Le)}else{const Le=this.playersByElement.get(x);if(Le){const nt=!he||he==io;Le.forEach(Rt=>{Rt.queued||!nt&&Rt.triggerName!=K||Ce.push(Rt)})}}return(F||K)&&(Ce=Ce.filter(Le=>!(F&&F!=Le.namespaceId||K&&K!=Le.triggerName))),Ce}_beforeAnimationBuild(x,S,F){const he=S.element,Ce=S.isRemovalTransition?void 0:x,Le=S.isRemovalTransition?void 0:S.triggerName;for(const nt of S.timelines){const Rt=nt.element,dn=Rt!==he,zn=te(F,Rt,[]);this._getPreviousPlayers(Rt,dn,Ce,Le,S.toState).forEach(Xr=>{const at=Xr.getRealPlayer();at.beforeDestroy&&at.beforeDestroy(),Xr.destroy(),zn.push(Xr)})}Se(he,S.fromStyles)}_buildAnimation(x,S,F,K,he,Ce){const Le=S.triggerName,nt=S.element,Rt=[],dn=new Set,zn=new Set,Cr=S.timelines.map(at=>{const On=at.element;dn.add(On);const jr=On[Ki];if(jr&&jr.removedBeforeQueried)return new Be.ZN(at.duration,at.delay);const Ci=On!==nt,Ii=function(Q){const x=[];return xa(Q,x),x}((F.get(On)||Vi).map(xs=>xs.getRealPlayer())).filter(xs=>!!xs.element&&xs.element===On),Li=he.get(On),bs=Ce.get(On),ci=Re(0,this._normalizer,0,at.keyframes,Li,bs),Cs=this._buildPlayer(at,ci,Ii);if(at.subTimeline&&K&&zn.add(On),Ci){const xs=new ol(x,Le,On);xs.setRealPlayer(Cs),Rt.push(xs)}return Cs});Rt.forEach(at=>{te(this.playersByQueriedElement,at.element,[]).push(at),at.onDone(()=>function(Q,x,S){let F;if(Q instanceof Map){if(F=Q.get(x),F){if(F.length){const K=F.indexOf(S);F.splice(K,1)}0==F.length&&Q.delete(x)}}else if(F=Q[x],F){if(F.length){const K=F.indexOf(S);F.splice(K,1)}0==F.length&&delete Q[x]}return F}(this.playersByQueriedElement,at.element,at))}),dn.forEach(at=>Ts(at,ca));const Xr=Me(Cr);return Xr.onDestroy(()=>{dn.forEach(at=>jo(at,ca)),qe(nt,S.toStyles)}),zn.forEach(at=>{te(K,at,[]).push(Xr)}),Xr}_buildPlayer(x,S,F){return S.length>0?this.driver.animate(x.element,S,x.duration,x.delay,x.easing,F):new Be.ZN(x.duration,x.delay)}}class ol{constructor(x,S,F){this.namespaceId=x,this.triggerName=S,this.element=F,this._player=new Be.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(x){this._containsRealPlayer||(this._player=x,Object.keys(this._queuedCallbacks).forEach(S=>{this._queuedCallbacks[S].forEach(F=>Ne(x,S,void 0,F))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(x.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(x){this.totalTime=x}syncPlayerEvents(x){const S=this._player;S.triggerCallback&&x.onStart(()=>S.triggerCallback("start")),x.onDone(()=>this.finish()),x.onDestroy(()=>this.destroy())}_queueEvent(x,S){te(this._queuedCallbacks,x,[]).push(S)}onDone(x){this.queued&&this._queueEvent("done",x),this._player.onDone(x)}onStart(x){this.queued&&this._queueEvent("start",x),this._player.onStart(x)}onDestroy(x){this.queued&&this._queueEvent("destroy",x),this._player.onDestroy(x)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(x){this.queued||this._player.setPosition(x)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(x){const S=this._player;S.triggerCallback&&S.triggerCallback(x)}}function ba(Q){return Q&&1===Q.nodeType}function Jo(Q,x){const S=Q.style.display;return Q.style.display=null!=x?x:"none",S}function zs(Q,x,S,F,K){const he=[];S.forEach(nt=>he.push(Jo(nt)));const Ce=[];F.forEach((nt,Rt)=>{const dn={};nt.forEach(zn=>{const Cr=dn[zn]=x.computeStyle(Rt,zn,K);(!Cr||0==Cr.length)&&(Rt[Ki]=Xl,Ce.push(Rt))}),Q.set(Rt,dn)});let Le=0;return S.forEach(nt=>Jo(nt,he[Le++])),Ce}function za(Q,x){const S=new Map;if(Q.forEach(Le=>S.set(Le,[])),0==x.length)return S;const K=new Set(x),he=new Map;function Ce(Le){if(!Le)return 1;let nt=he.get(Le);if(nt)return nt;const Rt=Le.parentNode;return nt=S.has(Rt)?Rt:K.has(Rt)?1:Ce(Rt),he.set(Le,nt),nt}return x.forEach(Le=>{const nt=Ce(Le);1!==nt&&S.get(nt).push(Le)}),S}const Ha="$$classes";function Ts(Q,x){if(Q.classList)Q.classList.add(x);else{let S=Q[Ha];S||(S=Q[Ha]={}),S[x]=!0}}function jo(Q,x){if(Q.classList)Q.classList.remove(x);else{let S=Q[Ha];S&&delete S[x]}}function Oo(Q,x,S){Me(S).onDone(()=>Q.processLeaveNode(x))}function xa(Q,x){for(let S=0;S<Q.length;S++){const F=Q[S];F instanceof Be.ZE?xa(F.players,x):x.push(F)}}function wa(Q,x,S){const F=S.get(Q);if(!F)return!1;let K=x.get(Q);return K?F.forEach(he=>K.add(he)):x.set(Q,F),S.delete(Q),!0}class ta{constructor(x,S,F){this.bodyNode=x,this._driver=S,this._normalizer=F,this._triggerCache={},this.onRemovalComplete=(K,he)=>{},this._transitionEngine=new Fi(x,S,F),this._timelineEngine=new bo(x,S,F),this._transitionEngine.onRemovalComplete=(K,he)=>this.onRemovalComplete(K,he)}registerTrigger(x,S,F,K,he){const Ce=x+"-"+K;let Le=this._triggerCache[Ce];if(!Le){const nt=[],Rt=Io(this._driver,he,nt);if(nt.length)throw new Error(`The animation trigger "${K}" has failed to build due to the following errors:\n - ${nt.join("\n - ")}`);Le=function(Q,x,S){return new ir(Q,x,S)}(K,Rt,this._normalizer),this._triggerCache[Ce]=Le}this._transitionEngine.registerTrigger(S,K,Le)}register(x,S){this._transitionEngine.register(x,S)}destroy(x,S){this._transitionEngine.destroy(x,S)}onInsert(x,S,F,K){this._transitionEngine.insertNode(x,S,F,K)}onRemove(x,S,F,K){this._transitionEngine.removeNode(x,S,K||!1,F)}disableAnimations(x,S){this._transitionEngine.markElementAsDisabled(x,S)}process(x,S,F,K){if("@"==F.charAt(0)){const[he,Ce]=xe(F);this._timelineEngine.command(he,S,Ce,K)}else this._transitionEngine.trigger(x,S,F,K)}listen(x,S,F,K,he){if("@"==F.charAt(0)){const[Ce,Le]=xe(F);return this._timelineEngine.listen(Ce,S,Le,he)}return this._transitionEngine.listen(x,S,F,K,he)}flush(x=-1){this._transitionEngine.flush(x)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Ea(Q,x){let S=null,F=null;return Array.isArray(x)&&x.length?(S=ll(x[0]),x.length>1&&(F=ll(x[x.length-1]))):x&&(S=ll(x)),S||F?new fa(Q,S,F):null}class fa{constructor(x,S,F){this._element=x,this._startStyles=S,this._endStyles=F,this._state=0;let K=fa.initialStylesByElement.get(x);K||fa.initialStylesByElement.set(x,K={}),this._initialStyles=K}start(){this._state<1&&(this._startStyles&&qe(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qe(this._element,this._initialStyles),this._endStyles&&(qe(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(fa.initialStylesByElement.delete(this._element),this._startStyles&&(Se(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Se(this._element,this._endStyles),this._endStyles=null),qe(this._element,this._initialStyles),this._state=3)}}function ll(Q){let x=null;const S=Object.keys(Q);for(let F=0;F<S.length;F++){const K=S[F];Kl(K)&&(x=x||{},x[K]=Q[K])}return x}function Kl(Q){return"display"===Q||"position"===Q}fa.initialStylesByElement=new WeakMap;const Ns="animation",Ga="animationend";class na{constructor(x,S,F,K,he,Ce,Le){this._element=x,this._name=S,this._duration=F,this._delay=K,this._easing=he,this._fillMode=Ce,this._onDoneFn=Le,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=nt=>this._handleCallback(nt)}apply(){(function(Q,x){const S=gl(Q,"").trim();let F=0;S.length&&(function(Q,x){let S=0;for(let F=0;F<Q.length;F++)","===Q.charAt(F)&&S++;return S}(S)+1,x=`${S}, ${x}`),oo(Q,"",x)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Fs(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Ma(this._element,this._name,"paused")}resume(){Ma(this._element,this._name,"running")}setPosition(x){const S=vo(this._element,this._name);this._position=x*this._duration,oo(this._element,"Delay",`-${this._position}ms`,S)}getPosition(){return this._position}_handleCallback(x){const S=x._ngTestManualTimestamp||Date.now(),F=1e3*parseFloat(x.elapsedTime.toFixed(3));x.animationName==this._name&&Math.max(S-this._startTime,0)>=this._delay&&F>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Fs(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(Q,x){const F=gl(Q,"").split(","),K=ra(F,x);K>=0&&(F.splice(K,1),oo(Q,"",F.join(",")))}(this._element,this._name))}}function Ma(Q,x,S){oo(Q,"PlayState",S,vo(Q,x))}function vo(Q,x){const S=gl(Q,"");return S.indexOf(",")>0?ra(S.split(","),x):ra([S],x)}function ra(Q,x){for(let S=0;S<Q.length;S++)if(Q[S].indexOf(x)>=0)return S;return-1}function Fs(Q,x,S){S?Q.removeEventListener(Ga,x):Q.addEventListener(Ga,x)}function oo(Q,x,S,F){const K=Ns+x;if(null!=F){const he=Q.style[K];if(he.length){const Ce=he.split(",");Ce[F]=S,S=Ce.join(",")}}Q.style[K]=S}function gl(Q,x){return Q.style[Ns+x]||""}class Jl{constructor(x,S,F,K,he,Ce,Le,nt){this.element=x,this.keyframes=S,this.animationName=F,this._duration=K,this._delay=he,this._finalStyles=Le,this._specialStyles=nt,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Ce||"linear",this.totalTime=K+he,this._buildStyler()}onStart(x){this._onStartFns.push(x)}onDone(x){this._onDoneFns.push(x)}onDestroy(x){this._onDestroyFns.push(x)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(x=>x()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(x=>x()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(x=>x()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(x){this._styler.setPosition(x)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new na(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(x){const S="start"==x?this._onStartFns:this._onDoneFns;S.forEach(F=>F()),S.length=0}beforeDestroy(){this.init();const x={};if(this.hasStarted()){const S=this._state>=3;Object.keys(this._finalStyles).forEach(F=>{"offset"!=F&&(x[F]=S?this._finalStyles[F]:Ln(this.element,F))})}this.currentSnapshot=x}}class ys extends Be.ZN{constructor(x,S){super(),this.element=x,this._startingStyles={},this.__initialized=!1,this._styles=Tn(S)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(x=>{this._startingStyles[x]=this.element.style[x]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(x=>this.element.style.setProperty(x,this._styles[x])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(x=>{const S=this._startingStyles[x];S?this.element.style.setProperty(x,S):this.element.style.removeProperty(x)}),this._startingStyles=null,super.destroy())}}class j{constructor(){this._count=0}validateStyleProperty(x){return Mn(x)}matchesElement(x,S){return Gn(x,S)}containsElement(x,S){return ut(x,S)}query(x,S,F){return Wt(x,S,F)}computeStyle(x,S,F){return window.getComputedStyle(x)[S]}buildKeyframeElement(x,S,F){F=F.map(Le=>Tn(Le));let K=`@keyframes ${S} {\n`,he="";F.forEach(Le=>{he=" ";const nt=parseFloat(Le.offset);K+=`${he}${100*nt}% {\n`,he+=" ",Object.keys(Le).forEach(Rt=>{const dn=Le[Rt];switch(Rt){case"offset":return;case"easing":return void(dn&&(K+=`${he}animation-timing-function: ${dn};\n`));default:return void(K+=`${he}${Rt}: ${dn};\n`)}}),K+=`${he}}\n`}),K+="}\n";const Ce=document.createElement("style");return Ce.textContent=K,Ce}animate(x,S,F,K,he,Ce=[],Le){const nt=Ce.filter(jr=>jr instanceof Jl),Rt={};Xn(F,K)&&nt.forEach(jr=>{let Ci=jr.currentSnapshot;Object.keys(Ci).forEach(Ii=>Rt[Ii]=Ci[Ii])});const dn=function(Q){let x={};return Q&&(Array.isArray(Q)?Q:[Q]).forEach(F=>{Object.keys(F).forEach(K=>{"offset"==K||"easing"==K||(x[K]=F[K])})}),x}(S=Di(x,S,Rt));if(0==F)return new ys(x,dn);const zn="gen_css_kf_"+this._count++,Cr=this.buildKeyframeElement(x,zn,S);(function(Q){var x;const S=null===(x=Q.getRootNode)||void 0===x?void 0:x.call(Q);return"undefined"!=typeof ShadowRoot&&S instanceof ShadowRoot?S:document.head})(x).appendChild(Cr);const at=Ea(x,S),On=new Jl(x,S,zn,F,K,he,dn,at);return On.onDestroy(()=>{var Q;(Q=Cr).parentNode.removeChild(Q)}),On}}class yr{constructor(x,S,F,K){this.element=x,this.keyframes=S,this.options=F,this._specialStyles=K,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=F.duration,this._delay=F.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(x=>x()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const x=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,x,this.options),this._finalKeyframe=x.length?x[x.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(x,S,F){return x.animate(S,F)}onStart(x){this._onStartFns.push(x)}onDone(x){this._onDoneFns.push(x)}onDestroy(x){this._onDestroyFns.push(x)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(x=>x()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(x=>x()),this._onDestroyFns=[])}setPosition(x){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=x*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const x={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(S=>{"offset"!=S&&(x[S]=this._finished?this._finalKeyframe[S]:Ln(this.element,S))}),this.currentSnapshot=x}triggerCallback(x){const S="start"==x?this._onStartFns:this._onDoneFns;S.forEach(F=>F()),S.length=0}}class Qi{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Gr().toString()),this._cssKeyframesDriver=new j}validateStyleProperty(x){return Mn(x)}matchesElement(x,S){return Gn(x,S)}containsElement(x,S){return ut(x,S)}query(x,S,F){return Wt(x,S,F)}computeStyle(x,S,F){return window.getComputedStyle(x)[S]}overrideWebAnimationsSupport(x){this._isNativeImpl=x}animate(x,S,F,K,he,Ce=[],Le){if(!Le&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(x,S,F,K,he,Ce);const dn={duration:F,delay:K,fill:0==K?"both":"forwards"};he&&(dn.easing=he);const zn={},Cr=Ce.filter(at=>at instanceof yr);Xn(F,K)&&Cr.forEach(at=>{let On=at.currentSnapshot;Object.keys(On).forEach(jr=>zn[jr]=On[jr])});const Xr=Ea(x,S=Di(x,S=S.map(at=>wr(at,!1)),zn));return new yr(x,S,dn,Xr)}}function Gr(){return Je()&&Element.prototype.animate||{}}var kr=ae(8583);let Yr=(()=>{class Q extends Be._j{constructor(S,F){super(),this._nextAnimationId=0,this._renderer=S.createRenderer(F.body,{id:"0",encapsulation:G.ifc.None,styles:[],data:{animation:[]}})}build(S){const F=this._nextAnimationId.toString();this._nextAnimationId++;const K=Array.isArray(S)?(0,Be.vP)(S):S;return hs(this._renderer,null,F,"register",[K]),new vs(F,this._renderer)}}return Q.\u0275fac=function(S){return new(S||Q)(G.LFG(G.FYo),G.LFG(kr.K0))},Q.\u0275prov=G.Yz7({token:Q,factory:Q.\u0275fac}),Q})();class vs extends Be.LC{constructor(x,S){super(),this._id=x,this._renderer=S}create(x,S){return new No(this._id,x,S||{},this._renderer)}}class No{constructor(x,S,F,K){this.id=x,this.element=S,this._renderer=K,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",F)}_listen(x,S){return this._renderer.listen(this.element,`@@${this.id}:${x}`,S)}_command(x,...S){return hs(this._renderer,this.element,this.id,x,S)}onDone(x){this._listen("done",x)}onStart(x){this._listen("start",x)}onDestroy(x){this._listen("destroy",x)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(x){this._command("setPosition",x)}getPosition(){var x,S;return null!==(S=null===(x=this._renderer.engine.players[+this.id])||void 0===x?void 0:x.getPosition())&&void 0!==S?S:0}}function hs(Q,x,S,F,K){return Q.setProperty(x,`@@${S}:${F}`,K)}const pa="@.disabled";let ar=(()=>{class Q{constructor(S,F,K){this.delegate=S,this.engine=F,this._zone=K,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),F.onRemovalComplete=(he,Ce)=>{Ce&&Ce.parentNode(he)&&Ce.removeChild(he.parentNode,he)}}createRenderer(S,F){const he=this.delegate.createRenderer(S,F);if(!(S&&F&&F.data&&F.data.animation)){let dn=this._rendererCache.get(he);return dn||(dn=new Hs("",he,this.engine),this._rendererCache.set(he,dn)),dn}const Ce=F.id,Le=F.id+"-"+this._currentId;this._currentId++,this.engine.register(Le,S);const nt=dn=>{Array.isArray(dn)?dn.forEach(nt):this.engine.registerTrigger(Ce,Le,S,dn.name,dn)};return F.data.animation.forEach(nt),new yl(this,Le,he,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(S,F,K){S>=0&&S<this._microtaskId?this._zone.run(()=>F(K)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(he=>{const[Ce,Le]=he;Ce(Le)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([F,K]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Q.\u0275fac=function(S){return new(S||Q)(G.LFG(G.FYo),G.LFG(ta),G.LFG(G.R0b))},Q.\u0275prov=G.Yz7({token:Q,factory:Q.\u0275fac}),Q})();class Hs{constructor(x,S,F){this.namespaceId=x,this.delegate=S,this.engine=F,this.destroyNode=this.delegate.destroyNode?K=>S.destroyNode(K):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(x,S){return this.delegate.createElement(x,S)}createComment(x){return this.delegate.createComment(x)}createText(x){return this.delegate.createText(x)}appendChild(x,S){this.delegate.appendChild(x,S),this.engine.onInsert(this.namespaceId,S,x,!1)}insertBefore(x,S,F,K=!0){this.delegate.insertBefore(x,S,F),this.engine.onInsert(this.namespaceId,S,x,K)}removeChild(x,S,F){this.engine.onRemove(this.namespaceId,S,this.delegate,F)}selectRootElement(x,S){return this.delegate.selectRootElement(x,S)}parentNode(x){return this.delegate.parentNode(x)}nextSibling(x){return this.delegate.nextSibling(x)}setAttribute(x,S,F,K){this.delegate.setAttribute(x,S,F,K)}removeAttribute(x,S,F){this.delegate.removeAttribute(x,S,F)}addClass(x,S){this.delegate.addClass(x,S)}removeClass(x,S){this.delegate.removeClass(x,S)}setStyle(x,S,F,K){this.delegate.setStyle(x,S,F,K)}removeStyle(x,S,F){this.delegate.removeStyle(x,S,F)}setProperty(x,S,F){"@"==S.charAt(0)&&S==pa?this.disableAnimations(x,!!F):this.delegate.setProperty(x,S,F)}setValue(x,S){this.delegate.setValue(x,S)}listen(x,S,F){return this.delegate.listen(x,S,F)}disableAnimations(x,S){this.engine.disableAnimations(x,S)}}class yl extends Hs{constructor(x,S,F,K){super(S,F,K),this.factory=x,this.namespaceId=S}setProperty(x,S,F){"@"==S.charAt(0)?"."==S.charAt(1)&&S==pa?this.disableAnimations(x,F=void 0===F||!!F):this.engine.process(this.namespaceId,x,S.substr(1),F):this.delegate.setProperty(x,S,F)}listen(x,S,F){if("@"==S.charAt(0)){const K=function(Q){switch(Q){case"body":return document.body;case"document":return document;case"window":return window;default:return Q}}(x);let he=S.substr(1),Ce="";return"@"!=he.charAt(0)&&([he,Ce]=function(Q){const x=Q.indexOf(".");return[Q.substring(0,x),Q.substr(x+1)]}(he)),this.engine.listen(this.namespaceId,K,he,Ce,Le=>{this.factory.scheduleListenerCallback(Le._data||-1,F,Le)})}return this.delegate.listen(x,S,F)}}let $o=(()=>{class Q extends ta{constructor(S,F,K){super(S.body,F,K)}ngOnDestroy(){this.flush()}}return Q.\u0275fac=function(S){return new(S||Q)(G.LFG(kr.K0),G.LFG(qn),G.LFG(Pr))},Q.\u0275prov=G.Yz7({token:Q,factory:Q.\u0275fac}),Q})();const ks=new G.OlP("AnimationModuleType"),vl=[{provide:Be._j,useClass:Yr},{provide:Pr,useFactory:function(){return new sl}},{provide:ta,useClass:$o},{provide:G.FYo,useFactory:function(Q,x,S){return new ar(Q,x,S)},deps:[Y.se,ta,G.R0b]}],ec=[{provide:qn,useFactory:function(){return"function"==typeof Gr()?new Qi:new j}},{provide:ks,useValue:"BrowserAnimations"},...vl],tc=[{provide:qn,useClass:br},{provide:ks,useValue:"NoopAnimations"},...vl];let _l=(()=>{class Q{static withConfig(S){return{ngModule:Q,providers:S.disableAnimations?tc:ec}}}return Q.\u0275fac=function(S){return new(S||Q)},Q.\u0275mod=G.oAB({type:Q}),Q.\u0275inj=G.cJS({providers:ec,imports:[Y.b2]}),Q})()},9075:(jt,mt,ae)=>{"use strict";ae.d(mt,{b2:()=>qs,q6:()=>ua,se:()=>ln});var G=ae(8583),Y=ae(639);class Be extends G.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Je extends Be{static makeCurrent(){(0,G.HT)(new Je)}onAndCancel(je,ve,rt){return je.addEventListener(ve,rt,!1),()=>{je.removeEventListener(ve,rt,!1)}}dispatchEvent(je,ve){je.dispatchEvent(ve)}remove(je){je.parentNode&&je.parentNode.removeChild(je)}createElement(je,ve){return(ve=ve||this.getDefaultDocument()).createElement(je)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(je){return je.nodeType===Node.ELEMENT_NODE}isShadowRoot(je){return je instanceof DocumentFragment}getGlobalEventTarget(je,ve){return"window"===ve?window:"document"===ve?je:"body"===ve?je.body:null}getBaseHref(je){const ve=(_e=_e||document.querySelector("base"),_e?_e.getAttribute("href"):null);return null==ve?null:function(Xe){Re=Re||document.createElement("a"),Re.setAttribute("href",Xe);const je=Re.pathname;return"/"===je.charAt(0)?je:`/${je}`}(ve)}resetBaseElement(){_e=null}getUserAgent(){return window.navigator.userAgent}getCookie(je){return(0,G.Mx)(document.cookie,je)}}let Re,_e=null;const ze=new Y.OlP("TRANSITION_ID"),te=[{provide:Y.ip1,useFactory:function(Xe,je,ve){return()=>{ve.get(Y.CZH).donePromise.then(()=>{const rt=(0,G.q)(),xt=je.querySelectorAll(`style[ng-transition="${Xe}"]`);for(let ir=0;ir<xt.length;ir++)rt.remove(xt[ir])})}},deps:[ze,G.K0,Y.zs3],multi:!0}];class xe{static init(){(0,Y.VLi)(new xe)}addToWindow(je){Y.dqk.getAngularTestability=(rt,xt=!0)=>{const ir=je.findTestabilityInTree(rt,xt);if(null==ir)throw new Error("Could not find testability for element.");return ir},Y.dqk.getAllAngularTestabilities=()=>je.getAllTestabilities(),Y.dqk.getAllAngularRootElements=()=>je.getAllRootElements(),Y.dqk.frameworkStabilizers||(Y.dqk.frameworkStabilizers=[]),Y.dqk.frameworkStabilizers.push(rt=>{const xt=Y.dqk.getAllAngularTestabilities();let ir=xt.length,bn=!1;const Bn=function(os){bn=bn||os,ir--,0==ir&&rt(bn)};xt.forEach(function(os){os.whenStable(Bn)})})}findTestabilityInTree(je,ve,rt){if(null==ve)return null;const xt=je.getTestability(ve);return null!=xt?xt:rt?(0,G.q)().isShadowRoot(ve)?this.findTestabilityInTree(je,ve.host,!0):this.findTestabilityInTree(je,ve.parentElement,!0):null}}let Ue=(()=>{class Xe{build(){return new XMLHttpRequest}}return Xe.\u0275fac=function(ve){return new(ve||Xe)},Xe.\u0275prov=Y.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const br=new Y.OlP("EventManagerPlugins");let qn=(()=>{class Xe{constructor(ve,rt){this._zone=rt,this._eventNameToPlugin=new Map,ve.forEach(xt=>xt.manager=this),this._plugins=ve.slice().reverse()}addEventListener(ve,rt,xt){return this._findPluginFor(rt).addEventListener(ve,rt,xt)}addGlobalEventListener(ve,rt,xt){return this._findPluginFor(rt).addGlobalEventListener(ve,rt,xt)}getZone(){return this._zone}_findPluginFor(ve){const rt=this._eventNameToPlugin.get(ve);if(rt)return rt;const xt=this._plugins;for(let ir=0;ir<xt.length;ir++){const bn=xt[ir];if(bn.supports(ve))return this._eventNameToPlugin.set(ve,bn),bn}throw new Error(`No event manager plugin found for event ${ve}`)}}return Xe.\u0275fac=function(ve){return new(ve||Xe)(Y.LFG(br),Y.LFG(Y.R0b))},Xe.\u0275prov=Y.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();class Fn{constructor(je){this._doc=je}addGlobalEventListener(je,ve,rt){const xt=(0,G.q)().getGlobalEventTarget(this._doc,je);if(!xt)throw new Error(`Unsupported event target ${xt} for event ${ve}`);return this.addEventListener(xt,ve,rt)}}let tn=(()=>{class Xe{constructor(){this._stylesSet=new Set}addStyles(ve){const rt=new Set;ve.forEach(xt=>{this._stylesSet.has(xt)||(this._stylesSet.add(xt),rt.add(xt))}),this.onStylesAdded(rt)}onStylesAdded(ve){}getAllStyles(){return Array.from(this._stylesSet)}}return Xe.\u0275fac=function(ve){return new(ve||Xe)},Xe.\u0275prov=Y.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})(),ki=(()=>{class Xe extends tn{constructor(ve){super(),this._doc=ve,this._hostNodes=new Map,this._hostNodes.set(ve.head,[])}_addStylesToHost(ve,rt,xt){ve.forEach(ir=>{const bn=this._doc.createElement("style");bn.textContent=ir,xt.push(rt.appendChild(bn))})}addHost(ve){const rt=[];this._addStylesToHost(this._stylesSet,ve,rt),this._hostNodes.set(ve,rt)}removeHost(ve){const rt=this._hostNodes.get(ve);rt&&rt.forEach(en),this._hostNodes.delete(ve)}onStylesAdded(ve){this._hostNodes.forEach((rt,xt)=>{this._addStylesToHost(ve,xt,rt)})}ngOnDestroy(){this._hostNodes.forEach(ve=>ve.forEach(en))}}return Xe.\u0275fac=function(ve){return new(ve||Xe)(Y.LFG(G.K0))},Xe.\u0275prov=Y.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();function en(Xe){(0,G.q)().remove(Xe)}const vn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Zn=/%COMP%/g;function kt(Xe,je,ve){for(let rt=0;rt<je.length;rt++){let xt=je[rt];Array.isArray(xt)?kt(Xe,xt,ve):(xt=xt.replace(Zn,Xe),ve.push(xt))}return ve}function mn(Xe){return je=>{if("__ngUnwrap__"===je)return Xe;!1===Xe(je)&&(je.preventDefault(),je.returnValue=!1)}}let ln=(()=>{class Xe{constructor(ve,rt,xt){this.eventManager=ve,this.sharedStylesHost=rt,this.appId=xt,this.rendererByCompId=new Map,this.defaultRenderer=new ai(ve)}createRenderer(ve,rt){if(!ve||!rt)return this.defaultRenderer;switch(rt.encapsulation){case Y.ifc.Emulated:{let xt=this.rendererByCompId.get(rt.id);return xt||(xt=new qe(this.eventManager,this.sharedStylesHost,rt,this.appId),this.rendererByCompId.set(rt.id,xt)),xt.applyToHost(ve),xt}case 1:case Y.ifc.ShadowDom:return new Se(this.eventManager,this.sharedStylesHost,ve,rt);default:if(!this.rendererByCompId.has(rt.id)){const xt=kt(rt.id,rt.styles,[]);this.sharedStylesHost.addStyles(xt),this.rendererByCompId.set(rt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Xe.\u0275fac=function(ve){return new(ve||Xe)(Y.LFG(qn),Y.LFG(ki),Y.LFG(Y.AFp))},Xe.\u0275prov=Y.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();class ai{constructor(je){this.eventManager=je,this.data=Object.create(null)}destroy(){}createElement(je,ve){return ve?document.createElementNS(vn[ve]||ve,je):document.createElement(je)}createComment(je){return document.createComment(je)}createText(je){return document.createTextNode(je)}appendChild(je,ve){je.appendChild(ve)}insertBefore(je,ve,rt){je&&je.insertBefore(ve,rt)}removeChild(je,ve){je&&je.removeChild(ve)}selectRootElement(je,ve){let rt="string"==typeof je?document.querySelector(je):je;if(!rt)throw new Error(`The selector "${je}" did not match any elements`);return ve||(rt.textContent=""),rt}parentNode(je){return je.parentNode}nextSibling(je){return je.nextSibling}setAttribute(je,ve,rt,xt){if(xt){ve=xt+":"+ve;const ir=vn[xt];ir?je.setAttributeNS(ir,ve,rt):je.setAttribute(ve,rt)}else je.setAttribute(ve,rt)}removeAttribute(je,ve,rt){if(rt){const xt=vn[rt];xt?je.removeAttributeNS(xt,ve):je.removeAttribute(`${rt}:${ve}`)}else je.removeAttribute(ve)}addClass(je,ve){je.classList.add(ve)}removeClass(je,ve){je.classList.remove(ve)}setStyle(je,ve,rt,xt){xt&(Y.JOm.DashCase|Y.JOm.Important)?je.style.setProperty(ve,rt,xt&Y.JOm.Important?"important":""):je.style[ve]=rt}removeStyle(je,ve,rt){rt&Y.JOm.DashCase?je.style.removeProperty(ve):je.style[ve]=""}setProperty(je,ve,rt){je[ve]=rt}setValue(je,ve){je.nodeValue=ve}listen(je,ve,rt){return"string"==typeof je?this.eventManager.addGlobalEventListener(je,ve,mn(rt)):this.eventManager.addEventListener(je,ve,mn(rt))}}class qe extends ai{constructor(je,ve,rt,xt){super(je),this.component=rt;const ir=kt(xt+"-"+rt.id,rt.styles,[]);ve.addStyles(ir),this.contentAttr="_ngcontent-%COMP%".replace(Zn,xt+"-"+rt.id),this.hostAttr="_nghost-%COMP%".replace(Zn,xt+"-"+rt.id)}applyToHost(je){super.setAttribute(je,this.hostAttr,"")}createElement(je,ve){const rt=super.createElement(je,ve);return super.setAttribute(rt,this.contentAttr,""),rt}}class Se extends ai{constructor(je,ve,rt,xt){super(je),this.sharedStylesHost=ve,this.hostEl=rt,this.shadowRoot=rt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ir=kt(xt.id,xt.styles,[]);for(let bn=0;bn<ir.length;bn++){const Bn=document.createElement("style");Bn.textContent=ir[bn],this.shadowRoot.appendChild(Bn)}}nodeOrShadowRoot(je){return je===this.hostEl?this.shadowRoot:je}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(je,ve){return super.appendChild(this.nodeOrShadowRoot(je),ve)}insertBefore(je,ve,rt){return super.insertBefore(this.nodeOrShadowRoot(je),ve,rt)}removeChild(je,ve){return super.removeChild(this.nodeOrShadowRoot(je),ve)}parentNode(je){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(je)))}}let $t=(()=>{class Xe extends Fn{constructor(ve){super(ve)}supports(ve){return!0}addEventListener(ve,rt,xt){return ve.addEventListener(rt,xt,!1),()=>this.removeEventListener(ve,rt,xt)}removeEventListener(ve,rt,xt){return ve.removeEventListener(rt,xt)}}return Xe.\u0275fac=function(ve){return new(ve||Xe)(Y.LFG(G.K0))},Xe.\u0275prov=Y.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const Di=["alt","control","meta","shift"],Ln={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Po={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ml={alt:Xe=>Xe.altKey,control:Xe=>Xe.ctrlKey,meta:Xe=>Xe.metaKey,shift:Xe=>Xe.shiftKey};let Jn=(()=>{class Xe extends Fn{constructor(ve){super(ve)}supports(ve){return null!=Xe.parseEventName(ve)}addEventListener(ve,rt,xt){const ir=Xe.parseEventName(rt),bn=Xe.eventCallback(ir.fullKey,xt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,G.q)().onAndCancel(ve,ir.domEventName,bn))}static parseEventName(ve){const rt=ve.toLowerCase().split("."),xt=rt.shift();if(0===rt.length||"keydown"!==xt&&"keyup"!==xt)return null;const ir=Xe._normalizeKey(rt.pop());let bn="";if(Di.forEach(os=>{const bo=rt.indexOf(os);bo>-1&&(rt.splice(bo,1),bn+=os+".")}),bn+=ir,0!=rt.length||0===ir.length)return null;const Bn={};return Bn.domEventName=xt,Bn.fullKey=bn,Bn}static getEventFullKey(ve){let rt="",xt=function(Xe){let je=Xe.key;if(null==je){if(je=Xe.keyIdentifier,null==je)return"Unidentified";je.startsWith("U+")&&(je=String.fromCharCode(parseInt(je.substring(2),16)),3===Xe.location&&Po.hasOwnProperty(je)&&(je=Po[je]))}return Ln[je]||je}(ve);return xt=xt.toLowerCase()," "===xt?xt="space":"."===xt&&(xt="dot"),Di.forEach(ir=>{ir!=xt&&ml[ir](ve)&&(rt+=ir+".")}),rt+=xt,rt}static eventCallback(ve,rt,xt){return ir=>{Xe.getEventFullKey(ir)===ve&&xt.runGuarded(()=>rt(ir))}}static _normalizeKey(ve){switch(ve){case"esc":return"escape";default:return ve}}}return Xe.\u0275fac=function(ve){return new(ve||Xe)(Y.LFG(G.K0))},Xe.\u0275prov=Y.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const ua=(0,Y.eFA)(Y._c5,"browser",[{provide:Y.Lbi,useValue:G.bD},{provide:Y.g9A,useValue:function(){Je.makeCurrent(),xe.init()},multi:!0},{provide:G.K0,useFactory:function(){return(0,Y.RDi)(document),document},deps:[]}]),Ba=[[],{provide:Y.zSh,useValue:"root"},{provide:Y.qLn,useFactory:function(){return new Y.qLn},deps:[]},{provide:br,useClass:$t,multi:!0,deps:[G.K0,Y.R0b,Y.Lbi]},{provide:br,useClass:Jn,multi:!0,deps:[G.K0]},[],{provide:ln,useClass:ln,deps:[qn,ki,Y.AFp]},{provide:Y.FYo,useExisting:ln},{provide:tn,useExisting:ki},{provide:ki,useClass:ki,deps:[G.K0]},{provide:Y.dDg,useClass:Y.dDg,deps:[Y.R0b]},{provide:qn,useClass:qn,deps:[br,Y.R0b]},{provide:G.JF,useClass:Ue,deps:[]},[]];let qs=(()=>{class Xe{constructor(ve){if(ve)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ve){return{ngModule:Xe,providers:[{provide:Y.AFp,useValue:ve.appId},{provide:ze,useExisting:Y.AFp},te]}}}return Xe.\u0275fac=function(ve){return new(ve||Xe)(Y.LFG(Xe,12))},Xe.\u0275mod=Y.oAB({type:Xe}),Xe.\u0275inj=Y.cJS({providers:Ba,imports:[G.ez,Y.hGG]}),Xe})();"undefined"!=typeof window&&window},4922:(jt,mt,ae)=>{"use strict";ae.d(mt,{m2:()=>Ni,F0:()=>wi,rH:()=>ao,yS:()=>$n,Bz:()=>wl,lC:()=>Jc});var G=ae(8583),Y=ae(639);const Je=(()=>{function L(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return L.prototype=Object.create(Error.prototype),L})();var _e=ae(5917),Me=ae(3282);function Ne(...L){return(0,Me.J)(1)((0,_e.of)(...L))}var ze=ae(7574),ne=ae(4402),te=ae(9193);function xe(L){return new ze.y(C=>{let u;try{u=L()}catch(T){return void C.error(T)}return(u?(0,ne.D)(u):(0,te.c)()).subscribe(C)})}var Ue=ae(6215),He=ae(739),tt=ae(2441),We=ae(9765),gt=ae(8002),Jt=ae(5345);function Yt(L,C){return"function"==typeof C?u=>u.pipe(Yt((_,T)=>(0,ne.D)(L(_,T)).pipe((0,gt.U)((N,$)=>C(_,N,T,$))))):u=>u.lift(new qt(L))}class qt{constructor(C){this.project=C}call(C,u){return u.subscribe(new Ot(C,this.project))}}class Ot extends Jt.Ds{constructor(C,u){super(C),this.project=u,this.index=0}_next(C){let u;const _=this.index++;try{u=this.project(C,_)}catch(T){return void this.destination.error(T)}this._innerSub(u)}_innerSub(C){const u=this.innerSubscription;u&&u.unsubscribe();const _=new Jt.IY(this),T=this.destination;T.add(_),this.innerSubscription=(0,Jt.ft)(C,_),this.innerSubscription!==_&&T.add(this.innerSubscription)}_complete(){const{innerSubscription:C}=this;(!C||C.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(C){this.destination.next(C)}}var dt=ae(4869),fn=ae(7393);function Gn(L,C){let u=!1;return arguments.length>=2&&(u=!0),function(T){return T.lift(new ut(L,C,u))}}class ut{constructor(C,u,_=!1){this.accumulator=C,this.seed=u,this.hasSeed=_}call(C,u){return u.subscribe(new Wt(C,this.accumulator,this.seed,this.hasSeed))}}class Wt extends fn.L{constructor(C,u,_,T){super(C),this.accumulator=u,this._seed=_,this.hasSeed=T,this.index=0}get seed(){return this._seed}set seed(C){this.hasSeed=!0,this._seed=C}_next(C){if(this.hasSeed)return this._tryNext(C);this.seed=C,this.destination.next(C)}_tryNext(C){const u=this.index++;let _;try{_=this.accumulator(this.seed,C,u)}catch(T){this.destination.error(T)}this.seed=_,this.destination.next(_)}}function Tn(L){return function(u){const _=new br(L),T=u.lift(_);return _.caught=T}}class br{constructor(C){this.selector=C}call(C,u){return u.subscribe(new qn(C,this.selector,this.caught))}}class qn extends Jt.Ds{constructor(C,u,_){super(C),this.selector=u,this.caught=_}error(C){if(!this.isStopped){let u;try{u=this.selector(C,this.caught)}catch(N){return void super.error(N)}this._unsubscribeAndRecycle();const _=new Jt.IY(this);this.add(_);const T=(0,Jt.ft)(u,_);T!==_&&this.add(T)}}}var Fn=ae(9773);function tn(L,C){return(0,Fn.zg)(L,C,1)}var ki=ae(5435),en=ae(7108);function vn(L){return function(u){return 0===L?(0,te.c)():u.lift(new Zn(L))}}class Zn{constructor(C){if(this.total=C,this.total<0)throw new en.W}call(C,u){return u.subscribe(new gr(C,this.total))}}class gr extends fn.L{constructor(C,u){super(C),this.total=u,this.ring=new Array,this.count=0}_next(C){const u=this.ring,_=this.total,T=this.count++;u.length<_?u.push(C):u[T%_]=C}_complete(){const C=this.destination;let u=this.count;if(u>0){const _=this.count>=this.total?this.total:this.count,T=this.ring;for(let N=0;N<_;N++){const $=u++%_;C.next(T[$])}}C.complete()}}function ss(L=Us){return C=>C.lift(new Ai(L))}class Ai{constructor(C){this.errorFactory=C}call(C,u){return u.subscribe(new ca(C,this.errorFactory))}}class ca extends fn.L{constructor(C,u){super(C),this.errorFactory=u,this.hasValue=!1}_next(C){this.hasValue=!0,this.destination.next(C)}_complete(){if(this.hasValue)return this.destination.complete();{let C;try{C=this.errorFactory()}catch(u){C=u}this.destination.error(C)}}}function Us(){return new Je}function wn(L=null){return C=>C.lift(new kt(L))}class kt{constructor(C){this.defaultValue=C}call(C,u){return u.subscribe(new mn(C,this.defaultValue))}}class mn extends fn.L{constructor(C,u){super(C),this.defaultValue=u,this.isEmpty=!0}_next(C){this.isEmpty=!1,this.destination.next(C)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var jn=ae(4487),ai=ae(5257);function wr(L,C){const u=arguments.length>=2;return _=>_.pipe(L?(0,ki.h)((T,N)=>L(T,N,_)):jn.y,(0,ai.q)(1),u?wn(C):ss(()=>new Je))}function to(){}var ye=ae(9105);function qe(L,C,u){return function(T){return T.lift(new Se(L,C,u))}}class Se{constructor(C,u,_){this.nextOrObserver=C,this.error=u,this.complete=_}call(C,u){return u.subscribe(new $t(C,this.nextOrObserver,this.error,this.complete))}}class $t extends fn.L{constructor(C,u,_,T){super(C),this._tapNext=to,this._tapError=to,this._tapComplete=to,this._tapError=_||to,this._tapComplete=T||to,(0,ye.m)(u)?(this._context=this,this._tapNext=u):u&&(this._context=u,this._tapNext=u.next||to,this._tapError=u.error||to,this._tapComplete=u.complete||to)}_next(C){try{this._tapNext.call(this._context,C)}catch(u){return void this.destination.error(u)}this.destination.next(C)}_error(C){try{this._tapError.call(this._context,C)}catch(u){return void this.destination.error(u)}this.destination.error(C)}_complete(){try{this._tapComplete.call(this._context)}catch(C){return void this.destination.error(C)}return this.destination.complete()}}var Cn=ae(5319);class Ir{constructor(C){this.callback=C}call(C,u){return u.subscribe(new fi(C,this.callback))}}class fi extends fn.L{constructor(C,u){super(C),this.add(new Cn.w(u))}}var Jr=ae(1307);class Ti{constructor(C,u){this.id=C,this.url=u}}class Vs extends Ti{constructor(C,u,_="imperative",T=null){super(C,u),this.navigationTrigger=_,this.restoredState=T}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ni extends Ti{constructor(C,u,_){super(C,u),this.urlAfterRedirects=_}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xn extends Ti{constructor(C,u,_){super(C,u),this.reason=_}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Di extends Ti{constructor(C,u,_){super(C,u),this.error=_}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kn extends Ti{constructor(C,u,_,T){super(C,u),this.urlAfterRedirects=_,this.state=T}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ln extends Ti{constructor(C,u,_,T){super(C,u),this.urlAfterRedirects=_,this.state=T}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Po extends Ti{constructor(C,u,_,T,N){super(C,u),this.urlAfterRedirects=_,this.state=T,this.shouldActivate=N}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ji extends Ti{constructor(C,u,_,T){super(C,u),this.urlAfterRedirects=_,this.state=T}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ls extends Ti{constructor(C,u,_,T){super(C,u),this.urlAfterRedirects=_,this.state=T}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ps{constructor(C){this.route=C}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Mi{constructor(C){this.route=C}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ml{constructor(C){this.snapshot=C}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jn{constructor(C){this.snapshot=C}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rl{constructor(C){this.snapshot=C}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ri{constructor(C){this.snapshot=C}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Io{constructor(C,u,_){this.routerEvent=C,this.position=u,this.anchor=_}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rr="primary";class sr{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const u=this.params[C];return Array.isArray(u)?u[0]:u}return null}getAll(C){if(this.has(C)){const u=this.params[C];return Array.isArray(u)?u:[u]}return[]}get keys(){return Object.keys(this.params)}}function zo(L){return new sr(L)}const Il="ngNavigationCancelingError";function no(L){const C=Error("NavigationCancelingError: "+L);return C[Il]=!0,C}function ro(L,C,u){const _=u.path.split("/");if(_.length>L.length||"full"===u.pathMatch&&(C.hasChildren()||_.length<L.length))return null;const T={};for(let N=0;N<_.length;N++){const $=_[N],X=L[N];if($.startsWith(":"))T[$.substring(1)]=X;else if($!==X.path)return null}return{consumed:L.slice(0,_.length),posParams:T}}function Ui(L,C){const u=L?Object.keys(L):void 0,_=C?Object.keys(C):void 0;if(!u||!_||u.length!=_.length)return!1;let T;for(let N=0;N<u.length;N++)if(T=u[N],!ua(L[T],C[T]))return!1;return!0}function ua(L,C){if(Array.isArray(L)&&Array.isArray(C)){if(L.length!==C.length)return!1;const u=[...L].sort(),_=[...C].sort();return u.every((T,N)=>_[N]===T)}return L===C}function Ba(L){return Array.prototype.concat.apply([],L)}function qs(L){return L.length>0?L[L.length-1]:null}function gs(L,C){for(const u in L)L.hasOwnProperty(u)&&C(L[u],u)}function cs(L){return(0,Y.CqO)(L)?L:(0,Y.QGY)(L)?(0,ne.D)(Promise.resolve(L)):(0,_e.of)(L)}const _a={exact:function go(L,C,u){if(!Pi(L.segments,C.segments)||!us(L.segments,C.segments,u)||L.numberOfChildren!==C.numberOfChildren)return!1;for(const _ in C.children)if(!L.children[_]||!go(L.children[_],C.children[_],u))return!1;return!0},subset:il},Es={exact:function(L,C){return Ui(L,C)},subset:function(L,C){return Object.keys(C).length<=Object.keys(L).length&&Object.keys(C).every(u=>ua(L[u],C[u]))},ignored:()=>!0};function Xi(L,C,u){return _a[u.paths](L.root,C.root,u.matrixParams)&&Es[u.queryParams](L.queryParams,C.queryParams)&&!("exact"===u.fragment&&L.fragment!==C.fragment)}function il(L,C,u){return Ua(L,C,C.segments,u)}function Ua(L,C,u,_){if(L.segments.length>u.length){const T=L.segments.slice(0,u.length);return!(!Pi(T,u)||C.hasChildren()||!us(T,u,_))}if(L.segments.length===u.length){if(!Pi(L.segments,u)||!us(L.segments,u,_))return!1;for(const T in C.children)if(!L.children[T]||!il(L.children[T],C.children[T],_))return!1;return!0}{const T=u.slice(0,L.segments.length),N=u.slice(L.segments.length);return!!(Pi(L.segments,T)&&us(L.segments,T,_)&&L.children[Rr])&&Ua(L.children[Rr],C,N,_)}}function us(L,C,u){return C.every((_,T)=>Es[u](L[T].parameters,_.parameters))}class Ys{constructor(C,u,_){this.root=C,this.queryParams=u,this.fragment=_}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zo(this.queryParams)),this._queryParamMap}toString(){return Xe.serialize(this)}}class Pr{constructor(C,u){this.segments=C,this.children=u,this.parent=null,gs(u,(_,T)=>_.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return je(this)}}class Ms{constructor(C,u){this.path=C,this.parameters=u}get parameterMap(){return this._parameterMap||(this._parameterMap=zo(this.parameters)),this._parameterMap}toString(){return bo(this)}}function Pi(L,C){return L.length===C.length&&L.every((u,_)=>u.path===C[_].path)}class Nr{}class li{parse(C){const u=new Xl(C);return new Ys(u.parseRootSegment(),u.parseQueryParams(),u.parseFragment())}serialize(C){var L;return`${`/${ve(C.root,!0)}`}${function(L){const C=Object.keys(L).map(u=>{const _=L[u];return Array.isArray(_)?_.map(T=>`${xt(u)}=${xt(T)}`).join("&"):`${xt(u)}=${xt(_)}`}).filter(u=>!!u);return C.length?`?${C.join("&")}`:""}(C.queryParams)}${"string"==typeof C.fragment?`#${L=C.fragment,encodeURI(L)}`:""}`}}const Xe=new li;function je(L){return L.segments.map(C=>bo(C)).join("/")}function ve(L,C){if(!L.hasChildren())return je(L);if(C){const u=L.children[Rr]?ve(L.children[Rr],!1):"",_=[];return gs(L.children,(T,N)=>{N!==Rr&&_.push(`${N}:${ve(T,!1)}`)}),_.length>0?`${u}(${_.join("//")})`:u}{const u=function(L,C){let u=[];return gs(L.children,(_,T)=>{T===Rr&&(u=u.concat(C(_,T)))}),gs(L.children,(_,T)=>{T!==Rr&&(u=u.concat(C(_,T)))}),u}(L,(_,T)=>T===Rr?[ve(L.children[Rr],!1)]:[`${T}:${ve(_,!1)}`]);return 1===Object.keys(L.children).length&&null!=L.children[Rr]?`${je(L)}/${u[0]}`:`${je(L)}/(${u.join("//")})`}}function rt(L){return encodeURIComponent(L).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xt(L){return rt(L).replace(/%3B/gi,";")}function bn(L){return rt(L).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bn(L){return decodeURIComponent(L)}function os(L){return Bn(L.replace(/\+/g,"%20"))}function bo(L){return`${bn(L.path)}${function(L){return Object.keys(L).map(C=>`;${bn(C)}=${bn(L[C])}`).join("")}(L.parameters)}`}const Ss=/^[^\/()?;=#]+/;function xo(L){const C=L.match(Ss);return C?C[0]:""}const Ls=/^[^=?&#]+/,Vi=/^[^?&#]+/;class Xl{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pr([],{}):new Pr([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let u={};this.peekStartsWith("/(")&&(this.capture("/"),u=this.parseParens(!0));let _={};return this.peekStartsWith("(")&&(_=this.parseParens(!1)),(C.length>0||Object.keys(u).length>0)&&(_[Rr]=new Pr(C,u)),_}parseSegment(){const C=xo(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(C),new Ms(Bn(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const u=xo(this.remaining);if(!u)return;this.capture(u);let _="";if(this.consumeOptional("=")){const T=xo(this.remaining);T&&(_=T,this.capture(_))}C[Bn(u)]=Bn(_)}parseQueryParam(C){const u=function(L){const C=L.match(Ls);return C?C[0]:""}(this.remaining);if(!u)return;this.capture(u);let _="";if(this.consumeOptional("=")){const $=function(L){const C=L.match(Vi);return C?C[0]:""}(this.remaining);$&&(_=$,this.capture(_))}const T=os(u),N=os(_);if(C.hasOwnProperty(T)){let $=C[T];Array.isArray($)||($=[$],C[T]=$),$.push(N)}else C[T]=N}parseParens(C){const u={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const _=xo(this.remaining),T=this.remaining[_.length];if("/"!==T&&")"!==T&&";"!==T)throw new Error(`Cannot parse url '${this.url}'`);let N;_.indexOf(":")>-1?(N=_.substr(0,_.indexOf(":")),this.capture(N),this.capture(":")):C&&(N=Rr);const $=this.parseChildren();u[N]=1===Object.keys($).length?$[Rr]:new Pr([],$),this.consumeOptional("//")}return u}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new Error(`Expected "${C}".`)}}class Ki{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const u=this.pathFromRoot(C);return u.length>1?u[u.length-2]:null}children(C){const u=ha(C,this._root);return u?u.children.map(_=>_.value):[]}firstChild(C){const u=ha(C,this._root);return u&&u.children.length>0?u.children[0].value:null}siblings(C){const u=io(C,this._root);return u.length<2?[]:u[u.length-2].children.map(T=>T.value).filter(T=>T!==C)}pathFromRoot(C){return io(C,this._root).map(u=>u.value)}}function ha(L,C){if(L===C.value)return C;for(const u of C.children){const _=ha(L,u);if(_)return _}return null}function io(L,C){if(L===C.value)return[C];for(const u of C.children){const _=io(L,u);if(_.length)return _.unshift(C),_}return[]}class Xs{constructor(C,u){this.value=C,this.children=u}toString(){return`TreeNode(${this.value})`}}function yo(L){const C={};return L&&L.children.forEach(u=>C[u.value.outlet]=u),C}class Fi extends Ki{constructor(C,u){super(C),this.snapshot=u,za(this,C)}toString(){return this.snapshot.toString()}}function ol(L,C){const u=function(L,C){const $=new Jo([],{},{},"",{},Rr,C,null,L.root,-1,{});return new zs("",new Xs($,[]))}(L,C),_=new Ue.X([new Ms("",{})]),T=new Ue.X({}),N=new Ue.X({}),$=new Ue.X({}),X=new Ue.X(""),ie=new Os(_,T,$,X,N,Rr,C,u.root);return ie.snapshot=u.root,new Fi(new Xs(ie,[]),u)}class Os{constructor(C,u,_,T,N,$,X,ie){this.url=C,this.params=u,this.queryParams=_,this.fragment=T,this.data=N,this.outlet=$,this.component=X,this._futureSnapshot=ie}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(C=>zo(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(C=>zo(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ba(L,C="emptyOnly"){const u=L.pathFromRoot;let _=0;if("always"!==C)for(_=u.length-1;_>=1;){const T=u[_],N=u[_-1];if(T.routeConfig&&""===T.routeConfig.path)_--;else{if(N.component)break;_--}}return function(L){return L.reduce((C,u)=>({params:Object.assign(Object.assign({},C.params),u.params),data:Object.assign(Object.assign({},C.data),u.data),resolve:Object.assign(Object.assign({},C.resolve),u._resolvedData)}),{params:{},data:{},resolve:{}})}(u.slice(_))}class Jo{constructor(C,u,_,T,N,$,X,ie,Ae,$e,ot){this.url=C,this.params=u,this.queryParams=_,this.fragment=T,this.data=N,this.outlet=$,this.component=X,this.routeConfig=ie,this._urlSegment=Ae,this._lastPathIndex=$e,this._resolve=ot}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(_=>_.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zs extends Ki{constructor(C,u){super(u),this.url=C,za(this,u)}toString(){return Ha(this._root)}}function za(L,C){C.value._routerState=L,C.children.forEach(u=>za(L,u))}function Ha(L){const C=L.children.length>0?` { ${L.children.map(Ha).join(", ")} } `:"";return`${L.value}${C}`}function Ol(L){if(L.snapshot){const C=L.snapshot,u=L._futureSnapshot;L.snapshot=u,Ui(C.queryParams,u.queryParams)||L.queryParams.next(u.queryParams),C.fragment!==u.fragment&&L.fragment.next(u.fragment),Ui(C.params,u.params)||L.params.next(u.params),function(L,C){if(L.length!==C.length)return!1;for(let u=0;u<L.length;++u)if(!Ui(L[u],C[u]))return!1;return!0}(C.url,u.url)||L.url.next(u.url),Ui(C.data,u.data)||L.data.next(u.data)}else L.snapshot=L._futureSnapshot,L.data.next(L._futureSnapshot.data)}function Ts(L,C){return Ui(L.params,C.params)&&function(L,C){return Pi(L,C)&&L.every((u,_)=>Ui(u.parameters,C[_].parameters))}(L.url,C.url)&&!(!L.parent!=!C.parent)&&(!L.parent||Ts(L.parent,C.parent))}function Oo(L,C,u){if(u&&L.shouldReuseRoute(C.value,u.value.snapshot)){const _=u.value;_._futureSnapshot=C.value;const T=function(L,C,u){return C.children.map(_=>{for(const T of u.children)if(L.shouldReuseRoute(_.value,T.value.snapshot))return Oo(L,_,T);return Oo(L,_)})}(L,C,u);return new Xs(_,T)}{if(L.shouldAttach(C.value)){const N=L.retrieve(C.value);if(null!==N){const $=N.route;return ea(C,$),$}}const _=function(L){return new Os(new Ue.X(L.url),new Ue.X(L.params),new Ue.X(L.queryParams),new Ue.X(L.fragment),new Ue.X(L.data),L.outlet,L.component,L)}(C.value),T=C.children.map(N=>Oo(L,N));return new Xs(_,T)}}function ea(L,C){if(L.value.routeConfig!==C.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(L.children.length!==C.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");C.value._futureSnapshot=L.value;for(let u=0;u<L.children.length;++u)ea(L.children[u],C.children[u])}function ta(L){return"object"==typeof L&&null!=L&&!L.outlets&&!L.segmentPath}function Ea(L){return"object"==typeof L&&null!=L&&L.outlets}function fa(L,C,u,_,T){let N={};return _&&gs(_,($,X)=>{N[X]=Array.isArray($)?$.map(ie=>`${ie}`):`${$}`}),new Ys(u.root===L?C:ll(u.root,L,C),N,T)}function ll(L,C,u){const _={};return gs(L.children,(T,N)=>{_[N]=T===C?u:ll(T,C,u)}),new Pr(L.segments,_)}class Kl{constructor(C,u,_){if(this.isAbsolute=C,this.numberOfDoubleDots=u,this.commands=_,C&&_.length>0&&ta(_[0]))throw new Error("Root segment cannot have matrix parameters");const T=_.find(Ea);if(T&&T!==qs(_))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ns{constructor(C,u,_){this.segmentGroup=C,this.processChildren=u,this.index=_}}function Ma(L,C,u){if(L||(L=new Pr([],{})),0===L.segments.length&&L.hasChildren())return Sa(L,C,u);const _=function(L,C,u){let _=0,T=C;const N={match:!1,pathIndex:0,commandIndex:0};for(;T<L.segments.length;){if(_>=u.length)return N;const $=L.segments[T],X=u[_];if(Ea(X))break;const ie=`${X}`,Ae=_<u.length-1?u[_+1]:null;if(T>0&&void 0===ie)break;if(ie&&Ae&&"object"==typeof Ae&&void 0===Ae.outlets){if(!oo(ie,Ae,$))return N;_+=2}else{if(!oo(ie,{},$))return N;_++}T++}return{match:!0,pathIndex:T,commandIndex:_}}(L,C,u),T=u.slice(_.commandIndex);if(_.match&&_.pathIndex<L.segments.length){const N=new Pr(L.segments.slice(0,_.pathIndex),{});return N.children[Rr]=new Pr(L.segments.slice(_.pathIndex),L.children),Sa(N,0,T)}return _.match&&0===T.length?new Pr(L.segments,{}):_.match&&!L.hasChildren()?vo(L,C,u):_.match?Sa(L,0,T):vo(L,C,u)}function Sa(L,C,u){if(0===u.length)return new Pr(L.segments,{});{const _=function(L){return Ea(L[0])?L[0].outlets:{[Rr]:L}}(u),T={};return gs(_,(N,$)=>{"string"==typeof N&&(N=[N]),null!==N&&(T[$]=Ma(L.children[$],C,N))}),gs(L.children,(N,$)=>{void 0===_[$]&&(T[$]=N)}),new Pr(L.segments,T)}}function vo(L,C,u){const _=L.segments.slice(0,C);let T=0;for(;T<u.length;){const N=u[T];if(Ea(N)){const ie=ra(N.outlets);return new Pr(_,ie)}if(0===T&&ta(u[0])){_.push(new Ms(L.segments[C].path,Fs(u[0]))),T++;continue}const $=Ea(N)?N.outlets[Rr]:`${N}`,X=T<u.length-1?u[T+1]:null;$&&X&&ta(X)?(_.push(new Ms($,Fs(X))),T+=2):(_.push(new Ms($,{})),T++)}return new Pr(_,{})}function ra(L){const C={};return gs(L,(u,_)=>{"string"==typeof u&&(u=[u]),null!==u&&(C[_]=vo(new Pr([],{}),0,u))}),C}function Fs(L){const C={};return gs(L,(u,_)=>C[_]=`${u}`),C}function oo(L,C,u){return L==u.path&&Ui(C,u.parameters)}class Ql{constructor(C,u,_,T){this.routeReuseStrategy=C,this.futureState=u,this.currState=_,this.forwardEvent=T}activate(C){const u=this.futureState._root,_=this.currState?this.currState._root:null;this.deactivateChildRoutes(u,_,C),Ol(this.futureState.root),this.activateChildRoutes(u,_,C)}deactivateChildRoutes(C,u,_){const T=yo(u);C.children.forEach(N=>{const $=N.value.outlet;this.deactivateRoutes(N,T[$],_),delete T[$]}),gs(T,(N,$)=>{this.deactivateRouteAndItsChildren(N,_)})}deactivateRoutes(C,u,_){const T=C.value,N=u?u.value:null;if(T===N)if(T.component){const $=_.getContext(T.outlet);$&&this.deactivateChildRoutes(C,u,$.children)}else this.deactivateChildRoutes(C,u,_);else N&&this.deactivateRouteAndItsChildren(u,_)}deactivateRouteAndItsChildren(C,u){this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,u):this.deactivateRouteAndOutlet(C,u)}detachAndStoreRouteSubtree(C,u){const _=u.getContext(C.value.outlet);if(_&&_.outlet){const T=_.outlet.detach(),N=_.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:T,route:C,contexts:N})}}deactivateRouteAndOutlet(C,u){const _=u.getContext(C.value.outlet),T=_&&C.value.component?_.children:u,N=yo(C);for(const $ of Object.keys(N))this.deactivateRouteAndItsChildren(N[$],T);_&&_.outlet&&(_.outlet.deactivate(),_.children.onOutletDeactivated(),_.attachRef=null,_.resolver=null,_.route=null)}activateChildRoutes(C,u,_){const T=yo(u);C.children.forEach(N=>{this.activateRoutes(N,T[N.value.outlet],_),this.forwardEvent(new Ri(N.value.snapshot))}),C.children.length&&this.forwardEvent(new Jn(C.value.snapshot))}activateRoutes(C,u,_){const T=C.value,N=u?u.value:null;if(Ol(T),T===N)if(T.component){const $=_.getOrCreateContext(T.outlet);this.activateChildRoutes(C,u,$.children)}else this.activateChildRoutes(C,u,_);else if(T.component){const $=_.getOrCreateContext(T.outlet);if(this.routeReuseStrategy.shouldAttach(T.snapshot)){const X=this.routeReuseStrategy.retrieve(T.snapshot);this.routeReuseStrategy.store(T.snapshot,null),$.children.onOutletReAttached(X.contexts),$.attachRef=X.componentRef,$.route=X.route.value,$.outlet&&$.outlet.attach(X.componentRef,X.route.value),da(X.route)}else{const X=function(L){for(let C=L.parent;C;C=C.parent){const u=C.routeConfig;if(u&&u._loadedConfig)return u._loadedConfig;if(u&&u.component)return null}return null}(T.snapshot),ie=X?X.module.componentFactoryResolver:null;$.attachRef=null,$.route=T,$.resolver=ie,$.outlet&&$.outlet.activateWith(T,ie),this.activateChildRoutes(C,null,$.children)}}else this.activateChildRoutes(C,null,_)}}function da(L){Ol(L.value),L.children.forEach(da)}class Jl{constructor(C,u){this.routes=C,this.module=u}}function ys(L){return"function"==typeof L}function ee(L){return L instanceof Ys}const zt=Symbol("INITIAL_VALUE");function or(){return Yt(L=>(0,He.aj)(L.map(C=>C.pipe((0,ai.q)(1),function(...L){const C=L[L.length-1];return(0,dt.K)(C)?(L.pop(),u=>Ne(L,u,C)):u=>Ne(L,u)}(zt)))).pipe(Gn((C,u)=>{let _=!1;return u.reduce((T,N,$)=>T!==zt?T:(N===zt&&(_=!0),_||!1!==N&&$!==u.length-1&&!ee(N)?T:N),C)},zt),(0,ki.h)(C=>C!==zt),(0,gt.U)(C=>ee(C)?C:!0===C),(0,ai.q)(1)))}let yr=(()=>{class L{}return L.\u0275fac=function(u){return new(u||L)},L.\u0275cmp=Y.Xpm({type:L,selectors:[["ng-component"]],decls:1,vars:0,template:function(u,_){1&u&&Y._UZ(0,"router-outlet")},directives:function(){return[Jc]},encapsulation:2}),L})();function Qi(L,C=""){for(let u=0;u<L.length;u++){const _=L[u];zi(_,Gr(C,_))}}function zi(L,C){L.children&&Qi(L.children,C)}function Gr(L,C){return C?L||C.path?L&&!C.path?`${L}/`:!L&&C.path?C.path:`${L}/${C.path}`:"":L}function kr(L){const C=L.children&&L.children.map(kr),u=C?Object.assign(Object.assign({},L),{children:C}):Object.assign({},L);return!u.component&&(C||u.loadChildren)&&u.outlet&&u.outlet!==Rr&&(u.component=yr),u}function Yr(L){return L.outlet||Rr}function vs(L,C){const u=L.filter(_=>Yr(_)===C);return u.push(...L.filter(_=>Yr(_)!==C)),u}const No={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function hs(L,C,u){var _;if(""===C.path)return"full"===C.pathMatch&&(L.hasChildren()||u.length>0)?Object.assign({},No):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const N=(C.matcher||ro)(u,L,C);if(!N)return Object.assign({},No);const $={};gs(N.posParams,(ie,Ae)=>{$[Ae]=ie.path});const X=N.consumed.length>0?Object.assign(Object.assign({},$),N.consumed[N.consumed.length-1].parameters):$;return{matched:!0,consumedSegments:N.consumed,lastChild:N.consumed.length,parameters:X,positionalParamSegments:null!==(_=N.posParams)&&void 0!==_?_:{}}}function Wo(L,C,u,_,T="corrected"){if(u.length>0&&function(L,C,u){return u.some(_=>wo(L,C,_)&&Yr(_)!==Rr)}(L,u,_)){const $=new Pr(C,function(L,C,u,_){const T={};T[Rr]=_,_._sourceSegment=L,_._segmentIndexShift=C.length;for(const N of u)if(""===N.path&&Yr(N)!==Rr){const $=new Pr([],{});$._sourceSegment=L,$._segmentIndexShift=C.length,T[Yr(N)]=$}return T}(L,C,_,new Pr(u,L.children)));return $._sourceSegment=L,$._segmentIndexShift=C.length,{segmentGroup:$,slicedSegments:[]}}if(0===u.length&&function(L,C,u){return u.some(_=>wo(L,C,_))}(L,u,_)){const $=new Pr(L.segments,function(L,C,u,_,T,N){const $={};for(const X of _)if(wo(L,u,X)&&!T[Yr(X)]){const ie=new Pr([],{});ie._sourceSegment=L,ie._segmentIndexShift="legacy"===N?L.segments.length:C.length,$[Yr(X)]=ie}return Object.assign(Object.assign({},T),$)}(L,C,u,_,L.children,T));return $._sourceSegment=L,$._segmentIndexShift=C.length,{segmentGroup:$,slicedSegments:u}}const N=new Pr(L.segments,L.children);return N._sourceSegment=L,N._segmentIndexShift=C.length,{segmentGroup:N,slicedSegments:u}}function wo(L,C,u){return(!(L.hasChildren()||C.length>0)||"full"!==u.pathMatch)&&""===u.path}function _s(L,C,u,_){return!!(Yr(L)===_||_!==Rr&&wo(C,u,L))&&("**"===L.path||hs(C,L,u).matched)}function $o(L,C,u){return 0===C.length&&!L.children[u]}class qo{constructor(C){this.segmentGroup=C||null}}class Wa{constructor(C){this.urlTree=C}}function er(L){return new ze.y(C=>C.error(new qo(L)))}function ks(L){return new ze.y(C=>C.error(new Wa(L)))}function vl(L){return new ze.y(C=>C.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${L}'`)))}class _l{constructor(C,u,_,T,N){this.configLoader=u,this.urlSerializer=_,this.urlTree=T,this.config=N,this.allowRedirects=!0,this.ngModule=C.get(Y.h0i)}apply(){const C=Wo(this.urlTree.root,[],[],this.config).segmentGroup,u=new Pr(C.segments,C.children);return this.expandSegmentGroup(this.ngModule,this.config,u,Rr).pipe((0,gt.U)(N=>this.createUrlTree(Q(N),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Tn(N=>{if(N instanceof Wa)return this.allowRedirects=!1,this.match(N.urlTree);throw N instanceof qo?this.noMatchError(N):N}))}match(C){return this.expandSegmentGroup(this.ngModule,this.config,C.root,Rr).pipe((0,gt.U)(T=>this.createUrlTree(Q(T),C.queryParams,C.fragment))).pipe(Tn(T=>{throw T instanceof qo?this.noMatchError(T):T}))}noMatchError(C){return new Error(`Cannot match any routes. URL Segment: '${C.segmentGroup}'`)}createUrlTree(C,u,_){const T=C.segments.length>0?new Pr([],{[Rr]:C}):C;return new Ys(T,u,_)}expandSegmentGroup(C,u,_,T){return 0===_.segments.length&&_.hasChildren()?this.expandChildren(C,u,_).pipe((0,gt.U)(N=>new Pr([],N))):this.expandSegment(C,_,u,_.segments,T,!0)}expandChildren(C,u,_){const T=[];for(const N of Object.keys(_.children))"primary"===N?T.unshift(N):T.push(N);return(0,ne.D)(T).pipe(tn(N=>{const $=_.children[N],X=vs(u,N);return this.expandSegmentGroup(C,X,$,N).pipe((0,gt.U)(ie=>({segment:ie,outlet:N})))}),Gn((N,$)=>(N[$.outlet]=$.segment,N),{}),function(L,C){const u=arguments.length>=2;return _=>_.pipe(L?(0,ki.h)((T,N)=>L(T,N,_)):jn.y,vn(1),u?wn(C):ss(()=>new Je))}())}expandSegment(C,u,_,T,N,$){return(0,ne.D)(_).pipe(tn(X=>this.expandSegmentAgainstRoute(C,u,_,X,T,N,$).pipe(Tn(Ae=>{if(Ae instanceof qo)return(0,_e.of)(null);throw Ae}))),wr(X=>!!X),Tn((X,ie)=>{if(X instanceof Je||"EmptyError"===X.name){if($o(u,T,N))return(0,_e.of)(new Pr([],{}));throw new qo(u)}throw X}))}expandSegmentAgainstRoute(C,u,_,T,N,$,X){return _s(T,u,N,$)?void 0===T.redirectTo?this.matchSegmentAgainstRoute(C,u,T,N,$):X&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,u,_,T,N,$):er(u):er(u)}expandSegmentAgainstRouteUsingRedirect(C,u,_,T,N,$){return"**"===T.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,_,T,$):this.expandRegularSegmentAgainstRouteUsingRedirect(C,u,_,T,N,$)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,u,_,T){const N=this.applyRedirectCommands([],_.redirectTo,{});return _.redirectTo.startsWith("/")?ks(N):this.lineralizeSegments(_,N).pipe((0,Fn.zg)($=>{const X=new Pr($,{});return this.expandSegment(C,X,u,$,T,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,u,_,T,N,$){const{matched:X,consumedSegments:ie,lastChild:Ae,positionalParamSegments:$e}=hs(u,T,N);if(!X)return er(u);const ot=this.applyRedirectCommands(ie,T.redirectTo,$e);return T.redirectTo.startsWith("/")?ks(ot):this.lineralizeSegments(T,ot).pipe((0,Fn.zg)(pt=>this.expandSegment(C,u,_,pt.concat(N.slice(Ae)),$,!1)))}matchSegmentAgainstRoute(C,u,_,T,N){if("**"===_.path)return _.loadChildren?(_._loadedConfig?(0,_e.of)(_._loadedConfig):this.configLoader.load(C.injector,_)).pipe((0,gt.U)(pt=>(_._loadedConfig=pt,new Pr(T,{})))):(0,_e.of)(new Pr(T,{}));const{matched:$,consumedSegments:X,lastChild:ie}=hs(u,_,T);if(!$)return er(u);const Ae=T.slice(ie);return this.getChildConfig(C,_,T).pipe((0,Fn.zg)(ot=>{const pt=ot.module,Xt=ot.routes,{segmentGroup:vt,slicedSegments:Vn}=Wo(u,X,Ae,Xt),tr=new Pr(vt.segments,vt.children);if(0===Vn.length&&tr.hasChildren())return this.expandChildren(pt,Xt,tr).pipe((0,gt.U)(Ar=>new Pr(X,Ar)));if(0===Xt.length&&0===Vn.length)return(0,_e.of)(new Pr(X,{}));const rs=Yr(_)===N;return this.expandSegment(pt,tr,Xt,Vn,rs?Rr:N,!0).pipe((0,gt.U)(nn=>new Pr(X.concat(nn.segments),nn.children)))}))}getChildConfig(C,u,_){return u.children?(0,_e.of)(new Jl(u.children,C)):u.loadChildren?void 0!==u._loadedConfig?(0,_e.of)(u._loadedConfig):this.runCanLoadGuards(C.injector,u,_).pipe((0,Fn.zg)(T=>{return T?this.configLoader.load(C.injector,u).pipe((0,gt.U)(N=>(u._loadedConfig=N,N))):(L=u,new ze.y(C=>C.error(no(`Cannot load children because the guard of the route "path: '${L.path}'" returned false`))));var L})):(0,_e.of)(new Jl([],C))}runCanLoadGuards(C,u,_){const T=u.canLoad;if(!T||0===T.length)return(0,_e.of)(!0);const N=T.map($=>{const X=C.get($);let ie;if((L=X)&&ys(L.canLoad))ie=X.canLoad(u,_);else{if(!ys(X))throw new Error("Invalid CanLoad guard");ie=X(u,_)}var L;return cs(ie)});return(0,_e.of)(N).pipe(or(),qe($=>{if(!ee($))return;const X=no(`Redirecting to "${this.urlSerializer.serialize($)}"`);throw X.url=$,X}),(0,gt.U)($=>!0===$))}lineralizeSegments(C,u){let _=[],T=u.root;for(;;){if(_=_.concat(T.segments),0===T.numberOfChildren)return(0,_e.of)(_);if(T.numberOfChildren>1||!T.children[Rr])return vl(C.redirectTo);T=T.children[Rr]}}applyRedirectCommands(C,u,_){return this.applyRedirectCreatreUrlTree(u,this.urlSerializer.parse(u),C,_)}applyRedirectCreatreUrlTree(C,u,_,T){const N=this.createSegmentGroup(C,u.root,_,T);return new Ys(N,this.createQueryParams(u.queryParams,this.urlTree.queryParams),u.fragment)}createQueryParams(C,u){const _={};return gs(C,(T,N)=>{if("string"==typeof T&&T.startsWith(":")){const X=T.substring(1);_[N]=u[X]}else _[N]=T}),_}createSegmentGroup(C,u,_,T){const N=this.createSegments(C,u.segments,_,T);let $={};return gs(u.children,(X,ie)=>{$[ie]=this.createSegmentGroup(C,X,_,T)}),new Pr(N,$)}createSegments(C,u,_,T){return u.map(N=>N.path.startsWith(":")?this.findPosParam(C,N,T):this.findOrReturn(N,_))}findPosParam(C,u,_){const T=_[u.path.substring(1)];if(!T)throw new Error(`Cannot redirect to '${C}'. Cannot find '${u.path}'.`);return T}findOrReturn(C,u){let _=0;for(const T of u){if(T.path===C.path)return u.splice(_),T;_++}return C}}function Q(L){const C={};for(const _ of Object.keys(L.children)){const N=Q(L.children[_]);(N.segments.length>0||N.hasChildren())&&(C[_]=N)}return function(L){if(1===L.numberOfChildren&&L.children[Rr]){const C=L.children[Rr];return new Pr(L.segments.concat(C.segments),C.children)}return L}(new Pr(L.segments,C))}class S{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class F{constructor(C,u){this.component=C,this.route=u}}function K(L,C,u){const _=L._root;return nt(_,C?C._root:null,u,[_.value])}function Ce(L,C,u){const _=function(L){if(!L)return null;for(let C=L.parent;C;C=C.parent){const u=C.routeConfig;if(u&&u._loadedConfig)return u._loadedConfig}return null}(C);return(_?_.module.injector:u).get(L)}function nt(L,C,u,_,T={canDeactivateChecks:[],canActivateChecks:[]}){const N=yo(C);return L.children.forEach($=>{(function(L,C,u,_,T={canDeactivateChecks:[],canActivateChecks:[]}){const N=L.value,$=C?C.value:null,X=u?u.getContext(L.value.outlet):null;if($&&N.routeConfig===$.routeConfig){const ie=function(L,C,u){if("function"==typeof u)return u(L,C);switch(u){case"pathParamsChange":return!Pi(L.url,C.url);case"pathParamsOrQueryParamsChange":return!Pi(L.url,C.url)||!Ui(L.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ts(L,C)||!Ui(L.queryParams,C.queryParams);case"paramsChange":default:return!Ts(L,C)}}($,N,N.routeConfig.runGuardsAndResolvers);ie?T.canActivateChecks.push(new S(_)):(N.data=$.data,N._resolvedData=$._resolvedData),nt(L,C,N.component?X?X.children:null:u,_,T),ie&&X&&X.outlet&&X.outlet.isActivated&&T.canDeactivateChecks.push(new F(X.outlet.component,$))}else $&&zn(C,X,T),T.canActivateChecks.push(new S(_)),nt(L,null,N.component?X?X.children:null:u,_,T)})($,N[$.value.outlet],u,_.concat([$.value]),T),delete N[$.value.outlet]}),gs(N,($,X)=>zn($,u.getContext(X),T)),T}function zn(L,C,u){const _=yo(L),T=L.value;gs(_,(N,$)=>{zn(N,T.component?C?C.children.getContext($):null:C,u)}),u.canDeactivateChecks.push(new F(T.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,T))}class bs{}function ci(L){return new ze.y(C=>C.error(L))}class xs{constructor(C,u,_,T,N,$){this.rootComponentType=C,this.config=u,this.urlTree=_,this.url=T,this.paramsInheritanceStrategy=N,this.relativeLinkResolution=$}recognize(){const C=Wo(this.urlTree.root,[],[],this.config.filter($=>void 0===$.redirectTo),this.relativeLinkResolution).segmentGroup,u=this.processSegmentGroup(this.config,C,Rr);if(null===u)return null;const _=new Jo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rr,this.rootComponentType,null,this.urlTree.root,-1,{}),T=new Xs(_,u),N=new zs(this.url,T);return this.inheritParamsAndData(N._root),N}inheritParamsAndData(C){const u=C.value,_=ba(u,this.paramsInheritanceStrategy);u.params=Object.freeze(_.params),u.data=Object.freeze(_.data),C.children.forEach(T=>this.inheritParamsAndData(T))}processSegmentGroup(C,u,_){return 0===u.segments.length&&u.hasChildren()?this.processChildren(C,u):this.processSegment(C,u,u.segments,_)}processChildren(C,u){const _=[];for(const N of Object.keys(u.children)){const $=u.children[N],X=vs(C,N),ie=this.processSegmentGroup(X,$,N);if(null===ie)return null;_.push(...ie)}const T=Fl(_);return T.sort((C,u)=>C.value.outlet===Rr?-1:u.value.outlet===Rr?1:C.value.outlet.localeCompare(u.value.outlet)),T}processSegment(C,u,_,T){for(const N of C){const $=this.processSegmentAgainstRoute(N,u,_,T);if(null!==$)return $}return $o(u,_,T)?[]:null}processSegmentAgainstRoute(C,u,_,T){if(C.redirectTo||!_s(C,u,_,T))return null;let N,$=[],X=[];if("**"===C.path){const Xt=_.length>0?qs(_).parameters:{};N=new Jo(_,Xt,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$a(C),Yr(C),C.component,C,ts(u),Fo(u)+_.length,Hn(C))}else{const Xt=hs(u,C,_);if(!Xt.matched)return null;$=Xt.consumedSegments,X=_.slice(Xt.lastChild),N=new Jo($,Xt.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$a(C),Yr(C),C.component,C,ts(u),Fo(u)+$.length,Hn(C))}const ie=(L=C).children?L.children:L.loadChildren?L._loadedConfig.routes:[],{segmentGroup:Ae,slicedSegments:$e}=Wo(u,$,X,ie.filter(Xt=>void 0===Xt.redirectTo),this.relativeLinkResolution);var L;if(0===$e.length&&Ae.hasChildren()){const Xt=this.processChildren(ie,Ae);return null===Xt?null:[new Xs(N,Xt)]}if(0===ie.length&&0===$e.length)return[new Xs(N,[])];const ot=Yr(C)===T,pt=this.processSegment(ie,Ae,$e,ot?Rr:T);return null===pt?null:[new Xs(N,pt)]}}function pe(L){const C=L.value.routeConfig;return C&&""===C.path&&void 0===C.redirectTo}function Fl(L){const C=[],u=new Set;for(const _ of L){if(!pe(_)){C.push(_);continue}const T=C.find(N=>_.value.routeConfig===N.value.routeConfig);void 0!==T?(T.children.push(..._.children),u.add(T)):C.push(_)}for(const _ of u){const T=Fl(_.children);C.push(new Xs(_.value,T))}return C.filter(_=>!u.has(_))}function ts(L){let C=L;for(;C._sourceSegment;)C=C._sourceSegment;return C}function Fo(L){let C=L,u=C._segmentIndexShift?C._segmentIndexShift:0;for(;C._sourceSegment;)C=C._sourceSegment,u+=C._segmentIndexShift?C._segmentIndexShift:0;return u-1}function $a(L){return L.data||{}}function Hn(L){return L.resolve||{}}function Gi(L){return Yt(C=>{const u=L(C);return u?(0,ne.D)(u).pipe((0,gt.U)(()=>C)):(0,_e.of)(C)})}class Lc extends class{shouldDetach(C){return!1}store(C,u){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,u){return C.routeConfig===u.routeConfig}}{}const Un=new Y.OlP("ROUTES");class Ca{constructor(C,u,_,T){this.loader=C,this.compiler=u,this.onLoadStartListener=_,this.onLoadEndListener=T}load(C,u){if(u._loader$)return u._loader$;this.onLoadStartListener&&this.onLoadStartListener(u);const T=this.loadModuleFactory(u.loadChildren).pipe((0,gt.U)(N=>{this.onLoadEndListener&&this.onLoadEndListener(u);const $=N.create(C);return new Jl(Ba($.injector.get(Un,void 0,Y.XFs.Self|Y.XFs.Optional)).map(kr),$)}),Tn(N=>{throw u._loader$=void 0,N}));return u._loader$=new tt.c(T,()=>new We.xQ).pipe((0,Jr.x)()),u._loader$}loadModuleFactory(C){return"string"==typeof C?(0,ne.D)(this.loader.load(C)):cs(C()).pipe((0,Fn.zg)(u=>u instanceof Y.YKP?(0,_e.of)(u):(0,ne.D)(this.compiler.compileModuleAsync(u))))}}class nc{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Eo,this.attachRef=null}}class Eo{constructor(){this.contexts=new Map}onChildOutletCreated(C,u){const _=this.getOrCreateContext(C);_.outlet=u,this.contexts.set(C,_)}onChildOutletDestroyed(C){const u=this.getContext(C);u&&(u.outlet=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let u=this.getContext(C);return u||(u=new nc,this.contexts.set(C,u)),u}getContext(C){return this.contexts.get(C)||null}}class cl{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,u){return C}}function Aa(L){throw L}function Mo(L,C,u){return C.parse("/")}function ul(L,C){return(0,_e.of)(null)}const hl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ji={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wi=(()=>{class L{constructor(u,_,T,N,$,X,ie,Ae){this.rootComponentType=u,this.urlSerializer=_,this.rootContexts=T,this.location=N,this.config=Ae,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new We.xQ,this.errorHandler=Aa,this.malformedUriErrorHandler=Mo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ul,afterPreactivation:ul},this.urlHandlingStrategy=new cl,this.routeReuseStrategy=new Lc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=$.get(Y.h0i),this.console=$.get(Y.c2e);const pt=$.get(Y.R0b);this.isNgZoneEnabled=pt instanceof Y.R0b&&Y.R0b.isInAngularZone(),this.resetConfig(Ae),this.currentUrlTree=new Ys(new Pr([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ca(X,ie,Xt=>this.triggerEvent(new Ps(Xt)),Xt=>this.triggerEvent(new Mi(Xt))),this.routerState=ol(this.currentUrlTree,this.rootComponentType),this.transitions=new Ue.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var u;return null===(u=this.location.getState())||void 0===u?void 0:u.\u0275routerPageId}setupNavigations(u){const _=this.events;return u.pipe((0,ki.h)(T=>0!==T.id),(0,gt.U)(T=>Object.assign(Object.assign({},T),{extractedUrl:this.urlHandlingStrategy.extract(T.rawUrl)})),Yt(T=>{let N=!1,$=!1;return(0,_e.of)(T).pipe(qe(X=>{this.currentNavigation={id:X.id,initialUrl:X.currentRawUrl,extractedUrl:X.extractedUrl,trigger:X.source,extras:X.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Yt(X=>{const ie=!this.navigated||X.extractedUrl.toString()!==this.browserUrlTree.toString(),Ae=("reload"===this.onSameUrlNavigation||ie)&&this.urlHandlingStrategy.shouldProcessUrl(X.rawUrl);if(Xo(X.source)&&(this.browserUrlTree=X.rawUrl),Ae)return(0,_e.of)(X).pipe(Yt($e=>{const ot=this.transitions.getValue();return _.next(new Vs($e.id,this.serializeUrl($e.extractedUrl),$e.source,$e.restoredState)),ot!==this.transitions.getValue()?te.E:Promise.resolve($e)}),function(L,C,u,_){return Yt(T=>function(L,C,u,_,T){return new _l(L,C,u,_,T).apply()}(L,C,u,T.extractedUrl,_).pipe((0,gt.U)(N=>Object.assign(Object.assign({},T),{urlAfterRedirects:N}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),qe($e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:$e.urlAfterRedirects})}),function(L,C,u,_,T){return(0,Fn.zg)(N=>function(L,C,u,_,T="emptyOnly",N="legacy"){try{const $=new xs(L,C,u,_,T,N).recognize();return null===$?ci(new bs):(0,_e.of)($)}catch($){return ci($)}}(L,C,N.urlAfterRedirects,u(N.urlAfterRedirects),_,T).pipe((0,gt.U)($=>Object.assign(Object.assign({},N),{targetSnapshot:$}))))}(this.rootComponentType,this.config,$e=>this.serializeUrl($e),this.paramsInheritanceStrategy,this.relativeLinkResolution),qe($e=>{"eager"===this.urlUpdateStrategy&&($e.extras.skipLocationChange||this.setBrowserUrl($e.urlAfterRedirects,$e),this.browserUrlTree=$e.urlAfterRedirects);const ot=new kn($e.id,this.serializeUrl($e.extractedUrl),this.serializeUrl($e.urlAfterRedirects),$e.targetSnapshot);_.next(ot)}));if(ie&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ot,extractedUrl:pt,source:Xt,restoredState:vt,extras:Vn}=X,tr=new Vs(ot,this.serializeUrl(pt),Xt,vt);_.next(tr);const rs=ol(pt,this.rootComponentType).snapshot;return(0,_e.of)(Object.assign(Object.assign({},X),{targetSnapshot:rs,urlAfterRedirects:pt,extras:Object.assign(Object.assign({},Vn),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=X.rawUrl,this.browserUrlTree=X.urlAfterRedirects,X.resolve(null),te.E}),Gi(X=>{const{targetSnapshot:ie,id:Ae,extractedUrl:$e,rawUrl:ot,extras:{skipLocationChange:pt,replaceUrl:Xt}}=X;return this.hooks.beforePreactivation(ie,{navigationId:Ae,appliedUrlTree:$e,rawUrlTree:ot,skipLocationChange:!!pt,replaceUrl:!!Xt})}),qe(X=>{const ie=new Ln(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot);this.triggerEvent(ie)}),(0,gt.U)(X=>Object.assign(Object.assign({},X),{guards:K(X.targetSnapshot,X.currentSnapshot,this.rootContexts)})),function(L,C){return(0,Fn.zg)(u=>{const{targetSnapshot:_,currentSnapshot:T,guards:{canActivateChecks:N,canDeactivateChecks:$}}=u;return 0===$.length&&0===N.length?(0,_e.of)(Object.assign(Object.assign({},u),{guardsResult:!0})):function(L,C,u,_){return(0,ne.D)(L).pipe((0,Fn.zg)(T=>function(L,C,u,_,T){const N=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!N||0===N.length)return(0,_e.of)(!0);const $=N.map(X=>{const ie=Ce(X,C,T);let Ae;if(function(L){return L&&ys(L.canDeactivate)}(ie))Ae=cs(ie.canDeactivate(L,C,u,_));else{if(!ys(ie))throw new Error("Invalid CanDeactivate guard");Ae=cs(ie(L,C,u,_))}return Ae.pipe(wr())});return(0,_e.of)($).pipe(or())}(T.component,T.route,u,C,_)),wr(T=>!0!==T,!0))}($,_,T,L).pipe((0,Fn.zg)(X=>X&&function(L){return"boolean"==typeof L}(X)?function(L,C,u,_){return(0,ne.D)(C).pipe(tn(T=>Ne(function(L,C){return null!==L&&C&&C(new ml(L)),(0,_e.of)(!0)}(T.route.parent,_),function(L,C){return null!==L&&C&&C(new rl(L)),(0,_e.of)(!0)}(T.route,_),function(L,C,u){const _=C[C.length-1],N=C.slice(0,C.length-1).reverse().map($=>function(L){const C=L.routeConfig?L.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:L,guards:C}:null}($)).filter($=>null!==$).map($=>xe(()=>{const X=$.guards.map(ie=>{const Ae=Ce(ie,$.node,u);let $e;if(function(L){return L&&ys(L.canActivateChild)}(Ae))$e=cs(Ae.canActivateChild(_,L));else{if(!ys(Ae))throw new Error("Invalid CanActivateChild guard");$e=cs(Ae(_,L))}return $e.pipe(wr())});return(0,_e.of)(X).pipe(or())}));return(0,_e.of)(N).pipe(or())}(L,T.path,u),function(L,C,u){const _=C.routeConfig?C.routeConfig.canActivate:null;if(!_||0===_.length)return(0,_e.of)(!0);const T=_.map(N=>xe(()=>{const $=Ce(N,C,u);let X;if(function(L){return L&&ys(L.canActivate)}($))X=cs($.canActivate(C,L));else{if(!ys($))throw new Error("Invalid CanActivate guard");X=cs($(C,L))}return X.pipe(wr())}));return(0,_e.of)(T).pipe(or())}(L,T.route,u))),wr(T=>!0!==T,!0))}(_,N,L,C):(0,_e.of)(X)),(0,gt.U)(X=>Object.assign(Object.assign({},u),{guardsResult:X})))})}(this.ngModule.injector,X=>this.triggerEvent(X)),qe(X=>{if(ee(X.guardsResult)){const Ae=no(`Redirecting to "${this.serializeUrl(X.guardsResult)}"`);throw Ae.url=X.guardsResult,Ae}const ie=new Po(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot,!!X.guardsResult);this.triggerEvent(ie)}),(0,ki.h)(X=>!!X.guardsResult||(this.restoreHistory(X),this.cancelNavigationTransition(X,""),!1)),Gi(X=>{if(X.guards.canActivateChecks.length)return(0,_e.of)(X).pipe(qe(ie=>{const Ae=new Ji(ie.id,this.serializeUrl(ie.extractedUrl),this.serializeUrl(ie.urlAfterRedirects),ie.targetSnapshot);this.triggerEvent(Ae)}),Yt(ie=>{let Ae=!1;return(0,_e.of)(ie).pipe(function(L,C){return(0,Fn.zg)(u=>{const{targetSnapshot:_,guards:{canActivateChecks:T}}=u;if(!T.length)return(0,_e.of)(u);let N=0;return(0,ne.D)(T).pipe(tn($=>function(L,C,u,_){return function(L,C,u,_){const T=Object.keys(L);if(0===T.length)return(0,_e.of)({});const N={};return(0,ne.D)(T).pipe((0,Fn.zg)($=>function(L,C,u,_){const T=Ce(L,C,_);return cs(T.resolve?T.resolve(C,u):T(C,u))}(L[$],C,u,_).pipe(qe(X=>{N[$]=X}))),vn(1),(0,Fn.zg)(()=>Object.keys(N).length===T.length?(0,_e.of)(N):te.E))}(L._resolve,L,C,_).pipe((0,gt.U)(N=>(L._resolvedData=N,L.data=Object.assign(Object.assign({},L.data),ba(L,u).resolve),null)))}($.route,_,L,C)),qe(()=>N++),vn(1),(0,Fn.zg)($=>N===T.length?(0,_e.of)(u):te.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),qe({next:()=>Ae=!0,complete:()=>{Ae||(this.restoreHistory(ie),this.cancelNavigationTransition(ie,"At least one route resolver didn't emit any value."))}}))}),qe(ie=>{const Ae=new ls(ie.id,this.serializeUrl(ie.extractedUrl),this.serializeUrl(ie.urlAfterRedirects),ie.targetSnapshot);this.triggerEvent(Ae)}))}),Gi(X=>{const{targetSnapshot:ie,id:Ae,extractedUrl:$e,rawUrl:ot,extras:{skipLocationChange:pt,replaceUrl:Xt}}=X;return this.hooks.afterPreactivation(ie,{navigationId:Ae,appliedUrlTree:$e,rawUrlTree:ot,skipLocationChange:!!pt,replaceUrl:!!Xt})}),(0,gt.U)(X=>{const ie=function(L,C,u){const _=Oo(L,C._root,u?u._root:void 0);return new Fi(_,C)}(this.routeReuseStrategy,X.targetSnapshot,X.currentRouterState);return Object.assign(Object.assign({},X),{targetRouterState:ie})}),qe(X=>{this.currentUrlTree=X.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,X.rawUrl),this.routerState=X.targetRouterState,"deferred"===this.urlUpdateStrategy&&(X.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,X),this.browserUrlTree=X.urlAfterRedirects)}),((L,C,u)=>(0,gt.U)(_=>(new Ql(C,_.targetRouterState,_.currentRouterState,u).activate(L),_)))(this.rootContexts,this.routeReuseStrategy,X=>this.triggerEvent(X)),qe({next(){N=!0},complete(){N=!0}}),function(L){return C=>C.lift(new Ir(L))}(()=>{if(!N&&!$){const X=`Navigation ID ${T.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(T),this.cancelNavigationTransition(T,X)):this.cancelNavigationTransition(T,X)}this.currentNavigation=null}),Tn(X=>{if($=!0,function(L){return L&&L[Il]}(X)){const ie=ee(X.url);ie||(this.navigated=!0,this.restoreHistory(T,!0));const Ae=new Xn(T.id,this.serializeUrl(T.extractedUrl),X.message);_.next(Ae),ie?setTimeout(()=>{const $e=this.urlHandlingStrategy.merge(X.url,this.rawUrlTree),ot={skipLocationChange:T.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xo(T.source)};this.scheduleNavigation($e,"imperative",null,ot,{resolve:T.resolve,reject:T.reject,promise:T.promise})},0):T.resolve(!1)}else{this.restoreHistory(T,!0);const ie=new Di(T.id,this.serializeUrl(T.extractedUrl),X);_.next(ie);try{T.resolve(this.errorHandler(X))}catch(Ae){T.reject(Ae)}}return te.E}))}))}resetRootComponentType(u){this.rootComponentType=u,this.routerState.root.component=this.rootComponentType}getTransition(){const u=this.transitions.value;return u.urlAfterRedirects=this.browserUrlTree,u}setTransition(u){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),u))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(u=>{const _=this.extractLocationChangeInfoFromEvent(u);this.shouldScheduleNavigation(this.lastLocationChangeInfo,_)&&setTimeout(()=>{const{source:T,state:N,urlTree:$}=_,X={replaceUrl:!0};if(N){const ie=Object.assign({},N);delete ie.navigationId,delete ie.\u0275routerPageId,0!==Object.keys(ie).length&&(X.state=ie)}this.scheduleNavigation($,T,N,X)},0),this.lastLocationChangeInfo=_}))}extractLocationChangeInfoFromEvent(u){var _;return{source:"popstate"===u.type?"popstate":"hashchange",urlTree:this.parseUrl(u.url),state:(null===(_=u.state)||void 0===_?void 0:_.navigationId)?u.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(u,_){if(!u)return!0;const T=_.urlTree.toString()===u.urlTree.toString();return _.transitionId!==u.transitionId||!T||!("hashchange"===_.source&&"popstate"===u.source||"popstate"===_.source&&"hashchange"===u.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(u){this.events.next(u)}resetConfig(u){Qi(u),this.config=u.map(kr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(u,_={}){const{relativeTo:T,queryParams:N,fragment:$,queryParamsHandling:X,preserveFragment:ie}=_,Ae=T||this.routerState.root,$e=ie?this.currentUrlTree.fragment:$;let ot=null;switch(X){case"merge":ot=Object.assign(Object.assign({},this.currentUrlTree.queryParams),N);break;case"preserve":ot=this.currentUrlTree.queryParams;break;default:ot=N||null}return null!==ot&&(ot=this.removeEmptyProps(ot)),function(L,C,u,_,T){if(0===u.length)return fa(C.root,C.root,C,_,T);const N=function(L){if("string"==typeof L[0]&&1===L.length&&"/"===L[0])return new Kl(!0,0,L);let C=0,u=!1;const _=L.reduce((T,N,$)=>{if("object"==typeof N&&null!=N){if(N.outlets){const X={};return gs(N.outlets,(ie,Ae)=>{X[Ae]="string"==typeof ie?ie.split("/"):ie}),[...T,{outlets:X}]}if(N.segmentPath)return[...T,N.segmentPath]}return"string"!=typeof N?[...T,N]:0===$?(N.split("/").forEach((X,ie)=>{0==ie&&"."===X||(0==ie&&""===X?u=!0:".."===X?C++:""!=X&&T.push(X))}),T):[...T,N]},[]);return new Kl(u,C,_)}(u);if(N.toRoot())return fa(C.root,new Pr([],{}),C,_,T);const $=function(L,C,u){if(L.isAbsolute)return new Ns(C.root,!0,0);if(-1===u.snapshot._lastPathIndex){const N=u.snapshot._urlSegment;return new Ns(N,N===C.root,0)}const _=ta(L.commands[0])?0:1;return function(L,C,u){let _=L,T=C,N=u;for(;N>T;){if(N-=T,_=_.parent,!_)throw new Error("Invalid number of '../'");T=_.segments.length}return new Ns(_,!1,T-N)}(u.snapshot._urlSegment,u.snapshot._lastPathIndex+_,L.numberOfDoubleDots)}(N,C,L),X=$.processChildren?Sa($.segmentGroup,$.index,N.commands):Ma($.segmentGroup,$.index,N.commands);return fa($.segmentGroup,X,C,_,T)}(Ae,this.currentUrlTree,u,ot,null!=$e?$e:null)}navigateByUrl(u,_={skipLocationChange:!1}){const T=ee(u)?u:this.parseUrl(u),N=this.urlHandlingStrategy.merge(T,this.rawUrlTree);return this.scheduleNavigation(N,"imperative",null,_)}navigate(u,_={skipLocationChange:!1}){return function(L){for(let C=0;C<L.length;C++){const u=L[C];if(null==u)throw new Error(`The requested path contains ${u} segment at index ${C}`)}}(u),this.navigateByUrl(this.createUrlTree(u,_),_)}serializeUrl(u){return this.urlSerializer.serialize(u)}parseUrl(u){let _;try{_=this.urlSerializer.parse(u)}catch(T){_=this.malformedUriErrorHandler(T,this.urlSerializer,u)}return _}isActive(u,_){let T;if(T=!0===_?Object.assign({},hl):!1===_?Object.assign({},ji):_,ee(u))return Xi(this.currentUrlTree,u,T);const N=this.parseUrl(u);return Xi(this.currentUrlTree,N,T)}removeEmptyProps(u){return Object.keys(u).reduce((_,T)=>{const N=u[T];return null!=N&&(_[T]=N),_},{})}processNavigations(){this.navigations.subscribe(u=>{this.navigated=!0,this.lastSuccessfulId=u.id,this.currentPageId=u.targetPageId,this.events.next(new Ni(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,u.resolve(!0)},u=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(u,_,T,N,$){var X,ie;if(this.disposed)return Promise.resolve(!1);const Ae=this.getTransition(),$e=Xo(_)&&Ae&&!Xo(Ae.source),Xt=(this.lastSuccessfulId===Ae.id||this.currentNavigation?Ae.rawUrl:Ae.urlAfterRedirects).toString()===u.toString();if($e&&Xt)return Promise.resolve(!0);let vt,Vn,tr;$?(vt=$.resolve,Vn=$.reject,tr=$.promise):tr=new Promise((nn,Ar)=>{vt=nn,Vn=Ar});const rs=++this.navigationId;let Bt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(T=this.location.getState()),Bt=T&&T.\u0275routerPageId?T.\u0275routerPageId:N.replaceUrl||N.skipLocationChange?null!==(X=this.browserPageId)&&void 0!==X?X:0:(null!==(ie=this.browserPageId)&&void 0!==ie?ie:0)+1):Bt=0,this.setTransition({id:rs,targetPageId:Bt,source:_,restoredState:T,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:u,extras:N,resolve:vt,reject:Vn,promise:tr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tr.catch(nn=>Promise.reject(nn))}setBrowserUrl(u,_){const T=this.urlSerializer.serialize(u),N=Object.assign(Object.assign({},_.extras.state),this.generateNgRouterState(_.id,_.targetPageId));this.location.isCurrentPathEqualTo(T)||_.extras.replaceUrl?this.location.replaceState(T,"",N):this.location.go(T,"",N)}restoreHistory(u,_=!1){var T,N;if("computed"===this.canceledNavigationResolution){const $=this.currentPageId-u.targetPageId;"popstate"!==u.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(T=this.currentNavigation)||void 0===T?void 0:T.finalUrl)||0===$?this.currentUrlTree===(null===(N=this.currentNavigation)||void 0===N?void 0:N.finalUrl)&&0===$&&(this.resetState(u),this.browserUrlTree=u.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($)}else"replace"===this.canceledNavigationResolution&&(_&&this.resetState(u),this.resetUrlToCurrentUrlTree())}resetState(u){this.routerState=u.currentRouterState,this.currentUrlTree=u.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,u.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(u,_){const T=new Xn(u.id,this.serializeUrl(u.extractedUrl),_);this.triggerEvent(T),u.resolve(!1)}generateNgRouterState(u,_){return"computed"===this.canceledNavigationResolution?{navigationId:u,\u0275routerPageId:_}:{navigationId:u}}}return L.\u0275fac=function(u){return new(u||L)(Y.LFG(Y.DyG),Y.LFG(Nr),Y.LFG(Eo),Y.LFG(G.Ye),Y.LFG(Y.zs3),Y.LFG(Y.v3s),Y.LFG(Y.Sil),Y.LFG(void 0))},L.\u0275prov=Y.Yz7({token:L,factory:L.\u0275fac}),L})();function Xo(L){return"imperative"!==L}let ao=(()=>{class L{constructor(u,_,T,N,$){this.router=u,this.route=_,this.commands=[],this.onChanges=new We.xQ,null==T&&N.setAttribute($.nativeElement,"tabindex","0")}ngOnChanges(u){this.onChanges.next(this)}set routerLink(u){this.commands=null!=u?Array.isArray(u)?u:[u]:[]}onClick(){const u={skipLocationChange:ma(this.skipLocationChange),replaceUrl:ma(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,u),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ma(this.preserveFragment)})}}return L.\u0275fac=function(u){return new(u||L)(Y.Y36(wi),Y.Y36(Os),Y.$8M("tabindex"),Y.Y36(Y.Qsj),Y.Y36(Y.SBq))},L.\u0275dir=Y.lG2({type:L,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(u,_){1&u&&Y.NdJ("click",function(){return _.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[Y.TTD]}),L})(),$n=(()=>{class L{constructor(u,_,T){this.router=u,this.route=_,this.locationStrategy=T,this.commands=[],this.onChanges=new We.xQ,this.subscription=u.events.subscribe(N=>{N instanceof Ni&&this.updateTargetUrlAndHref()})}set routerLink(u){this.commands=null!=u?Array.isArray(u)?u:[u]:[]}ngOnChanges(u){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(u,_,T,N,$){if(0!==u||_||T||N||$||"string"==typeof this.target&&"_self"!=this.target)return!0;const X={skipLocationChange:ma(this.skipLocationChange),replaceUrl:ma(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,X),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ma(this.preserveFragment)})}}return L.\u0275fac=function(u){return new(u||L)(Y.Y36(wi),Y.Y36(Os),Y.Y36(G.S$))},L.\u0275dir=Y.lG2({type:L,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(u,_){1&u&&Y.NdJ("click",function(N){return _.onClick(N.button,N.ctrlKey,N.shiftKey,N.altKey,N.metaKey)}),2&u&&(Y.Ikx("href",_.href,Y.LSH),Y.uIk("target",_.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[Y.TTD]}),L})();function ma(L){return""===L||!!L}let Jc=(()=>{class L{constructor(u,_,T,N,$){this.parentContexts=u,this.location=_,this.resolver=T,this.changeDetector=$,this.activated=null,this._activatedRoute=null,this.activateEvents=new Y.vpe,this.deactivateEvents=new Y.vpe,this.name=N||Rr,u.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const u=this.parentContexts.getContext(this.name);u&&u.route&&(u.attachRef?this.attach(u.attachRef,u.route):this.activateWith(u.route,u.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const u=this.activated;return this.activated=null,this._activatedRoute=null,u}attach(u,_){this.activated=u,this._activatedRoute=_,this.location.insert(u.hostView)}deactivate(){if(this.activated){const u=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(u)}}activateWith(u,_){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=u;const $=(_=_||this.resolver).resolveComponentFactory(u._futureSnapshot.routeConfig.component),X=this.parentContexts.getOrCreateContext(this.name).children,ie=new Ks(u,X,this.location.injector);this.activated=this.location.createComponent($,this.location.length,ie),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return L.\u0275fac=function(u){return new(u||L)(Y.Y36(Eo),Y.Y36(Y.s_b),Y.Y36(Y._Vd),Y.$8M("name"),Y.Y36(Y.sBO))},L.\u0275dir=Y.lG2({type:L,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),L})();class Ks{constructor(C,u,_){this.route=C,this.childContexts=u,this.parent=_}get(C,u){return C===Os?this.route:C===Eo?this.childContexts:this.parent.get(C,u)}}class rc{}class ic{preload(C,u){return(0,_e.of)(null)}}let eu=(()=>{class L{constructor(u,_,T,N,$){this.router=u,this.injector=N,this.preloadingStrategy=$,this.loader=new Ca(_,T,Ae=>u.triggerEvent(new Ps(Ae)),Ae=>u.triggerEvent(new Mi(Ae)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ki.h)(u=>u instanceof Ni),tn(()=>this.preload())).subscribe(()=>{})}preload(){const u=this.injector.get(Y.h0i);return this.processRoutes(u,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(u,_){const T=[];for(const N of _)if(N.loadChildren&&!N.canLoad&&N._loadedConfig){const $=N._loadedConfig;T.push(this.processRoutes($.module,$.routes))}else N.loadChildren&&!N.canLoad?T.push(this.preloadConfig(u,N)):N.children&&T.push(this.processRoutes(u,N.children));return(0,ne.D)(T).pipe((0,Me.J)(),(0,gt.U)(N=>{}))}preloadConfig(u,_){return this.preloadingStrategy.preload(_,()=>(_._loadedConfig?(0,_e.of)(_._loadedConfig):this.loader.load(u.injector,_)).pipe((0,Fn.zg)(N=>(_._loadedConfig=N,this.processRoutes(N.module,N.routes)))))}}return L.\u0275fac=function(u){return new(u||L)(Y.LFG(wi),Y.LFG(Y.v3s),Y.LFG(Y.Sil),Y.LFG(Y.zs3),Y.LFG(rc))},L.\u0275prov=Y.Yz7({token:L,factory:L.\u0275fac}),L})(),bl=(()=>{class L{constructor(u,_,T={}){this.router=u,this.viewportScroller=_,this.options=T,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},T.scrollPositionRestoration=T.scrollPositionRestoration||"disabled",T.anchorScrolling=T.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(u=>{u instanceof Vs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=u.navigationTrigger,this.restoredId=u.restoredState?u.restoredState.navigationId:0):u instanceof Ni&&(this.lastId=u.id,this.scheduleScrollEvent(u,this.router.parseUrl(u.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(u=>{u instanceof Io&&(u.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(u.position):u.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(u.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(u,_){this.router.triggerEvent(new Io(u,"popstate"===this.lastSource?this.store[this.restoredId]:null,_))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return L.\u0275fac=function(u){return new(u||L)(Y.LFG(wi),Y.LFG(G.EM),Y.LFG(void 0))},L.\u0275prov=Y.Yz7({token:L,factory:L.\u0275fac}),L})();const xl=new Y.OlP("ROUTER_CONFIGURATION"),kl=new Y.OlP("ROUTER_FORROOT_GUARD"),Da=[G.Ye,{provide:Nr,useClass:li},{provide:wi,useFactory:function(L,C,u,_,T,N,$,X={},ie,Ae){const $e=new wi(null,L,C,u,_,T,N,Ba($));return ie&&($e.urlHandlingStrategy=ie),Ae&&($e.routeReuseStrategy=Ae),function(L,C){L.errorHandler&&(C.errorHandler=L.errorHandler),L.malformedUriErrorHandler&&(C.malformedUriErrorHandler=L.malformedUriErrorHandler),L.onSameUrlNavigation&&(C.onSameUrlNavigation=L.onSameUrlNavigation),L.paramsInheritanceStrategy&&(C.paramsInheritanceStrategy=L.paramsInheritanceStrategy),L.relativeLinkResolution&&(C.relativeLinkResolution=L.relativeLinkResolution),L.urlUpdateStrategy&&(C.urlUpdateStrategy=L.urlUpdateStrategy)}(X,$e),X.enableTracing&&$e.events.subscribe(ot=>{var pt,Xt;null===(pt=console.group)||void 0===pt||pt.call(console,`Router Event: ${ot.constructor.name}`),console.log(ot.toString()),console.log(ot),null===(Xt=console.groupEnd)||void 0===Xt||Xt.call(console)}),$e},deps:[Nr,Eo,G.Ye,Y.zs3,Y.v3s,Y.Sil,Un,xl,[class{},new Y.FiY],[class{},new Y.FiY]]},Eo,{provide:Os,useFactory:function(L){return L.routerState.root},deps:[wi]},{provide:Y.v3s,useClass:Y.EAV},eu,ic,class{preload(C,u){return u().pipe(Tn(()=>(0,_e.of)(null)))}},{provide:xl,useValue:{enableTracing:!1}}];function Ju(){return new Y.PXZ("Router",wi)}let wl=(()=>{class L{constructor(u,_){}static forRoot(u,_){return{ngModule:L,providers:[Da,fl(u),{provide:kl,useFactory:nh,deps:[[wi,new Y.FiY,new Y.tp0]]},{provide:xl,useValue:_||{}},{provide:G.S$,useFactory:th,deps:[G.lw,[new Y.tBr(G.mr),new Y.FiY],xl]},{provide:bl,useFactory:eh,deps:[wi,G.EM,xl]},{provide:rc,useExisting:_&&_.preloadingStrategy?_.preloadingStrategy:ic},{provide:Y.PXZ,multi:!0,useFactory:Ju},[pi,{provide:Y.ip1,multi:!0,useFactory:Ra,deps:[pi]},{provide:mc,useFactory:Pa,deps:[pi]},{provide:Y.tb,multi:!0,useExisting:mc}]]}}static forChild(u){return{ngModule:L,providers:[fl(u)]}}}return L.\u0275fac=function(u){return new(u||L)(Y.LFG(kl,8),Y.LFG(wi,8))},L.\u0275mod=Y.oAB({type:L}),L.\u0275inj=Y.cJS({}),L})();function eh(L,C,u){return u.scrollOffset&&C.setOffset(u.scrollOffset),new bl(L,C,u)}function th(L,C,u={}){return u.useHash?new G.Do(L,C):new G.b0(L,C)}function nh(L){return"guarded"}function fl(L){return[{provide:Y.deG,multi:!0,useValue:L},{provide:Un,multi:!0,useValue:L}]}let pi=(()=>{class L{constructor(u){this.injector=u,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new We.xQ}appInitializer(){return this.injector.get(G.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let _=null;const T=new Promise(X=>_=X),N=this.injector.get(wi),$=this.injector.get(xl);return"disabled"===$.initialNavigation?(N.setUpLocationChangeListener(),_(!0)):"enabled"===$.initialNavigation||"enabledBlocking"===$.initialNavigation?(N.hooks.afterPreactivation=()=>this.initNavigation?(0,_e.of)(null):(this.initNavigation=!0,_(!0),this.resultOfPreactivationDone),N.initialNavigation()):_(!0),T})}bootstrapListener(u){const _=this.injector.get(xl),T=this.injector.get(eu),N=this.injector.get(bl),$=this.injector.get(wi),X=this.injector.get(Y.z2F);u===X.components[0]&&(("enabledNonBlocking"===_.initialNavigation||void 0===_.initialNavigation)&&$.initialNavigation(),T.setUpPreloading(),N.init(),$.resetRootComponentType(X.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return L.\u0275fac=function(u){return new(u||L)(Y.LFG(Y.zs3))},L.\u0275prov=Y.Yz7({token:L,factory:L.\u0275fac}),L})();function Ra(L){return L.appInitializer.bind(L)}function Pa(L){return L.bootstrapListener.bind(L)}const mc=new Y.OlP("Router Initializer")},4553:jt=>{function mt(ae,G,Y){var Be,Je,_e,Me,Re;function Ne(){var ne=Date.now()-Me;ne<G&&ne>=0?Be=setTimeout(Ne,G-ne):(Be=null,Y||(Re=ae.apply(_e,Je),_e=Je=null))}null==G&&(G=100);var ze=function(){_e=this,Je=arguments,Me=Date.now();var ne=Y&&!Be;return Be||(Be=setTimeout(Ne,G)),ne&&(Re=ae.apply(_e,Je),_e=Je=null),Re};return ze.clear=function(){Be&&(clearTimeout(Be),Be=null)},ze.flush=function(){Be&&(Re=ae.apply(_e,Je),_e=Je=null,clearTimeout(Be),Be=null)},ze}mt.debounce=mt,jt.exports=mt},7691:jt=>{jt.exports=function(Y){!function(G){if(!G)throw new Error("Eventify cannot use falsy object as events subject");for(var Y=["on","fire","off"],Be=0;Be<Y.length;++Be)if(G.hasOwnProperty(Y[Be]))throw new Error("Subject cannot be eventified, since it already has property '"+Y[Be]+"'")}(Y);var Be=function(G){var Y=Object.create(null);return{on:function(Be,Je,_e){if("function"!=typeof Je)throw new Error("callback is expected to be a function");var Me=Y[Be];return Me||(Me=Y[Be]=[]),Me.push({callback:Je,ctx:_e}),G},off:function(Be,Je){if(void 0===Be)return Y=Object.create(null),G;if(Y[Be])if("function"!=typeof Je)delete Y[Be];else for(var Re=Y[Be],Ne=0;Ne<Re.length;++Ne)Re[Ne].callback===Je&&Re.splice(Ne,1);return G},fire:function(Be){var _e,Je=Y[Be];if(!Je)return G;arguments.length>1&&(_e=Array.prototype.splice.call(arguments,1));for(var Me=0;Me<Je.length;++Me){var Re=Je[Me];Re.callback.apply(Re.ctx,_e)}return G}}}(Y);return Y.on=Be.on,Y.off=Be.off,Y.fire=Be.fire,Y}},5038:(jt,mt,ae)=>{jt.exports=function(Je,_e){if(!Je)throw new Error("Graph structure cannot be undefined");var Re=(_e&&_e.createSimulator||ae(2637))(_e);if(Array.isArray(_e))throw new Error("Physics settings is expected to be an object");var Ne=Je.version>19?function(en){var vn=Je.getLinks(en);return vn?1+vn.size/3:1}:function(en){var vn=Je.getLinks(en);return vn?1+vn.length/3:1};_e&&"function"==typeof _e.nodeMass&&(Ne=_e.nodeMass);var ze=new Map,ne={},te=0,xe=Re.settings.springTransform||Be;te=0,Je.forEachNode(function(en){fn(en.id),te+=1}),Je.forEachLink(ut),Je.on("changed",dt);var Ue=!1,He={step:function(){if(0===te)return tt(!0),!0;var en=Re.step();He.lastMove=en,He.fire("step");var Zn=en/te<=.01;return tt(Zn),Zn},getNodePosition:function(en){return Fn(en).pos},setNodePosition:function(en){var vn=Fn(en);vn.setPosition.apply(vn,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(en){var vn=ne[en];if(vn)return{from:vn.from.pos,to:vn.to.pos}},getGraphRect:function(){return Re.getBBox()},forEachBody:We,pinNode:function(en,vn){Fn(en.id).isPinned=!!vn},isNodePinned:function(en){return Fn(en.id).isPinned},dispose:function(){Je.off("changed",dt),He.fire("disposed")},getBody:function(en){return ze.get(en)},getSpring:function(en,vn){var Zn;if(void 0===vn)Zn="object"!=typeof en?en:en.id;else{var gr=Je.hasLink(en,vn);if(!gr)return;Zn=gr.id}return ne[Zn]},getForceVectorLength:function(){var en=0,vn=0;return We(function(Zn){en+=Math.abs(Zn.force.x),vn+=Math.abs(Zn.force.y)}),Math.sqrt(en*en+vn*vn)},simulator:Re,graph:Je,lastMove:0};return G(He),He;function tt(en){Ue!==en&&(Ue=en,function(en){He.fire("stable",en)}(en))}function We(en){ze.forEach(en)}function dt(en){for(var vn=0;vn<en.length;++vn){var Zn=en[vn];"add"===Zn.changeType?(Zn.node&&fn(Zn.node.id),Zn.link&&ut(Zn.link)):"remove"===Zn.changeType&&(Zn.node&&Gn(Zn.node),Zn.link&&Wt(Zn.link))}te=Je.getNodesCount()}function fn(en){var vn=ze.get(en);if(!vn){var Zn=Je.getNode(en);if(!Zn)throw new Error("initBody() was called with unknown node id");var gr=Zn.position;if(!gr){var ss=function(en){var vn=[];if(!en.links)return vn;for(var Zn=Math.min(en.links.length,2),gr=0;gr<Zn;++gr){var ss=en.links[gr],Ai=ze.get(ss.fromId!==en.id?ss.fromId:ss.toId);Ai&&Ai.pos&&vn.push(Ai)}return vn}(Zn);gr=Re.getBestNewBodyPosition(ss)}(vn=Re.addBodyAt(gr)).id=en,ze.set(en,vn),br(en),function(en){return en&&(en.isPinned||en.data&&en.data.isPinned)}(Zn)&&(vn.isPinned=!0)}}function Gn(en){var vn=en.id,Zn=ze.get(vn);Zn&&(ze.delete(vn),Re.removeBody(Zn))}function ut(en){br(en.fromId),br(en.toId);var vn=ze.get(en.fromId),Zn=ze.get(en.toId),gr=Re.addSpring(vn,Zn,en.length);xe(en,gr),ne[en.id]=gr}function Wt(en){var vn=ne[en.id];if(vn){var Zn=Je.getNode(en.fromId),gr=Je.getNode(en.toId);Zn&&br(Zn.id),gr&&br(gr.id),delete ne[en.id],Re.removeSpring(vn)}}function br(en){var vn=ze.get(en);if(vn.mass=Ne(en),Number.isNaN(vn.mass))throw new Error("Node mass should be a number")}function Fn(en){var vn=ze.get(en);return vn||(fn(en),vn=ze.get(en)),vn}},jt.exports.simulator=ae(2637);var G=ae(7691);function Be(){}},829:(jt,mt,ae)=>{const G=ae(1497);jt.exports=function(Be){return function(_e,Me){let Ne=Me&&void 0!==Me.join?Me.join:"\n",ze=Array((Me&&Me.indent||0)+1).join(" "),ne=[];for(let te=0;te<Be;++te){let xe=G(te);ne.push((0===te?"":ze)+_e.replace(/{var}/g,xe))}return ne.join(Ne)}}},9243:(jt,mt,ae)=>{jt.exports=function(Je){let _e=Be(Je);return new Function("bodies","settings","random",_e)},jt.exports.generateFunctionBody=Be;const G=ae(829);function Be(Je){let _e=G(Je);return`\n  var boundingBox = {\n    ${_e("min_{var}: 0, max_{var}: 0,",{indent:4})}\n  };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset: resetBoundingBox,\n\n    getBestNewPosition: function (neighbors) {\n      var ${_e("base_{var} = 0",{join:", "})};\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          let neighborPos = neighbors[i].pos;\n          ${_e("base_{var} += neighborPos.{var};",{indent:10})}\n        }\n\n        ${_e("base_{var} /= neighbors.length;",{indent:8})}\n      } else {\n        ${_e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}\n      }\n\n      var springLength = settings.springLength;\n      return {\n        ${_e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) return; // No bodies - no borders.\n\n    ${_e("var max_{var} = -Infinity;",{indent:4})}\n    ${_e("var min_{var} = Infinity;",{indent:4})}\n\n    while(i--) {\n      // this is O(n), it could be done faster with quadtree, if we check the root node bounds\n      var bodyPos = bodies[i].pos;\n      ${_e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}\n      ${_e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}\n    }\n\n    ${_e("boundingBox.min_{var} = min_{var};",{indent:4})}\n    ${_e("boundingBox.max_{var} = max_{var};",{indent:4})}\n  }\n\n  function resetBoundingBox() {\n    ${_e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}\n  }\n`}},9237:(jt,mt,ae)=>{const G=ae(829);function Be(Me,Re){return`\n${_e(Me,Re)}\n${Je(Me)}\nreturn {Body: Body, Vector: Vector};\n`}function Je(Me){let Re=G(Me),Ne=Re("{var}",{join:", "});return`\nfunction Body(${Ne}) {\n  this.isPinned = false;\n  this.pos = new Vector(${Ne});\n  this.force = new Vector();\n  this.velocity = new Vector();\n  this.mass = 1;\n\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.reset = function() {\n  this.force.reset();\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.setPosition = function (${Ne}) {\n  ${Re("this.pos.{var} = {var} || 0;",{indent:2})}\n};`}function _e(Me,Re){let Ne=G(Me),ze="";return Re&&(ze=`${Ne("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});")}`),`function Vector(${Ne("{var}",{join:", "})}) {\n  ${ze}\n    if (typeof arguments[0] === 'object') {\n      // could be another vector\n      let v = arguments[0];\n      ${Ne('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}\n      ${Ne("this.{var} = v.{var};",{indent:4})}\n    } else {\n      ${Ne('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}\n    }\n  }\n  \n  Vector.prototype.reset = function () {\n    ${Ne("this.{var} = ",{join:""})}0;\n  };`}jt.exports=function(Me,Re){let Ne=Be(Me,Re),{Body:ze}=new Function(Ne)();return ze},jt.exports.generateCreateBodyFunctionBody=Be,jt.exports.getVectorCode=_e,jt.exports.getBodyCode=Je},8803:(jt,mt,ae)=>{const G=ae(829);function Be(Je){return`\n  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');\n\n  return {\n    update: function(body) {\n      ${G(Je)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}\n    }\n  };\n`}jt.exports=function(Je){let _e=Be(Je);return new Function("options",_e)},jt.exports.generateCreateDragForceFunctionBody=Be},1914:(jt,mt,ae)=>{const G=ae(829);function Be(Je){let _e=G(Je);return`\n  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');\n  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');\n\n  return {\n    /**\n     * Updates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from;\n      var body2 = spring.to;\n      var length = spring.length < 0 ? options.springLength : spring.length;\n      ${_e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}\n      var r = Math.sqrt(${_e("d{var} * d{var}",{join:" + "})});\n\n      if (r === 0) {\n        ${_e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}\n        r = Math.sqrt(${_e("d{var} * d{var}",{join:" + "})});\n      }\n\n      var d = r - length;\n      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;\n\n      ${_e("body1.force.{var} += coefficient * d{var}",{indent:6})};\n      body1.springCount += 1;\n      body1.springLength += r;\n\n      ${_e("body2.force.{var} -= coefficient * d{var}",{indent:6})};\n      body2.springCount += 1;\n      body2.springLength += r;\n    }\n  };\n`}jt.exports=function(Je){let _e=Be(Je);return new Function("options","random",_e)},jt.exports.generateCreateSpringForceFunctionBody=Be},2225:(jt,mt,ae)=>{const G=ae(829);function Be(Je){let _e=G(Je);return`\n  var length = bodies.length;\n  if (length === 0) return 0;\n\n  ${_e("var d{var} = 0, t{var} = 0;",{indent:2})}\n\n  for (var i = 0; i < length; ++i) {\n    var body = bodies[i];\n    if (body.isPinned) continue;\n\n    if (adaptiveTimeStepWeight && body.springCount) {\n      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);\n    }\n\n    var coeff = timeStep / body.mass;\n\n    ${_e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}\n    ${_e("var v{var} = body.velocity.{var};",{indent:4})}\n    var v = Math.sqrt(${_e("v{var} * v{var}",{join:" + "})});\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      ${_e("body.velocity.{var} = v{var} / v;",{indent:6})}\n    }\n\n    ${_e("d{var} = timeStep * body.velocity.{var};",{indent:4})}\n\n    ${_e("body.pos.{var} += d{var};",{indent:4})}\n\n    ${_e("t{var} += Math.abs(d{var});",{indent:4})}\n  }\n\n  return (${_e("t{var} * t{var}",{join:" + "})})/length;\n`}jt.exports=function(Je){let _e=Be(Je);return new Function("bodies","timeStep","adaptiveTimeStepWeight",_e)},jt.exports.generateIntegratorFunctionBody=Be},2389:(jt,mt,ae)=>{const G=ae(829),Y=ae(1497);function Je(ne){let te=G(ne),xe=Math.pow(2,ne);return`\n\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n\n${Ne(ne)}\n${_e(ne)}\n${Re(ne)}\n${Me(ne)}\n\nfunction createQuadTree(options, random) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  var gravity = options.gravity;\n  var updateQueue = [];\n  var insertStack = new InsertStack();\n  var theta = options.theta;\n\n  var nodesCache = [];\n  var currentInCache = 0;\n  var root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if it is present\n     */\n    getRoot: function() {\n      return root;\n    },\n\n    updateBodyForce: update,\n\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n${function(gt){let Jt=[];for(let Yt=0;Yt<xe;++Yt)Jt.push(`      node.quad${Yt} = null;`);return Jt.join("\n")}()}\n      node.body = null;\n      node.mass = ${te("node.mass_{var} = ",{join:""})}0;\n      ${te("node.min_{var} = node.max_{var} = ",{join:""})}0;\n    } else {\n      node = new QuadNode();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue;\n    var v;\n    ${te("var d{var};",{indent:4})}\n    var r; \n    ${te("var f{var} = 0;",{indent:4})}\n    var queueLength = 1;\n    var shiftIdx = 0;\n    var pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx];\n      var body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        ${te("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${te("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          ${te("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${te("d{var} * d{var}",{join:" + "})});\n        }\n\n        // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        ${te("f{var} += v * d{var};",{indent:8})}\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        ${te("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${te("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          ${te("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${te("d{var} * d{var}",{join:" + "})});\n        }\n        // If s / r < \u03b8, treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.max_${Y(0)} - node.min_${Y(0)}) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was made into square during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          ${te("f{var} += v * d{var};",{indent:10})}\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n${function(){let gt=Array(11).join(" "),Jt=[];for(let Yt=0;Yt<xe;++Yt)Jt.push(gt+`if (node.quad${Yt}) {`),Jt.push(gt+`  queue[pushIdx] = node.quad${Yt};`),Jt.push(gt+"  queueLength += 1;"),Jt.push(gt+"  pushIdx += 1;"),Jt.push(gt+"}");return Jt.join("\n")}()}\n        }\n      }\n    }\n\n    ${te("sourceBody.force.{var} += f{var};",{indent:4})}\n  }\n\n  function insertBodies(bodies) {\n    ${te("var {var}min = Number.MAX_VALUE;",{indent:4})}\n    ${te("var {var}max = Number.MIN_VALUE;",{indent:4})}\n    var i = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    while (i--) {\n      var pos = bodies[i].pos;\n      ${te("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}\n      ${te("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}\n    }\n\n    // Makes the bounds square.\n    var maxSideLength = -Infinity;\n    ${te("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}\n\n    currentInCache = 0;\n    root = newNode();\n    ${te("root.min_{var} = {var}min;",{indent:4})}\n    ${te("root.max_{var} = {var}min + maxSideLength;",{indent:4})}\n\n    i = bodies.length - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop();\n      var node = stackItem.node;\n      var body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        ${te("var {var} = body.pos.{var};",{indent:8})}\n        node.mass += body.mass;\n        ${te("node.mass_{var} += body.mass * {var};",{indent:8})}\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0; // Assume we are in the 0's quad.\n        ${te("var min_{var} = node.min_{var};",{indent:8})}\n        ${te("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}\n\n${function(gt){let Jt=[],Yt=Array(9).join(" ");for(let qt=0;qt<ne;++qt)Jt.push(Yt+`if (${Y(qt)} > max_${Y(qt)}) {`),Jt.push(Yt+`  quadIdx = quadIdx + ${Math.pow(2,qt)};`),Jt.push(Yt+`  min_${Y(qt)} = max_${Y(qt)};`),Jt.push(Yt+`  max_${Y(qt)} = node.max_${Y(qt)};`),Jt.push(Yt+"}");return Jt.join("\n")}()}\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          ${te("child.min_{var} = min_{var};",{indent:10})}\n          ${te("child.max_{var} = max_{var};",{indent:10})}\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            ${te("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}\n\n            ${te("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n}\nreturn createQuadTree;\n\n`}function _e(ne){let te=G(ne);return`\n  function isSamePosition(point1, point2) {\n    ${te("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}\n  \n    return ${te("d{var} < 1e-8",{join:" && "})};\n  }  \n`}function Me(ne){var te=Math.pow(2,ne);return`\nfunction setChild(node, idx, child) {\n  ${function(){let Ue=[];for(let He=0;He<te;++He)Ue.push(`${0===He?"  ":"  else "}if (idx === ${He}) node.quad${He} = child;`);return Ue.join("\n")}()}\n}`}function Re(ne){return`function getChild(node, idx) {\n${function(){let xe=[],Ue=Math.pow(2,ne);for(let He=0;He<Ue;++He)xe.push(`  if (idx === ${He}) return node.quad${He};`);return xe.join("\n")}()}\n  return null;\n}`}function Ne(ne){let te=G(ne),xe=Math.pow(2,ne);return`\nfunction QuadNode() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain bodies:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n${function(tt){let We=[];for(let gt=0;gt<xe;++gt)We.push(`  this.quad${gt} = null;`);return We.join("\n")}()}\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  ${te("this.mass_{var} = 0;",{indent:2})}\n\n  // bounding box coordinates\n  ${te("this.min_{var} = 0;",{indent:2})}\n  ${te("this.max_{var} = 0;",{indent:2})}\n}\n`}function ze(){return"\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n"}jt.exports=function(ne){let te=Je(ne);return new Function(te)()},jt.exports.generateQuadTreeFunctionBody=Je,jt.exports.getInsertStackCode=ze,jt.exports.getQuadNodeCode=Ne,jt.exports.isSamePosition=_e,jt.exports.getChildBodyCode=Re,jt.exports.setChildBodyCode=Me},1497:jt=>{jt.exports=function(ae){return 0===ae?"x":1===ae?"y":2===ae?"z":"c"+(ae+1)}},2637:(jt,mt,ae)=>{jt.exports=function(te){var xe=ae(8018),Ue=ae(5513),He=ae(7691);if(te){if(void 0!==te.springCoeff)throw new Error("springCoeff was renamed to springCoefficient");if(void 0!==te.dragCoeff)throw new Error("dragCoeff was renamed to dragCoefficient")}te=Ue(te,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var tt=Re[te.dimensions];if(!tt){var We=te.dimensions;tt={Body:G(We,te.debug),createQuadTree:Y(We),createBounds:Be(We),createDragForce:Je(We),createSpringForce:_e(We),integrate:Me(We)},Re[We]=tt}var gt=tt.Body,Jt=tt.createQuadTree,Yt=tt.createBounds,qt=tt.createDragForce,Ot=tt.createSpringForce,dt=tt.integrate,fn=ae(100).random(42),Gn=[],ut=[],Wt=Jt(te,fn),Tn=Yt(Gn,te,fn),br=Ot(te,fn),qn=qt(te),tn=[],ki=new Map,en=0;gr("nbody",function(){if(0!==Gn.length){Wt.insertBodies(Gn);for(var wn=Gn.length;wn--;){var kt=Gn[wn];kt.isPinned||(kt.reset(),Wt.updateBodyForce(kt),qn.update(kt))}}}),gr("spring",function(){for(var wn=ut.length;wn--;)br.update(ut[wn])});var vn={bodies:Gn,quadTree:Wt,springs:ut,settings:te,addForce:gr,removeForce:function(wn){var kt=tn.indexOf(ki.get(wn));kt<0||(tn.splice(kt,1),ki.delete(wn))},getForces:function(){return ki},step:function(){for(var wn=0;wn<tn.length;++wn)tn[wn](en);var kt=dt(Gn,te.timeStep,te.adaptiveTimeStepWeight);return en+=1,kt},addBody:function(wn){if(!wn)throw new Error("Body is required");return Gn.push(wn),wn},addBodyAt:function(wn){if(!wn)throw new Error("Body position is required");var kt=(wn=>new gt(wn))(wn);return Gn.push(kt),kt},removeBody:function(wn){if(wn){var kt=Gn.indexOf(wn);if(!(kt<0))return Gn.splice(kt,1),0===Gn.length&&Tn.reset(),!0}},addSpring:function(wn,kt,mn,jn){if(!wn||!kt)throw new Error("Cannot add null spring to force simulator");"number"!=typeof mn&&(mn=-1);var ln=new xe(wn,kt,mn,jn>=0?jn:-1);return ut.push(ln),ln},getTotalMovement:function(){return 0},removeSpring:function(wn){if(wn){var kt=ut.indexOf(wn);if(kt>-1)return ut.splice(kt,1),!0}},getBestNewBodyPosition:function(wn){return Tn.getBestNewPosition(wn)},getBBox:Zn,getBoundingBox:Zn,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(wn){return void 0!==wn?(te.gravity=wn,Wt.options({gravity:wn}),this):te.gravity},theta:function(wn){return void 0!==wn?(te.theta=wn,Wt.options({theta:wn}),this):te.theta},random:fn};return function(te,xe){for(var Ue in te)ne(te,xe,Ue)}(te,vn),He(vn),vn;function Zn(){return Tn.update(),Tn.box}function gr(wn,kt){if(ki.has(wn))throw new Error("Force "+wn+" is already added");ki.set(wn,kt),tn.push(kt)}};var G=ae(9237),Y=ae(2389),Be=ae(9243),Je=ae(8803),_e=ae(1914),Me=ae(2225),Re={};function ne(te,xe,Ue){if(te.hasOwnProperty(Ue)&&"function"!=typeof xe[Ue]){var He=Number.isFinite(te[Ue]);xe[Ue]=He?function(tt){if(void 0!==tt){if(!Number.isFinite(tt))throw new Error("Value of "+Ue+" should be a valid number.");return te[Ue]=tt,xe}return te[Ue]}:function(tt){return void 0!==tt?(te[Ue]=tt,xe):te[Ue]}}}},8018:jt=>{jt.exports=function(ae,G,Y,Be){this.from=ae,this.to=G,this.length=Y,this.coefficient=Be}},5401:(jt,mt,ae)=>{jt.exports=function(Ne){if("uniqueLinkId"in(Ne=Ne||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),Ne.multigraph=Ne.uniqueLinkId),void 0===Ne.multigraph&&(Ne.multigraph=!1),"function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var kt,ze=new Map,ne=[],te={},xe=0,Ue=Ne.multigraph?function(kt,mn,jn){var ln=Re(kt,mn),ai=te.hasOwnProperty(ln);if(ai||ki(kt,mn)){ai||(te[ln]=0);var wr="@"+ ++te[ln];ln=Re(kt+wr,mn+wr)}return new Me(kt,mn,jn,ln)}:function(kt,mn,jn){return new Me(kt,mn,jn,Re(kt,mn))},He=[],tt=Ai,We=Ai,gt=Ai,Jt=Ai,Yt={addNode:Mn,addLink:function(kt,mn,jn){gt();var ln=fn(kt)||Mn(kt),ai=fn(mn)||Mn(mn),wr=Ue(kt,mn,jn);return ne.push(wr),_e(ln,wr),kt!==mn&&_e(ai,wr),tt(wr,"add"),Jt(),wr},removeLink:tn,removeNode:Gn,getNode:fn,getNodeCount:br,getLinkCount:qn,getLinksCount:qn,getNodesCount:br,getLinks:function(kt){var mn=fn(kt);return mn?mn.links:null},forEachNode:wn,forEachLinkedNode:function(kt,mn,jn){var ln=fn(kt);if(ln&&ln.links&&"function"==typeof mn)return jn?function(kt,mn,jn){for(var ai=0;ai<kt.length;++ai){var wr=kt[ai];if(wr.fromId===mn&&jn(ze.get(wr.toId),wr))return!0}}(ln.links,kt,mn):function(kt,mn,jn){for(var ai=0;ai<kt.length;++ai){var wr=kt[ai];if(jn(ze.get(wr.fromId===mn?wr.toId:wr.fromId),wr))return!0}}(ln.links,kt,mn)},forEachLink:function(kt){var mn,jn;if("function"==typeof kt)for(mn=0,jn=ne.length;mn<jn;++mn)kt(ne[mn])},beginUpdate:gt,endUpdate:Jt,clear:function(){gt(),wn(function(kt){Gn(kt.id)}),Jt()},hasLink:ki,hasNode:fn,getLink:ki};return G(Yt),kt=Yt.on,Yt.on=function(){return Yt.beginUpdate=gt=ca,Yt.endUpdate=Jt=Us,tt=Ot,We=dt,Yt.on=kt,kt.apply(Yt,arguments)},Yt;function Ot(kt,mn){He.push({link:kt,changeType:mn})}function dt(kt,mn){He.push({node:kt,changeType:mn})}function Mn(kt,mn){if(void 0===kt)throw new Error("Invalid node identifier");gt();var jn=fn(kt);return jn?(jn.data=mn,We(jn,"update")):(jn=new Je(kt,mn),We(jn,"add")),ze.set(kt,jn),Jt(),jn}function fn(kt){return ze.get(kt)}function Gn(kt){var mn=fn(kt);if(!mn)return!1;gt();var jn=mn.links;if(jn){mn.links=null;for(var ln=0;ln<jn.length;++ln)tn(jn[ln])}return ze.delete(kt),We(mn,"remove"),Jt(),!0}function br(){return ze.size}function qn(){return ne.length}function tn(kt){if(!kt)return!1;var mn=Be(kt,ne);if(mn<0)return!1;gt(),ne.splice(mn,1);var jn=fn(kt.fromId),ln=fn(kt.toId);return jn&&(mn=Be(kt,jn.links))>=0&&jn.links.splice(mn,1),ln&&(mn=Be(kt,ln.links))>=0&&ln.links.splice(mn,1),tt(kt,"remove"),Jt(),!0}function ki(kt,mn){var ln,jn=fn(kt);if(!jn||!jn.links)return null;for(ln=0;ln<jn.links.length;++ln){var ai=jn.links[ln];if(ai.fromId===kt&&ai.toId===mn)return ai}return null}function Ai(){}function ca(){xe+=1}function Us(){0==(xe-=1)&&He.length>0&&(Yt.fire("changed",He),He.length=0)}function wn(kt){if("function"!=typeof kt)throw new Error("Function is expected to iterate over graph nodes. You passed "+kt);for(var mn=ze.values(),jn=mn.next();!jn.done;){if(kt(jn.value))return!0;jn=mn.next()}}};var G=ae(7691);function Be(Ne,ze){if(!ze)return-1;if(ze.indexOf)return ze.indexOf(Ne);var te,ne=ze.length;for(te=0;te<ne;te+=1)if(ze[te]===Ne)return te;return-1}function Je(Ne,ze){this.id=Ne,this.links=null,this.data=ze}function _e(Ne,ze){Ne.links?Ne.links.push(ze):Ne.links=[ze]}function Me(Ne,ze,ne,te){this.fromId=Ne,this.toId=ze,this.data=ne,this.id=te}function Re(Ne,ze){return Ne.toString()+"\u{1f449} "+ze.toString()}},5513:jt=>{jt.exports=function mt(ae,G){var Y;if(ae||(ae={}),G)for(Y in G)if(G.hasOwnProperty(Y)){var Be=ae.hasOwnProperty(Y),Je=typeof G[Y];Be&&typeof ae[Y]===Je?"object"===Je&&(ae[Y]=mt(ae[Y],G[Y])):ae[Y]=G[Y]}return ae}},100:jt=>{function mt(Re){return new ae("number"==typeof Re?Re:+new Date)}function ae(Re){this.seed=Re}function Be(Re){return Math.sqrt(2*Math.PI/Re)*Math.pow(1/Math.E*(Re+1/(12*Re-1/(10*Re))),Re)}function Je(){var Re=this.seed;return this.seed=Re=4294967295&(3042594569^(Re=4251993797+(Re=4294967295&(3550635116+(Re=374761393+(Re=4294967295&(3345072700^(Re=Re+2127912214+(Re<<12)&4294967295)^Re>>>19))+(Re<<5)&4294967295)^Re<<9))+(Re<<3)&4294967295)^Re>>>16),(268435455&Re)/268435456}jt.exports=mt,jt.exports.random=mt,jt.exports.randomIterator=function(Re,Ne){var ze=Ne||mt();if("function"!=typeof ze.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(xe){var Ue,He,tt;for(Ue=Re.length-1;Ue>0;--Ue)He=ze.next(Ue+1),tt=Re[He],Re[He]=Re[Ue],Re[Ue]=tt,xe(tt);Re.length&&xe(Re[0])},shuffle:function(){var xe,Ue,He;for(xe=Re.length-1;xe>0;--xe)Ue=ze.next(xe+1),He=Re[Ue],Re[Ue]=Re[xe],Re[xe]=He;return Re}}},ae.prototype.next=function(Re){return Math.floor(this.nextDouble()*Re)},ae.prototype.nextDouble=Je,ae.prototype.uniform=Je,ae.prototype.gaussian=function(){var Re,Ne,ze;do{Re=(Ne=2*this.nextDouble()-1)*Ne+(ze=2*this.nextDouble()-1)*ze}while(Re>=1||0===Re);return Ne*Math.sqrt(-2*Math.log(Re)/Re)},ae.prototype.levy=function(){var Ne=Math.pow(Be(2.5)*Math.sin(1.5*Math.PI/2)/(1.5*Be(1.25)*Math.pow(2,.25)),1/1.5);return this.gaussian()*Ne/Math.pow(Math.abs(this.gaussian()),1/1.5)}},6215:(jt,mt,ae)=>{"use strict";ae.d(mt,{X:()=>Be});var G=ae(9765),Y=ae(7971);class Be extends G.xQ{constructor(_e){super(),this._value=_e}get value(){return this.getValue()}_subscribe(_e){const Me=super._subscribe(_e);return Me&&!Me.closed&&_e.next(this._value),Me}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Y.N;return this._value}next(_e){super.next(this._value=_e)}}},7574:(jt,mt,ae)=>{"use strict";ae.d(mt,{y:()=>te});var G=ae(7393),Be=ae(9181),Je=ae(6490),Me=ae(6554),Re=ae(4487);var ne=ae(2494);let te=(()=>{class Ue{constructor(tt){this._isScalar=!1,tt&&(this._subscribe=tt)}lift(tt){const We=new Ue;return We.source=this,We.operator=tt,We}subscribe(tt,We,gt){const{operator:Jt}=this,Yt=function(Ue,He,tt){if(Ue){if(Ue instanceof G.L)return Ue;if(Ue[Be.b])return Ue[Be.b]()}return Ue||He||tt?new G.L(Ue,He,tt):new G.L(Je.c)}(tt,We,gt);if(Yt.add(Jt?Jt.call(Yt,this.source):this.source||ne.v.useDeprecatedSynchronousErrorHandling&&!Yt.syncErrorThrowable?this._subscribe(Yt):this._trySubscribe(Yt)),ne.v.useDeprecatedSynchronousErrorHandling&&Yt.syncErrorThrowable&&(Yt.syncErrorThrowable=!1,Yt.syncErrorThrown))throw Yt.syncErrorValue;return Yt}_trySubscribe(tt){try{return this._subscribe(tt)}catch(We){ne.v.useDeprecatedSynchronousErrorHandling&&(tt.syncErrorThrown=!0,tt.syncErrorValue=We),function(Ue){for(;Ue;){const{closed:He,destination:tt,isStopped:We}=Ue;if(He||We)return!1;Ue=tt&&tt instanceof G.L?tt:null}return!0}(tt)?tt.error(We):console.warn(We)}}forEach(tt,We){return new(We=xe(We))((gt,Jt)=>{let Yt;Yt=this.subscribe(qt=>{try{tt(qt)}catch(Ot){Jt(Ot),Yt&&Yt.unsubscribe()}},Jt,gt)})}_subscribe(tt){const{source:We}=this;return We&&We.subscribe(tt)}[Me.L](){return this}pipe(...tt){return 0===tt.length?this:function(Ue){return 0===Ue.length?Re.y:1===Ue.length?Ue[0]:function(tt){return Ue.reduce((We,gt)=>gt(We),tt)}}(tt)(this)}toPromise(tt){return new(tt=xe(tt))((We,gt)=>{let Jt;this.subscribe(Yt=>Jt=Yt,Yt=>gt(Yt),()=>We(Jt))})}}return Ue.create=He=>new Ue(He),Ue})();function xe(Ue){if(Ue||(Ue=ne.v.Promise||Promise),!Ue)throw new Error("no Promise impl found");return Ue}},6490:(jt,mt,ae)=>{"use strict";ae.d(mt,{c:()=>Be});var G=ae(2494),Y=ae(4449);const Be={closed:!0,next(Je){},error(Je){if(G.v.useDeprecatedSynchronousErrorHandling)throw Je;(0,Y.z)(Je)},complete(){}}},1929:(jt,mt,ae)=>{"use strict";ae.d(mt,{t:()=>Mn});var G=ae(9765),Y=ae(6465),Je=ae(6102);const Re=new class extends Je.v{}(class extends Y.o{constructor(ut,Wt){super(ut,Wt),this.scheduler=ut,this.work=Wt}schedule(ut,Wt=0){return Wt>0?super.schedule(ut,Wt):(this.delay=Wt,this.state=ut,this.scheduler.flush(this),this)}execute(ut,Wt){return Wt>0||this.closed?super.execute(ut,Wt):this._execute(ut,Wt)}requestAsyncId(ut,Wt,Tn=0){return null!==Tn&&Tn>0||null===Tn&&this.delay>0?super.requestAsyncId(ut,Wt,Tn):ut.flush(this)}});var Ne=ae(5319),ze=ae(7393),ne=ae(9193),te=ae(5917),xe=ae(7574);class We{constructor(ut,Wt,Tn){this.kind=ut,this.value=Wt,this.error=Tn,this.hasValue="N"===ut}observe(ut){switch(this.kind){case"N":return ut.next&&ut.next(this.value);case"E":return ut.error&&ut.error(this.error);case"C":return ut.complete&&ut.complete()}}do(ut,Wt,Tn){switch(this.kind){case"N":return ut&&ut(this.value);case"E":return Wt&&Wt(this.error);case"C":return Tn&&Tn()}}accept(ut,Wt,Tn){return ut&&"function"==typeof ut.next?this.observe(ut):this.do(ut,Wt,Tn)}toObservable(){switch(this.kind){case"N":return(0,te.of)(this.value);case"E":return Gn=this.error,new xe.y(Wt=>Wt.error(Gn));case"C":return(0,ne.c)()}var Gn;throw new Error("unexpected notification kind value")}static createNext(ut){return void 0!==ut?new We("N",ut):We.undefinedValueNotification}static createError(ut){return new We("E",void 0,ut)}static createComplete(){return We.completeNotification}}We.completeNotification=new We("C"),We.undefinedValueNotification=new We("N",void 0);class Yt extends ze.L{constructor(ut,Wt,Tn=0){super(ut),this.scheduler=Wt,this.delay=Tn}static dispatch(ut){const{notification:Wt,destination:Tn}=ut;Wt.observe(Tn),this.unsubscribe()}scheduleMessage(ut){this.destination.add(this.scheduler.schedule(Yt.dispatch,this.delay,new qt(ut,this.destination)))}_next(ut){this.scheduleMessage(We.createNext(ut))}_error(ut){this.scheduleMessage(We.createError(ut)),this.unsubscribe()}_complete(){this.scheduleMessage(We.createComplete()),this.unsubscribe()}}class qt{constructor(ut,Wt){this.notification=ut,this.destination=Wt}}var Ot=ae(7971),dt=ae(8858);class Mn extends G.xQ{constructor(ut=Number.POSITIVE_INFINITY,Wt=Number.POSITIVE_INFINITY,Tn){super(),this.scheduler=Tn,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=ut<1?1:ut,this._windowTime=Wt<1?1:Wt,Wt===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(ut){if(!this.isStopped){const Wt=this._events;Wt.push(ut),Wt.length>this._bufferSize&&Wt.shift()}super.next(ut)}nextTimeWindow(ut){this.isStopped||(this._events.push(new fn(this._getNow(),ut)),this._trimBufferThenGetEvents()),super.next(ut)}_subscribe(ut){const Wt=this._infiniteTimeWindow,Tn=Wt?this._events:this._trimBufferThenGetEvents(),br=this.scheduler,qn=Tn.length;let Fn;if(this.closed)throw new Ot.N;if(this.isStopped||this.hasError?Fn=Ne.w.EMPTY:(this.observers.push(ut),Fn=new dt.W(this,ut)),br&&ut.add(ut=new Yt(ut,br)),Wt)for(let tn=0;tn<qn&&!ut.closed;tn++)ut.next(Tn[tn]);else for(let tn=0;tn<qn&&!ut.closed;tn++)ut.next(Tn[tn].value);return this.hasError?ut.error(this.thrownError):this.isStopped&&ut.complete(),Fn}_getNow(){return(this.scheduler||Re).now()}_trimBufferThenGetEvents(){const ut=this._getNow(),Wt=this._bufferSize,Tn=this._windowTime,br=this._events,qn=br.length;let Fn=0;for(;Fn<qn&&!(ut-br[Fn].time<Tn);)Fn++;return qn>Wt&&(Fn=Math.max(Fn,qn-Wt)),Fn>0&&br.splice(0,Fn),br}}class fn{constructor(ut,Wt){this.time=ut,this.value=Wt}}},9765:(jt,mt,ae)=>{"use strict";ae.d(mt,{Yc:()=>Re,xQ:()=>Ne});var G=ae(7574),Y=ae(7393),Be=ae(5319),Je=ae(7971),_e=ae(8858),Me=ae(9181);class Re extends Y.L{constructor(te){super(te),this.destination=te}}let Ne=(()=>{class ne extends G.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Me.b](){return new Re(this)}lift(xe){const Ue=new ze(this,this);return Ue.operator=xe,Ue}next(xe){if(this.closed)throw new Je.N;if(!this.isStopped){const{observers:Ue}=this,He=Ue.length,tt=Ue.slice();for(let We=0;We<He;We++)tt[We].next(xe)}}error(xe){if(this.closed)throw new Je.N;this.hasError=!0,this.thrownError=xe,this.isStopped=!0;const{observers:Ue}=this,He=Ue.length,tt=Ue.slice();for(let We=0;We<He;We++)tt[We].error(xe);this.observers.length=0}complete(){if(this.closed)throw new Je.N;this.isStopped=!0;const{observers:xe}=this,Ue=xe.length,He=xe.slice();for(let tt=0;tt<Ue;tt++)He[tt].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(xe){if(this.closed)throw new Je.N;return super._trySubscribe(xe)}_subscribe(xe){if(this.closed)throw new Je.N;return this.hasError?(xe.error(this.thrownError),Be.w.EMPTY):this.isStopped?(xe.complete(),Be.w.EMPTY):(this.observers.push(xe),new _e.W(this,xe))}asObservable(){const xe=new G.y;return xe.source=this,xe}}return ne.create=(te,xe)=>new ze(te,xe),ne})();class ze extends Ne{constructor(te,xe){super(),this.destination=te,this.source=xe}next(te){const{destination:xe}=this;xe&&xe.next&&xe.next(te)}error(te){const{destination:xe}=this;xe&&xe.error&&this.destination.error(te)}complete(){const{destination:te}=this;te&&te.complete&&this.destination.complete()}_subscribe(te){const{source:xe}=this;return xe?this.source.subscribe(te):Be.w.EMPTY}}},8858:(jt,mt,ae)=>{"use strict";ae.d(mt,{W:()=>Y});var G=ae(5319);class Y extends G.w{constructor(Je,_e){super(),this.subject=Je,this.subscriber=_e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Je=this.subject,_e=Je.observers;if(this.subject=null,!_e||0===_e.length||Je.isStopped||Je.closed)return;const Me=_e.indexOf(this.subscriber);-1!==Me&&_e.splice(Me,1)}}},7393:(jt,mt,ae)=>{"use strict";ae.d(mt,{L:()=>Re});var G=ae(9105),Y=ae(6490),Be=ae(5319),Je=ae(9181),_e=ae(2494),Me=ae(4449);class Re extends Be.w{constructor(ne,te,xe){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Y.c;break;case 1:if(!ne){this.destination=Y.c;break}if("object"==typeof ne){ne instanceof Re?(this.syncErrorThrowable=ne.syncErrorThrowable,this.destination=ne,ne.add(this)):(this.syncErrorThrowable=!0,this.destination=new Ne(this,ne));break}default:this.syncErrorThrowable=!0,this.destination=new Ne(this,ne,te,xe)}}[Je.b](){return this}static create(ne,te,xe){const Ue=new Re(ne,te,xe);return Ue.syncErrorThrowable=!1,Ue}next(ne){this.isStopped||this._next(ne)}error(ne){this.isStopped||(this.isStopped=!0,this._error(ne))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ne){this.destination.next(ne)}_error(ne){this.destination.error(ne),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ne}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ne,this}}class Ne extends Re{constructor(ne,te,xe,Ue){super(),this._parentSubscriber=ne;let He,tt=this;(0,G.m)(te)?He=te:te&&(He=te.next,xe=te.error,Ue=te.complete,te!==Y.c&&(tt=Object.create(te),(0,G.m)(tt.unsubscribe)&&this.add(tt.unsubscribe.bind(tt)),tt.unsubscribe=this.unsubscribe.bind(this))),this._context=tt,this._next=He,this._error=xe,this._complete=Ue}next(ne){if(!this.isStopped&&this._next){const{_parentSubscriber:te}=this;_e.v.useDeprecatedSynchronousErrorHandling&&te.syncErrorThrowable?this.__tryOrSetError(te,this._next,ne)&&this.unsubscribe():this.__tryOrUnsub(this._next,ne)}}error(ne){if(!this.isStopped){const{_parentSubscriber:te}=this,{useDeprecatedSynchronousErrorHandling:xe}=_e.v;if(this._error)xe&&te.syncErrorThrowable?(this.__tryOrSetError(te,this._error,ne),this.unsubscribe()):(this.__tryOrUnsub(this._error,ne),this.unsubscribe());else if(te.syncErrorThrowable)xe?(te.syncErrorValue=ne,te.syncErrorThrown=!0):(0,Me.z)(ne),this.unsubscribe();else{if(this.unsubscribe(),xe)throw ne;(0,Me.z)(ne)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ne}=this;if(this._complete){const te=()=>this._complete.call(this._context);_e.v.useDeprecatedSynchronousErrorHandling&&ne.syncErrorThrowable?(this.__tryOrSetError(ne,te),this.unsubscribe()):(this.__tryOrUnsub(te),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ne,te){try{ne.call(this._context,te)}catch(xe){if(this.unsubscribe(),_e.v.useDeprecatedSynchronousErrorHandling)throw xe;(0,Me.z)(xe)}}__tryOrSetError(ne,te,xe){if(!_e.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{te.call(this._context,xe)}catch(Ue){return _e.v.useDeprecatedSynchronousErrorHandling?(ne.syncErrorValue=Ue,ne.syncErrorThrown=!0,!0):((0,Me.z)(Ue),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ne}=this;this._context=null,this._parentSubscriber=null,ne.unsubscribe()}}},5319:(jt,mt,ae)=>{"use strict";ae.d(mt,{w:()=>Me});var G=ae(9796),Y=ae(1555),Be=ae(9105);const _e=(()=>{function Ne(ze){return Error.call(this),this.message=ze?`${ze.length} errors occurred during unsubscription:\n${ze.map((ne,te)=>`${te+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ze,this}return Ne.prototype=Object.create(Error.prototype),Ne})();class Me{constructor(ze){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ze&&(this._ctorUnsubscribe=!0,this._unsubscribe=ze)}unsubscribe(){let ze;if(this.closed)return;let{_parentOrParents:ne,_ctorUnsubscribe:te,_unsubscribe:xe,_subscriptions:Ue}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ne instanceof Me)ne.remove(this);else if(null!==ne)for(let He=0;He<ne.length;++He)ne[He].remove(this);if((0,Be.m)(xe)){te&&(this._unsubscribe=void 0);try{xe.call(this)}catch(He){ze=He instanceof _e?Re(He.errors):[He]}}if((0,G.k)(Ue)){let He=-1,tt=Ue.length;for(;++He<tt;){const We=Ue[He];if((0,Y.K)(We))try{We.unsubscribe()}catch(gt){ze=ze||[],gt instanceof _e?ze=ze.concat(Re(gt.errors)):ze.push(gt)}}}if(ze)throw new _e(ze)}add(ze){let ne=ze;if(!ze)return Me.EMPTY;switch(typeof ze){case"function":ne=new Me(ze);case"object":if(ne===this||ne.closed||"function"!=typeof ne.unsubscribe)return ne;if(this.closed)return ne.unsubscribe(),ne;if(!(ne instanceof Me)){const Ue=ne;ne=new Me,ne._subscriptions=[Ue]}break;default:throw new Error("unrecognized teardown "+ze+" added to Subscription.")}let{_parentOrParents:te}=ne;if(null===te)ne._parentOrParents=this;else if(te instanceof Me){if(te===this)return ne;ne._parentOrParents=[te,this]}else{if(-1!==te.indexOf(this))return ne;te.push(this)}const xe=this._subscriptions;return null===xe?this._subscriptions=[ne]:xe.push(ne),ne}remove(ze){const ne=this._subscriptions;if(ne){const te=ne.indexOf(ze);-1!==te&&ne.splice(te,1)}}}var Ne;function Re(Ne){return Ne.reduce((ze,ne)=>ze.concat(ne instanceof _e?ne.errors:ne),[])}Me.EMPTY=((Ne=new Me).closed=!0,Ne)},2494:(jt,mt,ae)=>{"use strict";ae.d(mt,{v:()=>Y});let G=!1;const Y={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Be){if(Be){const Je=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Je.stack)}else G&&console.log("RxJS: Back to a better error behavior. Thank you. <3");G=Be},get useDeprecatedSynchronousErrorHandling(){return G}}},5345:(jt,mt,ae)=>{"use strict";ae.d(mt,{IY:()=>Je,Ds:()=>Me,ft:()=>Ne});var G=ae(7393),Y=ae(7574),Be=ae(7444);class Je extends G.L{constructor(ne){super(),this.parent=ne}_next(ne){this.parent.notifyNext(ne)}_error(ne){this.parent.notifyError(ne),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Me extends G.L{notifyNext(ne){this.destination.next(ne)}notifyError(ne){this.destination.error(ne)}notifyComplete(){this.destination.complete()}}function Ne(ze,ne){if(ne.closed)return;if(ze instanceof Y.y)return ze.subscribe(ne);let te;try{te=(0,Be.s)(ze)(ne)}catch(xe){ne.error(xe)}return te}},2441:(jt,mt,ae)=>{"use strict";ae.d(mt,{c:()=>_e,N:()=>Me});var G=ae(9765),Y=ae(7574),Be=ae(5319),Je=ae(1307);class _e extends Y.y{constructor(te,xe){super(),this.source=te,this.subjectFactory=xe,this._refCount=0,this._isComplete=!1}_subscribe(te){return this.getSubject().subscribe(te)}getSubject(){const te=this._subject;return(!te||te.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let te=this._connection;return te||(this._isComplete=!1,te=this._connection=new Be.w,te.add(this.source.subscribe(new Re(this.getSubject(),this))),te.closed&&(this._connection=null,te=Be.w.EMPTY)),te}refCount(){return(0,Je.x)()(this)}}const Me=(()=>{const ne=_e.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ne._subscribe},_isComplete:{value:ne._isComplete,writable:!0},getSubject:{value:ne.getSubject},connect:{value:ne.connect},refCount:{value:ne.refCount}}})();class Re extends G.Yc{constructor(te,xe){super(te),this.connectable=xe}_error(te){this._unsubscribe(),super._error(te)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const te=this.connectable;if(te){this.connectable=null;const xe=te._connection;te._refCount=0,te._subject=null,te._connection=null,xe&&xe.unsubscribe()}}}},739:(jt,mt,ae)=>{"use strict";ae.d(mt,{aj:()=>te});var G=ae(4869),Y=ae(9796),Be=ae(7393);class Je extends Be.L{notifyNext(tt,We,gt,Jt,Yt){this.destination.next(We)}notifyError(tt,We){this.destination.error(tt)}notifyComplete(tt){this.destination.complete()}}class _e extends Be.L{constructor(tt,We,gt){super(),this.parent=tt,this.outerValue=We,this.outerIndex=gt,this.index=0}_next(tt){this.parent.notifyNext(this.outerValue,tt,this.outerIndex,this.index++,this)}_error(tt){this.parent.notifyError(tt,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Me=ae(7444),Re=ae(7574);function Ne(He,tt,We,gt,Jt=new _e(He,We,gt)){if(!Jt.closed)return tt instanceof Re.y?tt.subscribe(Jt):(0,Me.s)(tt)(Jt)}var ze=ae(6693);const ne={};function te(...He){let tt,We;return(0,G.K)(He[He.length-1])&&(We=He.pop()),"function"==typeof He[He.length-1]&&(tt=He.pop()),1===He.length&&(0,Y.k)(He[0])&&(He=He[0]),(0,ze.n)(He,We).lift(new xe(tt))}class xe{constructor(tt){this.resultSelector=tt}call(tt,We){return We.subscribe(new Ue(tt,this.resultSelector))}}class Ue extends Je{constructor(tt,We){super(tt),this.resultSelector=We,this.active=0,this.values=[],this.observables=[]}_next(tt){this.values.push(ne),this.observables.push(tt)}_complete(){const tt=this.observables,We=tt.length;if(0===We)this.destination.complete();else{this.active=We,this.toRespond=We;for(let gt=0;gt<We;gt++)this.add(Ne(this,tt[gt],void 0,gt))}}notifyComplete(tt){0==(this.active-=1)&&this.destination.complete()}notifyNext(tt,We,gt){const Jt=this.values,qt=this.toRespond?Jt[gt]===ne?--this.toRespond:this.toRespond:0;Jt[gt]=We,0===qt&&(this.resultSelector?this._tryResultSelector(Jt):this.destination.next(Jt.slice()))}_tryResultSelector(tt){let We;try{We=this.resultSelector.apply(this,tt)}catch(gt){return void this.destination.error(gt)}this.destination.next(We)}}},9193:(jt,mt,ae)=>{"use strict";ae.d(mt,{E:()=>Y,c:()=>Be});var G=ae(7574);const Y=new G.y(_e=>_e.complete());function Be(_e){return _e?function(_e){return new G.y(Me=>_e.schedule(()=>Me.complete()))}(_e):Y}},4402:(jt,mt,ae)=>{"use strict";ae.d(mt,{D:()=>tt});var G=ae(7574),Y=ae(7444),Be=ae(5319),Je=ae(6554),Re=ae(4087),Ne=ae(377),te=ae(4072),xe=ae(9489);function tt(We,gt){return gt?function(We,gt){if(null!=We){if(function(We){return We&&"function"==typeof We[Je.L]}(We))return function(We,gt){return new G.y(Jt=>{const Yt=new Be.w;return Yt.add(gt.schedule(()=>{const qt=We[Je.L]();Yt.add(qt.subscribe({next(Ot){Yt.add(gt.schedule(()=>Jt.next(Ot)))},error(Ot){Yt.add(gt.schedule(()=>Jt.error(Ot)))},complete(){Yt.add(gt.schedule(()=>Jt.complete()))}}))})),Yt})}(We,gt);if((0,te.t)(We))return function(We,gt){return new G.y(Jt=>{const Yt=new Be.w;return Yt.add(gt.schedule(()=>We.then(qt=>{Yt.add(gt.schedule(()=>{Jt.next(qt),Yt.add(gt.schedule(()=>Jt.complete()))}))},qt=>{Yt.add(gt.schedule(()=>Jt.error(qt)))}))),Yt})}(We,gt);if((0,xe.z)(We))return(0,Re.r)(We,gt);if(function(We){return We&&"function"==typeof We[Ne.hZ]}(We)||"string"==typeof We)return function(We,gt){if(!We)throw new Error("Iterable cannot be null");return new G.y(Jt=>{const Yt=new Be.w;let qt;return Yt.add(()=>{qt&&"function"==typeof qt.return&&qt.return()}),Yt.add(gt.schedule(()=>{qt=We[Ne.hZ](),Yt.add(gt.schedule(function(){if(Jt.closed)return;let Ot,dt;try{const Mn=qt.next();Ot=Mn.value,dt=Mn.done}catch(Mn){return void Jt.error(Mn)}dt?Jt.complete():(Jt.next(Ot),this.schedule())}))})),Yt})}(We,gt)}throw new TypeError((null!==We&&typeof We||We)+" is not observable")}(We,gt):We instanceof G.y?We:new G.y((0,Y.s)(We))}},6693:(jt,mt,ae)=>{"use strict";ae.d(mt,{n:()=>Je});var G=ae(7574),Y=ae(5015),Be=ae(4087);function Je(_e,Me){return Me?(0,Be.r)(_e,Me):new G.y((0,Y.V)(_e))}},2759:(jt,mt,ae)=>{"use strict";ae.d(mt,{R:()=>Me});var G=ae(7574),Y=ae(9796),Be=ae(9105),Je=ae(8002);function Me(te,xe,Ue,He){return(0,Be.m)(Ue)&&(He=Ue,Ue=void 0),He?Me(te,xe,Ue).pipe((0,Je.U)(tt=>(0,Y.k)(tt)?He(...tt):He(tt))):new G.y(tt=>{Re(te,xe,function(gt){tt.next(arguments.length>1?Array.prototype.slice.call(arguments):gt)},tt,Ue)})}function Re(te,xe,Ue,He,tt){let We;if(function(te){return te&&"function"==typeof te.addEventListener&&"function"==typeof te.removeEventListener}(te)){const gt=te;te.addEventListener(xe,Ue,tt),We=()=>gt.removeEventListener(xe,Ue,tt)}else if(function(te){return te&&"function"==typeof te.on&&"function"==typeof te.off}(te)){const gt=te;te.on(xe,Ue),We=()=>gt.off(xe,Ue)}else if(function(te){return te&&"function"==typeof te.addListener&&"function"==typeof te.removeListener}(te)){const gt=te;te.addListener(xe,Ue),We=()=>gt.removeListener(xe,Ue)}else{if(!te||!te.length)throw new TypeError("Invalid event target");for(let gt=0,Jt=te.length;gt<Jt;gt++)Re(te[gt],xe,Ue,He,tt)}He.add(We)}},1824:(jt,mt,ae)=>{"use strict";ae.d(mt,{F:()=>Ne});var G=ae(7574),Y=ae(6465);const _e=new(ae(6102).v)(Y.o);var Me=ae(9796);function Ne(ne=0,te=_e){return(!function(ne){return!(0,Me.k)(ne)&&ne-parseFloat(ne)+1>=0}(ne)||ne<0)&&(ne=0),(!te||"function"!=typeof te.schedule)&&(te=_e),new G.y(xe=>(xe.add(te.schedule(ze,ne,{subscriber:xe,counter:0,period:ne})),xe))}function ze(ne){const{subscriber:te,counter:xe,period:Ue}=ne;te.next(xe),this.schedule({subscriber:te,counter:xe+1,period:Ue},Ue)}},5917:(jt,mt,ae)=>{"use strict";ae.d(mt,{of:()=>Je});var G=ae(4869),Y=ae(6693),Be=ae(4087);function Je(..._e){let Me=_e[_e.length-1];return(0,G.K)(Me)?(_e.pop(),(0,Be.r)(_e,Me)):(0,Y.n)(_e)}},5435:(jt,mt,ae)=>{"use strict";ae.d(mt,{h:()=>Y});var G=ae(7393);function Y(_e,Me){return function(Ne){return Ne.lift(new Be(_e,Me))}}class Be{constructor(Me,Re){this.predicate=Me,this.thisArg=Re}call(Me,Re){return Re.subscribe(new Je(Me,this.predicate,this.thisArg))}}class Je extends G.L{constructor(Me,Re,Ne){super(Me),this.predicate=Re,this.thisArg=Ne,this.count=0}_next(Me){let Re;try{Re=this.predicate.call(this.thisArg,Me,this.count++)}catch(Ne){return void this.destination.error(Ne)}Re&&this.destination.next(Me)}}},8002:(jt,mt,ae)=>{"use strict";ae.d(mt,{U:()=>Y});var G=ae(7393);function Y(_e,Me){return function(Ne){if("function"!=typeof _e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Ne.lift(new Be(_e,Me))}}class Be{constructor(Me,Re){this.project=Me,this.thisArg=Re}call(Me,Re){return Re.subscribe(new Je(Me,this.project,this.thisArg))}}class Je extends G.L{constructor(Me,Re,Ne){super(Me),this.project=Re,this.count=0,this.thisArg=Ne||this}_next(Me){let Re;try{Re=this.project.call(this.thisArg,Me,this.count++)}catch(Ne){return void this.destination.error(Ne)}this.destination.next(Re)}}},3282:(jt,mt,ae)=>{"use strict";ae.d(mt,{J:()=>Be});var G=ae(9773),Y=ae(4487);function Be(Je=Number.POSITIVE_INFINITY){return(0,G.zg)(Y.y,Je)}},9773:(jt,mt,ae)=>{"use strict";ae.d(mt,{zg:()=>Je});var G=ae(8002),Y=ae(4402),Be=ae(5345);function Je(Ne,ze,ne=Number.POSITIVE_INFINITY){return"function"==typeof ze?te=>te.pipe(Je((xe,Ue)=>(0,Y.D)(Ne(xe,Ue)).pipe((0,G.U)((He,tt)=>ze(xe,He,Ue,tt))),ne)):("number"==typeof ze&&(ne=ze),te=>te.lift(new _e(Ne,ne)))}class _e{constructor(ze,ne=Number.POSITIVE_INFINITY){this.project=ze,this.concurrent=ne}call(ze,ne){return ne.subscribe(new Me(ze,this.project,this.concurrent))}}class Me extends Be.Ds{constructor(ze,ne,te=Number.POSITIVE_INFINITY){super(ze),this.project=ne,this.concurrent=te,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ze){this.active<this.concurrent?this._tryNext(ze):this.buffer.push(ze)}_tryNext(ze){let ne;const te=this.index++;try{ne=this.project(ze,te)}catch(xe){return void this.destination.error(xe)}this.active++,this._innerSub(ne)}_innerSub(ze){const ne=new Be.IY(this),te=this.destination;te.add(ne);const xe=(0,Be.ft)(ze,ne);xe!==ne&&te.add(xe)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ze){this.destination.next(ze)}notifyComplete(){const ze=this.buffer;this.active--,ze.length>0?this._next(ze.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},1307:(jt,mt,ae)=>{"use strict";ae.d(mt,{x:()=>Y});var G=ae(7393);function Y(){return function(Me){return Me.lift(new Be(Me))}}class Be{constructor(Me){this.connectable=Me}call(Me,Re){const{connectable:Ne}=this;Ne._refCount++;const ze=new Je(Me,Ne),ne=Re.subscribe(ze);return ze.closed||(ze.connection=Ne.connect()),ne}}class Je extends G.L{constructor(Me,Re){super(Me),this.connectable=Re}_unsubscribe(){const{connectable:Me}=this;if(!Me)return void(this.connection=null);this.connectable=null;const Re=Me._refCount;if(Re<=0)return void(this.connection=null);if(Me._refCount=Re-1,Re>1)return void(this.connection=null);const{connection:Ne}=this,ze=Me._connection;this.connection=null,ze&&(!Ne||ze===Ne)&&ze.unsubscribe()}}},5257:(jt,mt,ae)=>{"use strict";ae.d(mt,{q:()=>Je});var G=ae(7393),Y=ae(7108),Be=ae(9193);function Je(Re){return Ne=>0===Re?(0,Be.c)():Ne.lift(new _e(Re))}class _e{constructor(Ne){if(this.total=Ne,this.total<0)throw new Y.W}call(Ne,ze){return ze.subscribe(new Me(Ne,this.total))}}class Me extends G.L{constructor(Ne,ze){super(Ne),this.total=ze,this.count=0}_next(Ne){const ze=this.total,ne=++this.count;ne<=ze&&(this.destination.next(Ne),ne===ze&&(this.destination.complete(),this.unsubscribe()))}}},4087:(jt,mt,ae)=>{"use strict";ae.d(mt,{r:()=>Be});var G=ae(7574),Y=ae(5319);function Be(Je,_e){return new G.y(Me=>{const Re=new Y.w;let Ne=0;return Re.add(_e.schedule(function(){Ne!==Je.length?(Me.next(Je[Ne++]),Me.closed||Re.add(this.schedule())):Me.complete()})),Re})}},6465:(jt,mt,ae)=>{"use strict";ae.d(mt,{o:()=>Be});var G=ae(5319);class Y extends G.w{constructor(_e,Me){super()}schedule(_e,Me=0){return this}}class Be extends Y{constructor(_e,Me){super(_e,Me),this.scheduler=_e,this.work=Me,this.pending=!1}schedule(_e,Me=0){if(this.closed)return this;this.state=_e;const Re=this.id,Ne=this.scheduler;return null!=Re&&(this.id=this.recycleAsyncId(Ne,Re,Me)),this.pending=!0,this.delay=Me,this.id=this.id||this.requestAsyncId(Ne,this.id,Me),this}requestAsyncId(_e,Me,Re=0){return setInterval(_e.flush.bind(_e,this),Re)}recycleAsyncId(_e,Me,Re=0){if(null!==Re&&this.delay===Re&&!1===this.pending)return Me;clearInterval(Me)}execute(_e,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Re=this._execute(_e,Me);if(Re)return Re;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,Me){let Ne,Re=!1;try{this.work(_e)}catch(ze){Re=!0,Ne=!!ze&&ze||new Error(ze)}if(Re)return this.unsubscribe(),Ne}_unsubscribe(){const _e=this.id,Me=this.scheduler,Re=Me.actions,Ne=Re.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Ne&&Re.splice(Ne,1),null!=_e&&(this.id=this.recycleAsyncId(Me,_e,null)),this.delay=null}}},6102:(jt,mt,ae)=>{"use strict";ae.d(mt,{v:()=>Y});let G=(()=>{class Be{constructor(_e,Me=Be.now){this.SchedulerAction=_e,this.now=Me}schedule(_e,Me=0,Re){return new this.SchedulerAction(this,_e).schedule(Re,Me)}}return Be.now=()=>Date.now(),Be})();class Y extends G{constructor(Je,_e=G.now){super(Je,()=>Y.delegate&&Y.delegate!==this?Y.delegate.now():_e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Je,_e=0,Me){return Y.delegate&&Y.delegate!==this?Y.delegate.schedule(Je,_e,Me):super.schedule(Je,_e,Me)}flush(Je){const{actions:_e}=this;if(this.active)return void _e.push(Je);let Me;this.active=!0;do{if(Me=Je.execute(Je.state,Je.delay))break}while(Je=_e.shift());if(this.active=!1,Me){for(;Je=_e.shift();)Je.unsubscribe();throw Me}}}},377:(jt,mt,ae)=>{"use strict";ae.d(mt,{hZ:()=>Y});const Y="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(jt,mt,ae)=>{"use strict";ae.d(mt,{L:()=>G});const G="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(jt,mt,ae)=>{"use strict";ae.d(mt,{b:()=>G});const G="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(jt,mt,ae)=>{"use strict";ae.d(mt,{W:()=>Y});const Y=(()=>{function Be(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return Be.prototype=Object.create(Error.prototype),Be})()},7971:(jt,mt,ae)=>{"use strict";ae.d(mt,{N:()=>Y});const Y=(()=>{function Be(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Be.prototype=Object.create(Error.prototype),Be})()},4449:(jt,mt,ae)=>{"use strict";function G(Y){setTimeout(()=>{throw Y},0)}ae.d(mt,{z:()=>G})},4487:(jt,mt,ae)=>{"use strict";function G(Y){return Y}ae.d(mt,{y:()=>G})},9796:(jt,mt,ae)=>{"use strict";ae.d(mt,{k:()=>G});const G=Array.isArray||(Y=>Y&&"number"==typeof Y.length)},9489:(jt,mt,ae)=>{"use strict";ae.d(mt,{z:()=>G});const G=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},9105:(jt,mt,ae)=>{"use strict";function G(Y){return"function"==typeof Y}ae.d(mt,{m:()=>G})},1555:(jt,mt,ae)=>{"use strict";function G(Y){return null!==Y&&"object"==typeof Y}ae.d(mt,{K:()=>G})},4072:(jt,mt,ae)=>{"use strict";function G(Y){return!!Y&&"function"!=typeof Y.subscribe&&"function"==typeof Y.then}ae.d(mt,{t:()=>G})},4869:(jt,mt,ae)=>{"use strict";function G(Y){return Y&&"function"==typeof Y.schedule}ae.d(mt,{K:()=>G})},7444:(jt,mt,ae)=>{"use strict";ae.d(mt,{s:()=>te});var G=ae(5015),Y=ae(4449),Je=ae(377),Me=ae(6554),Ne=ae(9489),ze=ae(4072),ne=ae(1555);const te=xe=>{if(xe&&"function"==typeof xe[Me.L])return(xe=>Ue=>{const He=xe[Me.L]();if("function"!=typeof He.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return He.subscribe(Ue)})(xe);if((0,Ne.z)(xe))return(0,G.V)(xe);if((0,ze.t)(xe))return(xe=>Ue=>(xe.then(He=>{Ue.closed||(Ue.next(He),Ue.complete())},He=>Ue.error(He)).then(null,Y.z),Ue))(xe);if(xe&&"function"==typeof xe[Je.hZ])return(xe=>Ue=>{const He=xe[Je.hZ]();for(;;){let tt;try{tt=He.next()}catch(We){return Ue.error(We),Ue}if(tt.done){Ue.complete();break}if(Ue.next(tt.value),Ue.closed)break}return"function"==typeof He.return&&Ue.add(()=>{He.return&&He.return()}),Ue})(xe);{const He=`You provided ${(0,ne.K)(xe)?"an invalid object":`'${xe}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(He)}}},5015:(jt,mt,ae)=>{"use strict";ae.d(mt,{V:()=>G});const G=Y=>Be=>{for(let Je=0,_e=Y.length;Je<_e&&!Be.closed;Je++)Be.next(Y[Je]);Be.complete()}},7758:(jt,mt,ae)=>{"use strict";ae.d(mt,{Mig:()=>Eg,_Li:()=>He,ZzF:()=>ts,TlE:()=>Bt,u9r:()=>rn,SUY:()=>Ap,Ilk:()=>vt,_3:()=>gf,yj7:()=>gp,m_w:()=>hc,Ox3:()=>wg,pBf:()=>wo,a$l:()=>An,ZAu:()=>Hu,x12:()=>Gu,nls:()=>oa,wem:()=>Jn,RsA:()=>Be,yGw:()=>$n,Kj0:()=>Ws,vBJ:()=>Vn,YBo:()=>xp,Tme:()=>pi,iKG:()=>Co,cPb:()=>co,JOQ:()=>vc,mXe:()=>og,_fP:()=>Hi,wk1:()=>Is,iMs:()=>$0,xsS:()=>ed,jyz:()=>El,Aip:()=>ga,xo$:()=>ga,$V:()=>Y_,QmN:()=>Je,dpR:()=>N_,Lcc:()=>$c,rDY:()=>Du,FM8:()=>at,Pa4:()=>pe,dd2:()=>Cs,CP7:()=>Ds});var G=ae(8239);const Be={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Je={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},He=1,Ln=1001,Ji=1003,Jn=1006,sr=1009,po=1015,Ui=1016,Zo=1020,cs=1022,Is=1023,Xi=Is,mo=1026,go=1027,so=2400,wa=2401,Ns=3e3,Gr=35044,kr=35048;class wo{addEventListener(e,r){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[e]&&(s[e]=[]),-1===s[e].indexOf(r)&&s[e].push(r)}hasEventListener(e,r){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[e]&&-1!==s[e].indexOf(r)}removeEventListener(e,r){if(void 0===this._listeners)return;const a=this._listeners[e];if(void 0!==a){const c=a.indexOf(r);-1!==c&&a.splice(c,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const s=this._listeners[e.type];if(void 0!==s){e.target=this;const a=s.slice(0);for(let c=0,m=a.length;c<m;c++)a[c].call(this,e);e.target=null}}}const _s=[];for(let p=0;p<256;p++)_s[p]=(p<16?"0":"")+p.toString(16);const qo=Math.PI/180,Wa=180/Math.PI;function er(){const p=4294967295*Math.random()|0,e=4294967295*Math.random()|0,r=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(_s[255&p]+_s[p>>8&255]+_s[p>>16&255]+_s[p>>24&255]+"-"+_s[255&e]+_s[e>>8&255]+"-"+_s[e>>16&15|64]+_s[e>>24&255]+"-"+_s[63&r|128]+_s[r>>8&255]+"-"+_s[r>>16&255]+_s[r>>24&255]+_s[255&s]+_s[s>>8&255]+_s[s>>16&255]+_s[s>>24&255]).toUpperCase()}function ks(p,e,r){return Math.max(e,Math.min(r,p))}function _l(p,e,r){return(1-r)*p+r*e}function Rt(p){return 0==(p&p-1)&&0!==p}function zn(p){return Math.pow(2,Math.floor(Math.log(p)/Math.LN2))}class at{constructor(e=0,r=0){this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,r){return void 0!==r?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,r)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e,r){return void 0!==r?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,r)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,s=this.y,a=e.elements;return this.x=a[0]*r+a[3]*s+a[6],this.y=a[1]*r+a[4]*s+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this}clampLength(e,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(r,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,s=this.y-e.y;return r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,s){return this.x=e.x+(r.x-e.x)*s,this.y=e.y+(r.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r,s){return void 0!==s&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const s=Math.cos(r),a=Math.sin(r),c=this.x-e.x,m=this.y-e.y;return this.x=c*s-m*a+e.x,this.y=c*a+m*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}at.prototype.isVector2=!0;class On{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,r,s,a,c,m,y,w,M){const A=this.elements;return A[0]=e,A[1]=a,A[2]=y,A[3]=r,A[4]=c,A[5]=w,A[6]=s,A[7]=m,A[8]=M,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,s=e.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],this}extractBasis(e,r,s){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const s=e.elements,a=r.elements,c=this.elements,m=s[0],y=s[3],w=s[6],M=s[1],A=s[4],P=s[7],R=s[2],O=s[5],k=s[8],W=a[0],Z=a[3],V=a[6],B=a[1],ce=a[4],le=a[7],Ee=a[2],Fe=a[5],de=a[8];return c[0]=m*W+y*B+w*Ee,c[3]=m*Z+y*ce+w*Fe,c[6]=m*V+y*le+w*de,c[1]=M*W+A*B+P*Ee,c[4]=M*Z+A*ce+P*Fe,c[7]=M*V+A*le+P*de,c[2]=R*W+O*B+k*Ee,c[5]=R*Z+O*ce+k*Fe,c[8]=R*V+O*le+k*de,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],s=e[1],a=e[2],c=e[3],m=e[4],y=e[5],w=e[6],M=e[7],A=e[8];return r*m*A-r*y*M-s*c*A+s*y*w+a*c*M-a*m*w}invert(){const e=this.elements,r=e[0],s=e[1],a=e[2],c=e[3],m=e[4],y=e[5],w=e[6],M=e[7],A=e[8],P=A*m-y*M,R=y*w-A*c,O=M*c-m*w,k=r*P+s*R+a*O;if(0===k)return this.set(0,0,0,0,0,0,0,0,0);const W=1/k;return e[0]=P*W,e[1]=(a*M-A*s)*W,e[2]=(y*s-a*m)*W,e[3]=R*W,e[4]=(A*r-a*w)*W,e[5]=(a*c-y*r)*W,e[6]=O*W,e[7]=(s*w-M*r)*W,e[8]=(m*r-s*c)*W,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,s,a,c,m,y){const w=Math.cos(c),M=Math.sin(c);return this.set(s*w,s*M,-s*(w*m+M*y)+m+e,-a*M,a*w,-a*(-M*m+w*y)+y+r,0,0,1),this}scale(e,r){const s=this.elements;return s[0]*=e,s[3]*=e,s[6]*=e,s[1]*=r,s[4]*=r,s[7]*=r,this}rotate(e){const r=Math.cos(e),s=Math.sin(e),a=this.elements,c=a[0],m=a[3],y=a[6],w=a[1],M=a[4],A=a[7];return a[0]=r*c+s*w,a[3]=r*m+s*M,a[6]=r*y+s*A,a[1]=-s*c+r*w,a[4]=-s*m+r*M,a[7]=-s*y+r*A,this}translate(e,r){const s=this.elements;return s[0]+=e*s[2],s[3]+=e*s[5],s[6]+=e*s[8],s[1]+=r*s[2],s[4]+=r*s[5],s[7]+=r*s[8],this}equals(e){const r=this.elements,s=e.elements;for(let a=0;a<9;a++)if(r[a]!==s[a])return!1;return!0}fromArray(e,r=0){for(let s=0;s<9;s++)this.elements[s]=e[s+r];return this}toArray(e=[],r=0){const s=this.elements;return e[r]=s[0],e[r+1]=s[1],e[r+2]=s[2],e[r+3]=s[3],e[r+4]=s[4],e[r+5]=s[5],e[r+6]=s[6],e[r+7]=s[7],e[r+8]=s[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let jr;On.prototype.isMatrix3=!0;class Ci{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{void 0===jr&&(jr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),jr.width=e.width,jr.height=e.height;const s=jr.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),r=jr}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}}let Ii=0;class Li extends wo{constructor(e=Li.DEFAULT_IMAGE,r=Li.DEFAULT_MAPPING,s=Ln,a=Ln,c=Jn,m=1008,y=Is,w=sr,M=1,A=Ns){super(),Object.defineProperty(this,"id",{value:Ii++}),this.uuid=er(),this.name="",this.image=e,this.mipmaps=[],this.mapping=r,this.wrapS=s,this.wrapT=a,this.magFilter=c,this.minFilter=m,this.anisotropy=M,this.format=y,this.internalFormat=null,this.type=w,this.offset=new at(0,0),this.repeat=new at(1,1),this.center=new at(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new On,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=A,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const r=void 0===e||"string"==typeof e;if(!r&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const a=this.image;if(void 0===a.uuid&&(a.uuid=er()),!r&&void 0===e.images[a.uuid]){let c;if(Array.isArray(a)){c=[];for(let m=0,y=a.length;m<y;m++)c.push(bs(a[m].isDataTexture?a[m].image:a[m]))}else c=bs(a);e.images[a.uuid]={uuid:a.uuid,url:c}}s.image=a.uuid}return r||(e.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case Ln:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case Ln:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function bs(p){return"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&p instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&p instanceof ImageBitmap?Ci.getDataURL(p):p.data?{data:Array.prototype.slice.call(p.data),width:p.width,height:p.height,type:p.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Li.DEFAULT_IMAGE=void 0,Li.DEFAULT_MAPPING=300,Li.prototype.isTexture=!0;class ci{constructor(e=0,r=0,s=0,a=1){this.x=e,this.y=r,this.z=s,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,s,a){return this.x=e,this.y=r,this.z=s,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,r){return void 0!==r?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,r)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e,r){return void 0!==r?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,r)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,s=this.y,a=this.z,c=this.w,m=e.elements;return this.x=m[0]*r+m[4]*s+m[8]*a+m[12]*c,this.y=m[1]*r+m[5]*s+m[9]*a+m[13]*c,this.z=m[2]*r+m[6]*s+m[10]*a+m[14]*c,this.w=m[3]*r+m[7]*s+m[11]*a+m[15]*c,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,s,a,c;const m=.01,y=.1,w=e.elements,M=w[0],A=w[4],P=w[8],R=w[1],O=w[5],k=w[9],W=w[2],Z=w[6],V=w[10];if(Math.abs(A-R)<m&&Math.abs(P-W)<m&&Math.abs(k-Z)<m){if(Math.abs(A+R)<y&&Math.abs(P+W)<y&&Math.abs(k+Z)<y&&Math.abs(M+O+V-3)<y)return this.set(1,0,0,0),this;r=Math.PI;const ce=(M+1)/2,le=(O+1)/2,Ee=(V+1)/2,Fe=(A+R)/4,de=(P+W)/4,Qe=(k+Z)/4;return ce>le&&ce>Ee?ce<m?(s=0,a=.707106781,c=.707106781):(s=Math.sqrt(ce),a=Fe/s,c=de/s):le>Ee?le<m?(s=.707106781,a=0,c=.707106781):(a=Math.sqrt(le),s=Fe/a,c=Qe/a):Ee<m?(s=.707106781,a=.707106781,c=0):(c=Math.sqrt(Ee),s=de/c,a=Qe/c),this.set(s,a,c,r),this}let B=Math.sqrt((Z-k)*(Z-k)+(P-W)*(P-W)+(R-A)*(R-A));return Math.abs(B)<.001&&(B=1),this.x=(Z-k)/B,this.y=(P-W)/B,this.z=(R-A)/B,this.w=Math.acos((M+O+V-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this.w=Math.max(e.w,Math.min(r.w,this.w)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this.w=Math.max(e,Math.min(r,this.w)),this}clampLength(e,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(r,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,s){return this.x=e.x+(r.x-e.x)*s,this.y=e.y+(r.y-e.y)*s,this.z=e.z+(r.z-e.z)*s,this.w=e.w+(r.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r,s){return void 0!==s&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}ci.prototype.isVector4=!0;class Cs extends wo{constructor(e,r,s={}){super(),this.width=e,this.height=r,this.depth=1,this.scissor=new ci(0,0,e,r),this.scissorTest=!1,this.viewport=new ci(0,0,e,r),this.texture=new Li(void 0,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:r,depth:1},this.texture.generateMipmaps=void 0!==s.generateMipmaps&&s.generateMipmaps,this.texture.internalFormat=void 0!==s.internalFormat?s.internalFormat:null,this.texture.minFilter=void 0!==s.minFilter?s.minFilter:Jn,this.depthBuffer=void 0===s.depthBuffer||s.depthBuffer,this.stencilBuffer=void 0!==s.stencilBuffer&&s.stencilBuffer,this.depthTexture=void 0!==s.depthTexture?s.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,r,s=1){(this.width!==e||this.height!==r||this.depth!==s)&&(this.width=e,this.height=r,this.depth=s,this.texture.image.width=e,this.texture.image.height=r,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=SM({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Cs.prototype.isWebGLRenderTarget=!0,class extends Cs{constructor(e,r,s){super(e,r);const a=this.texture;this.texture=[];for(let c=0;c<s;c++)this.texture[c]=a.clone()}setSize(e,r,s=1){if(this.width!==e||this.height!==r||this.depth!==s){this.width=e,this.height=r,this.depth=s;for(let a=0,c=this.texture.length;a<c;a++)this.texture[a].image.width=e,this.texture[a].image.height=r,this.texture[a].image.depth=s;this.dispose()}return this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let r=0,s=e.texture.length;r<s;r++)this.texture[r]=e.texture[r].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class Yo extends Cs{constructor(e,r,s){super(e,r,s),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}Yo.prototype.isWebGLMultisampleRenderTarget=!0;class Hi{constructor(e=0,r=0,s=0,a=1){this._x=e,this._y=r,this._z=s,this._w=a}static slerp(e,r,s,a){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),s.slerpQuaternions(e,r,a)}static slerpFlat(e,r,s,a,c,m,y){let w=s[a+0],M=s[a+1],A=s[a+2],P=s[a+3];const R=c[m+0],O=c[m+1],k=c[m+2],W=c[m+3];if(0===y)return e[r+0]=w,e[r+1]=M,e[r+2]=A,void(e[r+3]=P);if(1===y)return e[r+0]=R,e[r+1]=O,e[r+2]=k,void(e[r+3]=W);if(P!==W||w!==R||M!==O||A!==k){let Z=1-y;const V=w*R+M*O+A*k+P*W,B=V>=0?1:-1,ce=1-V*V;if(ce>Number.EPSILON){const Ee=Math.sqrt(ce),Fe=Math.atan2(Ee,V*B);Z=Math.sin(Z*Fe)/Ee,y=Math.sin(y*Fe)/Ee}const le=y*B;if(w=w*Z+R*le,M=M*Z+O*le,A=A*Z+k*le,P=P*Z+W*le,Z===1-y){const Ee=1/Math.sqrt(w*w+M*M+A*A+P*P);w*=Ee,M*=Ee,A*=Ee,P*=Ee}}e[r]=w,e[r+1]=M,e[r+2]=A,e[r+3]=P}static multiplyQuaternionsFlat(e,r,s,a,c,m){const y=s[a],w=s[a+1],M=s[a+2],A=s[a+3],P=c[m],R=c[m+1],O=c[m+2],k=c[m+3];return e[r]=y*k+A*P+w*O-M*R,e[r+1]=w*k+A*R+M*P-y*O,e[r+2]=M*k+A*O+y*R-w*P,e[r+3]=A*k-y*P-w*R-M*O,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,s,a){return this._x=e,this._y=r,this._z=s,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const s=e._x,a=e._y,c=e._z,m=e._order,y=Math.cos,w=Math.sin,M=y(s/2),A=y(a/2),P=y(c/2),R=w(s/2),O=w(a/2),k=w(c/2);switch(m){case"XYZ":this._x=R*A*P+M*O*k,this._y=M*O*P-R*A*k,this._z=M*A*k+R*O*P,this._w=M*A*P-R*O*k;break;case"YXZ":this._x=R*A*P+M*O*k,this._y=M*O*P-R*A*k,this._z=M*A*k-R*O*P,this._w=M*A*P+R*O*k;break;case"ZXY":this._x=R*A*P-M*O*k,this._y=M*O*P+R*A*k,this._z=M*A*k+R*O*P,this._w=M*A*P-R*O*k;break;case"ZYX":this._x=R*A*P-M*O*k,this._y=M*O*P+R*A*k,this._z=M*A*k-R*O*P,this._w=M*A*P+R*O*k;break;case"YZX":this._x=R*A*P+M*O*k,this._y=M*O*P+R*A*k,this._z=M*A*k-R*O*P,this._w=M*A*P-R*O*k;break;case"XZY":this._x=R*A*P-M*O*k,this._y=M*O*P-R*A*k,this._z=M*A*k+R*O*P,this._w=M*A*P+R*O*k;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+m)}return!1!==r&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const s=r/2,a=Math.sin(s);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,s=r[0],a=r[4],c=r[8],m=r[1],y=r[5],w=r[9],M=r[2],A=r[6],P=r[10],R=s+y+P;if(R>0){const O=.5/Math.sqrt(R+1);this._w=.25/O,this._x=(A-w)*O,this._y=(c-M)*O,this._z=(m-a)*O}else if(s>y&&s>P){const O=2*Math.sqrt(1+s-y-P);this._w=(A-w)/O,this._x=.25*O,this._y=(a+m)/O,this._z=(c+M)/O}else if(y>P){const O=2*Math.sqrt(1+y-s-P);this._w=(c-M)/O,this._x=(a+m)/O,this._y=.25*O,this._z=(w+A)/O}else{const O=2*Math.sqrt(1+P-s-y);this._w=(m-a)/O,this._x=(c+M)/O,this._y=(w+A)/O,this._z=.25*O}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let s=e.dot(r)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ks(this.dot(e),-1,1)))}rotateTowards(e,r){const s=this.angleTo(e);if(0===s)return this;const a=Math.min(1,r/s);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,r){return void 0!==r?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,r)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const s=e._x,a=e._y,c=e._z,m=e._w,y=r._x,w=r._y,M=r._z,A=r._w;return this._x=s*A+m*y+a*M-c*w,this._y=a*A+m*w+c*y-s*M,this._z=c*A+m*M+s*w-a*y,this._w=m*A-s*y-a*w-c*M,this._onChangeCallback(),this}slerp(e,r){if(0===r)return this;if(1===r)return this.copy(e);const s=this._x,a=this._y,c=this._z,m=this._w;let y=m*e._w+s*e._x+a*e._y+c*e._z;if(y<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,y=-y):this.copy(e),y>=1)return this._w=m,this._x=s,this._y=a,this._z=c,this;const w=1-y*y;if(w<=Number.EPSILON){const O=1-r;return this._w=O*m+r*this._w,this._x=O*s+r*this._x,this._y=O*a+r*this._y,this._z=O*c+r*this._z,this.normalize(),this._onChangeCallback(),this}const M=Math.sqrt(w),A=Math.atan2(M,y),P=Math.sin((1-r)*A)/M,R=Math.sin(r*A)/M;return this._w=m*P+this._w*R,this._x=s*P+this._x*R,this._y=a*P+this._y*R,this._z=c*P+this._z*R,this._onChangeCallback(),this}slerpQuaternions(e,r,s){this.copy(e).slerp(r,s)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Hi.prototype.isQuaternion=!0;class pe{constructor(e=0,r=0,s=0){this.x=e,this.y=r,this.z=s}set(e,r,s){return void 0===s&&(s=this.z),this.x=e,this.y=r,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,r){return void 0!==r?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,r)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e,r){return void 0!==r?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,r)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e,r){return void 0!==r?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,r)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ta.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(Ta.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,s=this.y,a=this.z,c=e.elements;return this.x=c[0]*r+c[3]*s+c[6]*a,this.y=c[1]*r+c[4]*s+c[7]*a,this.z=c[2]*r+c[5]*s+c[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,s=this.y,a=this.z,c=e.elements,m=1/(c[3]*r+c[7]*s+c[11]*a+c[15]);return this.x=(c[0]*r+c[4]*s+c[8]*a+c[12])*m,this.y=(c[1]*r+c[5]*s+c[9]*a+c[13])*m,this.z=(c[2]*r+c[6]*s+c[10]*a+c[14])*m,this}applyQuaternion(e){const r=this.x,s=this.y,a=this.z,c=e.x,m=e.y,y=e.z,w=e.w,M=w*r+m*a-y*s,A=w*s+y*r-c*a,P=w*a+c*s-m*r,R=-c*r-m*s-y*a;return this.x=M*w+R*-c+A*-y-P*-m,this.y=A*w+R*-m+P*-c-M*-y,this.z=P*w+R*-y+M*-m-A*-c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,s=this.y,a=this.z,c=e.elements;return this.x=c[0]*r+c[4]*s+c[8]*a,this.y=c[1]*r+c[5]*s+c[9]*a,this.z=c[2]*r+c[6]*s+c[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this}clampLength(e,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(r,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,s){return this.x=e.x+(r.x-e.x)*s,this.y=e.y+(r.y-e.y)*s,this.z=e.z+(r.z-e.z)*s,this}cross(e,r){return void 0!==r?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,r)):this.crossVectors(this,e)}crossVectors(e,r){const s=e.x,a=e.y,c=e.z,m=r.x,y=r.y,w=r.z;return this.x=a*w-c*y,this.y=c*m-s*w,this.z=s*y-a*m,this}projectOnVector(e){const r=e.lengthSq();if(0===r)return this.set(0,0,0);const s=e.dot(this)/r;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return Fl.copy(this).projectOnVector(e),this.sub(Fl)}reflect(e){return this.sub(Fl.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===r)return Math.PI/2;const s=this.dot(e)/r;return Math.acos(ks(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,s=this.y-e.y,a=this.z-e.z;return r*r+s*s+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,s){const a=Math.sin(r)*e;return this.x=a*Math.sin(s),this.y=Math.cos(r)*e,this.z=a*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,s){return this.x=e*Math.sin(r),this.y=s,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=s,this.z=a,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,4*r)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,3*r)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r,s){return void 0!==s&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}pe.prototype.isVector3=!0;const Fl=new pe,Ta=new Hi;class ts{constructor(e=new pe(1/0,1/0,1/0),r=new pe(-1/0,-1/0,-1/0)){this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){let r=1/0,s=1/0,a=1/0,c=-1/0,m=-1/0,y=-1/0;for(let w=0,M=e.length;w<M;w+=3){const A=e[w],P=e[w+1],R=e[w+2];A<r&&(r=A),P<s&&(s=P),R<a&&(a=R),A>c&&(c=A),P>m&&(m=P),R>y&&(y=R)}return this.min.set(r,s,a),this.max.set(c,m,y),this}setFromBufferAttribute(e){let r=1/0,s=1/0,a=1/0,c=-1/0,m=-1/0,y=-1/0;for(let w=0,M=e.count;w<M;w++){const A=e.getX(w),P=e.getY(w),R=e.getZ(w);A<r&&(r=A),P<s&&(s=P),R<a&&(a=R),A>c&&(c=A),P>m&&(m=P),R>y&&(y=R)}return this.min.set(r,s,a),this.max.set(c,m,y),this}setFromPoints(e){this.makeEmpty();for(let r=0,s=e.length;r<s;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const s=$a.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const r=e.geometry;void 0!==r&&(null===r.boundingBox&&r.computeBoundingBox(),Hn.copy(r.boundingBox),Hn.applyMatrix4(e.matrixWorld),this.union(Hn));const s=e.children;for(let a=0,c=s.length;a<c;a++)this.expandByObject(s[a]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,$a),$a.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,s;return e.normal.x>0?(r=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),r<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(di),Si.subVectors(this.max,di),rr.subVectors(e.a,di),dr.subVectors(e.b,di),Kr.subVectors(e.c,di),ns.subVectors(dr,rr),Wr.subVectors(Kr,dr),Gi.subVectors(rr,Kr);let r=[0,-ns.z,ns.y,0,-Wr.z,Wr.y,0,-Gi.z,Gi.y,ns.z,0,-ns.x,Wr.z,0,-Wr.x,Gi.z,0,-Gi.x,-ns.y,ns.x,0,-Wr.y,Wr.x,0,-Gi.y,Gi.x,0];return!(!Ca(r,rr,dr,Kr,Si)||(r=[1,0,0,0,1,0,0,0,1],!Ca(r,rr,dr,Kr,Si)))&&(Lc.crossVectors(ns,Wr),r=[Lc.x,Lc.y,Lc.z],Ca(r,rr,dr,Kr,Si))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return $a.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize($a).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Fo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}ts.prototype.isBox3=!0;const Fo=[new pe,new pe,new pe,new pe,new pe,new pe,new pe,new pe],$a=new pe,Hn=new ts,rr=new pe,dr=new pe,Kr=new pe,ns=new pe,Wr=new pe,Gi=new pe,di=new pe,Si=new pe,Lc=new pe,Un=new pe;function Ca(p,e,r,s,a){for(let c=0,m=p.length-3;c<=m;c+=3){Un.fromArray(p,c);const y=a.x*Math.abs(Un.x)+a.y*Math.abs(Un.y)+a.z*Math.abs(Un.z),w=e.dot(Un),M=r.dot(Un),A=s.dot(Un);if(Math.max(-Math.max(w,M,A),Math.min(w,M,A))>y)return!1}return!0}const nc=new ts,Eo=new pe,qa=new pe,cl=new pe;class Aa{constructor(e=new pe,r=-1){this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const s=this.center;void 0!==r?s.copy(r):nc.setFromPoints(e).getCenter(s);let a=0;for(let c=0,m=e.length;c<m;c++)a=Math.max(a,s.distanceToSquared(e[c]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const s=this.center.distanceToSquared(e);return r.copy(e),s>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){cl.subVectors(e,this.center);const r=cl.lengthSq();if(r>this.radius*this.radius){const s=Math.sqrt(r),a=.5*(s-this.radius);this.center.add(cl.multiplyScalar(a/s)),this.radius+=a}return this}union(e){return qa.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Eo.copy(e.center).add(qa)),this.expandByPoint(Eo.copy(e.center).sub(qa)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Mo=new pe,ul=new pe,hl=new pe,ji=new pe,wi=new pe,pc=new pe,Xo=new pe;class ao{constructor(e=new pe,r=new pe(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Mo)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const s=r.dot(this.direction);return s<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(s).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=Mo.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(Mo.copy(this.direction).multiplyScalar(r).add(this.origin),Mo.distanceToSquared(e))}distanceSqToSegment(e,r,s,a){ul.copy(e).add(r).multiplyScalar(.5),hl.copy(r).sub(e).normalize(),ji.copy(this.origin).sub(ul);const c=.5*e.distanceTo(r),m=-this.direction.dot(hl),y=ji.dot(this.direction),w=-ji.dot(hl),M=ji.lengthSq(),A=Math.abs(1-m*m);let P,R,O,k;if(A>0)if(P=m*w-y,R=m*y-w,k=c*A,P>=0)if(R>=-k)if(R<=k){const W=1/A;P*=W,R*=W,O=P*(P+m*R+2*y)+R*(m*P+R+2*w)+M}else R=c,P=Math.max(0,-(m*R+y)),O=-P*P+R*(R+2*w)+M;else R=-c,P=Math.max(0,-(m*R+y)),O=-P*P+R*(R+2*w)+M;else R<=-k?(P=Math.max(0,-(-m*c+y)),R=P>0?-c:Math.min(Math.max(-c,-w),c),O=-P*P+R*(R+2*w)+M):R<=k?(P=0,R=Math.min(Math.max(-c,-w),c),O=R*(R+2*w)+M):(P=Math.max(0,-(m*c+y)),R=P>0?c:Math.min(Math.max(-c,-w),c),O=-P*P+R*(R+2*w)+M);else R=m>0?-c:c,P=Math.max(0,-(m*R+y)),O=-P*P+R*(R+2*w)+M;return s&&s.copy(this.direction).multiplyScalar(P).add(this.origin),a&&a.copy(hl).multiplyScalar(R).add(ul),O}intersectSphere(e,r){Mo.subVectors(e.center,this.origin);const s=Mo.dot(this.direction),a=Mo.dot(Mo)-s*s,c=e.radius*e.radius;if(a>c)return null;const m=Math.sqrt(c-a),y=s-m,w=s+m;return y<0&&w<0?null:this.at(y<0?w:y,r)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(0===r)return 0===e.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/r;return s>=0?s:null}intersectPlane(e,r){const s=this.distanceToPlane(e);return null===s?null:this.at(s,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return 0===r||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let s,a,c,m,y,w;const M=1/this.direction.x,A=1/this.direction.y,P=1/this.direction.z,R=this.origin;return M>=0?(s=(e.min.x-R.x)*M,a=(e.max.x-R.x)*M):(s=(e.max.x-R.x)*M,a=(e.min.x-R.x)*M),A>=0?(c=(e.min.y-R.y)*A,m=(e.max.y-R.y)*A):(c=(e.max.y-R.y)*A,m=(e.min.y-R.y)*A),s>m||c>a||((c>s||s!=s)&&(s=c),(m<a||a!=a)&&(a=m),P>=0?(y=(e.min.z-R.z)*P,w=(e.max.z-R.z)*P):(y=(e.max.z-R.z)*P,w=(e.min.z-R.z)*P),s>w||y>a)||((y>s||s!=s)&&(s=y),(w<a||a!=a)&&(a=w),a<0)?null:this.at(s>=0?s:a,r)}intersectsBox(e){return null!==this.intersectBox(e,Mo)}intersectTriangle(e,r,s,a,c){wi.subVectors(r,e),pc.subVectors(s,e),Xo.crossVectors(wi,pc);let y,m=this.direction.dot(Xo);if(m>0){if(a)return null;y=1}else{if(!(m<0))return null;y=-1,m=-m}ji.subVectors(this.origin,e);const w=y*this.direction.dot(pc.crossVectors(ji,pc));if(w<0)return null;const M=y*this.direction.dot(wi.cross(ji));if(M<0||w+M>m)return null;const A=-y*ji.dot(Xo);return A<0?null:this.at(A/m,c)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class $n{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,r,s,a,c,m,y,w,M,A,P,R,O,k,W,Z){const V=this.elements;return V[0]=e,V[4]=r,V[8]=s,V[12]=a,V[1]=c,V[5]=m,V[9]=y,V[13]=w,V[2]=M,V[6]=A,V[10]=P,V[14]=R,V[3]=O,V[7]=k,V[11]=W,V[15]=Z,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new $n).fromArray(this.elements)}copy(e){const r=this.elements,s=e.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],this}copyPosition(e){const r=this.elements,s=e.elements;return r[12]=s[12],r[13]=s[13],r[14]=s[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,s){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,r,s){return this.set(e.x,r.x,s.x,0,e.y,r.y,s.y,0,e.z,r.z,s.z,0,0,0,0,1),this}extractRotation(e){const r=this.elements,s=e.elements,a=1/ma.setFromMatrixColumn(e,0).length(),c=1/ma.setFromMatrixColumn(e,1).length(),m=1/ma.setFromMatrixColumn(e,2).length();return r[0]=s[0]*a,r[1]=s[1]*a,r[2]=s[2]*a,r[3]=0,r[4]=s[4]*c,r[5]=s[5]*c,r[6]=s[6]*c,r[7]=0,r[8]=s[8]*m,r[9]=s[9]*m,r[10]=s[10]*m,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const r=this.elements,s=e.x,a=e.y,c=e.z,m=Math.cos(s),y=Math.sin(s),w=Math.cos(a),M=Math.sin(a),A=Math.cos(c),P=Math.sin(c);if("XYZ"===e.order){const R=m*A,O=m*P,k=y*A,W=y*P;r[0]=w*A,r[4]=-w*P,r[8]=M,r[1]=O+k*M,r[5]=R-W*M,r[9]=-y*w,r[2]=W-R*M,r[6]=k+O*M,r[10]=m*w}else if("YXZ"===e.order){const R=w*A,O=w*P,k=M*A,W=M*P;r[0]=R+W*y,r[4]=k*y-O,r[8]=m*M,r[1]=m*P,r[5]=m*A,r[9]=-y,r[2]=O*y-k,r[6]=W+R*y,r[10]=m*w}else if("ZXY"===e.order){const R=w*A,O=w*P,k=M*A,W=M*P;r[0]=R-W*y,r[4]=-m*P,r[8]=k+O*y,r[1]=O+k*y,r[5]=m*A,r[9]=W-R*y,r[2]=-m*M,r[6]=y,r[10]=m*w}else if("ZYX"===e.order){const R=m*A,O=m*P,k=y*A,W=y*P;r[0]=w*A,r[4]=k*M-O,r[8]=R*M+W,r[1]=w*P,r[5]=W*M+R,r[9]=O*M-k,r[2]=-M,r[6]=y*w,r[10]=m*w}else if("YZX"===e.order){const R=m*w,O=m*M,k=y*w,W=y*M;r[0]=w*A,r[4]=W-R*P,r[8]=k*P+O,r[1]=P,r[5]=m*A,r[9]=-y*A,r[2]=-M*A,r[6]=O*P+k,r[10]=R-W*P}else if("XZY"===e.order){const R=m*w,O=m*M,k=y*w,W=y*M;r[0]=w*A,r[4]=-P,r[8]=M*A,r[1]=R*P+W,r[5]=m*A,r[9]=O*P-k,r[2]=k*P-O,r[6]=y*A,r[10]=W*P+R}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Wh,e,Jc)}lookAt(e,r,s){const a=this.elements;return Gs.subVectors(e,r),0===Gs.lengthSq()&&(Gs.z=1),Gs.normalize(),Ks.crossVectors(s,Gs),0===Ks.lengthSq()&&(1===Math.abs(s.z)?Gs.x+=1e-4:Gs.z+=1e-4,Gs.normalize(),Ks.crossVectors(s,Gs)),Ks.normalize(),rc.crossVectors(Gs,Ks),a[0]=Ks.x,a[4]=rc.x,a[8]=Gs.x,a[1]=Ks.y,a[5]=rc.y,a[9]=Gs.y,a[2]=Ks.z,a[6]=rc.z,a[10]=Gs.z,this}multiply(e,r){return void 0!==r?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,r)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const s=e.elements,a=r.elements,c=this.elements,m=s[0],y=s[4],w=s[8],M=s[12],A=s[1],P=s[5],R=s[9],O=s[13],k=s[2],W=s[6],Z=s[10],V=s[14],B=s[3],ce=s[7],le=s[11],Ee=s[15],Fe=a[0],de=a[4],Qe=a[8],Pt=a[12],ct=a[1],Ke=a[5],hn=a[9],At=a[13],Ct=a[2],Nt=a[6],Dt=a[10],Gt=a[14],Pn=a[3],vr=a[7],Lr=a[11],nr=a[15];return c[0]=m*Fe+y*ct+w*Ct+M*Pn,c[4]=m*de+y*Ke+w*Nt+M*vr,c[8]=m*Qe+y*hn+w*Dt+M*Lr,c[12]=m*Pt+y*At+w*Gt+M*nr,c[1]=A*Fe+P*ct+R*Ct+O*Pn,c[5]=A*de+P*Ke+R*Nt+O*vr,c[9]=A*Qe+P*hn+R*Dt+O*Lr,c[13]=A*Pt+P*At+R*Gt+O*nr,c[2]=k*Fe+W*ct+Z*Ct+V*Pn,c[6]=k*de+W*Ke+Z*Nt+V*vr,c[10]=k*Qe+W*hn+Z*Dt+V*Lr,c[14]=k*Pt+W*At+Z*Gt+V*nr,c[3]=B*Fe+ce*ct+le*Ct+Ee*Pn,c[7]=B*de+ce*Ke+le*Nt+Ee*vr,c[11]=B*Qe+ce*hn+le*Dt+Ee*Lr,c[15]=B*Pt+ce*At+le*Gt+Ee*nr,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],s=e[4],a=e[8],c=e[12],m=e[1],y=e[5],w=e[9],M=e[13],A=e[2],P=e[6],R=e[10],O=e[14];return e[3]*(+c*w*P-a*M*P-c*y*R+s*M*R+a*y*O-s*w*O)+e[7]*(+r*w*O-r*M*R+c*m*R-a*m*O+a*M*A-c*w*A)+e[11]*(+r*M*P-r*y*O-c*m*P+s*m*O+c*y*A-s*M*A)+e[15]*(-a*y*A-r*w*P+r*y*R+a*m*P-s*m*R+s*w*A)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,s){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=r,a[14]=s),this}invert(){const e=this.elements,r=e[0],s=e[1],a=e[2],c=e[3],m=e[4],y=e[5],w=e[6],M=e[7],A=e[8],P=e[9],R=e[10],O=e[11],k=e[12],W=e[13],Z=e[14],V=e[15],B=P*Z*M-W*R*M+W*w*O-y*Z*O-P*w*V+y*R*V,ce=k*R*M-A*Z*M-k*w*O+m*Z*O+A*w*V-m*R*V,le=A*W*M-k*P*M+k*y*O-m*W*O-A*y*V+m*P*V,Ee=k*P*w-A*W*w-k*y*R+m*W*R+A*y*Z-m*P*Z,Fe=r*B+s*ce+a*le+c*Ee;if(0===Fe)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const de=1/Fe;return e[0]=B*de,e[1]=(W*R*c-P*Z*c-W*a*O+s*Z*O+P*a*V-s*R*V)*de,e[2]=(y*Z*c-W*w*c+W*a*M-s*Z*M-y*a*V+s*w*V)*de,e[3]=(P*w*c-y*R*c-P*a*M+s*R*M+y*a*O-s*w*O)*de,e[4]=ce*de,e[5]=(A*Z*c-k*R*c+k*a*O-r*Z*O-A*a*V+r*R*V)*de,e[6]=(k*w*c-m*Z*c-k*a*M+r*Z*M+m*a*V-r*w*V)*de,e[7]=(m*R*c-A*w*c+A*a*M-r*R*M-m*a*O+r*w*O)*de,e[8]=le*de,e[9]=(k*P*c-A*W*c-k*s*O+r*W*O+A*s*V-r*P*V)*de,e[10]=(m*W*c-k*y*c+k*s*M-r*W*M-m*s*V+r*y*V)*de,e[11]=(A*y*c-m*P*c-A*s*M+r*P*M+m*s*O-r*y*O)*de,e[12]=Ee*de,e[13]=(A*W*a-k*P*a+k*s*R-r*W*R-A*s*Z+r*P*Z)*de,e[14]=(k*y*a-m*W*a-k*s*w+r*W*w+m*s*Z-r*y*Z)*de,e[15]=(m*P*a-A*y*a+A*s*w-r*P*w-m*s*R+r*y*R)*de,this}scale(e){const r=this.elements,s=e.x,a=e.y,c=e.z;return r[0]*=s,r[4]*=a,r[8]*=c,r[1]*=s,r[5]*=a,r[9]*=c,r[2]*=s,r[6]*=a,r[10]*=c,r[3]*=s,r[7]*=a,r[11]*=c,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,r,s){return this.set(1,0,0,e,0,1,0,r,0,0,1,s,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,r,-s,0,0,s,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),s=Math.sin(e);return this.set(r,0,s,0,0,1,0,0,-s,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),s=Math.sin(e);return this.set(r,-s,0,0,s,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const s=Math.cos(r),a=Math.sin(r),c=1-s,m=e.x,y=e.y,w=e.z,M=c*m,A=c*y;return this.set(M*m+s,M*y-a*w,M*w+a*y,0,M*y+a*w,A*y+s,A*w-a*m,0,M*w-a*y,A*w+a*m,c*w*w+s,0,0,0,0,1),this}makeScale(e,r,s){return this.set(e,0,0,0,0,r,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,r,s,a,c,m){return this.set(1,s,c,0,e,1,m,0,r,a,1,0,0,0,0,1),this}compose(e,r,s){const a=this.elements,c=r._x,m=r._y,y=r._z,w=r._w,M=c+c,A=m+m,P=y+y,R=c*M,O=c*A,k=c*P,W=m*A,Z=m*P,V=y*P,B=w*M,ce=w*A,le=w*P,Ee=s.x,Fe=s.y,de=s.z;return a[0]=(1-(W+V))*Ee,a[1]=(O+le)*Ee,a[2]=(k-ce)*Ee,a[3]=0,a[4]=(O-le)*Fe,a[5]=(1-(R+V))*Fe,a[6]=(Z+B)*Fe,a[7]=0,a[8]=(k+ce)*de,a[9]=(Z-B)*de,a[10]=(1-(R+W))*de,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,r,s){const a=this.elements;let c=ma.set(a[0],a[1],a[2]).length();const m=ma.set(a[4],a[5],a[6]).length(),y=ma.set(a[8],a[9],a[10]).length();this.determinant()<0&&(c=-c),e.x=a[12],e.y=a[13],e.z=a[14],lo.copy(this);const M=1/c,A=1/m,P=1/y;return lo.elements[0]*=M,lo.elements[1]*=M,lo.elements[2]*=M,lo.elements[4]*=A,lo.elements[5]*=A,lo.elements[6]*=A,lo.elements[8]*=P,lo.elements[9]*=P,lo.elements[10]*=P,r.setFromRotationMatrix(lo),s.x=c,s.y=m,s.z=y,this}makePerspective(e,r,s,a,c,m){void 0===m&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const y=this.elements,M=2*c/(s-a),A=(r+e)/(r-e),P=(s+a)/(s-a),R=-(m+c)/(m-c),O=-2*m*c/(m-c);return y[0]=2*c/(r-e),y[4]=0,y[8]=A,y[12]=0,y[1]=0,y[5]=M,y[9]=P,y[13]=0,y[2]=0,y[6]=0,y[10]=R,y[14]=O,y[3]=0,y[7]=0,y[11]=-1,y[15]=0,this}makeOrthographic(e,r,s,a,c,m){const y=this.elements,w=1/(r-e),M=1/(s-a),A=1/(m-c),P=(r+e)*w,R=(s+a)*M,O=(m+c)*A;return y[0]=2*w,y[4]=0,y[8]=0,y[12]=-P,y[1]=0,y[5]=2*M,y[9]=0,y[13]=-R,y[2]=0,y[6]=0,y[10]=-2*A,y[14]=-O,y[3]=0,y[7]=0,y[11]=0,y[15]=1,this}equals(e){const r=this.elements,s=e.elements;for(let a=0;a<16;a++)if(r[a]!==s[a])return!1;return!0}fromArray(e,r=0){for(let s=0;s<16;s++)this.elements[s]=e[s+r];return this}toArray(e=[],r=0){const s=this.elements;return e[r]=s[0],e[r+1]=s[1],e[r+2]=s[2],e[r+3]=s[3],e[r+4]=s[4],e[r+5]=s[5],e[r+6]=s[6],e[r+7]=s[7],e[r+8]=s[8],e[r+9]=s[9],e[r+10]=s[10],e[r+11]=s[11],e[r+12]=s[12],e[r+13]=s[13],e[r+14]=s[14],e[r+15]=s[15],e}}$n.prototype.isMatrix4=!0;const ma=new pe,lo=new $n,Wh=new pe(0,0,0),Jc=new pe(1,1,1),Ks=new pe,rc=new pe,Gs=new pe,ic=new $n,eu=new Hi;class bl{constructor(e=0,r=0,s=0,a=bl.DefaultOrder){this._x=e,this._y=r,this._z=s,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,s,a=this._order){return this._x=e,this._y=r,this._z=s,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,s=!0){const a=e.elements,c=a[0],m=a[4],y=a[8],w=a[1],M=a[5],A=a[9],P=a[2],R=a[6],O=a[10];switch(r){case"XYZ":this._y=Math.asin(ks(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(-A,O),this._z=Math.atan2(-m,c)):(this._x=Math.atan2(R,M),this._z=0);break;case"YXZ":this._x=Math.asin(-ks(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(y,O),this._z=Math.atan2(w,M)):(this._y=Math.atan2(-P,c),this._z=0);break;case"ZXY":this._x=Math.asin(ks(R,-1,1)),Math.abs(R)<.9999999?(this._y=Math.atan2(-P,O),this._z=Math.atan2(-m,M)):(this._y=0,this._z=Math.atan2(w,c));break;case"ZYX":this._y=Math.asin(-ks(P,-1,1)),Math.abs(P)<.9999999?(this._x=Math.atan2(R,O),this._z=Math.atan2(w,c)):(this._x=0,this._z=Math.atan2(-m,M));break;case"YZX":this._z=Math.asin(ks(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(-A,M),this._y=Math.atan2(-P,c)):(this._x=0,this._y=Math.atan2(y,O));break;case"XZY":this._z=Math.asin(-ks(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(R,M),this._y=Math.atan2(y,c)):(this._x=Math.atan2(-A,O),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,!0===s&&this._onChangeCallback(),this}setFromQuaternion(e,r,s){return ic.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ic,r,s)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return eu.setFromEuler(this),this.setFromQuaternion(eu,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new pe(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}bl.prototype.isEuler=!0,bl.DefaultOrder="XYZ",bl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Ya{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let xl=0;const kl=new pe,sc=new Hi,Da=new $n,Ju=new pe,wl=new pe,eh=new pe,th=new Hi,nh=new pe(1,0,0),fl=new pe(0,1,0),Su=new pe(0,0,1),Bl={type:"added"},Oc={type:"removed"};class pi extends wo{constructor(){super(),Object.defineProperty(this,"id",{value:xl++}),this.uuid=er(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pi.DefaultUp.clone();const e=new pe,r=new bl,s=new Hi,a=new pe(1,1,1);r._onChange(function(){s.setFromEuler(r,!1)}),s._onChange(function(){r.setFromQuaternion(s,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new $n},normalMatrix:{value:new On}}),this.matrix=new $n,this.matrixWorld=new $n,this.matrixAutoUpdate=pi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ya,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return sc.setFromAxisAngle(e,r),this.quaternion.multiply(sc),this}rotateOnWorldAxis(e,r){return sc.setFromAxisAngle(e,r),this.quaternion.premultiply(sc),this}rotateX(e){return this.rotateOnAxis(nh,e)}rotateY(e){return this.rotateOnAxis(fl,e)}rotateZ(e){return this.rotateOnAxis(Su,e)}translateOnAxis(e,r){return kl.copy(e).applyQuaternion(this.quaternion),this.position.add(kl.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(nh,e)}translateY(e){return this.translateOnAxis(fl,e)}translateZ(e){return this.translateOnAxis(Su,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Da.copy(this.matrixWorld).invert())}lookAt(e,r,s){e.isVector3?Ju.copy(e):Ju.set(e,r,s);const a=this.parent;this.updateWorldMatrix(!0,!1),wl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Da.lookAt(wl,Ju,this.up):Da.lookAt(Ju,wl,this.up),this.quaternion.setFromRotationMatrix(Da),a&&(Da.extractRotation(a.matrixWorld),sc.setFromRotationMatrix(Da),this.quaternion.premultiply(sc.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Bl)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const r=this.children.indexOf(e);return-1!==r&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(Oc)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const r=this.children[e];r.parent=null,r.dispatchEvent(Oc)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Da.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Da.multiply(e.parent.matrixWorld)),e.applyMatrix4(Da),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let s=0,a=this.children.length;s<a;s++){const m=this.children[s].getObjectByProperty(e,r);if(void 0!==m)return m}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wl,e,eh),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wl,th,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].traverseVisible(e)}traverseAncestors(e){const r=this.parent;null!==r&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateMatrixWorld(e)}updateWorldMatrix(e,r){const s=this.parent;if(!0===e&&null!==s&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===r){const a=this.children;for(let c=0,m=a.length;c<m;c++)a[c].updateWorldMatrix(!1,!0)}}toJSON(e){const r=void 0===e||"string"==typeof e,s={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const a={};function c(y,w){return void 0===y[w.uuid]&&(y[w.uuid]=w.toJSON(e)),w.uuid}if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(a.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=c(e.geometries,this.geometry);const y=this.geometry.parameters;if(void 0!==y&&void 0!==y.shapes){const w=y.shapes;if(Array.isArray(w))for(let M=0,A=w.length;M<A;M++)c(e.shapes,w[M]);else c(e.shapes,w)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(c(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const y=[];for(let w=0,M=this.material.length;w<M;w++)y.push(c(e.materials,this.material[w]));a.material=y}else a.material=c(e.materials,this.material);if(this.children.length>0){a.children=[];for(let y=0;y<this.children.length;y++)a.children.push(this.children[y].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let y=0;y<this.animations.length;y++)a.animations.push(c(e.animations,this.animations[y]))}if(r){const y=m(e.geometries),w=m(e.materials),M=m(e.textures),A=m(e.images),P=m(e.shapes),R=m(e.skeletons),O=m(e.animations);y.length>0&&(s.geometries=y),w.length>0&&(s.materials=w),M.length>0&&(s.textures=M),A.length>0&&(s.images=A),P.length>0&&(s.shapes=P),R.length>0&&(s.skeletons=R),O.length>0&&(s.animations=O)}return s.object=a,s;function m(y){const w=[];for(const M in y){const A=y[M];delete A.metadata,w.push(A)}return w}}clone(e){return(new this.constructor).copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===r)for(let s=0;s<e.children.length;s++)this.add(e.children[s].clone());return this}}pi.DefaultUp=new pe(0,1,0),pi.DefaultMatrixAutoUpdate=!0,pi.prototype.isObject3D=!0;const Ra=new pe,Pa=new pe,mc=new pe,Xa=new pe,oc=new pe,L=new pe,C=new pe,u=new pe,_=new pe,T=new pe;class N{constructor(e=new pe,r=new pe,s=new pe){this.a=e,this.b=r,this.c=s}static getNormal(e,r,s,a){a.subVectors(s,r),Ra.subVectors(e,r),a.cross(Ra);const c=a.lengthSq();return c>0?a.multiplyScalar(1/Math.sqrt(c)):a.set(0,0,0)}static getBarycoord(e,r,s,a,c){Ra.subVectors(a,r),Pa.subVectors(s,r),mc.subVectors(e,r);const m=Ra.dot(Ra),y=Ra.dot(Pa),w=Ra.dot(mc),M=Pa.dot(Pa),A=Pa.dot(mc),P=m*M-y*y;if(0===P)return c.set(-2,-1,-1);const R=1/P,O=(M*w-y*A)*R,k=(m*A-y*w)*R;return c.set(1-O-k,k,O)}static containsPoint(e,r,s,a){return this.getBarycoord(e,r,s,a,Xa),Xa.x>=0&&Xa.y>=0&&Xa.x+Xa.y<=1}static getUV(e,r,s,a,c,m,y,w){return this.getBarycoord(e,r,s,a,Xa),w.set(0,0),w.addScaledVector(c,Xa.x),w.addScaledVector(m,Xa.y),w.addScaledVector(y,Xa.z),w}static isFrontFacing(e,r,s,a){return Ra.subVectors(s,r),Pa.subVectors(e,r),Ra.cross(Pa).dot(a)<0}set(e,r,s){return this.a.copy(e),this.b.copy(r),this.c.copy(s),this}setFromPointsAndIndices(e,r,s,a){return this.a.copy(e[r]),this.b.copy(e[s]),this.c.copy(e[a]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ra.subVectors(this.c,this.b),Pa.subVectors(this.a,this.b),.5*Ra.cross(Pa).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return N.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return N.getBarycoord(e,this.a,this.b,this.c,r)}getUV(e,r,s,a,c){return N.getUV(e,this.a,this.b,this.c,r,s,a,c)}containsPoint(e){return N.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return N.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const s=this.a,a=this.b,c=this.c;let m,y;oc.subVectors(a,s),L.subVectors(c,s),u.subVectors(e,s);const w=oc.dot(u),M=L.dot(u);if(w<=0&&M<=0)return r.copy(s);_.subVectors(e,a);const A=oc.dot(_),P=L.dot(_);if(A>=0&&P<=A)return r.copy(a);const R=w*P-A*M;if(R<=0&&w>=0&&A<=0)return m=w/(w-A),r.copy(s).addScaledVector(oc,m);T.subVectors(e,c);const O=oc.dot(T),k=L.dot(T);if(k>=0&&O<=k)return r.copy(c);const W=O*M-w*k;if(W<=0&&M>=0&&k<=0)return y=M/(M-k),r.copy(s).addScaledVector(L,y);const Z=A*k-O*P;if(Z<=0&&P-A>=0&&O-k>=0)return C.subVectors(c,a),y=(P-A)/(P-A+(O-k)),r.copy(a).addScaledVector(C,y);const V=1/(Z+W+R);return m=W*V,y=R*V,r.copy(s).addScaledVector(oc,m).addScaledVector(L,y)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let $=0;class X extends wo{constructor(){super(),Object.defineProperty(this,"id",{value:$++}),this.uuid=er(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.format=Is,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const r in e){const s=e[r];if(void 0===s){console.warn("THREE.Material: '"+r+"' parameter is undefined.");continue}if("shading"===r){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===s;continue}const a=this[r];void 0!==a?a&&a.isColor?a.set(s):a&&a.isVector3&&s&&s.isVector3?a.copy(s):this[r]=s:console.warn("THREE."+this.type+": '"+r+"' is not a property of this material.")}}toJSON(e){const r=void 0===e||"string"==typeof e;r&&(e={textures:{},images:{}});const s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function a(c){const m=[];for(const y in c){const w=c[y];delete w.metadata,m.push(w)}return m}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),this.sheenTint&&this.sheenTint.isColor&&(s.sheenTint=this.sheenTint.getHex()),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(s.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(s.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(s.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(s.blending=this.blending),0!==this.side&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),this.format!==Is&&(s.format=this.format),!0===this.transparent&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.colorWrite=this.colorWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(s.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=this.flatShading),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),r){const c=a(e.textures),m=a(e.images);c.length>0&&(s.textures=c),m.length>0&&(s.images=m)}return s}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const r=e.clippingPlanes;let s=null;if(null!==r){const a=r.length;s=new Array(a);for(let c=0;c!==a;++c)s[c]=r[c].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}X.prototype.isMaterial=!0;const ie={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ae={h:0,s:0,l:0},$e={h:0,s:0,l:0};function ot(p,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?p+6*(e-p)*r:r<.5?e:r<2/3?p+6*(e-p)*(2/3-r):p}function pt(p){return p<.04045?.0773993808*p:Math.pow(.9478672986*p+.0521327014,2.4)}function Xt(p){return p<.0031308?12.92*p:1.055*Math.pow(p,.41666)-.055}let vt=(()=>{class p{constructor(r,s,a){return void 0===s&&void 0===a?this.set(r):this.setRGB(r,s,a)}set(r){return r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r),this}setScalar(r){return this.r=r,this.g=r,this.b=r,this}setHex(r){return r=Math.floor(r),this.r=(r>>16&255)/255,this.g=(r>>8&255)/255,this.b=(255&r)/255,this}setRGB(r,s,a){return this.r=r,this.g=s,this.b=a,this}setHSL(r,s,a){if(r=function(p,e){return(p%e+e)%e}(r,1),s=ks(s,0,1),a=ks(a,0,1),0===s)this.r=this.g=this.b=a;else{const c=a<=.5?a*(1+s):a+s-a*s,m=2*a-c;this.r=ot(m,c,r+1/3),this.g=ot(m,c,r),this.b=ot(m,c,r-1/3)}return this}setStyle(r){function s(c){void 0!==c&&parseFloat(c)<1&&console.warn("THREE.Color: Alpha component of "+r+" will be ignored.")}let a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(r)){let c;const y=a[2];switch(a[1]){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,s(c[4]),this;if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,s(c[4]),this;break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y)){const w=parseFloat(c[1])/360,M=parseInt(c[2],10)/100,A=parseInt(c[3],10)/100;return s(c[4]),this.setHSL(w,M,A)}}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(r)){const c=a[1],m=c.length;if(3===m)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===m)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return r&&r.length>0?this.setColorName(r):this}setColorName(r){const s=ie[r.toLowerCase()];return void 0!==s?this.setHex(s):console.warn("THREE.Color: Unknown color "+r),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(r){return this.r=r.r,this.g=r.g,this.b=r.b,this}copyGammaToLinear(r,s=2){return this.r=Math.pow(r.r,s),this.g=Math.pow(r.g,s),this.b=Math.pow(r.b,s),this}copyLinearToGamma(r,s=2){const a=s>0?1/s:1;return this.r=Math.pow(r.r,a),this.g=Math.pow(r.g,a),this.b=Math.pow(r.b,a),this}convertGammaToLinear(r){return this.copyGammaToLinear(this,r),this}convertLinearToGamma(r){return this.copyLinearToGamma(this,r),this}copySRGBToLinear(r){return this.r=pt(r.r),this.g=pt(r.g),this.b=pt(r.b),this}copyLinearToSRGB(r){return this.r=Xt(r.r),this.g=Xt(r.g),this.b=Xt(r.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(r){const s=this.r,a=this.g,c=this.b,m=Math.max(s,a,c),y=Math.min(s,a,c);let w,M;const A=(y+m)/2;if(y===m)w=0,M=0;else{const P=m-y;switch(M=A<=.5?P/(m+y):P/(2-m-y),m){case s:w=(a-c)/P+(a<c?6:0);break;case a:w=(c-s)/P+2;break;case c:w=(s-a)/P+4}w/=6}return r.h=w,r.s=M,r.l=A,r}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(r,s,a){return this.getHSL(Ae),Ae.h+=r,Ae.s+=s,Ae.l+=a,this.setHSL(Ae.h,Ae.s,Ae.l),this}add(r){return this.r+=r.r,this.g+=r.g,this.b+=r.b,this}addColors(r,s){return this.r=r.r+s.r,this.g=r.g+s.g,this.b=r.b+s.b,this}addScalar(r){return this.r+=r,this.g+=r,this.b+=r,this}sub(r){return this.r=Math.max(0,this.r-r.r),this.g=Math.max(0,this.g-r.g),this.b=Math.max(0,this.b-r.b),this}multiply(r){return this.r*=r.r,this.g*=r.g,this.b*=r.b,this}multiplyScalar(r){return this.r*=r,this.g*=r,this.b*=r,this}lerp(r,s){return this.r+=(r.r-this.r)*s,this.g+=(r.g-this.g)*s,this.b+=(r.b-this.b)*s,this}lerpColors(r,s,a){return this.r=r.r+(s.r-r.r)*a,this.g=r.g+(s.g-r.g)*a,this.b=r.b+(s.b-r.b)*a,this}lerpHSL(r,s){this.getHSL(Ae),r.getHSL($e);const a=_l(Ae.h,$e.h,s),c=_l(Ae.s,$e.s,s),m=_l(Ae.l,$e.l,s);return this.setHSL(a,c,m),this}equals(r){return r.r===this.r&&r.g===this.g&&r.b===this.b}fromArray(r,s=0){return this.r=r[s],this.g=r[s+1],this.b=r[s+2],this}toArray(r=[],s=0){return r[s]=this.r,r[s+1]=this.g,r[s+2]=this.b,r}fromBufferAttribute(r,s){return this.r=r.getX(s),this.g=r.getY(s),this.b=r.getZ(s),!0===r.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return p.NAMES=ie,p})();vt.prototype.isColor=!0,vt.prototype.r=1,vt.prototype.g=1,vt.prototype.b=1;class Vn extends X{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Vn.prototype.isMeshBasicMaterial=!0;const tr=new pe,rs=new at;class Bt{constructor(e,r,s){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=r,this.count=void 0!==e?e.length/r:0,this.normalized=!0===s,this.usage=Gr,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,r,s){e*=this.itemSize,s*=r.itemSize;for(let a=0,c=this.itemSize;a<c;a++)this.array[e+a]=r.array[s+a];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const r=this.array;let s=0;for(let a=0,c=e.length;a<c;a++){let m=e[a];void 0===m&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",a),m=new vt),r[s++]=m.r,r[s++]=m.g,r[s++]=m.b}return this}copyVector2sArray(e){const r=this.array;let s=0;for(let a=0,c=e.length;a<c;a++){let m=e[a];void 0===m&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",a),m=new at),r[s++]=m.x,r[s++]=m.y}return this}copyVector3sArray(e){const r=this.array;let s=0;for(let a=0,c=e.length;a<c;a++){let m=e[a];void 0===m&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",a),m=new pe),r[s++]=m.x,r[s++]=m.y,r[s++]=m.z}return this}copyVector4sArray(e){const r=this.array;let s=0;for(let a=0,c=e.length;a<c;a++){let m=e[a];void 0===m&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",a),m=new ci),r[s++]=m.x,r[s++]=m.y,r[s++]=m.z,r[s++]=m.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let r=0,s=this.count;r<s;r++)rs.fromBufferAttribute(this,r),rs.applyMatrix3(e),this.setXY(r,rs.x,rs.y);else if(3===this.itemSize)for(let r=0,s=this.count;r<s;r++)tr.fromBufferAttribute(this,r),tr.applyMatrix3(e),this.setXYZ(r,tr.x,tr.y,tr.z);return this}applyMatrix4(e){for(let r=0,s=this.count;r<s;r++)tr.x=this.getX(r),tr.y=this.getY(r),tr.z=this.getZ(r),tr.applyMatrix4(e),this.setXYZ(r,tr.x,tr.y,tr.z);return this}applyNormalMatrix(e){for(let r=0,s=this.count;r<s;r++)tr.x=this.getX(r),tr.y=this.getY(r),tr.z=this.getZ(r),tr.applyNormalMatrix(e),this.setXYZ(r,tr.x,tr.y,tr.z);return this}transformDirection(e){for(let r=0,s=this.count;r<s;r++)tr.x=this.getX(r),tr.y=this.getY(r),tr.z=this.getZ(r),tr.transformDirection(e),this.setXYZ(r,tr.x,tr.y,tr.z);return this}set(e,r=0){return this.array.set(e,r),this}getX(e){return this.array[e*this.itemSize]}setX(e,r){return this.array[e*this.itemSize]=r,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,r){return this.array[e*this.itemSize+1]=r,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,r){return this.array[e*this.itemSize+2]=r,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,r){return this.array[e*this.itemSize+3]=r,this}setXY(e,r,s){return this.array[0+(e*=this.itemSize)]=r,this.array[e+1]=s,this}setXYZ(e,r,s,a){return this.array[0+(e*=this.itemSize)]=r,this.array[e+1]=s,this.array[e+2]=a,this}setXYZW(e,r,s,a,c){return this.array[0+(e*=this.itemSize)]=r,this.array[e+1]=s,this.array[e+2]=a,this.array[e+3]=c,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Gr&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}Bt.prototype.isBufferAttribute=!0;class Ei extends Bt{constructor(e,r,s){super(new Uint16Array(e),r,s)}}class So extends Bt{constructor(e,r,s){super(new Uint32Array(e),r,s)}}(class extends Bt{constructor(e,r,s){super(new Uint16Array(e),r,s)}}).prototype.isFloat16BufferAttribute=!0;class An extends Bt{constructor(e,r,s){super(new Float32Array(e),r,s)}}function _o(p){if(0===p.length)return-1/0;let e=p[0];for(let r=1,s=p.length;r<s;++r)p[r]>e&&(e=p[r]);return e}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let yt=0;const Dn=new $n,Ht=new pi,Rn=new pe,gn=new ts,lr=new ts,xn=new pe;class rn extends wo{constructor(){super(),Object.defineProperty(this,"id",{value:yt++}),this.uuid=er(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(_o(e)>65535?So:Ei)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,r,s=0){this.groups.push({start:e,count:r,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;void 0!==r&&(r.applyMatrix4(e),r.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const c=(new On).getNormalMatrix(e);s.applyNormalMatrix(c),s.needsUpdate=!0}const a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Dn.makeRotationFromQuaternion(e),this.applyMatrix4(Dn),this}rotateX(e){return Dn.makeRotationX(e),this.applyMatrix4(Dn),this}rotateY(e){return Dn.makeRotationY(e),this.applyMatrix4(Dn),this}rotateZ(e){return Dn.makeRotationZ(e),this.applyMatrix4(Dn),this}translate(e,r,s){return Dn.makeTranslation(e,r,s),this.applyMatrix4(Dn),this}scale(e,r,s){return Dn.makeScale(e,r,s),this.applyMatrix4(Dn),this}lookAt(e){return Ht.lookAt(e),Ht.updateMatrix(),this.applyMatrix4(Ht.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rn).negate(),this.translate(Rn.x,Rn.y,Rn.z),this}setFromPoints(e){const r=[];for(let s=0,a=e.length;s<a;s++){const c=e[s];r.push(c.x,c.y,c.z||0)}return this.setAttribute("position",new An(r,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ts);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new pe(-1/0,-1/0,-1/0),new pe(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),r)for(let s=0,a=r.length;s<a;s++)gn.setFromBufferAttribute(r[s]),this.morphTargetsRelative?(xn.addVectors(this.boundingBox.min,gn.min),this.boundingBox.expandByPoint(xn),xn.addVectors(this.boundingBox.max,gn.max),this.boundingBox.expandByPoint(xn)):(this.boundingBox.expandByPoint(gn.min),this.boundingBox.expandByPoint(gn.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Aa);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new pe,1/0);if(e){const s=this.boundingSphere.center;if(gn.setFromBufferAttribute(e),r)for(let c=0,m=r.length;c<m;c++)lr.setFromBufferAttribute(r[c]),this.morphTargetsRelative?(xn.addVectors(gn.min,lr.min),gn.expandByPoint(xn),xn.addVectors(gn.max,lr.max),gn.expandByPoint(xn)):(gn.expandByPoint(lr.min),gn.expandByPoint(lr.max));gn.getCenter(s);let a=0;for(let c=0,m=e.count;c<m;c++)xn.fromBufferAttribute(e,c),a=Math.max(a,s.distanceToSquared(xn));if(r)for(let c=0,m=r.length;c<m;c++){const y=r[c],w=this.morphTargetsRelative;for(let M=0,A=y.count;M<A;M++)xn.fromBufferAttribute(y,M),w&&(Rn.fromBufferAttribute(e,M),xn.add(Rn)),a=Math.max(a,s.distanceToSquared(xn))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(null===e||void 0===r.position||void 0===r.normal||void 0===r.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=e.array,a=r.position.array,c=r.normal.array,m=r.uv.array,y=a.length/3;void 0===r.tangent&&this.setAttribute("tangent",new Bt(new Float32Array(4*y),4));const w=r.tangent.array,M=[],A=[];for(let ct=0;ct<y;ct++)M[ct]=new pe,A[ct]=new pe;const P=new pe,R=new pe,O=new pe,k=new at,W=new at,Z=new at,V=new pe,B=new pe;function ce(ct,Ke,hn){P.fromArray(a,3*ct),R.fromArray(a,3*Ke),O.fromArray(a,3*hn),k.fromArray(m,2*ct),W.fromArray(m,2*Ke),Z.fromArray(m,2*hn),R.sub(P),O.sub(P),W.sub(k),Z.sub(k);const At=1/(W.x*Z.y-Z.x*W.y);!isFinite(At)||(V.copy(R).multiplyScalar(Z.y).addScaledVector(O,-W.y).multiplyScalar(At),B.copy(O).multiplyScalar(W.x).addScaledVector(R,-Z.x).multiplyScalar(At),M[ct].add(V),M[Ke].add(V),M[hn].add(V),A[ct].add(B),A[Ke].add(B),A[hn].add(B))}let le=this.groups;0===le.length&&(le=[{start:0,count:s.length}]);for(let ct=0,Ke=le.length;ct<Ke;++ct){const hn=le[ct],At=hn.start;for(let Nt=At,Dt=At+hn.count;Nt<Dt;Nt+=3)ce(s[Nt+0],s[Nt+1],s[Nt+2])}const Ee=new pe,Fe=new pe,de=new pe,Qe=new pe;function Pt(ct){de.fromArray(c,3*ct),Qe.copy(de);const Ke=M[ct];Ee.copy(Ke),Ee.sub(de.multiplyScalar(de.dot(Ke))).normalize(),Fe.crossVectors(Qe,Ke);const At=Fe.dot(A[ct])<0?-1:1;w[4*ct]=Ee.x,w[4*ct+1]=Ee.y,w[4*ct+2]=Ee.z,w[4*ct+3]=At}for(let ct=0,Ke=le.length;ct<Ke;++ct){const hn=le[ct],At=hn.start;for(let Nt=At,Dt=At+hn.count;Nt<Dt;Nt+=3)Pt(s[Nt+0]),Pt(s[Nt+1]),Pt(s[Nt+2])}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(void 0!==r){let s=this.getAttribute("normal");if(void 0===s)s=new Bt(new Float32Array(3*r.count),3),this.setAttribute("normal",s);else for(let R=0,O=s.count;R<O;R++)s.setXYZ(R,0,0,0);const a=new pe,c=new pe,m=new pe,y=new pe,w=new pe,M=new pe,A=new pe,P=new pe;if(e)for(let R=0,O=e.count;R<O;R+=3){const k=e.getX(R+0),W=e.getX(R+1),Z=e.getX(R+2);a.fromBufferAttribute(r,k),c.fromBufferAttribute(r,W),m.fromBufferAttribute(r,Z),A.subVectors(m,c),P.subVectors(a,c),A.cross(P),y.fromBufferAttribute(s,k),w.fromBufferAttribute(s,W),M.fromBufferAttribute(s,Z),y.add(A),w.add(A),M.add(A),s.setXYZ(k,y.x,y.y,y.z),s.setXYZ(W,w.x,w.y,w.z),s.setXYZ(Z,M.x,M.y,M.z)}else for(let R=0,O=r.count;R<O;R+=3)a.fromBufferAttribute(r,R+0),c.fromBufferAttribute(r,R+1),m.fromBufferAttribute(r,R+2),A.subVectors(m,c),P.subVectors(a,c),A.cross(P),s.setXYZ(R+0,A.x,A.y,A.z),s.setXYZ(R+1,A.x,A.y,A.z),s.setXYZ(R+2,A.x,A.y,A.z);this.normalizeNormals(),s.needsUpdate=!0}}merge(e,r){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===r&&(r=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const s=this.attributes;for(const a in s){if(void 0===e.attributes[a])continue;const m=s[a].array,y=e.attributes[a],w=y.array,M=y.itemSize*r,A=Math.min(w.length,m.length-M);for(let P=0,R=M;P<A;P++,R++)m[R]=w[P]}return this}normalizeNormals(){const e=this.attributes.normal;for(let r=0,s=e.count;r<s;r++)xn.fromBufferAttribute(e,r),xn.normalize(),e.setXYZ(r,xn.x,xn.y,xn.z)}toNonIndexed(){function e(y,w){const M=y.array,A=y.itemSize,P=y.normalized,R=new M.constructor(w.length*A);let O=0,k=0;for(let W=0,Z=w.length;W<Z;W++){O=y.isInterleavedBufferAttribute?w[W]*y.data.stride+y.offset:w[W]*A;for(let V=0;V<A;V++)R[k++]=M[O++]}return new Bt(R,A,P)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new rn,s=this.index.array,a=this.attributes;for(const y in a){const M=e(a[y],s);r.setAttribute(y,M)}const c=this.morphAttributes;for(const y in c){const w=[],M=c[y];for(let A=0,P=M.length;A<P;A++){const O=e(M[A],s);w.push(O)}r.morphAttributes[y]=w}r.morphTargetsRelative=this.morphTargetsRelative;const m=this.groups;for(let y=0,w=m.length;y<w;y++){const M=m[y];r.addGroup(M.start,M.count,M.materialIndex)}return r}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const w=this.parameters;for(const M in w)void 0!==w[M]&&(e[M]=w[M]);return e}e.data={attributes:{}};const r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const s=this.attributes;for(const w in s)e.data.attributes[w]=s[w].toJSON(e.data);const a={};let c=!1;for(const w in this.morphAttributes){const M=this.morphAttributes[w],A=[];for(let P=0,R=M.length;P<R;P++)A.push(M[P].toJSON(e.data));A.length>0&&(a[w]=A,c=!0)}c&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const m=this.groups;m.length>0&&(e.data.groups=JSON.parse(JSON.stringify(m)));const y=this.boundingSphere;return null!==y&&(e.data.boundingSphere={center:y.center.toArray(),radius:y.radius}),e}clone(){return(new rn).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const s=e.index;null!==s&&this.setIndex(s.clone(r));const a=e.attributes;for(const M in a)this.setAttribute(M,a[M].clone(r));const c=e.morphAttributes;for(const M in c){const A=[],P=c[M];for(let R=0,O=P.length;R<O;R++)A.push(P[R].clone(r));this.morphAttributes[M]=A}this.morphTargetsRelative=e.morphTargetsRelative;const m=e.groups;for(let M=0,A=m.length;M<A;M++){const P=m[M];this.addGroup(P.start,P.count,P.materialIndex)}const y=e.boundingBox;null!==y&&(this.boundingBox=y.clone());const w=e.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}rn.prototype.isBufferGeometry=!0;const Br=new $n,Wi=new ao,Bi=new Aa,is=new pe,as=new pe,ei=new pe,Js=new pe,Ka=new pe,gc=new pe,Tu=new pe,Cu=new pe,dl=new pe,fs=new at,yc=new at,Vl=new at,ti=new pe,js=new pe;class Ws extends pi{constructor(e=new rn,r=new Vn){super(),this.type="Mesh",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const r=e.morphAttributes,s=Object.keys(r);if(s.length>0){const a=r[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,m=a.length;c<m;c++){const y=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=c}}}}else{const r=e.morphTargets;void 0!==r&&r.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,r){const s=this.geometry,a=this.material,c=this.matrixWorld;if(void 0===a||(null===s.boundingSphere&&s.computeBoundingSphere(),Bi.copy(s.boundingSphere),Bi.applyMatrix4(c),!1===e.ray.intersectsSphere(Bi))||(Br.copy(c).invert(),Wi.copy(e.ray).applyMatrix4(Br),null!==s.boundingBox&&!1===Wi.intersectsBox(s.boundingBox)))return;let m;if(s.isBufferGeometry){const y=s.index,w=s.attributes.position,M=s.morphAttributes.position,A=s.morphTargetsRelative,P=s.attributes.uv,R=s.attributes.uv2,O=s.groups,k=s.drawRange;if(null!==y)if(Array.isArray(a))for(let W=0,Z=O.length;W<Z;W++){const V=O[W],B=a[V.materialIndex];for(let Ee=Math.max(V.start,k.start),Fe=Math.min(V.start+V.count,k.start+k.count);Ee<Fe;Ee+=3){const de=y.getX(Ee),Qe=y.getX(Ee+1),Pt=y.getX(Ee+2);m=Pf(this,B,e,Wi,w,M,A,P,R,de,Qe,Pt),m&&(m.faceIndex=Math.floor(Ee/3),m.face.materialIndex=V.materialIndex,r.push(m))}}else for(let V=Math.max(0,k.start),B=Math.min(y.count,k.start+k.count);V<B;V+=3){const ce=y.getX(V),le=y.getX(V+1),Ee=y.getX(V+2);m=Pf(this,a,e,Wi,w,M,A,P,R,ce,le,Ee),m&&(m.faceIndex=Math.floor(V/3),r.push(m))}else if(void 0!==w)if(Array.isArray(a))for(let W=0,Z=O.length;W<Z;W++){const V=O[W],B=a[V.materialIndex];for(let Ee=Math.max(V.start,k.start),Fe=Math.min(V.start+V.count,k.start+k.count);Ee<Fe;Ee+=3)m=Pf(this,B,e,Wi,w,M,A,P,R,Ee,Ee+1,Ee+2),m&&(m.faceIndex=Math.floor(Ee/3),m.face.materialIndex=V.materialIndex,r.push(m))}else for(let V=Math.max(0,k.start),B=Math.min(w.count,k.start+k.count);V<B;V+=3)m=Pf(this,a,e,Wi,w,M,A,P,R,V,V+1,V+2),m&&(m.faceIndex=Math.floor(V/3),r.push(m))}else s.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Pf(p,e,r,s,a,c,m,y,w,M,A,P){is.fromBufferAttribute(a,M),as.fromBufferAttribute(a,A),ei.fromBufferAttribute(a,P);const R=p.morphTargetInfluences;if(c&&R){Tu.set(0,0,0),Cu.set(0,0,0),dl.set(0,0,0);for(let k=0,W=c.length;k<W;k++){const Z=R[k],V=c[k];0!==Z&&(Js.fromBufferAttribute(V,M),Ka.fromBufferAttribute(V,A),gc.fromBufferAttribute(V,P),m?(Tu.addScaledVector(Js,Z),Cu.addScaledVector(Ka,Z),dl.addScaledVector(gc,Z)):(Tu.addScaledVector(Js.sub(is),Z),Cu.addScaledVector(Ka.sub(as),Z),dl.addScaledVector(gc.sub(ei),Z)))}is.add(Tu),as.add(Cu),ei.add(dl)}p.isSkinnedMesh&&(p.boneTransform(M,is),p.boneTransform(A,as),p.boneTransform(P,ei));const O=function(p,e,r,s,a,c,m,y){let w;if(w=e.side===He?s.intersectTriangle(m,c,a,!0,y):s.intersectTriangle(a,c,m,2!==e.side,y),null===w)return null;js.copy(y),js.applyMatrix4(p.matrixWorld);const M=r.ray.origin.distanceTo(js);return M<r.near||M>r.far?null:{distance:M,point:js.clone(),object:p}}(p,e,r,s,is,as,ei,ti);if(O){y&&(fs.fromBufferAttribute(y,M),yc.fromBufferAttribute(y,A),Vl.fromBufferAttribute(y,P),O.uv=N.getUV(ti,is,as,ei,fs,yc,Vl,new at)),w&&(fs.fromBufferAttribute(w,M),yc.fromBufferAttribute(w,A),Vl.fromBufferAttribute(w,P),O.uv2=N.getUV(ti,is,as,ei,fs,yc,Vl,new at));const k={a:M,b:A,c:P,normal:new pe,materialIndex:0};N.getNormal(is,as,ei,k.normal),O.face=k}return O}Ws.prototype.isMesh=!0;class Au extends rn{constructor(e=1,r=1,s=1,a=1,c=1,m=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:s,widthSegments:a,heightSegments:c,depthSegments:m};const y=this;a=Math.floor(a),c=Math.floor(c),m=Math.floor(m);const w=[],M=[],A=[],P=[];let R=0,O=0;function k(W,Z,V,B,ce,le,Ee,Fe,de,Qe,Pt){const ct=le/de,Ke=Ee/Qe,hn=le/2,At=Ee/2,Ct=Fe/2,Nt=de+1,Dt=Qe+1;let Gt=0,Pn=0;const vr=new pe;for(let Lr=0;Lr<Dt;Lr++){const nr=Lr*Ke-At;for(let Qr=0;Qr<Nt;Qr++)vr[W]=(Qr*ct-hn)*B,vr[Z]=nr*ce,vr[V]=Ct,M.push(vr.x,vr.y,vr.z),vr[W]=0,vr[Z]=0,vr[V]=Fe>0?1:-1,A.push(vr.x,vr.y,vr.z),P.push(Qr/de),P.push(1-Lr/Qe),Gt+=1}for(let Lr=0;Lr<Qe;Lr++)for(let nr=0;nr<de;nr++){const on=R+nr+Nt*(Lr+1),Kn=R+(nr+1)+Nt*(Lr+1),hr=R+(nr+1)+Nt*Lr;w.push(R+nr+Nt*Lr,on,hr),w.push(on,Kn,hr),Pn+=6}y.addGroup(O,Pn,Pt),O+=Pn,R+=Gt}k("z","y","x",-1,-1,s,r,e,m,c,0),k("z","y","x",1,-1,s,r,-e,m,c,1),k("x","z","y",1,1,e,s,r,a,m,2),k("x","z","y",1,-1,e,s,-r,a,m,3),k("x","y","z",1,-1,e,r,s,a,c,4),k("x","y","z",-1,-1,e,r,-s,a,c,5),this.setIndex(w),this.setAttribute("position",new An(M,3)),this.setAttribute("normal",new An(A,3)),this.setAttribute("uv",new An(P,2))}static fromJSON(e){return new Au(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function rh(p){const e={};for(const r in p){e[r]={};for(const s in p[r]){const a=p[r][s];e[r][s]=a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.clone():Array.isArray(a)?a.slice():a}}return e}function ko(p){const e={};for(let r=0;r<p.length;r++){const s=rh(p[r]);for(const a in s)e[a]=s[a]}return e}const Du={clone:rh,merge:ko};class El extends X{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rh(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const a in this.uniforms){const m=this.uniforms[a].value;r.uniforms[a]=m&&m.isTexture?{type:"t",value:m.toJSON(e).uuid}:m&&m.isColor?{type:"c",value:m.getHex()}:m&&m.isVector2?{type:"v2",value:m.toArray()}:m&&m.isVector3?{type:"v3",value:m.toArray()}:m&&m.isVector4?{type:"v4",value:m.toArray()}:m&&m.isMatrix3?{type:"m3",value:m.toArray()}:m&&m.isMatrix4?{type:"m4",value:m.toArray()}:{value:m}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader;const s={};for(const a in this.extensions)!0===this.extensions[a]&&(s[a]=!0);return Object.keys(s).length>0&&(r.extensions=s),r}}El.prototype.isShaderMaterial=!0;class sh extends pi{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new $n,this.projectionMatrix=new $n,this.projectionMatrixInverse=new $n}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(-r[8],-r[9],-r[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}sh.prototype.isCamera=!0;class co extends sh{constructor(e=50,r=1,s=.1,a=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=a,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=2*Wa*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*qo*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Wa*Math.atan(Math.tan(.5*qo*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,r,s,a,c,m){this.aspect=e/r,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=a,this.view.width=c,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(.5*qo*this.fov)/this.zoom,s=2*r,a=this.aspect*s,c=-.5*a;const m=this.view;if(null!==this.view&&this.view.enabled){const w=m.fullWidth,M=m.fullHeight;c+=m.offsetX*a/w,r-=m.offsetY*s/M,a*=m.width/w,s*=m.height/M}const y=this.filmOffset;0!==y&&(c+=e*y/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+a,r,r-s,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,null!==this.view&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}co.prototype.isPerspectiveCamera=!0;class Dd extends pi{constructor(e,r,s){if(super(),this.type="CubeCamera",!0!==s.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=s;const a=new co(90,1,e,r);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new pe(1,0,0)),this.add(a);const c=new co(90,1,e,r);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new pe(-1,0,0)),this.add(c);const m=new co(90,1,e,r);m.layers=this.layers,m.up.set(0,0,1),m.lookAt(new pe(0,1,0)),this.add(m);const y=new co(90,1,e,r);y.layers=this.layers,y.up.set(0,0,-1),y.lookAt(new pe(0,-1,0)),this.add(y);const w=new co(90,1,e,r);w.layers=this.layers,w.up.set(0,-1,0),w.lookAt(new pe(0,0,1)),this.add(w);const M=new co(90,1,e,r);M.layers=this.layers,M.up.set(0,-1,0),M.lookAt(new pe(0,0,-1)),this.add(M)}update(e,r){null===this.parent&&this.updateMatrixWorld();const s=this.renderTarget,[a,c,m,y,w,M]=this.children,A=e.xr.enabled,P=e.getRenderTarget();e.xr.enabled=!1;const R=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0),e.render(r,a),e.setRenderTarget(s,1),e.render(r,c),e.setRenderTarget(s,2),e.render(r,m),e.setRenderTarget(s,3),e.render(r,y),e.setRenderTarget(s,4),e.render(r,w),s.texture.generateMipmaps=R,e.setRenderTarget(s,5),e.render(r,M),e.setRenderTarget(P),e.xr.enabled=A}}class Nc extends Li{constructor(e,r,s,a,c,m,y,w,M,A){super(e=void 0!==e?e:[],r=void 0!==r?r:301,s,a,c,m,y=void 0!==y?y:cs,w,M,A),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Nc.prototype.isCubeTexture=!0;class Rd extends Cs{constructor(e,r,s){Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=s),super(e,e,r),this.texture=new Nc(void 0,(r=r||{}).mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Jn,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.format=Is,this.texture.encoding=r.encoding,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Au(5,5,5),c=new El({name:"CubemapFromEquirect",uniforms:rh(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:He,blending:0});c.uniforms.tEquirect.value=r;const m=new Ws(a,c),y=r.minFilter;return 1008===r.minFilter&&(r.minFilter=Jn),new Dd(1,10,this).update(e,m),r.minFilter=y,m.geometry.dispose(),m.material.dispose(),this}clear(e,r,s,a){const c=e.getRenderTarget();for(let m=0;m<6;m++)e.setRenderTarget(this,m),e.clear(r,s,a);e.setRenderTarget(c)}}Rd.prototype.isWebGLCubeRenderTarget=!0;const lh=new pe,Ru=new pe,tu=new On;class vc{constructor(e=new pe(1,0,0),r=0){this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,s,a){return this.normal.set(e,r,s),this.constant=a,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,s){const a=lh.subVectors(s,r).cross(Ru.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,r){const s=e.delta(lh),a=this.normal.dot(s);if(0===a)return 0===this.distanceToPoint(e.start)?r.copy(e.start):null;const c=-(e.start.dot(this.normal)+this.constant)/a;return c<0||c>1?null:r.copy(s).multiplyScalar(c).add(e.start)}intersectsLine(e){const r=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return r<0&&s>0||s<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const s=r||tu.getNormalMatrix(e),a=this.coplanarPoint(lh).applyMatrix4(e),c=this.normal.applyMatrix3(s).normalize();return this.constant=-a.dot(c),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}vc.prototype.isPlane=!0;const $s=new Aa,$h=new pe;class Pd{constructor(e=new vc,r=new vc,s=new vc,a=new vc,c=new vc,m=new vc){this.planes=[e,r,s,a,c,m]}set(e,r,s,a,c,m){const y=this.planes;return y[0].copy(e),y[1].copy(r),y[2].copy(s),y[3].copy(a),y[4].copy(c),y[5].copy(m),this}copy(e){const r=this.planes;for(let s=0;s<6;s++)r[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e){const r=this.planes,s=e.elements,a=s[0],c=s[1],m=s[2],y=s[3],w=s[4],M=s[5],A=s[6],P=s[7],R=s[8],O=s[9],k=s[10],W=s[11],Z=s[12],V=s[13],B=s[14],ce=s[15];return r[0].setComponents(y-a,P-w,W-R,ce-Z).normalize(),r[1].setComponents(y+a,P+w,W+R,ce+Z).normalize(),r[2].setComponents(y+c,P+M,W+O,ce+V).normalize(),r[3].setComponents(y-c,P-M,W-O,ce-V).normalize(),r[4].setComponents(y-m,P-A,W-k,ce-B).normalize(),r[5].setComponents(y+m,P+A,W+k,ce+B).normalize(),this}intersectsObject(e){const r=e.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),$s.copy(r.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($s)}intersectsSprite(e){return $s.center.set(0,0,0),$s.radius=.7071067811865476,$s.applyMatrix4(e.matrixWorld),this.intersectsSphere($s)}intersectsSphere(e){const r=this.planes,s=e.center,a=-e.radius;for(let c=0;c<6;c++)if(r[c].distanceToPoint(s)<a)return!1;return!0}intersectsBox(e){const r=this.planes;for(let s=0;s<6;s++){const a=r[s];if($h.x=a.normal.x>0?e.max.x:e.min.x,$h.y=a.normal.y>0?e.max.y:e.min.y,$h.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint($h)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let s=0;s<6;s++)if(r[s].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function nu(){let p=null,e=!1,r=null,s=null;function a(c,m){r(c,m),s=p.requestAnimationFrame(a)}return{start:function(){!0!==e&&null!==r&&(s=p.requestAnimationFrame(a),e=!0)},stop:function(){p.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(c){r=c},setContext:function(c){p=c}}}function qh(p,e){const r=e.isWebGL2,s=new WeakMap;return{get:function(M){return M.isInterleavedBufferAttribute&&(M=M.data),s.get(M)},remove:function(M){M.isInterleavedBufferAttribute&&(M=M.data);const A=s.get(M);A&&(p.deleteBuffer(A.buffer),s.delete(M))},update:function(M,A){if(M.isGLBufferAttribute){const R=s.get(M);return void((!R||R.version<M.version)&&s.set(M,{buffer:M.buffer,type:M.type,bytesPerElement:M.elementSize,version:M.version}))}M.isInterleavedBufferAttribute&&(M=M.data);const P=s.get(M);void 0===P?s.set(M,function(M,A){const P=M.array,R=M.usage,O=p.createBuffer();p.bindBuffer(A,O),p.bufferData(A,P,R),M.onUploadCallback();let k=5126;return P instanceof Float32Array?k=5126:P instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):P instanceof Uint16Array?M.isFloat16BufferAttribute?r?k=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):k=5123:P instanceof Int16Array?k=5122:P instanceof Uint32Array?k=5125:P instanceof Int32Array?k=5124:P instanceof Int8Array?k=5120:(P instanceof Uint8Array||P instanceof Uint8ClampedArray)&&(k=5121),{buffer:O,type:k,bytesPerElement:P.BYTES_PER_ELEMENT,version:M.version}}(M,A)):P.version<M.version&&(function(M,A,P){const R=A.array,O=A.updateRange;p.bindBuffer(P,M),-1===O.count?p.bufferSubData(P,0,R):(r?p.bufferSubData(P,O.offset*R.BYTES_PER_ELEMENT,R,O.offset,O.count):p.bufferSubData(P,O.offset*R.BYTES_PER_ELEMENT,R.subarray(O.offset,O.offset+O.count)),O.count=-1)}(P.buffer,M,A),P.version=M.version)}}}class Yh extends rn{constructor(e=1,r=1,s=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:s,heightSegments:a};const c=e/2,m=r/2,y=Math.floor(s),w=Math.floor(a),M=y+1,A=w+1,P=e/y,R=r/w,O=[],k=[],W=[],Z=[];for(let V=0;V<A;V++){const B=V*R-m;for(let ce=0;ce<M;ce++)k.push(ce*P-c,-B,0),W.push(0,0,1),Z.push(ce/y),Z.push(1-V/w)}for(let V=0;V<w;V++)for(let B=0;B<y;B++){const le=B+M*(V+1),Ee=B+1+M*(V+1),Fe=B+1+M*V;O.push(B+M*V,le,Fe),O.push(le,Ee,Fe)}this.setIndex(O),this.setAttribute("position",new An(k,3)),this.setAttribute("normal",new An(W,3)),this.setAttribute("uv",new An(Z,2))}static fromJSON(e){return new Yh(e.width,e.height,e.widthSegments,e.heightSegments)}}const Nn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotVH = saturate( dot( geometry.viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float NoH ) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float NoV, float NoL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( NoL + NoV - NoL * NoV ) ) );\n}\nvec3 BRDF_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in GeometricContext geometry ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( material.roughness, directLight.direction, geometry, material.sheenTint );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = transmission.a;\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Qt={common:{diffuse:{value:new vt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new On},uv2Transform:{value:new On},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new at(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new On}},sprite:{diffuse:{value:new vt(16777215)},opacity:{value:1},center:{value:new at(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new On}}},ii={basic:{uniforms:ko([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.fog]),vertexShader:Nn.meshbasic_vert,fragmentShader:Nn.meshbasic_frag},lambert:{uniforms:ko([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.fog,Qt.lights,{emissive:{value:new vt(0)}}]),vertexShader:Nn.meshlambert_vert,fragmentShader:Nn.meshlambert_frag},phong:{uniforms:ko([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,Qt.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:Nn.meshphong_vert,fragmentShader:Nn.meshphong_frag},standard:{uniforms:ko([Qt.common,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.roughnessmap,Qt.metalnessmap,Qt.fog,Qt.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nn.meshphysical_vert,fragmentShader:Nn.meshphysical_frag},toon:{uniforms:ko([Qt.common,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.gradientmap,Qt.fog,Qt.lights,{emissive:{value:new vt(0)}}]),vertexShader:Nn.meshtoon_vert,fragmentShader:Nn.meshtoon_frag},matcap:{uniforms:ko([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,{matcap:{value:null}}]),vertexShader:Nn.meshmatcap_vert,fragmentShader:Nn.meshmatcap_frag},points:{uniforms:ko([Qt.points,Qt.fog]),vertexShader:Nn.points_vert,fragmentShader:Nn.points_frag},dashed:{uniforms:ko([Qt.common,Qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nn.linedashed_vert,fragmentShader:Nn.linedashed_frag},depth:{uniforms:ko([Qt.common,Qt.displacementmap]),vertexShader:Nn.depth_vert,fragmentShader:Nn.depth_frag},normal:{uniforms:ko([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,{opacity:{value:1}}]),vertexShader:Nn.meshnormal_vert,fragmentShader:Nn.meshnormal_frag},sprite:{uniforms:ko([Qt.sprite,Qt.fog]),vertexShader:Nn.sprite_vert,fragmentShader:Nn.sprite_frag},background:{uniforms:{uvTransform:{value:new On},t2D:{value:null}},vertexShader:Nn.background_vert,fragmentShader:Nn.background_frag},cube:{uniforms:ko([Qt.envmap,{opacity:{value:1}}]),vertexShader:Nn.cube_vert,fragmentShader:Nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nn.equirect_vert,fragmentShader:Nn.equirect_frag},distanceRGBA:{uniforms:ko([Qt.common,Qt.displacementmap,{referencePosition:{value:new pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nn.distanceRGBA_vert,fragmentShader:Nn.distanceRGBA_frag},shadow:{uniforms:ko([Qt.lights,Qt.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:Nn.shadow_vert,fragmentShader:Nn.shadow_frag}};function ms(p,e,r,s,a){const c=new vt(0);let y,w,m=0,M=null,A=0,P=null;function O(k,W){r.buffers.color.setClear(k.r,k.g,k.b,W,a)}return{getClearColor:function(){return c},setClearColor:function(k,W=1){c.set(k),m=W,O(c,m)},getClearAlpha:function(){return m},setClearAlpha:function(k){m=k,O(c,m)},render:function(k,W){let Z=!1,V=!0===W.isScene?W.background:null;V&&V.isTexture&&(V=e.get(V));const B=p.xr,ce=B.getSession&&B.getSession();ce&&"additive"===ce.environmentBlendMode&&(V=null),null===V?O(c,m):V&&V.isColor&&(O(V,1),Z=!0),(p.autoClear||Z)&&p.clear(p.autoClearColor,p.autoClearDepth,p.autoClearStencil),V&&(V.isCubeTexture||306===V.mapping)?(void 0===w&&(w=new Ws(new Au(1,1,1),new El({name:"BackgroundCubeMaterial",uniforms:rh(ii.cube.uniforms),vertexShader:ii.cube.vertexShader,fragmentShader:ii.cube.fragmentShader,side:He,depthTest:!1,depthWrite:!1,fog:!1})),w.geometry.deleteAttribute("normal"),w.geometry.deleteAttribute("uv"),w.onBeforeRender=function(le,Ee,Fe){this.matrixWorld.copyPosition(Fe.matrixWorld)},Object.defineProperty(w.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(w)),w.material.uniforms.envMap.value=V,w.material.uniforms.flipEnvMap.value=V.isCubeTexture&&!1===V.isRenderTargetTexture?-1:1,(M!==V||A!==V.version||P!==p.toneMapping)&&(w.material.needsUpdate=!0,M=V,A=V.version,P=p.toneMapping),k.unshift(w,w.geometry,w.material,0,0,null)):V&&V.isTexture&&(void 0===y&&(y=new Ws(new Yh(2,2),new El({name:"BackgroundMaterial",uniforms:rh(ii.background.uniforms),vertexShader:ii.background.vertexShader,fragmentShader:ii.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),y.geometry.deleteAttribute("normal"),Object.defineProperty(y.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(y)),y.material.uniforms.t2D.value=V,!0===V.matrixAutoUpdate&&V.updateMatrix(),y.material.uniforms.uvTransform.value.copy(V.matrix),(M!==V||A!==V.version||P!==p.toneMapping)&&(y.material.needsUpdate=!0,M=V,A=V.version,P=p.toneMapping),k.unshift(y,y.geometry,y.material,0,0,null))}}}function ia(p,e,r,s){const a=p.getParameter(34921),c=s.isWebGL2?null:e.get("OES_vertex_array_object"),m=s.isWebGL2||null!==c,y={},w=W(null);let M=w;function R(At){return s.isWebGL2?p.bindVertexArray(At):c.bindVertexArrayOES(At)}function O(At){return s.isWebGL2?p.deleteVertexArray(At):c.deleteVertexArrayOES(At)}function W(At){const Ct=[],Nt=[],Dt=[];for(let Gt=0;Gt<a;Gt++)Ct[Gt]=0,Nt[Gt]=0,Dt[Gt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ct,enabledAttributes:Nt,attributeDivisors:Dt,object:At,attributes:{},index:null}}function B(){const At=M.newAttributes;for(let Ct=0,Nt=At.length;Ct<Nt;Ct++)At[Ct]=0}function ce(At){le(At,0)}function le(At,Ct){const Dt=M.enabledAttributes,Gt=M.attributeDivisors;M.newAttributes[At]=1,0===Dt[At]&&(p.enableVertexAttribArray(At),Dt[At]=1),Gt[At]!==Ct&&((s.isWebGL2?p:e.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](At,Ct),Gt[At]=Ct)}function Ee(){const At=M.newAttributes,Ct=M.enabledAttributes;for(let Nt=0,Dt=Ct.length;Nt<Dt;Nt++)Ct[Nt]!==At[Nt]&&(p.disableVertexAttribArray(Nt),Ct[Nt]=0)}function Fe(At,Ct,Nt,Dt,Gt,Pn){!0!==s.isWebGL2||5124!==Nt&&5125!==Nt?p.vertexAttribPointer(At,Ct,Nt,Dt,Gt,Pn):p.vertexAttribIPointer(At,Ct,Nt,Gt,Pn)}function Ke(){hn(),M!==w&&(M=w,R(M.object))}function hn(){w.geometry=null,w.program=null,w.wireframe=!1}return{setup:function(At,Ct,Nt,Dt,Gt){let Pn=!1;if(m){const vr=function(At,Ct,Nt){const Dt=!0===Nt.wireframe;let Gt=y[At.id];void 0===Gt&&(Gt={},y[At.id]=Gt);let Pn=Gt[Ct.id];void 0===Pn&&(Pn={},Gt[Ct.id]=Pn);let vr=Pn[Dt];return void 0===vr&&(vr=W(s.isWebGL2?p.createVertexArray():c.createVertexArrayOES()),Pn[Dt]=vr),vr}(Dt,Nt,Ct);M!==vr&&(M=vr,R(M.object)),Pn=function(At,Ct){const Nt=M.attributes,Dt=At.attributes;let Gt=0;for(const Pn in Dt){const vr=Nt[Pn],Lr=Dt[Pn];if(void 0===vr||vr.attribute!==Lr||vr.data!==Lr.data)return!0;Gt++}return M.attributesNum!==Gt||M.index!==Ct}(Dt,Gt),Pn&&function(At,Ct){const Nt={},Dt=At.attributes;let Gt=0;for(const Pn in Dt){const vr=Dt[Pn],Lr={};Lr.attribute=vr,vr.data&&(Lr.data=vr.data),Nt[Pn]=Lr,Gt++}M.attributes=Nt,M.attributesNum=Gt,M.index=Ct}(Dt,Gt)}else{const vr=!0===Ct.wireframe;(M.geometry!==Dt.id||M.program!==Nt.id||M.wireframe!==vr)&&(M.geometry=Dt.id,M.program=Nt.id,M.wireframe=vr,Pn=!0)}!0===At.isInstancedMesh&&(Pn=!0),null!==Gt&&r.update(Gt,34963),Pn&&(function(At,Ct,Nt,Dt){if(!1===s.isWebGL2&&(At.isInstancedMesh||Dt.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;B();const Gt=Dt.attributes,Pn=Nt.getAttributes(),vr=Ct.defaultAttributeValues;for(const Lr in Pn){const nr=Pn[Lr];if(nr.location>=0){let Qr=Gt[Lr];if(void 0===Qr&&("instanceMatrix"===Lr&&At.instanceMatrix&&(Qr=At.instanceMatrix),"instanceColor"===Lr&&At.instanceColor&&(Qr=At.instanceColor)),void 0!==Qr){const on=Qr.normalized,Kn=Qr.itemSize,hr=r.get(Qr);if(void 0===hr)continue;const St=hr.buffer,Fr=hr.type,oi=hr.bytesPerElement;if(Qr.isInterleavedBufferAttribute){const _r=Qr.data,Mr=_r.stride,vi=Qr.offset;if(_r&&_r.isInstancedInterleavedBuffer){for(let Ut=0;Ut<nr.locationSize;Ut++)le(nr.location+Ut,_r.meshPerAttribute);!0!==At.isInstancedMesh&&void 0===Dt._maxInstanceCount&&(Dt._maxInstanceCount=_r.meshPerAttribute*_r.count)}else for(let Ut=0;Ut<nr.locationSize;Ut++)ce(nr.location+Ut);p.bindBuffer(34962,St);for(let Ut=0;Ut<nr.locationSize;Ut++)Fe(nr.location+Ut,Kn/nr.locationSize,Fr,on,Mr*oi,(vi+Kn/nr.locationSize*Ut)*oi)}else{if(Qr.isInstancedBufferAttribute){for(let _r=0;_r<nr.locationSize;_r++)le(nr.location+_r,Qr.meshPerAttribute);!0!==At.isInstancedMesh&&void 0===Dt._maxInstanceCount&&(Dt._maxInstanceCount=Qr.meshPerAttribute*Qr.count)}else for(let _r=0;_r<nr.locationSize;_r++)ce(nr.location+_r);p.bindBuffer(34962,St);for(let _r=0;_r<nr.locationSize;_r++)Fe(nr.location+_r,Kn/nr.locationSize,Fr,on,Kn*oi,Kn/nr.locationSize*_r*oi)}}else if(void 0!==vr){const on=vr[Lr];if(void 0!==on)switch(on.length){case 2:p.vertexAttrib2fv(nr.location,on);break;case 3:p.vertexAttrib3fv(nr.location,on);break;case 4:p.vertexAttrib4fv(nr.location,on);break;default:p.vertexAttrib1fv(nr.location,on)}}}}Ee()}(At,Ct,Nt,Dt),null!==Gt&&p.bindBuffer(34963,r.get(Gt).buffer))},reset:Ke,resetDefaultState:hn,dispose:function(){Ke();for(const At in y){const Ct=y[At];for(const Nt in Ct){const Dt=Ct[Nt];for(const Gt in Dt)O(Dt[Gt].object),delete Dt[Gt];delete Ct[Nt]}delete y[At]}},releaseStatesOfGeometry:function(At){if(void 0===y[At.id])return;const Ct=y[At.id];for(const Nt in Ct){const Dt=Ct[Nt];for(const Gt in Dt)O(Dt[Gt].object),delete Dt[Gt];delete Ct[Nt]}delete y[At.id]},releaseStatesOfProgram:function(At){for(const Ct in y){const Nt=y[Ct];if(void 0===Nt[At.id])continue;const Dt=Nt[At.id];for(const Gt in Dt)O(Dt[Gt].object),delete Dt[Gt];delete Nt[At.id]}},initAttributes:B,enableAttribute:ce,disableUnusedAttributes:Ee}}function Qa(p,e,r,s){const a=s.isWebGL2;let c;this.setMode=function(M){c=M},this.render=function(M,A){p.drawArrays(c,M,A),r.update(A,c,1)},this.renderInstances=function(M,A,P){if(0===P)return;let R,O;if(a)R=p,O="drawArraysInstanced";else if(R=e.get("ANGLE_instanced_arrays"),O="drawArraysInstancedANGLE",null===R)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");R[O](c,M,A,P),r.update(A,c,P)}}function Vc(p,e,r){let s;function c(de){if("highp"===de){if(p.getShaderPrecisionFormat(35633,36338).precision>0&&p.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";de="mediump"}return"mediump"===de&&p.getShaderPrecisionFormat(35633,36337).precision>0&&p.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const m="undefined"!=typeof WebGL2RenderingContext&&p instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&p instanceof WebGL2ComputeRenderingContext;let y=void 0!==r.precision?r.precision:"highp";const w=c(y);w!==y&&(console.warn("THREE.WebGLRenderer:",y,"not supported, using",w,"instead."),y=w);const M=m||e.has("WEBGL_draw_buffers"),A=!0===r.logarithmicDepthBuffer,P=p.getParameter(34930),R=p.getParameter(35660),O=p.getParameter(3379),k=p.getParameter(34076),W=p.getParameter(34921),Z=p.getParameter(36347),V=p.getParameter(36348),B=p.getParameter(36349),ce=R>0,le=m||e.has("OES_texture_float");return{isWebGL2:m,drawBuffers:M,getMaxAnisotropy:function(){if(void 0!==s)return s;if(!0===e.has("EXT_texture_filter_anisotropic")){const de=e.get("EXT_texture_filter_anisotropic");s=p.getParameter(de.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s},getMaxPrecision:c,precision:y,logarithmicDepthBuffer:A,maxTextures:P,maxVertexTextures:R,maxTextureSize:O,maxCubemapSize:k,maxAttributes:W,maxVertexUniforms:Z,maxVaryings:V,maxFragmentUniforms:B,vertexTextures:ce,floatFragmentTextures:le,floatVertexTextures:ce&&le,maxSamples:m?p.getParameter(36183):0}}function Ml(p){const e=this;let r=null,s=0,a=!1,c=!1;const m=new vc,y=new On,w={value:null,needsUpdate:!1};function M(){w.value!==r&&(w.value=r,w.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function A(P,R,O,k){const W=null!==P?P.length:0;let Z=null;if(0!==W){if(Z=w.value,!0!==k||null===Z){const V=O+4*W,B=R.matrixWorldInverse;y.getNormalMatrix(B),(null===Z||Z.length<V)&&(Z=new Float32Array(V));for(let ce=0,le=O;ce!==W;++ce,le+=4)m.copy(P[ce]).applyMatrix4(B,y),m.normal.toArray(Z,le),Z[le+3]=m.constant}w.value=Z,w.needsUpdate=!0}return e.numPlanes=W,e.numIntersection=0,Z}this.uniform=w,this.numPlanes=0,this.numIntersection=0,this.init=function(P,R,O){const k=0!==P.length||R||0!==s||a;return a=R,r=A(P,O,0),s=P.length,k},this.beginShadows=function(){c=!0,A(null)},this.endShadows=function(){c=!1,M()},this.setState=function(P,R,O){const k=P.clippingPlanes,W=P.clipIntersection,Z=P.clipShadows,V=p.get(P);if(!a||null===k||0===k.length||c&&!Z)c?A(null):M();else{const B=c?0:s,ce=4*B;let le=V.clippingState||null;w.value=le,le=A(k,R,ce,O);for(let Ee=0;Ee!==ce;++Ee)le[Ee]=r[Ee];V.clippingState=le,this.numIntersection=W?this.numPlanes:0,this.numPlanes+=B}}}function Sl(p){let e=new WeakMap;function r(m,y){return 303===y?m.mapping=301:304===y&&(m.mapping=302),m}function a(m){const y=m.target;y.removeEventListener("dispose",a);const w=e.get(y);void 0!==w&&(e.delete(y),w.dispose())}return{get:function(m){if(m&&m.isTexture&&!1===m.isRenderTargetTexture){const y=m.mapping;if(303===y||304===y){if(e.has(m))return r(e.get(m).texture,m.mapping);{const w=m.image;if(w&&w.height>0){const M=p.getRenderTarget(),A=new Rd(w.height/2);return A.fromEquirectangularTexture(p,m),e.set(m,A),p.setRenderTarget(M),m.addEventListener("dispose",a),r(A.texture,m.mapping)}return null}}}return m},dispose:function(){e=new WeakMap}}}ii.physical={uniforms:ko([ii.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new at(1,1)},clearcoatNormalMap:{value:null},sheenTint:{value:new vt(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new at},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new vt(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new vt(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Nn.meshphysical_vert,fragmentShader:Nn.meshphysical_frag};class Co extends sh{constructor(e=-1,r=1,s=1,a=-1,c=.1,m=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=s,this.bottom=a,this.near=c,this.far=m,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,r,s,a,c,m){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=a,this.view.width=c,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let c=s-e,m=s+e,y=a+r,w=a-r;if(null!==this.view&&this.view.enabled){const M=(this.right-this.left)/this.view.fullWidth/this.zoom,A=(this.top-this.bottom)/this.view.fullHeight/this.zoom;c+=M*this.view.offsetX,m=c+M*this.view.width,y-=A*this.view.offsetY,w=y-A*this.view.height}this.projectionMatrix.makeOrthographic(c,m,y,w,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,null!==this.view&&(r.object.view=Object.assign({},this.view)),r}}Co.prototype.isOrthographicCamera=!0;class zc extends El{constructor(e){super(e),this.type="RawShaderMaterial"}}zc.prototype.isRawShaderMaterial=!0;const Hl=Math.pow(2,8),su=[.125,.215,.35,.446,.526,.582],tf=5+su.length,Tl={[Ns]:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},yh=new Co,{_lodPlanes:au,_sizeLods:xm,_sigmas:lc}=Bu(),vh=new vt;let ku=null;const ft=(1+Math.sqrt(5))/2,Er=1/ft,Bo=[new pe(1,1,1),new pe(-1,1,1),new pe(1,1,-1),new pe(-1,1,-1),new pe(0,ft,Er),new pe(0,ft,-Er),new pe(Er,0,ft),new pe(-Er,0,ft),new pe(ft,Er,0),new pe(-ft,Er,0)];class sa{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(p){const e=new Float32Array(20),r=new pe(0,1,0);return new zc({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r},inputEncoding:{value:Tl[Ns]},outputEncoding:{value:Tl[Ns]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,s=.1,a=100){ku=this._renderer.getRenderTarget();const c=this._allocateTargets();return this._sceneToCubeUV(e,s,a,c),r>0&&this._blur(c,0,0,r),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=wm(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Cl(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<au.length;e++)au[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(ku),e.scissorTest=!1,bh(e,0,0,e.width,e.height)}_fromTexture(e){ku=this._renderer.getRenderTarget();const r=this._allocateTargets(e);return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(e){const r={magFilter:Ji,minFilter:Ji,generateMipmaps:!1,type:sr,format:Xi,encoding:(p=e,void 0===p||p.type!==sr||p.encoding!==Ns&&3001!==p.encoding&&3007!==p.encoding?3002:e.encoding),depthBuffer:!1},s=_h(r);var p;return s.depthBuffer=!e,this._pingPongRenderTarget=_h(r),s}_compileMaterial(e){const r=new Ws(au[0],e);this._renderer.compile(r,yh)}_sceneToCubeUV(e,r,s,a){const y=new co(90,1,r,s),w=[1,-1,1,1,1,1],M=[1,1,1,-1,-1,-1],A=this._renderer,P=A.autoClear,R=A.outputEncoding,O=A.toneMapping;A.getClearColor(vh),A.toneMapping=0,A.outputEncoding=Ns,A.autoClear=!1;const k=new Vn({name:"PMREM.Background",side:He,depthWrite:!1,depthTest:!1}),W=new Ws(new Au,k);let Z=!1;const V=e.background;V?V.isColor&&(k.color.copy(V),e.background=null,Z=!0):(k.color.copy(vh),Z=!0);for(let B=0;B<6;B++){const ce=B%3;0==ce?(y.up.set(0,w[B],0),y.lookAt(M[B],0,0)):1==ce?(y.up.set(0,0,w[B]),y.lookAt(0,M[B],0)):(y.up.set(0,w[B],0),y.lookAt(0,0,M[B])),bh(a,ce*Hl,B>2?Hl:0,Hl,Hl),A.setRenderTarget(a),Z&&A.render(W,y),A.render(e,y)}W.geometry.dispose(),W.material.dispose(),A.toneMapping=O,A.outputEncoding=R,A.autoClear=P,e.background=V}_textureToCubeUV(e,r){const s=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=wm()):null==this._equirectShader&&(this._equirectShader=Cl());const a=e.isCubeTexture?this._cubemapShader:this._equirectShader,c=new Ws(au[0],a),m=a.uniforms;m.envMap.value=e,e.isCubeTexture||m.texelSize.value.set(1/e.image.width,1/e.image.height),m.inputEncoding.value=Tl[e.encoding],m.outputEncoding.value=Tl[r.texture.encoding],bh(r,0,0,3*Hl,2*Hl),s.setRenderTarget(r),s.render(c,yh)}_applyPMREM(e){const r=this._renderer,s=r.autoClear;r.autoClear=!1;for(let a=1;a<tf;a++){const c=Math.sqrt(lc[a]*lc[a]-lc[a-1]*lc[a-1]);this._blur(e,a-1,a,c,Bo[(a-1)%Bo.length])}r.autoClear=s}_blur(e,r,s,a,c){const m=this._pingPongRenderTarget;this._halfBlur(e,m,r,s,a,"latitudinal",c),this._halfBlur(m,e,s,s,a,"longitudinal",c)}_halfBlur(e,r,s,a,c,m,y){const w=this._renderer,M=this._blurMaterial;"latitudinal"!==m&&"longitudinal"!==m&&console.error("blur direction must be either latitudinal or longitudinal!");const P=new Ws(au[a],M),R=M.uniforms,O=xm[s]-1,k=isFinite(c)?Math.PI/(2*O):2*Math.PI/39,W=c/k,Z=isFinite(c)?1+Math.floor(3*W):20;Z>20&&console.warn(`sigmaRadians, ${c}, is too large and will clip, as it requested ${Z} samples when the maximum is set to 20`);const V=[];let B=0;for(let Fe=0;Fe<20;++Fe){const de=Fe/W,Qe=Math.exp(-de*de/2);V.push(Qe),0==Fe?B+=Qe:Fe<Z&&(B+=2*Qe)}for(let Fe=0;Fe<V.length;Fe++)V[Fe]=V[Fe]/B;R.envMap.value=e.texture,R.samples.value=Z,R.weights.value=V,R.latitudinal.value="latitudinal"===m,y&&(R.poleAxis.value=y),R.dTheta.value=k,R.mipInt.value=8-s,R.inputEncoding.value=Tl[e.texture.encoding],R.outputEncoding.value=Tl[e.texture.encoding];const ce=xm[a];bh(r,3*Math.max(0,Hl-2*ce),(0===a?0:2*Hl)+2*ce*(a>4?a-8+4:0),3*ce,2*ce),w.setRenderTarget(r),w.render(P,yh)}}function Bu(){const p=[],e=[],r=[];let s=8;for(let a=0;a<tf;a++){const c=Math.pow(2,s);e.push(c);let m=1/c;a>4?m=su[a-8+4-1]:0==a&&(m=0),r.push(m);const y=1/(c-1),w=-y/2,M=1+y/2,A=[w,w,M,w,M,M,w,w,M,M,w,M],P=6,R=6,O=3,k=2,W=1,Z=new Float32Array(O*R*P),V=new Float32Array(k*R*P),B=new Float32Array(W*R*P);for(let le=0;le<P;le++){const Ee=le%3*2/3-1,Fe=le>2?0:-1;Z.set([Ee,Fe,0,Ee+2/3,Fe,0,Ee+2/3,Fe+1,0,Ee,Fe,0,Ee+2/3,Fe+1,0,Ee,Fe+1,0],O*R*le),V.set(A,k*R*le),B.set([le,le,le,le,le,le],W*R*le)}const ce=new rn;ce.setAttribute("position",new Bt(Z,O)),ce.setAttribute("uv",new Bt(V,k)),ce.setAttribute("faceIndex",new Bt(B,W)),p.push(ce),s>4&&s--}return{_lodPlanes:p,_sizeLods:e,_sigmas:r}}function _h(p){const e=new Cs(3*Hl,3*Hl,p);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function bh(p,e,r,s,a){p.viewport.set(e,r,s,a),p.scissor.set(e,r,s,a)}function Cl(){const p=new at(1,1);return new zc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:p},inputEncoding:{value:Tl[Ns]},outputEncoding:{value:Tl[Ns]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function wm(){return new zc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Tl[Ns]},outputEncoding:{value:Tl[Ns]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Fv(p){let e=new WeakMap,r=null;function c(y){const w=y.target;w.removeEventListener("dispose",c);const M=e.get(w);void 0!==M&&(e.delete(w),M.dispose())}return{get:function(y){if(y&&y.isTexture&&!1===y.isRenderTargetTexture){const w=y.mapping,M=303===w||304===w,A=301===w||302===w;if(M||A){if(e.has(y))return e.get(y).texture;{const P=y.image;if(M&&P&&P.height>0||A&&P&&function(y){let w=0;for(let A=0;A<6;A++)void 0!==y[A]&&w++;return 6===w}(P)){const R=p.getRenderTarget();null===r&&(r=new sa(p));const O=M?r.fromEquirectangular(y):r.fromCubemap(y);return e.set(y,O),p.setRenderTarget(R),y.addEventListener("dispose",c),O.texture}return null}}}return y},dispose:function(){e=new WeakMap,null!==r&&(r.dispose(),r=null)}}}function _y(p){const e={};function r(s){if(void 0!==e[s])return e[s];let a;switch(s){case"WEBGL_depth_texture":a=p.getExtension("WEBGL_depth_texture")||p.getExtension("MOZ_WEBGL_depth_texture")||p.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=p.getExtension("WEBGL_compressed_texture_s3tc")||p.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=p.getExtension("WEBGL_compressed_texture_pvrtc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=p.getExtension(s)}return e[s]=a,a}return{has:function(s){return null!==r(s)},init:function(s){s.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float")},get:function(s){const a=r(s);return null===a&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),a}}}function by(p,e,r,s){const a={},c=new WeakMap;function m(P){const R=P.target;null!==R.index&&e.remove(R.index);for(const k in R.attributes)e.remove(R.attributes[k]);R.removeEventListener("dispose",m),delete a[R.id];const O=c.get(R);O&&(e.remove(O),c.delete(R)),s.releaseStatesOfGeometry(R),!0===R.isInstancedBufferGeometry&&delete R._maxInstanceCount,r.memory.geometries--}function M(P){const R=[],O=P.index,k=P.attributes.position;let W=0;if(null!==O){const B=O.array;W=O.version;for(let ce=0,le=B.length;ce<le;ce+=3){const Ee=B[ce+0],Fe=B[ce+1],de=B[ce+2];R.push(Ee,Fe,Fe,de,de,Ee)}}else{W=k.version;for(let ce=0,le=k.array.length/3-1;ce<le;ce+=3){const Ee=ce+0,Fe=ce+1,de=ce+2;R.push(Ee,Fe,Fe,de,de,Ee)}}const Z=new(_o(R)>65535?So:Ei)(R,1);Z.version=W;const V=c.get(P);V&&e.remove(V),c.set(P,Z)}return{get:function(P,R){return!0===a[R.id]||(R.addEventListener("dispose",m),a[R.id]=!0,r.memory.geometries++),R},update:function(P){const R=P.attributes;for(const k in R)e.update(R[k],34962);const O=P.morphAttributes;for(const k in O){const W=O[k];for(let Z=0,V=W.length;Z<V;Z++)e.update(W[Z],34962)}},getWireframeAttribute:function(P){const R=c.get(P);if(R){const O=P.index;null!==O&&R.version<O.version&&M(P)}else M(P);return c.get(P)}}}function xh(p,e,r,s){const a=s.isWebGL2;let c,y,w;this.setMode=function(R){c=R},this.setIndex=function(R){y=R.type,w=R.bytesPerElement},this.render=function(R,O){p.drawElements(c,O,y,R*w),r.update(O,c,1)},this.renderInstances=function(R,O,k){if(0===k)return;let W,Z;if(a)W=p,Z="drawElementsInstanced";else if(W=e.get("ANGLE_instanced_arrays"),Z="drawElementsInstancedANGLE",null===W)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");W[Z](c,O,y,R*w,k),r.update(O,c,k)}}function xy(p){const r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function(c,m,y){switch(r.calls++,m){case 4:r.triangles+=y*(c/3);break;case 1:r.lines+=y*(c/2);break;case 3:r.lines+=y*(c-1);break;case 2:r.lines+=y*c;break;case 0:r.points+=y*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",m)}}}}function wy(p,e){return p[0]-e[0]}function kv(p,e){return Math.abs(e[1])-Math.abs(p[1])}function Gd(p){const e={},r=new Float32Array(8),s=[];for(let c=0;c<8;c++)s[c]=[c,0];return{update:function(c,m,y,w){const M=c.morphTargetInfluences,A=void 0===M?0:M.length;let P=e[m.id];if(void 0===P||P.length!==A){P=[];for(let Z=0;Z<A;Z++)P[Z]=[Z,0];e[m.id]=P}for(let Z=0;Z<A;Z++){const V=P[Z];V[0]=Z,V[1]=M[Z]}P.sort(kv);for(let Z=0;Z<8;Z++)Z<A&&P[Z][1]?(s[Z][0]=P[Z][0],s[Z][1]=P[Z][1]):(s[Z][0]=Number.MAX_SAFE_INTEGER,s[Z][1]=0);s.sort(wy);const R=m.morphAttributes.position,O=m.morphAttributes.normal;let k=0;for(let Z=0;Z<8;Z++){const V=s[Z],B=V[0],ce=V[1];B!==Number.MAX_SAFE_INTEGER&&ce?(R&&m.getAttribute("morphTarget"+Z)!==R[B]&&m.setAttribute("morphTarget"+Z,R[B]),O&&m.getAttribute("morphNormal"+Z)!==O[B]&&m.setAttribute("morphNormal"+Z,O[B]),r[Z]=ce,k+=ce):(R&&!0===m.hasAttribute("morphTarget"+Z)&&m.deleteAttribute("morphTarget"+Z),O&&!0===m.hasAttribute("morphNormal"+Z)&&m.deleteAttribute("morphNormal"+Z),r[Z]=0)}const W=m.morphTargetsRelative?1:1-k;w.getUniforms().setValue(p,"morphTargetBaseInfluence",W),w.getUniforms().setValue(p,"morphTargetInfluences",r)}}}function Bv(p,e,r,s){let a=new WeakMap;function y(w){const M=w.target;M.removeEventListener("dispose",y),r.remove(M.instanceMatrix),null!==M.instanceColor&&r.remove(M.instanceColor)}return{update:function(w){const M=s.render.frame,P=e.get(w,w.geometry);return a.get(P)!==M&&(e.update(P),a.set(P,M)),w.isInstancedMesh&&(!1===w.hasEventListener("dispose",y)&&w.addEventListener("dispose",y),r.update(w.instanceMatrix,34962),null!==w.instanceColor&&r.update(w.instanceColor,34962)),P},dispose:function(){a=new WeakMap}}}class Mm extends Li{constructor(e=null,r=1,s=1,a=1){super(null),this.image={data:e,width:r,height:s,depth:a},this.magFilter=Ji,this.minFilter=Ji,this.wrapR=Ln,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Mm.prototype.isDataTexture2DArray=!0;class Sm extends Li{constructor(e=null,r=1,s=1,a=1){super(null),this.image={data:e,width:r,height:s,depth:a},this.magFilter=Ji,this.minFilter=Ji,this.wrapR=Ln,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Sm.prototype.isDataTexture3D=!0;const Tm=new Li,Cm=new Mm,Ey=new Sm,qf=new Nc,Yf=[],Am=[],jd=new Float32Array(16),Dm=new Float32Array(9),Wd=new Float32Array(4);function jc(p,e,r){const s=p[0];if(s<=0||s>0)return p;const a=e*r;let c=Yf[a];if(void 0===c&&(c=new Float32Array(a),Yf[a]=c),0!==e){s.toArray(c,0);for(let m=1,y=0;m!==e;++m)y+=r,p[m].toArray(c,y)}return c}function pl(p,e){if(p.length!==e.length)return!1;for(let r=0,s=p.length;r<s;r++)if(p[r]!==e[r])return!1;return!0}function Na(p,e){for(let r=0,s=e.length;r<s;r++)p[r]=e[r]}function My(p,e){let r=Am[e];void 0===r&&(r=new Int32Array(e),Am[e]=r);for(let s=0;s!==e;++s)r[s]=p.allocateTextureUnit();return r}function Uv(p,e){const r=this.cache;r[0]!==e&&(p.uniform1f(this.addr,e),r[0]=e)}function Sy(p,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y)&&(p.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(pl(r,e))return;p.uniform2fv(this.addr,e),Na(r,e)}}function Rm(p,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(p.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(void 0!==e.r)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(p.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(pl(r,e))return;p.uniform3fv(this.addr,e),Na(r,e)}}function Ty(p,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(p.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(pl(r,e))return;p.uniform4fv(this.addr,e),Na(r,e)}}function vx(p,e){const r=this.cache,s=e.elements;if(void 0===s){if(pl(r,e))return;p.uniformMatrix2fv(this.addr,!1,e),Na(r,e)}else{if(pl(r,s))return;Wd.set(s),p.uniformMatrix2fv(this.addr,!1,Wd),Na(r,s)}}function Cy(p,e){const r=this.cache,s=e.elements;if(void 0===s){if(pl(r,e))return;p.uniformMatrix3fv(this.addr,!1,e),Na(r,e)}else{if(pl(r,s))return;Dm.set(s),p.uniformMatrix3fv(this.addr,!1,Dm),Na(r,s)}}function Vv(p,e){const r=this.cache,s=e.elements;if(void 0===s){if(pl(r,e))return;p.uniformMatrix4fv(this.addr,!1,e),Na(r,e)}else{if(pl(r,s))return;jd.set(s),p.uniformMatrix4fv(this.addr,!1,jd),Na(r,s)}}function Ay(p,e){const r=this.cache;r[0]!==e&&(p.uniform1i(this.addr,e),r[0]=e)}function zv(p,e){const r=this.cache;pl(r,e)||(p.uniform2iv(this.addr,e),Na(r,e))}function Hv(p,e){const r=this.cache;pl(r,e)||(p.uniform3iv(this.addr,e),Na(r,e))}function wc(p,e){const r=this.cache;pl(r,e)||(p.uniform4iv(this.addr,e),Na(r,e))}function Gv(p,e){const r=this.cache;r[0]!==e&&(p.uniform1ui(this.addr,e),r[0]=e)}function Dy(p,e){const r=this.cache;pl(r,e)||(p.uniform2uiv(this.addr,e),Na(r,e))}function jv(p,e){const r=this.cache;pl(r,e)||(p.uniform3uiv(this.addr,e),Na(r,e))}function Wv(p,e){const r=this.cache;pl(r,e)||(p.uniform4uiv(this.addr,e),Na(r,e))}function $v(p,e,r){const s=this.cache,a=r.allocateTextureUnit();s[0]!==a&&(p.uniform1i(this.addr,a),s[0]=a),r.safeSetTexture2D(e||Tm,a)}function qv(p,e,r){const s=this.cache,a=r.allocateTextureUnit();s[0]!==a&&(p.uniform1i(this.addr,a),s[0]=a),r.setTexture3D(e||Ey,a)}function Ry(p,e,r){const s=this.cache,a=r.allocateTextureUnit();s[0]!==a&&(p.uniform1i(this.addr,a),s[0]=a),r.safeSetTextureCube(e||qf,a)}function Yv(p,e,r){const s=this.cache,a=r.allocateTextureUnit();s[0]!==a&&(p.uniform1i(this.addr,a),s[0]=a),r.setTexture2DArray(e||Cm,a)}function Kv(p,e){p.uniform1fv(this.addr,e)}function si(p,e){const r=jc(e,this.size,2);p.uniform2fv(this.addr,r)}function Py(p,e){const r=jc(e,this.size,3);p.uniform3fv(this.addr,r)}function Iy(p,e){const r=jc(e,this.size,4);p.uniform4fv(this.addr,r)}function $d(p,e){const r=jc(e,this.size,4);p.uniformMatrix2fv(this.addr,!1,r)}function Ec(p,e){const r=jc(e,this.size,9);p.uniformMatrix3fv(this.addr,!1,r)}function Ly(p,e){const r=jc(e,this.size,16);p.uniformMatrix4fv(this.addr,!1,r)}function Qv(p,e){p.uniform1iv(this.addr,e)}function Pm(p,e){p.uniform2iv(this.addr,e)}function lu(p,e){p.uniform3iv(this.addr,e)}function Im(p,e){p.uniform4iv(this.addr,e)}function Oy(p,e){p.uniform1uiv(this.addr,e)}function Lm(p,e){p.uniform2uiv(this.addr,e)}function _x(p,e){p.uniform3uiv(this.addr,e)}function Ny(p,e){p.uniform4uiv(this.addr,e)}function bx(p,e,r){const s=e.length,a=My(r,s);p.uniform1iv(this.addr,a);for(let c=0;c!==s;++c)r.safeSetTexture2D(e[c]||Tm,a[c])}function cu(p,e,r){const s=e.length,a=My(r,s);p.uniform1iv(this.addr,a);for(let c=0;c!==s;++c)r.safeSetTextureCube(e[c]||qf,a[c])}function Yd(p,e,r){this.id=p,this.addr=r,this.cache=[],this.setValue=function(p){switch(p){case 5126:return Uv;case 35664:return Sy;case 35665:return Rm;case 35666:return Ty;case 35674:return vx;case 35675:return Cy;case 35676:return Vv;case 5124:case 35670:return Ay;case 35667:case 35671:return zv;case 35668:case 35672:return Hv;case 35669:case 35673:return wc;case 5125:return Gv;case 36294:return Dy;case 36295:return jv;case 36296:return Wv;case 35678:case 36198:case 36298:case 36306:case 35682:return $v;case 35679:case 36299:case 36307:return qv;case 35680:case 36300:case 36308:case 36293:return Ry;case 36289:case 36303:case 36311:case 36292:return Yv}}(e.type)}function Xd(p,e,r){this.id=p,this.addr=r,this.cache=[],this.size=e.size,this.setValue=function(p){switch(p){case 5126:return Kv;case 35664:return si;case 35665:return Py;case 35666:return Iy;case 35674:return $d;case 35675:return Ec;case 35676:return Ly;case 5124:case 35670:return Qv;case 35667:case 35671:return Pm;case 35668:case 35672:return lu;case 35669:case 35673:return Im;case 5125:return Oy;case 36294:return Lm;case 36295:return _x;case 36296:return Ny;case 35678:case 36198:case 36298:case 36306:case 35682:return bx;case 35680:case 36300:case 36308:case 36293:return cu}}(e.type)}function Zv(p){this.id=p,this.seq=[],this.map={}}Xd.prototype.updateCache=function(p){const e=this.cache;p instanceof Float32Array&&e.length!==p.length&&(this.cache=new Float32Array(p.length)),Na(e,p)},Zv.prototype.setValue=function(p,e,r){const s=this.seq;for(let a=0,c=s.length;a!==c;++a){const m=s[a];m.setValue(p,e[m.id],r)}};const Om=/(\w+)(\])?(\[|\.)?/g;function Nm(p,e){p.seq.push(e),p.map[e.id]=e}function xx(p,e,r){const s=p.name,a=s.length;for(Om.lastIndex=0;;){const c=Om.exec(s),m=Om.lastIndex;let y=c[1];const M=c[3];if("]"===c[2]&&(y|=0),void 0===M||"["===M&&m+2===a){Nm(r,void 0===M?new Yd(y,p,e):new Xd(y,p,e));break}{let P=r.map[y];void 0===P&&(P=new Zv(y),Nm(r,P)),r=P}}}function Uu(p,e){this.seq=[],this.map={};const r=p.getProgramParameter(e,35718);for(let s=0;s<r;++s){const a=p.getActiveUniform(e,s);xx(a,p.getUniformLocation(e,a.name),this)}}function Jv(p,e,r){const s=p.createShader(e);return p.shaderSource(s,r),p.compileShader(s),s}Uu.prototype.setValue=function(p,e,r,s){const a=this.map[e];void 0!==a&&a.setValue(p,r,s)},Uu.prototype.setOptional=function(p,e,r){const s=e[r];void 0!==s&&this.setValue(p,r,s)},Uu.upload=function(p,e,r,s){for(let a=0,c=e.length;a!==c;++a){const m=e[a],y=r[m.id];!1!==y.needsUpdate&&m.setValue(p,y.value,s)}},Uu.seqWithValue=function(p,e){const r=[];for(let s=0,a=p.length;s!==a;++s){const c=p[s];c.id in e&&r.push(c)}return r};let Fy=0;function By(p){switch(p){case Ns:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",p),["Linear","( value )"]}}function Kd(p,e,r){const s=p.getShaderParameter(e,35713),a=p.getShaderInfoLog(e).trim();return s&&""===a?"":r.toUpperCase()+"\n\n"+a+"\n\n"+function(p){const e=p.split("\n");for(let r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join("\n")}(p.getShaderSource(e))}function Xf(p,e){const r=By(e);return"vec4 "+p+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function wx(p,e){const r=By(e);return"vec4 "+p+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Ex(p,e){let r;switch(e){case 1:r="Linear";break;case 2:r="Reinhard";break;case 3:r="OptimizedCineon";break;case 4:r="ACESFilmic";break;case 5:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+p+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Qd(p){return""!==p}function e_(p,e){return p.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function t_(p,e){return p.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Cx=/^[ \t]*#include +<([\w\d./]+)>/gm;function Uy(p){return p.replace(Cx,Vu)}function Vu(p,e){const r=Nn[e];if(void 0===r)throw new Error("Can not resolve #include <"+e+">");return Uy(r)}const Fm=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,n_=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function km(p){return p.replace(n_,Um).replace(Fm,Bm)}function Bm(p,e,r,s){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Um(0,e,r,s)}function Um(p,e,r,s){let a="";for(let c=parseInt(e);c<parseInt(r);c++)a+=s.replace(/\[\s*i\s*\]/g,"[ "+c+" ]").replace(/UNROLLED_LOOP_INDEX/g,c);return a}function Zd(p){let e="precision "+p.precision+" float;\nprecision "+p.precision+" int;";return"highp"===p.precision?e+="\n#define HIGH_PRECISION":"mediump"===p.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===p.precision&&(e+="\n#define LOW_PRECISION"),e}function Ax(p,e,r,s){const a=p.getContext(),c=r.defines;let m=r.vertexShader,y=r.fragmentShader;const w=function(p){let e="SHADOWMAP_TYPE_BASIC";return 1===p.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===p.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===p.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(r),M=function(p){let e="ENVMAP_TYPE_CUBE";if(p.envMap)switch(p.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(r),A=function(p){let e="ENVMAP_MODE_REFLECTION";if(p.envMap)switch(p.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(r),P=function(p){let e="ENVMAP_BLENDING_NONE";if(p.envMap)switch(p.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(r),R=p.gammaFactor>0?p.gammaFactor:1,O=r.isWebGL2?"":function(p){return[p.extensionDerivatives||p.envMapCubeUV||p.bumpMap||p.tangentSpaceNormalMap||p.clearcoatNormalMap||p.flatShading||"physical"===p.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(p.extensionFragDepth||p.logarithmicDepthBuffer)&&p.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",p.extensionDrawBuffers&&p.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(p.extensionShaderTextureLOD||p.envMap||p.transmission)&&p.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qd).join("\n")}(r),k=function(p){const e=[];for(const r in p){const s=p[r];!1!==s&&e.push("#define "+r+" "+s)}return e.join("\n")}(c),W=a.createProgram();let Z,V,B=r.glslVersion?"#version "+r.glslVersion+"\n":"";r.isRawShaderMaterial?(Z=[k].filter(Qd).join("\n"),Z.length>0&&(Z+="\n"),V=[O,k].filter(Qd).join("\n"),V.length>0&&(V+="\n")):(Z=[Zd(r),"#define SHADER_NAME "+r.shaderName,k,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+R,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+A:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularTintMap?"#define USE_SPECULARTINTMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+w:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qd).join("\n"),V=[O,Zd(r),"#define SHADER_NAME "+r.shaderName,k,"#define GAMMA_FACTOR "+R,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+M:"",r.envMap?"#define "+A:"",r.envMap?"#define "+P:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularTintMap?"#define USE_SPECULARTINTMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheenTint?"#define USE_SHEEN":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+w:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==r.toneMapping?"#define TONE_MAPPING":"",0!==r.toneMapping?Nn.tonemapping_pars_fragment:"",0!==r.toneMapping?Ex("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.format===cs?"#define OPAQUE":"",Nn.encodings_pars_fragment,r.map?Xf("mapTexelToLinear",r.mapEncoding):"",r.matcap?Xf("matcapTexelToLinear",r.matcapEncoding):"",r.envMap?Xf("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMap?Xf("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.specularTintMap?Xf("specularTintMapTexelToLinear",r.specularTintMapEncoding):"",r.lightMap?Xf("lightMapTexelToLinear",r.lightMapEncoding):"",wx("linearToOutputTexel",r.outputEncoding),r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Qd).join("\n")),m=Uy(m),m=e_(m,r),m=t_(m,r),y=Uy(y),y=e_(y,r),y=t_(y,r),m=km(m),y=km(y),r.isWebGL2&&!0!==r.isRawShaderMaterial&&(B="#version 300 es\n",Z=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+Z,V=["#define varying in","300 es"===r.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===r.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+V);const le=B+V+y,Ee=Jv(a,35633,B+Z+m),Fe=Jv(a,35632,le);if(a.attachShader(W,Ee),a.attachShader(W,Fe),void 0!==r.index0AttributeName?a.bindAttribLocation(W,0,r.index0AttributeName):!0===r.morphTargets&&a.bindAttribLocation(W,0,"position"),a.linkProgram(W),p.debug.checkShaderErrors){const Pt=a.getProgramInfoLog(W).trim(),ct=a.getShaderInfoLog(Ee).trim(),Ke=a.getShaderInfoLog(Fe).trim();let hn=!0,At=!0;if(!1===a.getProgramParameter(W,35714)){hn=!1;const Ct=Kd(a,Ee,"vertex"),Nt=Kd(a,Fe,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(W,35715)+"\n\nProgram Info Log: "+Pt+"\n"+Ct+"\n"+Nt)}else""!==Pt?console.warn("THREE.WebGLProgram: Program Info Log:",Pt):(""===ct||""===Ke)&&(At=!1);At&&(this.diagnostics={runnable:hn,programLog:Pt,vertexShader:{log:ct,prefix:Z},fragmentShader:{log:Ke,prefix:V}})}let de,Qe;return a.deleteShader(Ee),a.deleteShader(Fe),this.getUniforms=function(){return void 0===de&&(de=new Uu(a,W)),de},this.getAttributes=function(){return void 0===Qe&&(Qe=function(p,e){const r={},s=p.getProgramParameter(e,35721);for(let a=0;a<s;a++){const c=p.getActiveAttrib(e,a),m=c.name;let y=1;35674===c.type&&(y=2),35675===c.type&&(y=3),35676===c.type&&(y=4),r[m]={type:c.type,location:p.getAttribLocation(e,m),locationSize:y}}return r}(a,W)),Qe},this.destroy=function(){s.releaseStatesOfProgram(this),a.deleteProgram(W),this.program=void 0},this.name=r.shaderName,this.id=Fy++,this.cacheKey=e,this.usedTimes=1,this.program=W,this.vertexShader=Ee,this.fragmentShader=Fe,this}function Vm(p,e,r,s,a,c,m){const y=[],w=a.isWebGL2,M=a.logarithmicDepthBuffer,A=a.floatVertexTextures,P=a.maxVertexUniforms,R=a.vertexTextures;let O=a.precision;const k={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},W=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheenTint","transmission","transmissionMap","thicknessMap"];function V(de){let Qe;return de&&de.isTexture?Qe=de.encoding:de&&de.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Qe=de.texture.encoding):Qe=Ns,Qe}return{getParameters:function(de,Qe,Pt,ct,Ke){const hn=ct.fog,Ct=(de.isMeshStandardMaterial?r:e).get(de.envMap||(de.isMeshStandardMaterial?ct.environment:null)),Nt=k[de.type],Dt=Ke.isSkinnedMesh?function(de){const Pt=de.skeleton.bones;if(A)return 1024;{const Ke=Math.floor((P-20)/4),hn=Math.min(Ke,Pt.length);return hn<Pt.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Pt.length+" bones. This GPU supports "+hn+"."),0):hn}}(Ke):0;let Gt,Pn;if(null!==de.precision&&(O=a.getMaxPrecision(de.precision),O!==de.precision&&console.warn("THREE.WebGLProgram.getParameters:",de.precision,"not supported, using",O,"instead.")),Nt){const on=ii[Nt];Gt=on.vertexShader,Pn=on.fragmentShader}else Gt=de.vertexShader,Pn=de.fragmentShader;const vr=p.getRenderTarget(),Lr=de.alphaTest>0,nr=de.clearcoat>0;return{isWebGL2:w,shaderID:Nt,shaderName:de.type,vertexShader:Gt,fragmentShader:Pn,defines:de.defines,isRawShaderMaterial:!0===de.isRawShaderMaterial,glslVersion:de.glslVersion,precision:O,instancing:!0===Ke.isInstancedMesh,instancingColor:!0===Ke.isInstancedMesh&&null!==Ke.instanceColor,supportsVertexTextures:R,outputEncoding:null!==vr?V(vr.texture):p.outputEncoding,map:!!de.map,mapEncoding:V(de.map),matcap:!!de.matcap,matcapEncoding:V(de.matcap),envMap:!!Ct,envMapMode:Ct&&Ct.mapping,envMapEncoding:V(Ct),envMapCubeUV:!!Ct&&(306===Ct.mapping||307===Ct.mapping),lightMap:!!de.lightMap,lightMapEncoding:V(de.lightMap),aoMap:!!de.aoMap,emissiveMap:!!de.emissiveMap,emissiveMapEncoding:V(de.emissiveMap),bumpMap:!!de.bumpMap,normalMap:!!de.normalMap,objectSpaceNormalMap:1===de.normalMapType,tangentSpaceNormalMap:0===de.normalMapType,clearcoat:nr,clearcoatMap:nr&&!!de.clearcoatMap,clearcoatRoughnessMap:nr&&!!de.clearcoatRoughnessMap,clearcoatNormalMap:nr&&!!de.clearcoatNormalMap,displacementMap:!!de.displacementMap,roughnessMap:!!de.roughnessMap,metalnessMap:!!de.metalnessMap,specularMap:!!de.specularMap,specularIntensityMap:!!de.specularIntensityMap,specularTintMap:!!de.specularTintMap,specularTintMapEncoding:V(de.specularTintMap),alphaMap:!!de.alphaMap,alphaTest:Lr,gradientMap:!!de.gradientMap,sheenTint:!!de.sheenTint&&(de.sheenTint.r>0||de.sheenTint.g>0||de.sheenTint.b>0),transmission:de.transmission>0,transmissionMap:!!de.transmissionMap,thicknessMap:!!de.thicknessMap,combine:de.combine,vertexTangents:!!de.normalMap&&!!Ke.geometry&&!!Ke.geometry.attributes.tangent,vertexColors:de.vertexColors,vertexAlphas:!0===de.vertexColors&&!!Ke.geometry&&!!Ke.geometry.attributes.color&&4===Ke.geometry.attributes.color.itemSize,vertexUvs:!!(de.map||de.bumpMap||de.normalMap||de.specularMap||de.alphaMap||de.emissiveMap||de.roughnessMap||de.metalnessMap||de.clearcoatMap||de.clearcoatRoughnessMap||de.clearcoatNormalMap||de.displacementMap||de.transmissionMap||de.thicknessMap||de.specularIntensityMap||de.specularTintMap),uvsVertexOnly:!(de.map||de.bumpMap||de.normalMap||de.specularMap||de.alphaMap||de.emissiveMap||de.roughnessMap||de.metalnessMap||de.clearcoatNormalMap||de.transmission>0||de.transmissionMap||de.thicknessMap||de.specularIntensityMap||de.specularTintMap||!de.displacementMap),fog:!!hn,useFog:de.fog,fogExp2:hn&&hn.isFogExp2,flatShading:!!de.flatShading,sizeAttenuation:de.sizeAttenuation,logarithmicDepthBuffer:M,skinning:!0===Ke.isSkinnedMesh&&Dt>0,maxBones:Dt,useVertexTexture:A,morphTargets:!!Ke.geometry&&!!Ke.geometry.morphAttributes.position,morphNormals:!!Ke.geometry&&!!Ke.geometry.morphAttributes.normal,numDirLights:Qe.directional.length,numPointLights:Qe.point.length,numSpotLights:Qe.spot.length,numRectAreaLights:Qe.rectArea.length,numHemiLights:Qe.hemi.length,numDirLightShadows:Qe.directionalShadowMap.length,numPointLightShadows:Qe.pointShadowMap.length,numSpotLightShadows:Qe.spotShadowMap.length,numClippingPlanes:m.numPlanes,numClipIntersection:m.numIntersection,format:de.format,dithering:de.dithering,shadowMapEnabled:p.shadowMap.enabled&&Pt.length>0,shadowMapType:p.shadowMap.type,toneMapping:de.toneMapped?p.toneMapping:0,physicallyCorrectLights:p.physicallyCorrectLights,premultipliedAlpha:de.premultipliedAlpha,doubleSided:2===de.side,flipSided:de.side===He,depthPacking:void 0!==de.depthPacking&&de.depthPacking,index0AttributeName:de.index0AttributeName,extensionDerivatives:de.extensions&&de.extensions.derivatives,extensionFragDepth:de.extensions&&de.extensions.fragDepth,extensionDrawBuffers:de.extensions&&de.extensions.drawBuffers,extensionShaderTextureLOD:de.extensions&&de.extensions.shaderTextureLOD,rendererExtensionFragDepth:w||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:w||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:w||s.has("EXT_shader_texture_lod"),customProgramCacheKey:de.customProgramCacheKey()}},getProgramCacheKey:function(de){const Qe=[];if(de.shaderID?Qe.push(de.shaderID):(Qe.push(de.fragmentShader),Qe.push(de.vertexShader)),void 0!==de.defines)for(const Pt in de.defines)Qe.push(Pt),Qe.push(de.defines[Pt]);if(!1===de.isRawShaderMaterial){for(let Pt=0;Pt<W.length;Pt++)Qe.push(de[W[Pt]]);Qe.push(p.outputEncoding),Qe.push(p.gammaFactor)}return Qe.push(de.customProgramCacheKey),Qe.join()},getUniforms:function(de){const Qe=k[de.type];let Pt;return Pt=Qe?Du.clone(ii[Qe].uniforms):de.uniforms,Pt},acquireProgram:function(de,Qe){let Pt;for(let ct=0,Ke=y.length;ct<Ke;ct++){const hn=y[ct];if(hn.cacheKey===Qe){Pt=hn,++Pt.usedTimes;break}}return void 0===Pt&&(Pt=new Ax(p,Qe,de,c),y.push(Pt)),Pt},releaseProgram:function(de){if(0==--de.usedTimes){const Qe=y.indexOf(de);y[Qe]=y[y.length-1],y.pop(),de.destroy()}},programs:y}}function s_(){let p=new WeakMap;return{get:function(c){let m=p.get(c);return void 0===m&&(m={},p.set(c,m)),m},remove:function(c){p.delete(c)},update:function(c,m,y){p.get(c)[m]=y},dispose:function(){p=new WeakMap}}}function zy(p,e){return p.groupOrder!==e.groupOrder?p.groupOrder-e.groupOrder:p.renderOrder!==e.renderOrder?p.renderOrder-e.renderOrder:p.program!==e.program?p.program.id-e.program.id:p.material.id!==e.material.id?p.material.id-e.material.id:p.z!==e.z?p.z-e.z:p.id-e.id}function Hy(p,e){return p.groupOrder!==e.groupOrder?p.groupOrder-e.groupOrder:p.renderOrder!==e.renderOrder?p.renderOrder-e.renderOrder:p.z!==e.z?e.z-p.z:p.id-e.id}function Gy(p){const e=[];let r=0;const s=[],a=[],c=[],m={id:-1};function w(O,k,W,Z,V,B){let ce=e[r];const le=p.get(W);return void 0===ce?(ce={id:O.id,object:O,geometry:k,material:W,program:le.program||m,groupOrder:Z,renderOrder:O.renderOrder,z:V,group:B},e[r]=ce):(ce.id=O.id,ce.object=O,ce.geometry=k,ce.material=W,ce.program=le.program||m,ce.groupOrder=Z,ce.renderOrder=O.renderOrder,ce.z=V,ce.group=B),r++,ce}return{opaque:s,transmissive:a,transparent:c,init:function(){r=0,s.length=0,a.length=0,c.length=0},push:function(O,k,W,Z,V,B){const ce=w(O,k,W,Z,V,B);W.transmission>0?a.push(ce):!0===W.transparent?c.push(ce):s.push(ce)},unshift:function(O,k,W,Z,V,B){const ce=w(O,k,W,Z,V,B);W.transmission>0?a.unshift(ce):!0===W.transparent?c.unshift(ce):s.unshift(ce)},finish:function(){for(let O=r,k=e.length;O<k;O++){const W=e[O];if(null===W.id)break;W.id=null,W.object=null,W.geometry=null,W.material=null,W.program=null,W.group=null}},sort:function(O,k){s.length>1&&s.sort(O||zy),a.length>1&&a.sort(k||Hy),c.length>1&&c.sort(k||Hy)}}}function Kf(p){let e=new WeakMap;return{get:function(a,c){let m;return!1===e.has(a)?(m=new Gy(p),e.set(a,[m])):c>=e.get(a).length?(m=new Gy(p),e.get(a).push(m)):m=e.get(a)[c],m},dispose:function(){e=new WeakMap}}}function nf(){const p={};return{get:function(e){if(void 0!==p[e.id])return p[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new pe,color:new vt};break;case"SpotLight":r={position:new pe,direction:new pe,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new pe,color:new vt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new pe,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":r={color:new vt,position:new pe,halfWidth:new pe,halfHeight:new pe}}return p[e.id]=r,r}}}let rf=0;function Qf(p,e){return(e.castShadow?1:0)-(p.castShadow?1:0)}function sf(p,e){const r=new nf,s=function(){const p={};return{get:function(e){if(void 0!==p[e.id])return p[e.id];let r;switch(e.type){case"DirectionalLight":case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new at};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new at,shadowCameraNear:1,shadowCameraFar:1e3}}return p[e.id]=r,r}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let A=0;A<9;A++)a.probe.push(new pe);const c=new pe,m=new $n,y=new $n;return{setup:function(A,P){let R=0,O=0,k=0;for(let Pt=0;Pt<9;Pt++)a.probe[Pt].set(0,0,0);let W=0,Z=0,V=0,B=0,ce=0,le=0,Ee=0,Fe=0;A.sort(Qf);const de=!0!==P?Math.PI:1;for(let Pt=0,ct=A.length;Pt<ct;Pt++){const Ke=A[Pt],hn=Ke.color,At=Ke.intensity,Ct=Ke.distance,Nt=Ke.shadow&&Ke.shadow.map?Ke.shadow.map.texture:null;if(Ke.isAmbientLight)R+=hn.r*At*de,O+=hn.g*At*de,k+=hn.b*At*de;else if(Ke.isLightProbe)for(let Dt=0;Dt<9;Dt++)a.probe[Dt].addScaledVector(Ke.sh.coefficients[Dt],At);else if(Ke.isDirectionalLight){const Dt=r.get(Ke);if(Dt.color.copy(Ke.color).multiplyScalar(Ke.intensity*de),Ke.castShadow){const Gt=Ke.shadow,Pn=s.get(Ke);Pn.shadowBias=Gt.bias,Pn.shadowNormalBias=Gt.normalBias,Pn.shadowRadius=Gt.radius,Pn.shadowMapSize=Gt.mapSize,a.directionalShadow[W]=Pn,a.directionalShadowMap[W]=Nt,a.directionalShadowMatrix[W]=Ke.shadow.matrix,le++}a.directional[W]=Dt,W++}else if(Ke.isSpotLight){const Dt=r.get(Ke);if(Dt.position.setFromMatrixPosition(Ke.matrixWorld),Dt.color.copy(hn).multiplyScalar(At*de),Dt.distance=Ct,Dt.coneCos=Math.cos(Ke.angle),Dt.penumbraCos=Math.cos(Ke.angle*(1-Ke.penumbra)),Dt.decay=Ke.decay,Ke.castShadow){const Gt=Ke.shadow,Pn=s.get(Ke);Pn.shadowBias=Gt.bias,Pn.shadowNormalBias=Gt.normalBias,Pn.shadowRadius=Gt.radius,Pn.shadowMapSize=Gt.mapSize,a.spotShadow[V]=Pn,a.spotShadowMap[V]=Nt,a.spotShadowMatrix[V]=Ke.shadow.matrix,Fe++}a.spot[V]=Dt,V++}else if(Ke.isRectAreaLight){const Dt=r.get(Ke);Dt.color.copy(hn).multiplyScalar(At),Dt.halfWidth.set(.5*Ke.width,0,0),Dt.halfHeight.set(0,.5*Ke.height,0),a.rectArea[B]=Dt,B++}else if(Ke.isPointLight){const Dt=r.get(Ke);if(Dt.color.copy(Ke.color).multiplyScalar(Ke.intensity*de),Dt.distance=Ke.distance,Dt.decay=Ke.decay,Ke.castShadow){const Gt=Ke.shadow,Pn=s.get(Ke);Pn.shadowBias=Gt.bias,Pn.shadowNormalBias=Gt.normalBias,Pn.shadowRadius=Gt.radius,Pn.shadowMapSize=Gt.mapSize,Pn.shadowCameraNear=Gt.camera.near,Pn.shadowCameraFar=Gt.camera.far,a.pointShadow[Z]=Pn,a.pointShadowMap[Z]=Nt,a.pointShadowMatrix[Z]=Ke.shadow.matrix,Ee++}a.point[Z]=Dt,Z++}else if(Ke.isHemisphereLight){const Dt=r.get(Ke);Dt.skyColor.copy(Ke.color).multiplyScalar(At*de),Dt.groundColor.copy(Ke.groundColor).multiplyScalar(At*de),a.hemi[ce]=Dt,ce++}}B>0&&(e.isWebGL2||!0===p.has("OES_texture_float_linear")?(a.rectAreaLTC1=Qt.LTC_FLOAT_1,a.rectAreaLTC2=Qt.LTC_FLOAT_2):!0===p.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=Qt.LTC_HALF_1,a.rectAreaLTC2=Qt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=R,a.ambient[1]=O,a.ambient[2]=k;const Qe=a.hash;(Qe.directionalLength!==W||Qe.pointLength!==Z||Qe.spotLength!==V||Qe.rectAreaLength!==B||Qe.hemiLength!==ce||Qe.numDirectionalShadows!==le||Qe.numPointShadows!==Ee||Qe.numSpotShadows!==Fe)&&(a.directional.length=W,a.spot.length=V,a.rectArea.length=B,a.point.length=Z,a.hemi.length=ce,a.directionalShadow.length=le,a.directionalShadowMap.length=le,a.pointShadow.length=Ee,a.pointShadowMap.length=Ee,a.spotShadow.length=Fe,a.spotShadowMap.length=Fe,a.directionalShadowMatrix.length=le,a.pointShadowMatrix.length=Ee,a.spotShadowMatrix.length=Fe,Qe.directionalLength=W,Qe.pointLength=Z,Qe.spotLength=V,Qe.rectAreaLength=B,Qe.hemiLength=ce,Qe.numDirectionalShadows=le,Qe.numPointShadows=Ee,Qe.numSpotShadows=Fe,a.version=rf++)},setupView:function(A,P){let R=0,O=0,k=0,W=0,Z=0;const V=P.matrixWorldInverse;for(let B=0,ce=A.length;B<ce;B++){const le=A[B];if(le.isDirectionalLight){const Ee=a.directional[R];Ee.direction.setFromMatrixPosition(le.matrixWorld),c.setFromMatrixPosition(le.target.matrixWorld),Ee.direction.sub(c),Ee.direction.transformDirection(V),R++}else if(le.isSpotLight){const Ee=a.spot[k];Ee.position.setFromMatrixPosition(le.matrixWorld),Ee.position.applyMatrix4(V),Ee.direction.setFromMatrixPosition(le.matrixWorld),c.setFromMatrixPosition(le.target.matrixWorld),Ee.direction.sub(c),Ee.direction.transformDirection(V),k++}else if(le.isRectAreaLight){const Ee=a.rectArea[W];Ee.position.setFromMatrixPosition(le.matrixWorld),Ee.position.applyMatrix4(V),y.identity(),m.copy(le.matrixWorld),m.premultiply(V),y.extractRotation(m),Ee.halfWidth.set(.5*le.width,0,0),Ee.halfHeight.set(0,.5*le.height,0),Ee.halfWidth.applyMatrix4(y),Ee.halfHeight.applyMatrix4(y),W++}else if(le.isPointLight){const Ee=a.point[O];Ee.position.setFromMatrixPosition(le.matrixWorld),Ee.position.applyMatrix4(V),O++}else if(le.isHemisphereLight){const Ee=a.hemi[Z];Ee.direction.setFromMatrixPosition(le.matrixWorld),Ee.direction.transformDirection(V),Ee.direction.normalize(),Z++}}},state:a}}function jy(p,e){const r=new sf(p,e),s=[],a=[];return{init:function(){s.length=0,a.length=0},state:{lightsArray:s,shadowsArray:a,lights:r},setupLights:function(P){r.setup(s,P)},setupLightsView:function(P){r.setupView(s,P)},pushLight:function(P){s.push(P)},pushShadow:function(P){a.push(P)}}}function Wy(p,e){let r=new WeakMap;return{get:function(c,m=0){let y;return!1===r.has(c)?(y=new jy(p,e),r.set(c,[y])):m>=r.get(c).length?(y=new jy(p,e),r.get(c).push(y)):y=r.get(c)[m],y},dispose:function(){r=new WeakMap}}}class Jd extends X{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Jd.prototype.isMeshDepthMaterial=!0;class Zf extends X{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new pe,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Jf(p,e,r){let s=new Pd;const a=new at,c=new at,m=new ci,y=new Jd({depthPacking:3201}),w=new Zf,M={},A=r.maxTextureSize,P={0:He,1:0,2:2},R=new El({uniforms:{shadow_pass:{value:null},resolution:{value:new at},radius:{value:4},samples:{value:8}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),O=R.clone();O.defines.HORIZONTAL_PASS=1;const k=new rn;k.setAttribute("position",new Bt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const W=new Ws(k,R),Z=this;function V(le,Ee){const Fe=e.update(W);R.uniforms.shadow_pass.value=le.map.texture,R.uniforms.resolution.value=le.mapSize,R.uniforms.radius.value=le.radius,R.uniforms.samples.value=le.blurSamples,p.setRenderTarget(le.mapPass),p.clear(),p.renderBufferDirect(Ee,null,Fe,R,W,null),O.uniforms.shadow_pass.value=le.mapPass.texture,O.uniforms.resolution.value=le.mapSize,O.uniforms.radius.value=le.radius,O.uniforms.samples.value=le.blurSamples,p.setRenderTarget(le.map),p.clear(),p.renderBufferDirect(Ee,null,Fe,O,W,null)}function B(le,Ee,Fe,de,Qe,Pt,ct){let Ke=null;const hn=!0===de.isPointLight?le.customDistanceMaterial:le.customDepthMaterial;if(Ke=void 0!==hn?hn:!0===de.isPointLight?w:y,p.localClippingEnabled&&!0===Fe.clipShadows&&0!==Fe.clippingPlanes.length||Fe.displacementMap&&0!==Fe.displacementScale||Fe.alphaMap&&Fe.alphaTest>0){const At=Ke.uuid,Ct=Fe.uuid;let Nt=M[At];void 0===Nt&&(Nt={},M[At]=Nt);let Dt=Nt[Ct];void 0===Dt&&(Dt=Ke.clone(),Nt[Ct]=Dt),Ke=Dt}return Ke.visible=Fe.visible,Ke.wireframe=Fe.wireframe,Ke.side=3===ct?null!==Fe.shadowSide?Fe.shadowSide:Fe.side:null!==Fe.shadowSide?Fe.shadowSide:P[Fe.side],Ke.alphaMap=Fe.alphaMap,Ke.alphaTest=Fe.alphaTest,Ke.clipShadows=Fe.clipShadows,Ke.clippingPlanes=Fe.clippingPlanes,Ke.clipIntersection=Fe.clipIntersection,Ke.displacementMap=Fe.displacementMap,Ke.displacementScale=Fe.displacementScale,Ke.displacementBias=Fe.displacementBias,Ke.wireframeLinewidth=Fe.wireframeLinewidth,Ke.linewidth=Fe.linewidth,!0===de.isPointLight&&!0===Ke.isMeshDistanceMaterial&&(Ke.referencePosition.setFromMatrixPosition(de.matrixWorld),Ke.nearDistance=Qe,Ke.farDistance=Pt),Ke}function ce(le,Ee,Fe,de,Qe){if(!1===le.visible)return;if(le.layers.test(Ee.layers)&&(le.isMesh||le.isLine||le.isPoints)&&(le.castShadow||le.receiveShadow&&3===Qe)&&(!le.frustumCulled||s.intersectsObject(le))){le.modelViewMatrix.multiplyMatrices(Fe.matrixWorldInverse,le.matrixWorld);const Ke=e.update(le),hn=le.material;if(Array.isArray(hn)){const At=Ke.groups;for(let Ct=0,Nt=At.length;Ct<Nt;Ct++){const Dt=At[Ct],Gt=hn[Dt.materialIndex];if(Gt&&Gt.visible){const Pn=B(le,0,Gt,de,Fe.near,Fe.far,Qe);p.renderBufferDirect(Fe,null,Ke,Pn,le,Dt)}}}else if(hn.visible){const At=B(le,0,hn,de,Fe.near,Fe.far,Qe);p.renderBufferDirect(Fe,null,Ke,At,le,null)}}const ct=le.children;for(let Ke=0,hn=ct.length;Ke<hn;Ke++)ce(ct[Ke],Ee,Fe,de,Qe)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(le,Ee,Fe){if(!1===Z.enabled||!1===Z.autoUpdate&&!1===Z.needsUpdate||0===le.length)return;const de=p.getRenderTarget(),Qe=p.getActiveCubeFace(),Pt=p.getActiveMipmapLevel(),ct=p.state;ct.setBlending(0),ct.buffers.color.setClear(1,1,1,1),ct.buffers.depth.setTest(!0),ct.setScissorTest(!1);for(let Ke=0,hn=le.length;Ke<hn;Ke++){const At=le[Ke],Ct=At.shadow;if(void 0===Ct){console.warn("THREE.WebGLShadowMap:",At,"has no shadow.");continue}if(!1===Ct.autoUpdate&&!1===Ct.needsUpdate)continue;a.copy(Ct.mapSize);const Nt=Ct.getFrameExtents();if(a.multiply(Nt),c.copy(Ct.mapSize),(a.x>A||a.y>A)&&(a.x>A&&(c.x=Math.floor(A/Nt.x),a.x=c.x*Nt.x,Ct.mapSize.x=c.x),a.y>A&&(c.y=Math.floor(A/Nt.y),a.y=c.y*Nt.y,Ct.mapSize.y=c.y)),null===Ct.map&&!Ct.isPointLightShadow&&3===this.type){const Gt={minFilter:Jn,magFilter:Jn,format:Is};Ct.map=new Cs(a.x,a.y,Gt),Ct.map.texture.name=At.name+".shadowMap",Ct.mapPass=new Cs(a.x,a.y,Gt),Ct.camera.updateProjectionMatrix()}null===Ct.map&&(Ct.map=new Cs(a.x,a.y,{minFilter:Ji,magFilter:Ji,format:Is}),Ct.map.texture.name=At.name+".shadowMap",Ct.camera.updateProjectionMatrix()),p.setRenderTarget(Ct.map),p.clear();const Dt=Ct.getViewportCount();for(let Gt=0;Gt<Dt;Gt++){const Pn=Ct.getViewport(Gt);m.set(c.x*Pn.x,c.y*Pn.y,c.x*Pn.z,c.y*Pn.w),ct.viewport(m),Ct.updateMatrices(At,Gt),s=Ct.getFrustum(),ce(Ee,Fe,Ct.camera,At,this.type)}!Ct.isPointLightShadow&&3===this.type&&V(Ct,Fe),Ct.needsUpdate=!1}Z.needsUpdate=!1,p.setRenderTarget(de,Qe,Pt)}}function o_(p,e,r){const s=r.isWebGL2,y=new function(){let it=!1;const Qn=new ci;let Zt=null;const fr=new ci(0,0,0,0);return{setMask:function(xr){Zt!==xr&&!it&&(p.colorMask(xr,xr,xr,xr),Zt=xr)},setLocked:function(xr){it=xr},setClear:function(xr,$i,ya,Za,gu){!0===gu&&(xr*=Za,$i*=Za,ya*=Za),Qn.set(xr,$i,ya,Za),!1===fr.equals(Qn)&&(p.clearColor(xr,$i,ya,Za),fr.copy(Qn))},reset:function(){it=!1,Zt=null,fr.set(-1,0,0,0)}}},w=new function(){let it=!1,Qn=null,Zt=null,fr=null;return{setTest:function(xr){xr?Kn(2929):hr(2929)},setMask:function(xr){Qn!==xr&&!it&&(p.depthMask(xr),Qn=xr)},setFunc:function(xr){if(Zt!==xr){if(xr)switch(xr){case 0:p.depthFunc(512);break;case 1:p.depthFunc(519);break;case 2:p.depthFunc(513);break;case 3:p.depthFunc(515);break;case 4:p.depthFunc(514);break;case 5:p.depthFunc(518);break;case 6:p.depthFunc(516);break;case 7:p.depthFunc(517);break;default:p.depthFunc(515)}else p.depthFunc(515);Zt=xr}},setLocked:function(xr){it=xr},setClear:function(xr){fr!==xr&&(p.clearDepth(xr),fr=xr)},reset:function(){it=!1,Qn=null,Zt=null,fr=null}}},M=new function(){let it=!1,Qn=null,Zt=null,fr=null,xr=null,$i=null,ya=null,Za=null,gu=null;return{setTest:function(Ro){it||(Ro?Kn(2960):hr(2960))},setMask:function(Ro){Qn!==Ro&&!it&&(p.stencilMask(Ro),Qn=Ro)},setFunc:function(Ro,yu,vu){(Zt!==Ro||fr!==yu||xr!==vu)&&(p.stencilFunc(Ro,yu,vu),Zt=Ro,fr=yu,xr=vu)},setOp:function(Ro,yu,vu){($i!==Ro||ya!==yu||Za!==vu)&&(p.stencilOp(Ro,yu,vu),$i=Ro,ya=yu,Za=vu)},setLocked:function(Ro){it=Ro},setClear:function(Ro){gu!==Ro&&(p.clearStencil(Ro),gu=Ro)},reset:function(){it=!1,Qn=null,Zt=null,fr=null,xr=null,$i=null,ya=null,Za=null,gu=null}}};let A={},P=null,R={},O=null,k=!1,W=null,Z=null,V=null,B=null,ce=null,le=null,Ee=null,Fe=!1,de=null,Qe=null,Pt=null,ct=null,Ke=null;const hn=p.getParameter(35661);let At=!1,Ct=0;const Nt=p.getParameter(7938);-1!==Nt.indexOf("WebGL")?(Ct=parseFloat(/^WebGL (\d)/.exec(Nt)[1]),At=Ct>=1):-1!==Nt.indexOf("OpenGL ES")&&(Ct=parseFloat(/^OpenGL ES (\d)/.exec(Nt)[1]),At=Ct>=2);let Dt=null,Gt={};const Pn=p.getParameter(3088),vr=p.getParameter(2978),Lr=(new ci).fromArray(Pn),nr=(new ci).fromArray(vr);function Qr(it,Qn,Zt){const fr=new Uint8Array(4),xr=p.createTexture();p.bindTexture(it,xr),p.texParameteri(it,10241,9728),p.texParameteri(it,10240,9728);for(let $i=0;$i<Zt;$i++)p.texImage2D(Qn+$i,0,6408,1,1,0,6408,5121,fr);return xr}const on={};function Kn(it){!0!==A[it]&&(p.enable(it),A[it]=!0)}function hr(it){!1!==A[it]&&(p.disable(it),A[it]=!1)}on[3553]=Qr(3553,3553,1),on[34067]=Qr(34067,34069,6),y.setClear(0,0,0,1),w.setClear(1),M.setClear(0),Kn(2929),w.setFunc(3),yn(!1),In(1),Kn(2884),vi(0);const _r={100:32774,101:32778,102:32779};if(s)_r[103]=32775,_r[104]=32776;else{const it=e.get("EXT_blend_minmax");null!==it&&(_r[103]=it.MIN_EXT,_r[104]=it.MAX_EXT)}const Mr={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function vi(it,Qn,Zt,fr,xr,$i,ya,Za){if(0!==it){if(!1===k&&(Kn(3042),k=!0),5===it)xr=xr||Qn,$i=$i||Zt,ya=ya||fr,(Qn!==Z||xr!==ce)&&(p.blendEquationSeparate(_r[Qn],_r[xr]),Z=Qn,ce=xr),(Zt!==V||fr!==B||$i!==le||ya!==Ee)&&(p.blendFuncSeparate(Mr[Zt],Mr[fr],Mr[$i],Mr[ya]),V=Zt,B=fr,le=$i,Ee=ya),W=it,Fe=null;else if(it!==W||Za!==Fe){if((100!==Z||100!==ce)&&(p.blendEquation(32774),Z=100,ce=100),Za)switch(it){case 1:p.blendFuncSeparate(1,771,1,771);break;case 2:p.blendFunc(1,1);break;case 3:p.blendFuncSeparate(0,0,769,771);break;case 4:p.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",it)}else switch(it){case 1:p.blendFuncSeparate(770,771,1,771);break;case 2:p.blendFunc(770,1);break;case 3:p.blendFunc(0,769);break;case 4:p.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",it)}V=null,B=null,le=null,Ee=null,W=it,Fe=Za}}else!0===k&&(hr(3042),k=!1)}function yn(it){de!==it&&(p.frontFace(it?2304:2305),de=it)}function In(it){0!==it?(Kn(2884),it!==Qe&&p.cullFace(1===it?1029:2===it?1028:1032)):hr(2884),Qe=it}function Wn(it,Qn,Zt){it?(Kn(32823),(ct!==Qn||Ke!==Zt)&&(p.polygonOffset(Qn,Zt),ct=Qn,Ke=Zt)):hr(32823)}function we(it){void 0===it&&(it=33984+hn-1),Dt!==it&&(p.activeTexture(it),Dt=it)}return{buffers:{color:y,depth:w,stencil:M},enable:Kn,disable:hr,bindFramebuffer:function(it,Qn){return null===Qn&&null!==P&&(Qn=P),R[it]!==Qn&&(p.bindFramebuffer(it,Qn),R[it]=Qn,s&&(36009===it&&(R[36160]=Qn),36160===it&&(R[36009]=Qn)),!0)},bindXRFramebuffer:function(it){it!==P&&(p.bindFramebuffer(36160,it),P=it)},useProgram:function(it){return O!==it&&(p.useProgram(it),O=it,!0)},setBlending:vi,setMaterial:function(it,Qn){2===it.side?hr(2884):Kn(2884);let Zt=it.side===He;Qn&&(Zt=!Zt),yn(Zt),1===it.blending&&!1===it.transparent?vi(0):vi(it.blending,it.blendEquation,it.blendSrc,it.blendDst,it.blendEquationAlpha,it.blendSrcAlpha,it.blendDstAlpha,it.premultipliedAlpha),w.setFunc(it.depthFunc),w.setTest(it.depthTest),w.setMask(it.depthWrite),y.setMask(it.colorWrite);const fr=it.stencilWrite;M.setTest(fr),fr&&(M.setMask(it.stencilWriteMask),M.setFunc(it.stencilFunc,it.stencilRef,it.stencilFuncMask),M.setOp(it.stencilFail,it.stencilZFail,it.stencilZPass)),Wn(it.polygonOffset,it.polygonOffsetFactor,it.polygonOffsetUnits),!0===it.alphaToCoverage?Kn(32926):hr(32926)},setFlipSided:yn,setCullFace:In,setLineWidth:function(it){it!==Pt&&(At&&p.lineWidth(it),Pt=it)},setPolygonOffset:Wn,setScissorTest:function(it){it?Kn(3089):hr(3089)},activeTexture:we,bindTexture:function(it,Qn){null===Dt&&we();let Zt=Gt[Dt];void 0===Zt&&(Zt={type:void 0,texture:void 0},Gt[Dt]=Zt),(Zt.type!==it||Zt.texture!==Qn)&&(p.bindTexture(it,Qn||on[it]),Zt.type=it,Zt.texture=Qn)},unbindTexture:function(){const it=Gt[Dt];void 0!==it&&void 0!==it.type&&(p.bindTexture(it.type,null),it.type=void 0,it.texture=void 0)},compressedTexImage2D:function(){try{p.compressedTexImage2D.apply(p,arguments)}catch(it){console.error("THREE.WebGLState:",it)}},texImage2D:function(){try{p.texImage2D.apply(p,arguments)}catch(it){console.error("THREE.WebGLState:",it)}},texImage3D:function(){try{p.texImage3D.apply(p,arguments)}catch(it){console.error("THREE.WebGLState:",it)}},scissor:function(it){!1===Lr.equals(it)&&(p.scissor(it.x,it.y,it.z,it.w),Lr.copy(it))},viewport:function(it){!1===nr.equals(it)&&(p.viewport(it.x,it.y,it.z,it.w),nr.copy(it))},reset:function(){p.disable(3042),p.disable(2884),p.disable(2929),p.disable(32823),p.disable(3089),p.disable(2960),p.disable(32926),p.blendEquation(32774),p.blendFunc(1,0),p.blendFuncSeparate(1,0,1,0),p.colorMask(!0,!0,!0,!0),p.clearColor(0,0,0,0),p.depthMask(!0),p.depthFunc(513),p.clearDepth(1),p.stencilMask(4294967295),p.stencilFunc(519,0,4294967295),p.stencilOp(7680,7680,7680),p.clearStencil(0),p.cullFace(1029),p.frontFace(2305),p.polygonOffset(0,0),p.activeTexture(33984),p.bindFramebuffer(36160,null),!0===s&&(p.bindFramebuffer(36009,null),p.bindFramebuffer(36008,null)),p.useProgram(null),p.lineWidth(1),p.scissor(0,0,p.canvas.width,p.canvas.height),p.viewport(0,0,p.canvas.width,p.canvas.height),A={},Dt=null,Gt={},P=null,R={},O=null,k=!1,W=null,Z=null,V=null,B=null,ce=null,le=null,Ee=null,Fe=!1,de=null,Qe=null,Pt=null,ct=null,Ke=null,Lr.set(0,0,p.canvas.width,p.canvas.height),nr.set(0,0,p.canvas.width,p.canvas.height),y.reset(),w.reset(),M.reset()}}}function qy(p,e,r,s,a,c,m){const y=a.isWebGL2,w=a.maxTextures,M=a.maxCubemapSize,A=a.maxTextureSize,P=a.maxSamples,R=new WeakMap;let O,k=!1;try{k="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Pe){}function W(Pe,we){return k?new OffscreenCanvas(Pe,we):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Z(Pe,we,Vt,an){let Yn=1;if((Pe.width>an||Pe.height>an)&&(Yn=an/Math.max(Pe.width,Pe.height)),Yn<1||!0===we){if("undefined"!=typeof HTMLImageElement&&Pe instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&Pe instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&Pe instanceof ImageBitmap){const ur=we?zn:Math.floor,$r=ur(Yn*Pe.width),Or=ur(Yn*Pe.height);void 0===O&&(O=W($r,Or));const Hr=Vt?W($r,Or):O;return Hr.width=$r,Hr.height=Or,Hr.getContext("2d").drawImage(Pe,0,0,$r,Or),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Pe.width+"x"+Pe.height+") to ("+$r+"x"+Or+")."),Hr}return"data"in Pe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Pe.width+"x"+Pe.height+")."),Pe}return Pe}function V(Pe){return Rt(Pe.width)&&Rt(Pe.height)}function ce(Pe,we){return Pe.generateMipmaps&&we&&Pe.minFilter!==Ji&&Pe.minFilter!==Jn}function le(Pe,we,Vt,an,Yn=1){p.generateMipmap(Pe),s.get(we).__maxMipLevel=Math.log2(Math.max(Vt,an,Yn))}function Ee(Pe,we,Vt){if(!1===y)return we;if(null!==Pe){if(void 0!==p[Pe])return p[Pe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Pe+"'")}let an=we;return 6403===we&&(5126===Vt&&(an=33326),5131===Vt&&(an=33325),5121===Vt&&(an=33321)),6407===we&&(5126===Vt&&(an=34837),5131===Vt&&(an=34843),5121===Vt&&(an=32849)),6408===we&&(5126===Vt&&(an=34836),5131===Vt&&(an=34842),5121===Vt&&(an=32856)),(33325===an||33326===an||34842===an||34836===an)&&e.get("EXT_color_buffer_float"),an}function Fe(Pe){return Pe===Ji||1004===Pe||1005===Pe?9728:9729}function de(Pe){const we=Pe.target;we.removeEventListener("dispose",de),function(Pe){const we=s.get(Pe);void 0!==we.__webglInit&&(p.deleteTexture(we.__webglTexture),s.remove(Pe))}(we),we.isVideoTexture&&R.delete(we),m.memory.textures--}function Qe(Pe){const we=Pe.target;we.removeEventListener("dispose",Qe),function(Pe){const we=Pe.texture,Vt=s.get(Pe),an=s.get(we);if(Pe){if(void 0!==an.__webglTexture&&(p.deleteTexture(an.__webglTexture),m.memory.textures--),Pe.depthTexture&&Pe.depthTexture.dispose(),Pe.isWebGLCubeRenderTarget)for(let Yn=0;Yn<6;Yn++)p.deleteFramebuffer(Vt.__webglFramebuffer[Yn]),Vt.__webglDepthbuffer&&p.deleteRenderbuffer(Vt.__webglDepthbuffer[Yn]);else p.deleteFramebuffer(Vt.__webglFramebuffer),Vt.__webglDepthbuffer&&p.deleteRenderbuffer(Vt.__webglDepthbuffer),Vt.__webglMultisampledFramebuffer&&p.deleteFramebuffer(Vt.__webglMultisampledFramebuffer),Vt.__webglColorRenderbuffer&&p.deleteRenderbuffer(Vt.__webglColorRenderbuffer),Vt.__webglDepthRenderbuffer&&p.deleteRenderbuffer(Vt.__webglDepthRenderbuffer);if(Pe.isWebGLMultipleRenderTargets)for(let Yn=0,ur=we.length;Yn<ur;Yn++){const $r=s.get(we[Yn]);$r.__webglTexture&&(p.deleteTexture($r.__webglTexture),m.memory.textures--),s.remove(we[Yn])}s.remove(we),s.remove(Pe)}}(we)}let Ke=0;function Ct(Pe,we){const Vt=s.get(Pe);if(Pe.isVideoTexture&&function(Pe){const we=m.render.frame;R.get(Pe)!==we&&(R.set(Pe,we),Pe.update())}(Pe),Pe.version>0&&Vt.__version!==Pe.version){const an=Pe.image;if(void 0===an)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==an.complete)return void Qr(Vt,Pe,we);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.activeTexture(33984+we),r.bindTexture(3553,Vt.__webglTexture)}function Gt(Pe,we){const Vt=s.get(Pe);Pe.version>0&&Vt.__version!==Pe.version?function(Pe,we,Vt){if(6!==we.image.length)return;nr(Pe,we),r.activeTexture(33984+Vt),r.bindTexture(34067,Pe.__webglTexture),p.pixelStorei(37440,we.flipY),p.pixelStorei(37441,we.premultiplyAlpha),p.pixelStorei(3317,we.unpackAlignment),p.pixelStorei(37443,0);const an=we&&(we.isCompressedTexture||we.image[0].isCompressedTexture),Yn=we.image[0]&&we.image[0].isDataTexture,ur=[];for(let Zt=0;Zt<6;Zt++)ur[Zt]=an||Yn?Yn?we.image[Zt].image:we.image[Zt]:Z(we.image[Zt],!1,!0,M);const $r=ur[0],Or=V($r)||y,Hr=c.convert(we.format),Dr=c.convert(we.type),it=Ee(we.internalFormat,Hr,Dr);let Qn;if(Lr(34067,we,Or),an){for(let Zt=0;Zt<6;Zt++){Qn=ur[Zt].mipmaps;for(let fr=0;fr<Qn.length;fr++){const xr=Qn[fr];we.format!==Is&&we.format!==cs?null!==Hr?r.compressedTexImage2D(34069+Zt,fr,it,xr.width,xr.height,0,xr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+Zt,fr,it,xr.width,xr.height,0,Hr,Dr,xr.data)}}Pe.__maxMipLevel=Qn.length-1}else{Qn=we.mipmaps;for(let Zt=0;Zt<6;Zt++)if(Yn){r.texImage2D(34069+Zt,0,it,ur[Zt].width,ur[Zt].height,0,Hr,Dr,ur[Zt].data);for(let fr=0;fr<Qn.length;fr++){const $i=Qn[fr].image[Zt].image;r.texImage2D(34069+Zt,fr+1,it,$i.width,$i.height,0,Hr,Dr,$i.data)}}else{r.texImage2D(34069+Zt,0,it,Hr,Dr,ur[Zt]);for(let fr=0;fr<Qn.length;fr++)r.texImage2D(34069+Zt,fr+1,it,Hr,Dr,Qn[fr].image[Zt])}Pe.__maxMipLevel=Qn.length}ce(we,Or)&&le(34067,we,$r.width,$r.height),Pe.__version=we.version,we.onUpdate&&we.onUpdate(we)}(Vt,Pe,we):(r.activeTexture(33984+we),r.bindTexture(34067,Vt.__webglTexture))}const Pn={1e3:10497,[Ln]:33071,1002:33648},vr={[Ji]:9728,1004:9984,1005:9986,[Jn]:9729,1007:9985,1008:9987};function Lr(Pe,we,Vt){if(Vt?(p.texParameteri(Pe,10242,Pn[we.wrapS]),p.texParameteri(Pe,10243,Pn[we.wrapT]),(32879===Pe||35866===Pe)&&p.texParameteri(Pe,32882,Pn[we.wrapR]),p.texParameteri(Pe,10240,vr[we.magFilter]),p.texParameteri(Pe,10241,vr[we.minFilter])):(p.texParameteri(Pe,10242,33071),p.texParameteri(Pe,10243,33071),(32879===Pe||35866===Pe)&&p.texParameteri(Pe,32882,33071),(we.wrapS!==Ln||we.wrapT!==Ln)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),p.texParameteri(Pe,10240,Fe(we.magFilter)),p.texParameteri(Pe,10241,Fe(we.minFilter)),we.minFilter!==Ji&&we.minFilter!==Jn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const an=e.get("EXT_texture_filter_anisotropic");if(we.type===po&&!1===e.has("OES_texture_float_linear")||!1===y&&we.type===Ui&&!1===e.has("OES_texture_half_float_linear"))return;(we.anisotropy>1||s.get(we).__currentAnisotropy)&&(p.texParameterf(Pe,an.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(we.anisotropy,a.getMaxAnisotropy())),s.get(we).__currentAnisotropy=we.anisotropy)}}function nr(Pe,we){void 0===Pe.__webglInit&&(Pe.__webglInit=!0,we.addEventListener("dispose",de),Pe.__webglTexture=p.createTexture(),m.memory.textures++)}function Qr(Pe,we,Vt){let an=3553;we.isDataTexture2DArray&&(an=35866),we.isDataTexture3D&&(an=32879),nr(Pe,we),r.activeTexture(33984+Vt),r.bindTexture(an,Pe.__webglTexture),p.pixelStorei(37440,we.flipY),p.pixelStorei(37441,we.premultiplyAlpha),p.pixelStorei(3317,we.unpackAlignment),p.pixelStorei(37443,0);const Yn=function(Pe){return!y&&(Pe.wrapS!==Ln||Pe.wrapT!==Ln||Pe.minFilter!==Ji&&Pe.minFilter!==Jn)}(we)&&!1===V(we.image),ur=Z(we.image,Yn,!1,A),$r=V(ur)||y,Or=c.convert(we.format);let it,Hr=c.convert(we.type),Dr=Ee(we.internalFormat,Or,Hr);Lr(an,we,$r);const Qn=we.mipmaps;if(we.isDepthTexture)Dr=6402,y?Dr=we.type===po?36012:1014===we.type?33190:we.type===Zo?35056:33189:we.type===po&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),we.format===mo&&6402===Dr&&1012!==we.type&&1014!==we.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),we.type=1012,Hr=c.convert(we.type)),we.format===go&&6402===Dr&&(Dr=34041,we.type!==Zo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),we.type=Zo,Hr=c.convert(we.type))),r.texImage2D(3553,0,Dr,ur.width,ur.height,0,Or,Hr,null);else if(we.isDataTexture)if(Qn.length>0&&$r){for(let Zt=0,fr=Qn.length;Zt<fr;Zt++)it=Qn[Zt],r.texImage2D(3553,Zt,Dr,it.width,it.height,0,Or,Hr,it.data);we.generateMipmaps=!1,Pe.__maxMipLevel=Qn.length-1}else r.texImage2D(3553,0,Dr,ur.width,ur.height,0,Or,Hr,ur.data),Pe.__maxMipLevel=0;else if(we.isCompressedTexture){for(let Zt=0,fr=Qn.length;Zt<fr;Zt++)it=Qn[Zt],we.format!==Is&&we.format!==cs?null!==Or?r.compressedTexImage2D(3553,Zt,Dr,it.width,it.height,0,it.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,Zt,Dr,it.width,it.height,0,Or,Hr,it.data);Pe.__maxMipLevel=Qn.length-1}else if(we.isDataTexture2DArray)r.texImage3D(35866,0,Dr,ur.width,ur.height,ur.depth,0,Or,Hr,ur.data),Pe.__maxMipLevel=0;else if(we.isDataTexture3D)r.texImage3D(32879,0,Dr,ur.width,ur.height,ur.depth,0,Or,Hr,ur.data),Pe.__maxMipLevel=0;else if(Qn.length>0&&$r){for(let Zt=0,fr=Qn.length;Zt<fr;Zt++)it=Qn[Zt],r.texImage2D(3553,Zt,Dr,Or,Hr,it);we.generateMipmaps=!1,Pe.__maxMipLevel=Qn.length-1}else r.texImage2D(3553,0,Dr,Or,Hr,ur),Pe.__maxMipLevel=0;ce(we,$r)&&le(an,we,ur.width,ur.height),Pe.__version=we.version,we.onUpdate&&we.onUpdate(we)}function Kn(Pe,we,Vt,an,Yn){const ur=c.convert(Vt.format),$r=c.convert(Vt.type),Or=Ee(Vt.internalFormat,ur,$r);32879===Yn||35866===Yn?r.texImage3D(Yn,0,Or,we.width,we.height,we.depth,0,ur,$r,null):r.texImage2D(Yn,0,Or,we.width,we.height,0,ur,$r,null),r.bindFramebuffer(36160,Pe),p.framebufferTexture2D(36160,an,Yn,s.get(Vt).__webglTexture,0),r.bindFramebuffer(36160,null)}function hr(Pe,we,Vt){if(p.bindRenderbuffer(36161,Pe),we.depthBuffer&&!we.stencilBuffer){let an=33189;if(Vt){const Yn=we.depthTexture;Yn&&Yn.isDepthTexture&&(Yn.type===po?an=36012:1014===Yn.type&&(an=33190));const ur=vi(we);p.renderbufferStorageMultisample(36161,ur,an,we.width,we.height)}else p.renderbufferStorage(36161,an,we.width,we.height);p.framebufferRenderbuffer(36160,36096,36161,Pe)}else if(we.depthBuffer&&we.stencilBuffer){if(Vt){const an=vi(we);p.renderbufferStorageMultisample(36161,an,35056,we.width,we.height)}else p.renderbufferStorage(36161,34041,we.width,we.height);p.framebufferRenderbuffer(36160,33306,36161,Pe)}else{const an=!0===we.isWebGLMultipleRenderTargets?we.texture[0]:we.texture,Yn=c.convert(an.format),ur=c.convert(an.type),$r=Ee(an.internalFormat,Yn,ur);if(Vt){const Or=vi(we);p.renderbufferStorageMultisample(36161,Or,$r,we.width,we.height)}else p.renderbufferStorage(36161,$r,we.width,we.height)}p.bindRenderbuffer(36161,null)}function vi(Pe){return y&&Pe.isWebGLMultisampleRenderTarget?Math.min(P,Pe.samples):0}let yn=!1,In=!1;this.allocateTextureUnit=function(){const Pe=Ke;return Pe>=w&&console.warn("THREE.WebGLTextures: Trying to use "+Pe+" texture units while this GPU supports only "+w),Ke+=1,Pe},this.resetTextureUnits=function(){Ke=0},this.setTexture2D=Ct,this.setTexture2DArray=function(Pe,we){const Vt=s.get(Pe);Pe.version>0&&Vt.__version!==Pe.version?Qr(Vt,Pe,we):(r.activeTexture(33984+we),r.bindTexture(35866,Vt.__webglTexture))},this.setTexture3D=function(Pe,we){const Vt=s.get(Pe);Pe.version>0&&Vt.__version!==Pe.version?Qr(Vt,Pe,we):(r.activeTexture(33984+we),r.bindTexture(32879,Vt.__webglTexture))},this.setTextureCube=Gt,this.setupRenderTarget=function(Pe){const we=Pe.texture,Vt=s.get(Pe),an=s.get(we);Pe.addEventListener("dispose",Qe),!0!==Pe.isWebGLMultipleRenderTargets&&(an.__webglTexture=p.createTexture(),an.__version=we.version,m.memory.textures++);const Yn=!0===Pe.isWebGLCubeRenderTarget,ur=!0===Pe.isWebGLMultipleRenderTargets,$r=!0===Pe.isWebGLMultisampleRenderTarget,Or=we.isDataTexture3D||we.isDataTexture2DArray,Hr=V(Pe)||y;if(y&&we.format===cs&&(we.type===po||we.type===Ui)&&(we.format=Is,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Yn){Vt.__webglFramebuffer=[];for(let Dr=0;Dr<6;Dr++)Vt.__webglFramebuffer[Dr]=p.createFramebuffer()}else if(Vt.__webglFramebuffer=p.createFramebuffer(),ur)if(a.drawBuffers){const Dr=Pe.texture;for(let it=0,Qn=Dr.length;it<Qn;it++){const Zt=s.get(Dr[it]);void 0===Zt.__webglTexture&&(Zt.__webglTexture=p.createTexture(),m.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if($r)if(y){Vt.__webglMultisampledFramebuffer=p.createFramebuffer(),Vt.__webglColorRenderbuffer=p.createRenderbuffer(),p.bindRenderbuffer(36161,Vt.__webglColorRenderbuffer);const Dr=c.convert(we.format),it=c.convert(we.type),Qn=Ee(we.internalFormat,Dr,it),Zt=vi(Pe);p.renderbufferStorageMultisample(36161,Zt,Qn,Pe.width,Pe.height),r.bindFramebuffer(36160,Vt.__webglMultisampledFramebuffer),p.framebufferRenderbuffer(36160,36064,36161,Vt.__webglColorRenderbuffer),p.bindRenderbuffer(36161,null),Pe.depthBuffer&&(Vt.__webglDepthRenderbuffer=p.createRenderbuffer(),hr(Vt.__webglDepthRenderbuffer,Pe,!0)),r.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Yn){r.bindTexture(34067,an.__webglTexture),Lr(34067,we,Hr);for(let Dr=0;Dr<6;Dr++)Kn(Vt.__webglFramebuffer[Dr],Pe,we,36064,34069+Dr);ce(we,Hr)&&le(34067,we,Pe.width,Pe.height),r.unbindTexture()}else if(ur){const Dr=Pe.texture;for(let it=0,Qn=Dr.length;it<Qn;it++){const Zt=Dr[it],fr=s.get(Zt);r.bindTexture(3553,fr.__webglTexture),Lr(3553,Zt,Hr),Kn(Vt.__webglFramebuffer,Pe,Zt,36064+it,3553),ce(Zt,Hr)&&le(3553,Zt,Pe.width,Pe.height)}r.unbindTexture()}else{let Dr=3553;Or&&(y?Dr=we.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),r.bindTexture(Dr,an.__webglTexture),Lr(Dr,we,Hr),Kn(Vt.__webglFramebuffer,Pe,we,36064,Dr),ce(we,Hr)&&le(Dr,we,Pe.width,Pe.height,Pe.depth),r.unbindTexture()}Pe.depthBuffer&&function(Pe){const we=s.get(Pe),Vt=!0===Pe.isWebGLCubeRenderTarget;if(Pe.depthTexture){if(Vt)throw new Error("target.depthTexture not supported in Cube render targets");!function(Pe,we){if(we&&we.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,Pe),!we.depthTexture||!we.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(we.depthTexture).__webglTexture||we.depthTexture.image.width!==we.width||we.depthTexture.image.height!==we.height)&&(we.depthTexture.image.width=we.width,we.depthTexture.image.height=we.height,we.depthTexture.needsUpdate=!0),Ct(we.depthTexture,0);const an=s.get(we.depthTexture).__webglTexture;if(we.depthTexture.format===mo)p.framebufferTexture2D(36160,36096,3553,an,0);else{if(we.depthTexture.format!==go)throw new Error("Unknown depthTexture format");p.framebufferTexture2D(36160,33306,3553,an,0)}}(we.__webglFramebuffer,Pe)}else if(Vt){we.__webglDepthbuffer=[];for(let an=0;an<6;an++)r.bindFramebuffer(36160,we.__webglFramebuffer[an]),we.__webglDepthbuffer[an]=p.createRenderbuffer(),hr(we.__webglDepthbuffer[an],Pe,!1)}else r.bindFramebuffer(36160,we.__webglFramebuffer),we.__webglDepthbuffer=p.createRenderbuffer(),hr(we.__webglDepthbuffer,Pe,!1);r.bindFramebuffer(36160,null)}(Pe)},this.updateRenderTargetMipmap=function(Pe){const we=V(Pe)||y,Vt=!0===Pe.isWebGLMultipleRenderTargets?Pe.texture:[Pe.texture];for(let an=0,Yn=Vt.length;an<Yn;an++){const ur=Vt[an];if(ce(ur,we)){const $r=Pe.isWebGLCubeRenderTarget?34067:3553,Or=s.get(ur).__webglTexture;r.bindTexture($r,Or),le($r,ur,Pe.width,Pe.height),r.unbindTexture()}}},this.updateMultisampleRenderTarget=function(Pe){if(Pe.isWebGLMultisampleRenderTarget)if(y){const we=Pe.width,Vt=Pe.height;let an=16384;Pe.depthBuffer&&(an|=256),Pe.stencilBuffer&&(an|=1024);const Yn=s.get(Pe);r.bindFramebuffer(36008,Yn.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,Yn.__webglFramebuffer),p.blitFramebuffer(0,0,we,Vt,0,0,we,Vt,an,9728),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,Yn.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(Pe,we){Pe&&Pe.isWebGLRenderTarget&&(!1===yn&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),yn=!0),Pe=Pe.texture),Ct(Pe,we)},this.safeSetTextureCube=function(Pe,we){Pe&&Pe.isWebGLCubeRenderTarget&&(!1===In&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),In=!0),Pe=Pe.texture),Gt(Pe,we)}}function Dx(p,e,r){const s=r.isWebGL2;return{convert:function(c){let m;if(c===sr)return 5121;if(1017===c)return 32819;if(1018===c)return 32820;if(1019===c)return 33635;if(1010===c)return 5120;if(1011===c)return 5122;if(1012===c)return 5123;if(1013===c)return 5124;if(1014===c)return 5125;if(c===po)return 5126;if(c===Ui)return s?5131:(m=e.get("OES_texture_half_float"),null!==m?m.HALF_FLOAT_OES:null);if(1021===c)return 6406;if(c===cs)return 6407;if(c===Is)return 6408;if(1024===c)return 6409;if(1025===c)return 6410;if(c===mo)return 6402;if(c===go)return 34041;if(1028===c)return 6403;if(1029===c)return 36244;if(1030===c)return 33319;if(1031===c)return 33320;if(1032===c)return 36248;if(1033===c)return 36249;if(33776===c||33777===c||33778===c||33779===c){if(m=e.get("WEBGL_compressed_texture_s3tc"),null===m)return null;if(33776===c)return m.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===c)return m.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===c)return m.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===c)return m.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===c||35841===c||35842===c||35843===c){if(m=e.get("WEBGL_compressed_texture_pvrtc"),null===m)return null;if(35840===c)return m.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===c)return m.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===c)return m.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===c)return m.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===c)return m=e.get("WEBGL_compressed_texture_etc1"),null!==m?m.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===c||37496===c)&&(m=e.get("WEBGL_compressed_texture_etc"),null!==m)){if(37492===c)return m.COMPRESSED_RGB8_ETC2;if(37496===c)return m.COMPRESSED_RGBA8_ETC2_EAC}return 37808===c||37809===c||37810===c||37811===c||37812===c||37813===c||37814===c||37815===c||37816===c||37817===c||37818===c||37819===c||37820===c||37821===c||37840===c||37841===c||37842===c||37843===c||37844===c||37845===c||37846===c||37847===c||37848===c||37849===c||37850===c||37851===c||37852===c||37853===c?(m=e.get("WEBGL_compressed_texture_astc"),null!==m?c:null):36492===c?(m=e.get("EXT_texture_compression_bptc"),null!==m?c:null):c===Zo?s?34042:(m=e.get("WEBGL_depth_texture"),null!==m?m.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}Zf.prototype.isMeshDistanceMaterial=!0;class Gm extends co{constructor(e=[]){super(),this.cameras=e}}Gm.prototype.isArrayCamera=!0;class Hu extends pi{constructor(){super(),this.type="Group"}}Hu.prototype.isGroup=!0;const a_={type:"move"};class ep{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Hu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Hu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pe),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Hu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pe),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,r,s){let a=null,c=null,m=null;const y=this._targetRay,w=this._grip,M=this._hand;if(e&&"visible-blurred"!==r.session.visibilityState)if(null!==y&&(a=r.getPose(e.targetRaySpace,s),null!==a&&(y.matrix.fromArray(a.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),a.linearVelocity?(y.hasLinearVelocity=!0,y.linearVelocity.copy(a.linearVelocity)):y.hasLinearVelocity=!1,a.angularVelocity?(y.hasAngularVelocity=!0,y.angularVelocity.copy(a.angularVelocity)):y.hasAngularVelocity=!1,this.dispatchEvent(a_))),M&&e.hand){m=!0;for(const W of e.hand.values()){const Z=r.getJointPose(W,s);if(void 0===M.joints[W.jointName]){const B=new Hu;B.matrixAutoUpdate=!1,B.visible=!1,M.joints[W.jointName]=B,M.add(B)}const V=M.joints[W.jointName];null!==Z&&(V.matrix.fromArray(Z.transform.matrix),V.matrix.decompose(V.position,V.rotation,V.scale),V.jointRadius=Z.radius),V.visible=null!==Z}const R=M.joints["index-finger-tip"].position.distanceTo(M.joints["thumb-tip"].position),O=.02,k=.005;M.inputState.pinching&&R>O+k?(M.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!M.inputState.pinching&&R<=O-k&&(M.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==w&&e.gripSpace&&(c=r.getPose(e.gripSpace,s),null!==c&&(w.matrix.fromArray(c.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),c.linearVelocity?(w.hasLinearVelocity=!0,w.linearVelocity.copy(c.linearVelocity)):w.hasLinearVelocity=!1,c.angularVelocity?(w.hasAngularVelocity=!0,w.angularVelocity.copy(c.angularVelocity)):w.hasAngularVelocity=!1));return null!==y&&(y.visible=null!==a),null!==w&&(w.visible=null!==c),null!==M&&(M.visible=null!==m),this}}class l_ extends wo{constructor(e,r){super();const s=this,a=e.state;let c=null,m=1,y=null,w="local-floor",M=null,A=null,P=null,R=null,O=null,k=!1,W=null,Z=null,V=null,B=null,ce=null,le=null;const Ee=[],Fe=new Map,de=new co;de.layers.enable(1),de.viewport=new ci;const Qe=new co;Qe.layers.enable(2),Qe.viewport=new ci;const Pt=[de,Qe],ct=new Gm;ct.layers.enable(1),ct.layers.enable(2);let Ke=null,hn=null;function At(on){const Kn=Fe.get(on.inputSource);Kn&&Kn.dispatchEvent({type:on.type,data:on.inputSource})}function Ct(){Fe.forEach(function(on,Kn){on.disconnect(Kn)}),Fe.clear(),Ke=null,hn=null,a.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),P&&r.deleteFramebuffer(P),W&&r.deleteFramebuffer(W),Z&&r.deleteRenderbuffer(Z),V&&r.deleteRenderbuffer(V),P=null,W=null,Z=null,V=null,O=null,R=null,A=null,c=null,Qr.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}function Nt(on){const Kn=c.inputSources;for(let hr=0;hr<Ee.length;hr++)Fe.set(Kn[hr],Ee[hr]);for(let hr=0;hr<on.removed.length;hr++){const St=on.removed[hr],Fr=Fe.get(St);Fr&&(Fr.dispatchEvent({type:"disconnected",data:St}),Fe.delete(St))}for(let hr=0;hr<on.added.length;hr++){const St=on.added[hr],Fr=Fe.get(St);Fr&&Fr.dispatchEvent({type:"connected",data:St})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(on){let Kn=Ee[on];return void 0===Kn&&(Kn=new ep,Ee[on]=Kn),Kn.getTargetRaySpace()},this.getControllerGrip=function(on){let Kn=Ee[on];return void 0===Kn&&(Kn=new ep,Ee[on]=Kn),Kn.getGripSpace()},this.getHand=function(on){let Kn=Ee[on];return void 0===Kn&&(Kn=new ep,Ee[on]=Kn),Kn.getHandSpace()},this.setFramebufferScaleFactor=function(on){m=on,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(on){w=on,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return y},this.getBaseLayer=function(){return null!==R?R:O},this.getBinding=function(){return A},this.getFrame=function(){return B},this.getSession=function(){return c},this.setSession=function(){var on=(0,G.Z)(function*(Kn){if(c=Kn,null!==c){c.addEventListener("select",At),c.addEventListener("selectstart",At),c.addEventListener("selectend",At),c.addEventListener("squeeze",At),c.addEventListener("squeezestart",At),c.addEventListener("squeezeend",At),c.addEventListener("end",Ct),c.addEventListener("inputsourceschange",Nt);const hr=r.getContextAttributes();if(!0!==hr.xrCompatible&&(yield r.makeXRCompatible()),void 0===c.renderState.layers)O=new XRWebGLLayer(c,r,{antialias:hr.antialias,alpha:hr.alpha,depth:hr.depth,stencil:hr.stencil,framebufferScaleFactor:m}),c.updateRenderState({baseLayer:O});else if(r instanceof WebGLRenderingContext)O=new XRWebGLLayer(c,r,{antialias:!0,alpha:hr.alpha,depth:hr.depth,stencil:hr.stencil,framebufferScaleFactor:m}),c.updateRenderState({layers:[O]});else{k=hr.antialias;let St=null;hr.depth&&(le=256,hr.stencil&&(le|=1024),ce=hr.stencil?33306:36096,St=hr.stencil?35056:33190);const Fr={colorFormat:hr.alpha?32856:32849,depthFormat:St,scaleFactor:m};A=new XRWebGLBinding(c,r),R=A.createProjectionLayer(Fr),P=r.createFramebuffer(),c.updateRenderState({layers:[R]}),k&&(W=r.createFramebuffer(),Z=r.createRenderbuffer(),r.bindRenderbuffer(36161,Z),r.renderbufferStorageMultisample(36161,4,32856,R.textureWidth,R.textureHeight),a.bindFramebuffer(36160,W),r.framebufferRenderbuffer(36160,36064,36161,Z),r.bindRenderbuffer(36161,null),null!==St&&(V=r.createRenderbuffer(),r.bindRenderbuffer(36161,V),r.renderbufferStorageMultisample(36161,4,St,R.textureWidth,R.textureHeight),r.framebufferRenderbuffer(36160,ce,36161,V),r.bindRenderbuffer(36161,null)),a.bindFramebuffer(36160,null))}y=yield c.requestReferenceSpace(w),Qr.setContext(c),Qr.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(Kn){return on.apply(this,arguments)}}();const Dt=new pe,Gt=new pe;function vr(on,Kn){null===Kn?on.matrixWorld.copy(on.matrix):on.matrixWorld.multiplyMatrices(Kn.matrixWorld,on.matrix),on.matrixWorldInverse.copy(on.matrixWorld).invert()}this.updateCamera=function(on){if(null===c)return;ct.near=Qe.near=de.near=on.near,ct.far=Qe.far=de.far=on.far,(Ke!==ct.near||hn!==ct.far)&&(c.updateRenderState({depthNear:ct.near,depthFar:ct.far}),Ke=ct.near,hn=ct.far);const Kn=on.parent,hr=ct.cameras;vr(ct,Kn);for(let Fr=0;Fr<hr.length;Fr++)vr(hr[Fr],Kn);ct.matrixWorld.decompose(ct.position,ct.quaternion,ct.scale),on.position.copy(ct.position),on.quaternion.copy(ct.quaternion),on.scale.copy(ct.scale),on.matrix.copy(ct.matrix),on.matrixWorld.copy(ct.matrixWorld);const St=on.children;for(let Fr=0,oi=St.length;Fr<oi;Fr++)St[Fr].updateMatrixWorld(!0);2===hr.length?function(on,Kn,hr){Dt.setFromMatrixPosition(Kn.matrixWorld),Gt.setFromMatrixPosition(hr.matrixWorld);const St=Dt.distanceTo(Gt),Fr=Kn.projectionMatrix.elements,oi=hr.projectionMatrix.elements,_r=Fr[14]/(Fr[10]-1),Mr=Fr[14]/(Fr[10]+1),vi=(Fr[9]+1)/Fr[5],Ut=(Fr[9]-1)/Fr[5],yn=(Fr[8]-1)/Fr[0],In=(oi[8]+1)/oi[0],Sr=_r*yn,Wn=_r*In,Pe=St/(-yn+In),we=Pe*-yn;Kn.matrixWorld.decompose(on.position,on.quaternion,on.scale),on.translateX(we),on.translateZ(Pe),on.matrixWorld.compose(on.position,on.quaternion,on.scale),on.matrixWorldInverse.copy(on.matrixWorld).invert();const Vt=_r+Pe,an=Mr+Pe;on.projectionMatrix.makePerspective(Sr-we,Wn+(St-we),vi*Mr/an*Vt,Ut*Mr/an*Vt,Vt,an)}(ct,de,Qe):ct.projectionMatrix.copy(de.projectionMatrix)},this.getCamera=function(){return ct},this.getFoveation=function(){return null!==R?R.fixedFoveation:null!==O?O.fixedFoveation:void 0},this.setFoveation=function(on){null!==R&&(R.fixedFoveation=on),null!==O&&void 0!==O.fixedFoveation&&(O.fixedFoveation=on)};let Lr=null;const Qr=new nu;Qr.setAnimationLoop(function(on,Kn){if(M=Kn.getViewerPose(y),B=Kn,null!==M){const St=M.views;null!==O&&a.bindXRFramebuffer(O.framebuffer);let Fr=!1;St.length!==ct.cameras.length&&(ct.cameras.length=0,Fr=!0);for(let oi=0;oi<St.length;oi++){const _r=St[oi];let Mr=null;if(null!==O)Mr=O.getViewport(_r);else{const Ut=A.getViewSubImage(R,_r);a.bindXRFramebuffer(P),void 0!==Ut.depthStencilTexture&&r.framebufferTexture2D(36160,ce,3553,Ut.depthStencilTexture,0),r.framebufferTexture2D(36160,36064,3553,Ut.colorTexture,0),Mr=Ut.viewport}const vi=Pt[oi];vi.matrix.fromArray(_r.transform.matrix),vi.projectionMatrix.fromArray(_r.projectionMatrix),vi.viewport.set(Mr.x,Mr.y,Mr.width,Mr.height),0===oi&&ct.matrix.copy(vi.matrix),!0===Fr&&ct.cameras.push(vi)}k&&(a.bindXRFramebuffer(W),null!==le&&r.clear(le))}const hr=c.inputSources;for(let St=0;St<Ee.length;St++)Ee[St].update(hr[St],Kn,y);if(Lr&&Lr(on,Kn),k){const St=R.textureWidth,Fr=R.textureHeight;a.bindFramebuffer(36008,W),a.bindFramebuffer(36009,P),r.invalidateFramebuffer(36008,[ce]),r.invalidateFramebuffer(36009,[ce]),r.blitFramebuffer(0,0,St,Fr,0,0,St,Fr,16384,9728),r.invalidateFramebuffer(36008,[36064]),a.bindFramebuffer(36008,null),a.bindFramebuffer(36009,null),a.bindFramebuffer(36160,W)}B=null}),this.setAnimationLoop=function(on){Lr=on},this.dispose=function(){}}}function c_(p){function s(V,B){V.opacity.value=B.opacity,B.color&&V.diffuse.value.copy(B.color),B.emissive&&V.emissive.value.copy(B.emissive).multiplyScalar(B.emissiveIntensity),B.map&&(V.map.value=B.map),B.alphaMap&&(V.alphaMap.value=B.alphaMap),B.specularMap&&(V.specularMap.value=B.specularMap),B.alphaTest>0&&(V.alphaTest.value=B.alphaTest);const ce=p.get(B).envMap;if(ce){V.envMap.value=ce,V.flipEnvMap.value=ce.isCubeTexture&&!1===ce.isRenderTargetTexture?-1:1,V.reflectivity.value=B.reflectivity,V.ior.value=B.ior,V.refractionRatio.value=B.refractionRatio;const Fe=p.get(ce).__maxMipLevel;void 0!==Fe&&(V.maxMipLevel.value=Fe)}let le,Ee;B.lightMap&&(V.lightMap.value=B.lightMap,V.lightMapIntensity.value=B.lightMapIntensity),B.aoMap&&(V.aoMap.value=B.aoMap,V.aoMapIntensity.value=B.aoMapIntensity),B.map?le=B.map:B.specularMap?le=B.specularMap:B.displacementMap?le=B.displacementMap:B.normalMap?le=B.normalMap:B.bumpMap?le=B.bumpMap:B.roughnessMap?le=B.roughnessMap:B.metalnessMap?le=B.metalnessMap:B.alphaMap?le=B.alphaMap:B.emissiveMap?le=B.emissiveMap:B.clearcoatMap?le=B.clearcoatMap:B.clearcoatNormalMap?le=B.clearcoatNormalMap:B.clearcoatRoughnessMap?le=B.clearcoatRoughnessMap:B.specularIntensityMap?le=B.specularIntensityMap:B.specularTintMap?le=B.specularTintMap:B.transmissionMap?le=B.transmissionMap:B.thicknessMap&&(le=B.thicknessMap),void 0!==le&&(le.isWebGLRenderTarget&&(le=le.texture),!0===le.matrixAutoUpdate&&le.updateMatrix(),V.uvTransform.value.copy(le.matrix)),B.aoMap?Ee=B.aoMap:B.lightMap&&(Ee=B.lightMap),void 0!==Ee&&(Ee.isWebGLRenderTarget&&(Ee=Ee.texture),!0===Ee.matrixAutoUpdate&&Ee.updateMatrix(),V.uv2Transform.value.copy(Ee.matrix))}function P(V,B){V.roughness.value=B.roughness,V.metalness.value=B.metalness,B.roughnessMap&&(V.roughnessMap.value=B.roughnessMap),B.metalnessMap&&(V.metalnessMap.value=B.metalnessMap),B.emissiveMap&&(V.emissiveMap.value=B.emissiveMap),B.bumpMap&&(V.bumpMap.value=B.bumpMap,V.bumpScale.value=B.bumpScale,B.side===He&&(V.bumpScale.value*=-1)),B.normalMap&&(V.normalMap.value=B.normalMap,V.normalScale.value.copy(B.normalScale),B.side===He&&V.normalScale.value.negate()),B.displacementMap&&(V.displacementMap.value=B.displacementMap,V.displacementScale.value=B.displacementScale,V.displacementBias.value=B.displacementBias),p.get(B).envMap&&(V.envMapIntensity.value=B.envMapIntensity)}return{refreshFogUniforms:function(V,B){V.fogColor.value.copy(B.color),B.isFog?(V.fogNear.value=B.near,V.fogFar.value=B.far):B.isFogExp2&&(V.fogDensity.value=B.density)},refreshMaterialUniforms:function(V,B,ce,le,Ee){B.isMeshBasicMaterial?s(V,B):B.isMeshLambertMaterial?(s(V,B),function(V,B){B.emissiveMap&&(V.emissiveMap.value=B.emissiveMap)}(V,B)):B.isMeshToonMaterial?(s(V,B),function(V,B){B.gradientMap&&(V.gradientMap.value=B.gradientMap),B.emissiveMap&&(V.emissiveMap.value=B.emissiveMap),B.bumpMap&&(V.bumpMap.value=B.bumpMap,V.bumpScale.value=B.bumpScale,B.side===He&&(V.bumpScale.value*=-1)),B.normalMap&&(V.normalMap.value=B.normalMap,V.normalScale.value.copy(B.normalScale),B.side===He&&V.normalScale.value.negate()),B.displacementMap&&(V.displacementMap.value=B.displacementMap,V.displacementScale.value=B.displacementScale,V.displacementBias.value=B.displacementBias)}(V,B)):B.isMeshPhongMaterial?(s(V,B),function(V,B){V.specular.value.copy(B.specular),V.shininess.value=Math.max(B.shininess,1e-4),B.emissiveMap&&(V.emissiveMap.value=B.emissiveMap),B.bumpMap&&(V.bumpMap.value=B.bumpMap,V.bumpScale.value=B.bumpScale,B.side===He&&(V.bumpScale.value*=-1)),B.normalMap&&(V.normalMap.value=B.normalMap,V.normalScale.value.copy(B.normalScale),B.side===He&&V.normalScale.value.negate()),B.displacementMap&&(V.displacementMap.value=B.displacementMap,V.displacementScale.value=B.displacementScale,V.displacementBias.value=B.displacementBias)}(V,B)):B.isMeshStandardMaterial?(s(V,B),B.isMeshPhysicalMaterial?function(V,B,ce){P(V,B),V.ior.value=B.ior,B.sheenTint&&V.sheenTint.value.copy(B.sheenTint),B.clearcoat>0&&(V.clearcoat.value=B.clearcoat,V.clearcoatRoughness.value=B.clearcoatRoughness,B.clearcoatMap&&(V.clearcoatMap.value=B.clearcoatMap),B.clearcoatRoughnessMap&&(V.clearcoatRoughnessMap.value=B.clearcoatRoughnessMap),B.clearcoatNormalMap&&(V.clearcoatNormalScale.value.copy(B.clearcoatNormalScale),V.clearcoatNormalMap.value=B.clearcoatNormalMap,B.side===He&&V.clearcoatNormalScale.value.negate())),B.transmission>0&&(V.transmission.value=B.transmission,V.transmissionSamplerMap.value=ce.texture,V.transmissionSamplerSize.value.set(ce.width,ce.height),B.transmissionMap&&(V.transmissionMap.value=B.transmissionMap),V.thickness.value=B.thickness,B.thicknessMap&&(V.thicknessMap.value=B.thicknessMap),V.attenuationDistance.value=B.attenuationDistance,V.attenuationTint.value.copy(B.attenuationTint)),V.specularIntensity.value=B.specularIntensity,V.specularTint.value.copy(B.specularTint),B.specularIntensityMap&&(V.specularIntensityMap.value=B.specularIntensityMap),B.specularTintMap&&(V.specularTintMap.value=B.specularTintMap)}(V,B,Ee):P(V,B)):B.isMeshMatcapMaterial?(s(V,B),function(V,B){B.matcap&&(V.matcap.value=B.matcap),B.bumpMap&&(V.bumpMap.value=B.bumpMap,V.bumpScale.value=B.bumpScale,B.side===He&&(V.bumpScale.value*=-1)),B.normalMap&&(V.normalMap.value=B.normalMap,V.normalScale.value.copy(B.normalScale),B.side===He&&V.normalScale.value.negate()),B.displacementMap&&(V.displacementMap.value=B.displacementMap,V.displacementScale.value=B.displacementScale,V.displacementBias.value=B.displacementBias)}(V,B)):B.isMeshDepthMaterial?(s(V,B),function(V,B){B.displacementMap&&(V.displacementMap.value=B.displacementMap,V.displacementScale.value=B.displacementScale,V.displacementBias.value=B.displacementBias)}(V,B)):B.isMeshDistanceMaterial?(s(V,B),function(V,B){B.displacementMap&&(V.displacementMap.value=B.displacementMap,V.displacementScale.value=B.displacementScale,V.displacementBias.value=B.displacementBias),V.referencePosition.value.copy(B.referencePosition),V.nearDistance.value=B.nearDistance,V.farDistance.value=B.farDistance}(V,B)):B.isMeshNormalMaterial?(s(V,B),function(V,B){B.bumpMap&&(V.bumpMap.value=B.bumpMap,V.bumpScale.value=B.bumpScale,B.side===He&&(V.bumpScale.value*=-1)),B.normalMap&&(V.normalMap.value=B.normalMap,V.normalScale.value.copy(B.normalScale),B.side===He&&V.normalScale.value.negate()),B.displacementMap&&(V.displacementMap.value=B.displacementMap,V.displacementScale.value=B.displacementScale,V.displacementBias.value=B.displacementBias)}(V,B)):B.isLineBasicMaterial?(function(V,B){V.diffuse.value.copy(B.color),V.opacity.value=B.opacity}(V,B),B.isLineDashedMaterial&&function(V,B){V.dashSize.value=B.dashSize,V.totalSize.value=B.dashSize+B.gapSize,V.scale.value=B.scale}(V,B)):B.isPointsMaterial?function(V,B,ce,le){let Ee;V.diffuse.value.copy(B.color),V.opacity.value=B.opacity,V.size.value=B.size*ce,V.scale.value=.5*le,B.map&&(V.map.value=B.map),B.alphaMap&&(V.alphaMap.value=B.alphaMap),B.alphaTest>0&&(V.alphaTest.value=B.alphaTest),B.map?Ee=B.map:B.alphaMap&&(Ee=B.alphaMap),void 0!==Ee&&(!0===Ee.matrixAutoUpdate&&Ee.updateMatrix(),V.uvTransform.value.copy(Ee.matrix))}(V,B,ce,le):B.isSpriteMaterial?function(V,B){let ce;V.diffuse.value.copy(B.color),V.opacity.value=B.opacity,V.rotation.value=B.rotation,B.map&&(V.map.value=B.map),B.alphaMap&&(V.alphaMap.value=B.alphaMap),B.alphaTest>0&&(V.alphaTest.value=B.alphaTest),B.map?ce=B.map:B.alphaMap&&(ce=B.alphaMap),void 0!==ce&&(!0===ce.matrixAutoUpdate&&ce.updateMatrix(),V.uvTransform.value.copy(ce.matrix))}(V,B):B.isShadowMaterial?(V.color.value.copy(B.color),V.opacity.value=B.opacity):B.isShaderMaterial&&(B.uniformsNeedUpdate=!1)}}}function Ds(p={}){const e=void 0!==p.canvas?p.canvas:function(){const p=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return p.style.display="block",p}(),r=void 0!==p.context?p.context:null,s=void 0!==p.alpha&&p.alpha,a=void 0===p.depth||p.depth,c=void 0===p.stencil||p.stencil,m=void 0!==p.antialias&&p.antialias,y=void 0===p.premultipliedAlpha||p.premultipliedAlpha,w=void 0!==p.preserveDrawingBuffer&&p.preserveDrawingBuffer,M=void 0!==p.powerPreference?p.powerPreference:"default",A=void 0!==p.failIfMajorPerformanceCaveat&&p.failIfMajorPerformanceCaveat;let P=null,R=null;const O=[],k=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ns,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const W=this;let Z=!1,V=0,B=0,ce=null,le=-1,Ee=null;const Fe=new ci,de=new ci;let Qe=null,Pt=e.width,ct=e.height,Ke=1,hn=null,At=null;const Ct=new ci(0,0,Pt,ct),Nt=new ci(0,0,Pt,ct);let Dt=!1;const Gt=[],Pn=new Pd;let vr=!1,Lr=!1,nr=null;const Qr=new $n,on=new pe,Kn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function hr(){return null===ce?Ke:1}let oi,_r,Mr,vi,Ut,yn,In,Sr,Wn,Pe,we,Vt,an,Yn,ur,$r,Or,Hr,Dr,it,Qn,Zt,fr,St=r;function Fr(be,_t){for(let ht=0;ht<be.length;ht++){const pn=e.getContext(be[ht],_t);if(null!==pn)return pn}return null}try{const be={alpha:s,depth:a,stencil:c,antialias:m,premultipliedAlpha:y,preserveDrawingBuffer:w,powerPreference:M,failIfMajorPerformanceCaveat:A};if(e.addEventListener("webglcontextlost",ya,!1),e.addEventListener("webglcontextrestored",Za,!1),null===St){const _t=["webgl2","webgl","experimental-webgl"];if(!0===W.isWebGL1Renderer&&_t.shift(),St=Fr(_t,be),null===St)throw Fr(_t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===St.getShaderPrecisionFormat&&(St.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(be){throw console.error("THREE.WebGLRenderer: "+be.message),be}function xr(){oi=new _y(St),_r=new Vc(St,oi,p),oi.init(_r),Zt=new Dx(St,oi,_r),Mr=new o_(St,oi,_r),Gt[0]=1029,vi=new xy(St),Ut=new s_,yn=new qy(St,oi,Mr,Ut,_r,Zt,vi),In=new Sl(W),Sr=new Fv(W),Wn=new qh(St,_r),fr=new ia(St,oi,Wn,_r),Pe=new by(St,Wn,vi,fr),we=new Bv(St,Pe,Wn,vi),Dr=new Gd(St),$r=new Ml(Ut),Vt=new Vm(W,In,Sr,oi,_r,fr,$r),an=new c_(Ut),Yn=new Kf(Ut),ur=new Wy(oi,_r),Hr=new ms(W,In,Mr,we,y),Or=new Jf(W,we,_r),it=new Qa(St,oi,vi,_r),Qn=new xh(St,oi,vi,_r),vi.programs=Vt.programs,W.capabilities=_r,W.extensions=oi,W.properties=Ut,W.renderLists=Yn,W.shadowMap=Or,W.state=Mr,W.info=vi}xr();const $i=new l_(W,St);function ya(be){be.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Z=!0}function Za(){console.log("THREE.WebGLRenderer: Context Restored."),Z=!1;const be=vi.autoReset,_t=Or.enabled,ht=Or.autoUpdate,Lt=Or.needsUpdate,pn=Or.type;xr(),vi.autoReset=be,Or.enabled=_t,Or.autoUpdate=ht,Or.needsUpdate=Lt,Or.type=pn}function gu(be){const _t=be.target;_t.removeEventListener("dispose",gu),function(be){(function(be){const _t=Ut.get(be).programs;void 0!==_t&&_t.forEach(function(ht){Vt.releaseProgram(ht)})})(be),Ut.remove(be)}(_t)}this.xr=$i,this.getContext=function(){return St},this.getContextAttributes=function(){return St.getContextAttributes()},this.forceContextLoss=function(){const be=oi.get("WEBGL_lose_context");be&&be.loseContext()},this.forceContextRestore=function(){const be=oi.get("WEBGL_lose_context");be&&be.restoreContext()},this.getPixelRatio=function(){return Ke},this.setPixelRatio=function(be){void 0!==be&&(Ke=be,this.setSize(Pt,ct,!1))},this.getSize=function(be){return be.set(Pt,ct)},this.setSize=function(be,_t,ht){$i.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Pt=be,ct=_t,e.width=Math.floor(be*Ke),e.height=Math.floor(_t*Ke),!1!==ht&&(e.style.width=be+"px",e.style.height=_t+"px"),this.setViewport(0,0,be,_t))},this.getDrawingBufferSize=function(be){return be.set(Pt*Ke,ct*Ke).floor()},this.setDrawingBufferSize=function(be,_t,ht){Pt=be,ct=_t,Ke=ht,e.width=Math.floor(be*ht),e.height=Math.floor(_t*ht),this.setViewport(0,0,be,_t)},this.getCurrentViewport=function(be){return be.copy(Fe)},this.getViewport=function(be){return be.copy(Ct)},this.setViewport=function(be,_t,ht,Lt){be.isVector4?Ct.set(be.x,be.y,be.z,be.w):Ct.set(be,_t,ht,Lt),Mr.viewport(Fe.copy(Ct).multiplyScalar(Ke).floor())},this.getScissor=function(be){return be.copy(Nt)},this.setScissor=function(be,_t,ht,Lt){be.isVector4?Nt.set(be.x,be.y,be.z,be.w):Nt.set(be,_t,ht,Lt),Mr.scissor(de.copy(Nt).multiplyScalar(Ke).floor())},this.getScissorTest=function(){return Dt},this.setScissorTest=function(be){Mr.setScissorTest(Dt=be)},this.setOpaqueSort=function(be){hn=be},this.setTransparentSort=function(be){At=be},this.getClearColor=function(be){return be.copy(Hr.getClearColor())},this.setClearColor=function(){Hr.setClearColor.apply(Hr,arguments)},this.getClearAlpha=function(){return Hr.getClearAlpha()},this.setClearAlpha=function(){Hr.setClearAlpha.apply(Hr,arguments)},this.clear=function(be,_t,ht){let Lt=0;(void 0===be||be)&&(Lt|=16384),(void 0===_t||_t)&&(Lt|=256),(void 0===ht||ht)&&(Lt|=1024),St.clear(Lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ya,!1),e.removeEventListener("webglcontextrestored",Za,!1),Yn.dispose(),ur.dispose(),Ut.dispose(),In.dispose(),Sr.dispose(),we.dispose(),fr.dispose(),$i.dispose(),$i.removeEventListener("sessionstart",rv),$i.removeEventListener("sessionend",zg),nr&&(nr.dispose(),nr=null),zh.stop()},this.renderBufferImmediate=function(be,_t){fr.initAttributes();const ht=Ut.get(be);be.hasPositions&&!ht.position&&(ht.position=St.createBuffer()),be.hasNormals&&!ht.normal&&(ht.normal=St.createBuffer()),be.hasUvs&&!ht.uv&&(ht.uv=St.createBuffer()),be.hasColors&&!ht.color&&(ht.color=St.createBuffer());const Lt=_t.getAttributes();be.hasPositions&&(St.bindBuffer(34962,ht.position),St.bufferData(34962,be.positionArray,35048),fr.enableAttribute(Lt.position.location),St.vertexAttribPointer(Lt.position.location,3,5126,!1,0,0)),be.hasNormals&&(St.bindBuffer(34962,ht.normal),St.bufferData(34962,be.normalArray,35048),fr.enableAttribute(Lt.normal.location),St.vertexAttribPointer(Lt.normal.location,3,5126,!1,0,0)),be.hasUvs&&(St.bindBuffer(34962,ht.uv),St.bufferData(34962,be.uvArray,35048),fr.enableAttribute(Lt.uv.location),St.vertexAttribPointer(Lt.uv.location,2,5126,!1,0,0)),be.hasColors&&(St.bindBuffer(34962,ht.color),St.bufferData(34962,be.colorArray,35048),fr.enableAttribute(Lt.color.location),St.vertexAttribPointer(Lt.color.location,3,5126,!1,0,0)),fr.disableUnusedAttributes(),St.drawArrays(4,0,be.count),be.count=0},this.renderBufferDirect=function(be,_t,ht,Lt,pn,_i){null===_t&&(_t=Kn);const Vr=pn.isMesh&&pn.matrixWorld.determinant()<0,zr=Gg(be,_t,Lt,pn);Mr.setMaterial(Lt,Vr);let Oi=ht.index;const ws=ht.attributes.position;if(null===Oi){if(void 0===ws||0===ws.count)return}else if(0===Oi.count)return;let qi=1;!0===Lt.wireframe&&(Oi=Pe.getWireframeAttribute(ht),qi=2),(void 0!==ht.morphAttributes.position||void 0!==ht.morphAttributes.normal)&&Dr.update(pn,ht,Lt,zr),fr.setup(pn,Lt,zr,ht,Oi);let Zi,Zr=it;null!==Oi&&(Zi=Wn.get(Oi),Zr=Qn,Zr.setIndex(Zi));const Hh=null!==Oi?Oi.count:ws.count,Qo=ht.drawRange.start*qi,_u=ht.drawRange.count*qi,dc=null!==_i?_i.start*qi:0,Ku=null!==_i?_i.count*qi:1/0,Gh=Math.max(Qo,dc),va=Math.min(Hh,Qo+_u,dc+Ku)-1,Ja=Math.max(0,va-Gh+1);if(0!==Ja){if(pn.isMesh)!0===Lt.wireframe?(Mr.setLineWidth(Lt.wireframeLinewidth*hr()),Zr.setMode(1)):Zr.setMode(4);else if(pn.isLine){let el=Lt.linewidth;void 0===el&&(el=1),Mr.setLineWidth(el*hr()),Zr.setMode(pn.isLineSegments?1:pn.isLineLoop?2:3)}else pn.isPoints?Zr.setMode(0):pn.isSprite&&Zr.setMode(4);if(pn.isInstancedMesh)Zr.renderInstances(Gh,Ja,pn.count);else if(ht.isInstancedBufferGeometry){const el=Math.min(ht.instanceCount,ht._maxInstanceCount);Zr.renderInstances(Gh,Ja,el)}else Zr.render(Gh,Ja)}},this.compile=function(be,_t){R=ur.get(be),R.init(),k.push(R),be.traverseVisible(function(ht){ht.isLight&&ht.layers.test(_t.layers)&&(R.pushLight(ht),ht.castShadow&&R.pushShadow(ht))}),R.setupLights(W.physicallyCorrectLights),be.traverse(function(ht){const Lt=ht.material;if(Lt)if(Array.isArray(Lt))for(let pn=0;pn<Lt.length;pn++)Hg(Lt[pn],be,ht);else Hg(Lt,be,ht)}),k.pop(),R=null};let Ug=null;function rv(){zh.stop()}function zg(){zh.start()}const zh=new nu;function iv(be,_t,ht,Lt){if(!1===be.visible)return;if(be.layers.test(_t.layers))if(be.isGroup)ht=be.renderOrder;else if(be.isLOD)!0===be.autoUpdate&&be.update(_t);else if(be.isLight)R.pushLight(be),be.castShadow&&R.pushShadow(be);else if(be.isSprite){if(!be.frustumCulled||Pn.intersectsSprite(be)){Lt&&on.setFromMatrixPosition(be.matrixWorld).applyMatrix4(Qr);const Vr=we.update(be),zr=be.material;zr.visible&&P.push(be,Vr,zr,ht,on.z,null)}}else if(be.isImmediateRenderObject)Lt&&on.setFromMatrixPosition(be.matrixWorld).applyMatrix4(Qr),P.push(be,null,be.material,ht,on.z,null);else if((be.isMesh||be.isLine||be.isPoints)&&(be.isSkinnedMesh&&be.skeleton.frame!==vi.render.frame&&(be.skeleton.update(),be.skeleton.frame=vi.render.frame),!be.frustumCulled||Pn.intersectsObject(be))){Lt&&on.setFromMatrixPosition(be.matrixWorld).applyMatrix4(Qr);const Vr=we.update(be),zr=be.material;if(Array.isArray(zr)){const Oi=Vr.groups;for(let ws=0,qi=Oi.length;ws<qi;ws++){const Zi=Oi[ws],Zr=zr[Zi.materialIndex];Zr&&Zr.visible&&P.push(be,Vr,Zr,ht,on.z,Zi)}}else zr.visible&&P.push(be,Vr,zr,ht,on.z,null)}const _i=be.children;for(let Vr=0,zr=_i.length;Vr<zr;Vr++)iv(_i[Vr],_t,ht,Lt)}function sv(be,_t,ht,Lt){const pn=be.opaque,_i=be.transmissive,Vr=be.transparent;R.setupLightsView(ht),_i.length>0&&function(be,_t,ht){null===nr&&(nr=new(!0===m&&!0===_r.isWebGL2?Yo:Cs)(1024,1024,{generateMipmaps:!0,type:null!==Zt.convert(Ui)?Ui:sr,minFilter:1008,magFilter:Ji,wrapS:Ln,wrapT:Ln}));const Lt=W.getRenderTarget();W.setRenderTarget(nr),W.clear();const pn=W.toneMapping;W.toneMapping=0,Np(be,_t,ht),W.toneMapping=pn,yn.updateMultisampleRenderTarget(nr),yn.updateRenderTargetMipmap(nr),W.setRenderTarget(Lt)}(pn,_t,ht),Lt&&Mr.viewport(Fe.copy(Lt)),pn.length>0&&Np(pn,_t,ht),_i.length>0&&Np(_i,_t,ht),Vr.length>0&&Np(Vr,_t,ht)}function Np(be,_t,ht){const Lt=!0===_t.isScene?_t.overrideMaterial:null;for(let pn=0,_i=be.length;pn<_i;pn++){const Vr=be[pn],zr=Vr.object,Oi=Vr.geometry,ws=null===Lt?Vr.material:Lt,qi=Vr.group;zr.layers.test(ht.layers)&&gb(zr,_t,ht,Oi,ws,qi)}}function gb(be,_t,ht,Lt,pn,_i){if(be.onBeforeRender(W,_t,ht,Lt,pn,_i),be.modelViewMatrix.multiplyMatrices(ht.matrixWorldInverse,be.matrixWorld),be.normalMatrix.getNormalMatrix(be.modelViewMatrix),be.isImmediateRenderObject){const Vr=Gg(ht,_t,pn,be);Mr.setMaterial(pn),fr.reset(),function(be,_t){be.render(function(ht){W.renderBufferImmediate(ht,_t)})}(be,Vr)}else!0===pn.transparent&&2===pn.side?(pn.side=He,pn.needsUpdate=!0,W.renderBufferDirect(ht,_t,Lt,pn,be,_i),pn.side=0,pn.needsUpdate=!0,W.renderBufferDirect(ht,_t,Lt,pn,be,_i),pn.side=2):W.renderBufferDirect(ht,_t,Lt,pn,be,_i);be.onAfterRender(W,_t,ht,Lt,pn,_i)}function Hg(be,_t,ht){!0!==_t.isScene&&(_t=Kn);const Lt=Ut.get(be),pn=R.state.lights,Vr=pn.state.version,zr=Vt.getParameters(be,pn.state,R.state.shadowsArray,_t,ht),Oi=Vt.getProgramCacheKey(zr);let ws=Lt.programs;Lt.environment=be.isMeshStandardMaterial?_t.environment:null,Lt.fog=_t.fog,Lt.envMap=(be.isMeshStandardMaterial?Sr:In).get(be.envMap||Lt.environment),void 0===ws&&(be.addEventListener("dispose",gu),ws=new Map,Lt.programs=ws);let qi=ws.get(Oi);if(void 0!==qi){if(Lt.currentProgram===qi&&Lt.lightsStateVersion===Vr)return ov(be,zr),qi}else zr.uniforms=Vt.getUniforms(be),be.onBuild(zr,W),be.onBeforeCompile(zr,W),qi=Vt.acquireProgram(zr,Oi),ws.set(Oi,qi),Lt.uniforms=zr.uniforms;const Zi=Lt.uniforms;(!be.isShaderMaterial&&!be.isRawShaderMaterial||!0===be.clipping)&&(Zi.clippingPlanes=$r.uniform),ov(be,zr),Lt.needsLights=function(be){return be.isMeshLambertMaterial||be.isMeshToonMaterial||be.isMeshPhongMaterial||be.isMeshStandardMaterial||be.isShadowMaterial||be.isShaderMaterial&&!0===be.lights}(be),Lt.lightsStateVersion=Vr,Lt.needsLights&&(Zi.ambientLightColor.value=pn.state.ambient,Zi.lightProbe.value=pn.state.probe,Zi.directionalLights.value=pn.state.directional,Zi.directionalLightShadows.value=pn.state.directionalShadow,Zi.spotLights.value=pn.state.spot,Zi.spotLightShadows.value=pn.state.spotShadow,Zi.rectAreaLights.value=pn.state.rectArea,Zi.ltc_1.value=pn.state.rectAreaLTC1,Zi.ltc_2.value=pn.state.rectAreaLTC2,Zi.pointLights.value=pn.state.point,Zi.pointLightShadows.value=pn.state.pointShadow,Zi.hemisphereLights.value=pn.state.hemi,Zi.directionalShadowMap.value=pn.state.directionalShadowMap,Zi.directionalShadowMatrix.value=pn.state.directionalShadowMatrix,Zi.spotShadowMap.value=pn.state.spotShadowMap,Zi.spotShadowMatrix.value=pn.state.spotShadowMatrix,Zi.pointShadowMap.value=pn.state.pointShadowMap,Zi.pointShadowMatrix.value=pn.state.pointShadowMatrix);const Zr=qi.getUniforms(),Hh=Uu.seqWithValue(Zr.seq,Zi);return Lt.currentProgram=qi,Lt.uniformsList=Hh,qi}function ov(be,_t){const ht=Ut.get(be);ht.outputEncoding=_t.outputEncoding,ht.instancing=_t.instancing,ht.skinning=_t.skinning,ht.morphTargets=_t.morphTargets,ht.morphNormals=_t.morphNormals,ht.numClippingPlanes=_t.numClippingPlanes,ht.numIntersection=_t.numClipIntersection,ht.vertexAlphas=_t.vertexAlphas,ht.vertexTangents=_t.vertexTangents}function Gg(be,_t,ht,Lt){!0!==_t.isScene&&(_t=Kn),yn.resetTextureUnits();const pn=_t.fog,Vr=null===ce?W.outputEncoding:ce.texture.encoding,zr=(ht.isMeshStandardMaterial?Sr:In).get(ht.envMap||(ht.isMeshStandardMaterial?_t.environment:null)),Oi=!0===ht.vertexColors&&!!Lt.geometry&&!!Lt.geometry.attributes.color&&4===Lt.geometry.attributes.color.itemSize,ws=!!Lt.geometry&&!!Lt.geometry.attributes.tangent,qi=!!Lt.geometry&&!!Lt.geometry.morphAttributes.position,Zi=!!Lt.geometry&&!!Lt.geometry.morphAttributes.normal,Zr=Ut.get(ht),Hh=R.state.lights;!0!==vr||!0!==Lr&&be===Ee||$r.setState(ht,be,be===Ee&&ht.id===le);let Qo=!1;ht.version===Zr.__version?(Zr.needsLights&&Zr.lightsStateVersion!==Hh.state.version||Zr.outputEncoding!==Vr||Lt.isInstancedMesh&&!1===Zr.instancing||!Lt.isInstancedMesh&&!0===Zr.instancing||Lt.isSkinnedMesh&&!1===Zr.skinning||!Lt.isSkinnedMesh&&!0===Zr.skinning||Zr.envMap!==zr||ht.fog&&Zr.fog!==pn||void 0!==Zr.numClippingPlanes&&(Zr.numClippingPlanes!==$r.numPlanes||Zr.numIntersection!==$r.numIntersection)||Zr.vertexAlphas!==Oi||Zr.vertexTangents!==ws||Zr.morphTargets!==qi||Zr.morphNormals!==Zi)&&(Qo=!0):(Qo=!0,Zr.__version=ht.version);let _u=Zr.currentProgram;!0===Qo&&(_u=Hg(ht,_t,Lt));let dc=!1,Ku=!1,Gh=!1;const va=_u.getUniforms(),Ja=Zr.uniforms;if(Mr.useProgram(_u.program)&&(dc=!0,Ku=!0,Gh=!0),ht.id!==le&&(le=ht.id,Ku=!0),dc||Ee!==be){if(va.setValue(St,"projectionMatrix",be.projectionMatrix),_r.logarithmicDepthBuffer&&va.setValue(St,"logDepthBufFC",2/(Math.log(be.far+1)/Math.LN2)),Ee!==be&&(Ee=be,Ku=!0,Gh=!0),ht.isShaderMaterial||ht.isMeshPhongMaterial||ht.isMeshToonMaterial||ht.isMeshStandardMaterial||ht.envMap){const el=va.map.cameraPosition;void 0!==el&&el.setValue(St,on.setFromMatrixPosition(be.matrixWorld))}(ht.isMeshPhongMaterial||ht.isMeshToonMaterial||ht.isMeshLambertMaterial||ht.isMeshBasicMaterial||ht.isMeshStandardMaterial||ht.isShaderMaterial)&&va.setValue(St,"isOrthographic",!0===be.isOrthographicCamera),(ht.isMeshPhongMaterial||ht.isMeshToonMaterial||ht.isMeshLambertMaterial||ht.isMeshBasicMaterial||ht.isMeshStandardMaterial||ht.isShaderMaterial||ht.isShadowMaterial||Lt.isSkinnedMesh)&&va.setValue(St,"viewMatrix",be.matrixWorldInverse)}if(Lt.isSkinnedMesh){va.setOptional(St,Lt,"bindMatrix"),va.setOptional(St,Lt,"bindMatrixInverse");const el=Lt.skeleton;el&&(_r.floatVertexTextures?(null===el.boneTexture&&el.computeBoneTexture(),va.setValue(St,"boneTexture",el.boneTexture,yn),va.setValue(St,"boneTextureSize",el.boneTextureSize)):va.setOptional(St,el,"boneMatrices"))}return(Ku||Zr.receiveShadow!==Lt.receiveShadow)&&(Zr.receiveShadow=Lt.receiveShadow,va.setValue(St,"receiveShadow",Lt.receiveShadow)),Ku&&(va.setValue(St,"toneMappingExposure",W.toneMappingExposure),Zr.needsLights&&function(be,_t){be.ambientLightColor.needsUpdate=_t,be.lightProbe.needsUpdate=_t,be.directionalLights.needsUpdate=_t,be.directionalLightShadows.needsUpdate=_t,be.pointLights.needsUpdate=_t,be.pointLightShadows.needsUpdate=_t,be.spotLights.needsUpdate=_t,be.spotLightShadows.needsUpdate=_t,be.rectAreaLights.needsUpdate=_t,be.hemisphereLights.needsUpdate=_t}(Ja,Gh),pn&&ht.fog&&an.refreshFogUniforms(Ja,pn),an.refreshMaterialUniforms(Ja,ht,Ke,ct,nr),Uu.upload(St,Zr.uniformsList,Ja,yn)),ht.isShaderMaterial&&!0===ht.uniformsNeedUpdate&&(Uu.upload(St,Zr.uniformsList,Ja,yn),ht.uniformsNeedUpdate=!1),ht.isSpriteMaterial&&va.setValue(St,"center",Lt.center),va.setValue(St,"modelViewMatrix",Lt.modelViewMatrix),va.setValue(St,"normalMatrix",Lt.normalMatrix),va.setValue(St,"modelMatrix",Lt.matrixWorld),_u}zh.setAnimationLoop(function(be){Ug&&Ug(be)}),"undefined"!=typeof window&&zh.setContext(window),this.setAnimationLoop=function(be){Ug=be,$i.setAnimationLoop(be),null===be?zh.stop():zh.start()},$i.addEventListener("sessionstart",rv),$i.addEventListener("sessionend",zg),this.render=function(be,_t){if(void 0===_t||!0===_t.isCamera){if(!0!==Z){if(!0===be.autoUpdate&&be.updateMatrixWorld(),null===_t.parent&&_t.updateMatrixWorld(),!0===$i.enabled&&!0===$i.isPresenting&&(!0===$i.cameraAutoUpdate&&$i.updateCamera(_t),_t=$i.getCamera()),!0===be.isScene&&be.onBeforeRender(W,be,_t,ce),R=ur.get(be,k.length),R.init(),k.push(R),Qr.multiplyMatrices(_t.projectionMatrix,_t.matrixWorldInverse),Pn.setFromProjectionMatrix(Qr),Lr=this.localClippingEnabled,vr=$r.init(this.clippingPlanes,Lr,_t),P=Yn.get(be,O.length),P.init(),O.push(P),iv(be,_t,0,W.sortObjects),P.finish(),!0===W.sortObjects&&P.sort(hn,At),!0===vr&&$r.beginShadows(),Or.render(R.state.shadowsArray,be,_t),!0===vr&&$r.endShadows(),!0===this.info.autoReset&&this.info.reset(),Hr.render(P,be),R.setupLights(W.physicallyCorrectLights),_t.isArrayCamera){const Lt=_t.cameras;for(let pn=0,_i=Lt.length;pn<_i;pn++){const Vr=Lt[pn];sv(P,be,Vr,Vr.viewport)}}else sv(P,be,_t);null!==ce&&(yn.updateMultisampleRenderTarget(ce),yn.updateRenderTargetMipmap(ce)),!0===be.isScene&&be.onAfterRender(W,be,_t),Mr.buffers.depth.setTest(!0),Mr.buffers.depth.setMask(!0),Mr.buffers.color.setMask(!0),Mr.setPolygonOffset(!1),fr.resetDefaultState(),le=-1,Ee=null,k.pop(),R=k.length>0?k[k.length-1]:null,O.pop(),P=O.length>0?O[O.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return V},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return ce},this.setRenderTarget=function(be,_t=0,ht=0){ce=be,V=_t,B=ht,be&&void 0===Ut.get(be).__webglFramebuffer&&yn.setupRenderTarget(be);let Lt=null,pn=!1,_i=!1;if(be){const zr=be.texture;(zr.isDataTexture3D||zr.isDataTexture2DArray)&&(_i=!0);const Oi=Ut.get(be).__webglFramebuffer;be.isWebGLCubeRenderTarget?(Lt=Oi[_t],pn=!0):Lt=be.isWebGLMultisampleRenderTarget?Ut.get(be).__webglMultisampledFramebuffer:Oi,Fe.copy(be.viewport),de.copy(be.scissor),Qe=be.scissorTest}else Fe.copy(Ct).multiplyScalar(Ke).floor(),de.copy(Nt).multiplyScalar(Ke).floor(),Qe=Dt;if(Mr.bindFramebuffer(36160,Lt)&&_r.drawBuffers){let zr=!1;if(be)if(be.isWebGLMultipleRenderTargets){const Oi=be.texture;if(Gt.length!==Oi.length||36064!==Gt[0]){for(let ws=0,qi=Oi.length;ws<qi;ws++)Gt[ws]=36064+ws;Gt.length=Oi.length,zr=!0}}else(1!==Gt.length||36064!==Gt[0])&&(Gt[0]=36064,Gt.length=1,zr=!0);else(1!==Gt.length||1029!==Gt[0])&&(Gt[0]=1029,Gt.length=1,zr=!0);zr&&(_r.isWebGL2?St.drawBuffers(Gt):oi.get("WEBGL_draw_buffers").drawBuffersWEBGL(Gt))}if(Mr.viewport(Fe),Mr.scissor(de),Mr.setScissorTest(Qe),pn){const zr=Ut.get(be.texture);St.framebufferTexture2D(36160,36064,34069+_t,zr.__webglTexture,ht)}else if(_i){const zr=Ut.get(be.texture);St.framebufferTextureLayer(36160,36064,zr.__webglTexture,ht||0,_t||0)}le=-1},this.readRenderTargetPixels=function(be,_t,ht,Lt,pn,_i,Vr){if(!be||!be.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let zr=Ut.get(be).__webglFramebuffer;if(be.isWebGLCubeRenderTarget&&void 0!==Vr&&(zr=zr[Vr]),zr){Mr.bindFramebuffer(36160,zr);try{const Oi=be.texture,ws=Oi.format,qi=Oi.type;if(ws!==Is&&Zt.convert(ws)!==St.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Zi=qi===Ui&&(oi.has("EXT_color_buffer_half_float")||_r.isWebGL2&&oi.has("EXT_color_buffer_float"));if(!(qi===sr||Zt.convert(qi)===St.getParameter(35738)||qi===po&&(_r.isWebGL2||oi.has("OES_texture_float")||oi.has("WEBGL_color_buffer_float"))||Zi))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===St.checkFramebufferStatus(36160)?_t>=0&&_t<=be.width-Lt&&ht>=0&&ht<=be.height-pn&&St.readPixels(_t,ht,Lt,pn,Zt.convert(ws),Zt.convert(qi),_i):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Oi=null!==ce?Ut.get(ce).__webglFramebuffer:null;Mr.bindFramebuffer(36160,Oi)}}},this.copyFramebufferToTexture=function(be,_t,ht=0){const Lt=Math.pow(2,-ht),pn=Math.floor(_t.image.width*Lt),_i=Math.floor(_t.image.height*Lt);let Vr=Zt.convert(_t.format);_r.isWebGL2&&(6407===Vr&&(Vr=32849),6408===Vr&&(Vr=32856)),yn.setTexture2D(_t,0),St.copyTexImage2D(3553,ht,Vr,be.x,be.y,pn,_i,0),Mr.unbindTexture()},this.copyTextureToTexture=function(be,_t,ht,Lt=0){const pn=_t.image.width,_i=_t.image.height,Vr=Zt.convert(ht.format),zr=Zt.convert(ht.type);yn.setTexture2D(ht,0),St.pixelStorei(37440,ht.flipY),St.pixelStorei(37441,ht.premultiplyAlpha),St.pixelStorei(3317,ht.unpackAlignment),_t.isDataTexture?St.texSubImage2D(3553,Lt,be.x,be.y,pn,_i,Vr,zr,_t.image.data):_t.isCompressedTexture?St.compressedTexSubImage2D(3553,Lt,be.x,be.y,_t.mipmaps[0].width,_t.mipmaps[0].height,Vr,_t.mipmaps[0].data):St.texSubImage2D(3553,Lt,be.x,be.y,Vr,zr,_t.image),0===Lt&&ht.generateMipmaps&&St.generateMipmap(3553),Mr.unbindTexture()},this.copyTextureToTexture3D=function(be,_t,ht,Lt,pn=0){if(W.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const _i=be.max.x-be.min.x+1,Vr=be.max.y-be.min.y+1,zr=be.max.z-be.min.z+1,Oi=Zt.convert(Lt.format),ws=Zt.convert(Lt.type);let qi;if(Lt.isDataTexture3D)yn.setTexture3D(Lt,0),qi=32879;else{if(!Lt.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");yn.setTexture2DArray(Lt,0),qi=35866}St.pixelStorei(37440,Lt.flipY),St.pixelStorei(37441,Lt.premultiplyAlpha),St.pixelStorei(3317,Lt.unpackAlignment);const Zi=St.getParameter(3314),Zr=St.getParameter(32878),Hh=St.getParameter(3316),Qo=St.getParameter(3315),_u=St.getParameter(32877),dc=ht.isCompressedTexture?ht.mipmaps[0]:ht.image;St.pixelStorei(3314,dc.width),St.pixelStorei(32878,dc.height),St.pixelStorei(3316,be.min.x),St.pixelStorei(3315,be.min.y),St.pixelStorei(32877,be.min.z),ht.isDataTexture||ht.isDataTexture3D?St.texSubImage3D(qi,pn,_t.x,_t.y,_t.z,_i,Vr,zr,Oi,ws,dc.data):ht.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),St.compressedTexSubImage3D(qi,pn,_t.x,_t.y,_t.z,_i,Vr,zr,Oi,dc.data)):St.texSubImage3D(qi,pn,_t.x,_t.y,_t.z,_i,Vr,zr,Oi,ws,dc),St.pixelStorei(3314,Zi),St.pixelStorei(32878,Zr),St.pixelStorei(3316,Hh),St.pixelStorei(3315,Qo),St.pixelStorei(32877,_u),0===pn&&Lt.generateMipmaps&&St.generateMipmap(qi),Mr.unbindTexture()},this.initTexture=function(be){yn.setTexture2D(be,0),Mr.unbindTexture()},this.resetState=function(){V=0,B=0,ce=null,Mr.reset(),fr.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends Ds{}).prototype.isWebGL1Renderer=!0;class jm{constructor(e,r=25e-5){this.name="",this.color=new vt(e),this.density=r}clone(){return new jm(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}jm.prototype.isFogExp2=!0;class Wm{constructor(e,r=1,s=1e3){this.name="",this.color=new vt(e),this.near=r,this.far=s}clone(){return new Wm(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Wm.prototype.isFog=!0;class ed extends pi{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return null!==this.fog&&(r.object.fog=this.fog.toJSON()),r}}ed.prototype.isScene=!0;class td{constructor(e,r){this.array=e,this.stride=r,this.count=void 0!==e?e.length/r:0,this.usage=Gr,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=er()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,r,s){e*=this.stride,s*=r.stride;for(let a=0,c=this.stride;a<c;a++)this.array[e+a]=r.array[s+a];return this}set(e,r=0){return this.array.set(e,r),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=er()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(r,this.stride);return s.setUsage(this.usage),s}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=er()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}td.prototype.isInterleavedBuffer=!0;const Uo=new pe;class uu{constructor(e,r,s,a=!1){this.name="",this.data=e,this.itemSize=r,this.offset=s,this.normalized=!0===a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let r=0,s=this.data.count;r<s;r++)Uo.x=this.getX(r),Uo.y=this.getY(r),Uo.z=this.getZ(r),Uo.applyMatrix4(e),this.setXYZ(r,Uo.x,Uo.y,Uo.z);return this}applyNormalMatrix(e){for(let r=0,s=this.count;r<s;r++)Uo.x=this.getX(r),Uo.y=this.getY(r),Uo.z=this.getZ(r),Uo.applyNormalMatrix(e),this.setXYZ(r,Uo.x,Uo.y,Uo.z);return this}transformDirection(e){for(let r=0,s=this.count;r<s;r++)Uo.x=this.getX(r),Uo.y=this.getY(r),Uo.z=this.getZ(r),Uo.transformDirection(e),this.setXYZ(r,Uo.x,Uo.y,Uo.z);return this}setX(e,r){return this.data.array[e*this.data.stride+this.offset]=r,this}setY(e,r){return this.data.array[e*this.data.stride+this.offset+1]=r,this}setZ(e,r){return this.data.array[e*this.data.stride+this.offset+2]=r,this}setW(e,r){return this.data.array[e*this.data.stride+this.offset+3]=r,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,r,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=r,this.data.array[e+1]=s,this}setXYZ(e,r,s,a){return this.data.array[(e=e*this.data.stride+this.offset)+0]=r,this.data.array[e+1]=s,this.data.array[e+2]=a,this}setXYZW(e,r,s,a,c){return this.data.array[(e=e*this.data.stride+this.offset)+0]=r,this.data.array[e+1]=s,this.data.array[e+2]=a,this.data.array[e+3]=c,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const r=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)r.push(this.data.array[a+c])}return new Bt(new this.array.constructor(r),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new uu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const r=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)r.push(this.data.array[a+c])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}uu.prototype.isInterleavedBufferAttribute=!0;class tp extends X{constructor(e){super(),this.type="SpriteMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let of;tp.prototype.isSpriteMaterial=!0;const nd=new pe,af=new pe,wh=new pe,lf=new at,cf=new at,Yy=new $n,np=new pe,uf=new pe,rd=new pe,Xy=new at,uc=new at,rp=new at;function ip(p,e,r,s,a,c){lf.subVectors(p,r).addScalar(.5).multiply(s),void 0!==a?(cf.x=c*lf.x-a*lf.y,cf.y=a*lf.x+c*lf.y):cf.copy(lf),p.copy(e),p.x+=cf.x,p.y+=cf.y,p.applyMatrix4(Yy)}(class extends pi{constructor(e){if(super(),this.type="Sprite",void 0===of){of=new rn;const r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),s=new td(r,5);of.setIndex([0,1,2,0,2,3]),of.setAttribute("position",new uu(s,3,0,!1)),of.setAttribute("uv",new uu(s,2,3,!1))}this.geometry=of,this.material=void 0!==e?e:new tp,this.center=new at(.5,.5)}raycast(e,r){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),af.setFromMatrixScale(this.matrixWorld),Yy.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),wh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&af.multiplyScalar(-wh.z);const s=this.material.rotation;let a,c;0!==s&&(c=Math.cos(s),a=Math.sin(s));const m=this.center;ip(np.set(-.5,-.5,0),wh,m,af,a,c),ip(uf.set(.5,-.5,0),wh,m,af,a,c),ip(rd.set(.5,.5,0),wh,m,af,a,c),Xy.set(0,0),uc.set(1,0),rp.set(1,1);let y=e.ray.intersectTriangle(np,uf,rd,!1,nd);if(null===y&&(ip(uf.set(-.5,.5,0),wh,m,af,a,c),uc.set(0,1),y=e.ray.intersectTriangle(np,rd,uf,!1,nd),null===y))return;const w=e.ray.origin.distanceTo(nd);w<e.near||w>e.far||r.push({distance:w,point:nd.clone(),uv:N.getUV(nd,np,uf,rd,Xy,uc,rp,new at),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const Ky=new pe,Qy=new ci,sp=new ci,f_=new pe,Zy=new $n;class hf extends Ws{constructor(e,r){super(e,r),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new $n,this.bindMatrixInverse=new $n}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,r){this.skeleton=e,void 0===r&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ci,r=this.geometry.attributes.skinWeight;for(let s=0,a=r.count;s<a;s++){e.x=r.getX(s),e.y=r.getY(s),e.z=r.getZ(s),e.w=r.getW(s);const c=1/e.manhattanLength();c!==1/0?e.multiplyScalar(c):e.set(1,0,0,0),r.setXYZW(s,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,r){const s=this.skeleton,a=this.geometry;Qy.fromBufferAttribute(a.attributes.skinIndex,e),sp.fromBufferAttribute(a.attributes.skinWeight,e),Ky.fromBufferAttribute(a.attributes.position,e).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let c=0;c<4;c++){const m=sp.getComponent(c);if(0!==m){const y=Qy.getComponent(c);Zy.multiplyMatrices(s.bones[y].matrixWorld,s.boneInverses[y]),r.addScaledVector(f_.copy(Ky).applyMatrix4(Zy),m)}}return r.applyMatrix4(this.bindMatrixInverse)}}hf.prototype.isSkinnedMesh=!0;(class extends pi{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class extends Li{constructor(e=null,r=1,s=1,a,c,m,y,w,M=Ji,A=Ji,P,R){super(null,m,y,w,M,A,a,c,P,R),this.image={data:e,width:r,height:s},this.magFilter=M,this.minFilter=A,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}).prototype.isDataTexture=!0;class df extends Bt{constructor(e,r,s,a=1){"number"==typeof s&&(a=s,s=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,r,s),this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}df.prototype.isInstancedBufferAttribute=!0;const Jy=new $n,lp=new $n,Km=[],sd=new Ws;(class extends Ws{constructor(e,r,s){super(e,r),this.instanceMatrix=new df(new Float32Array(16*s),16),this.instanceColor=null,this.count=s,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,r){r.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,r){r.fromArray(this.instanceMatrix.array,16*e)}raycast(e,r){const s=this.matrixWorld,a=this.count;if(sd.geometry=this.geometry,sd.material=this.material,void 0!==sd.material)for(let c=0;c<a;c++){this.getMatrixAt(c,Jy),lp.multiplyMatrices(s,Jy),sd.matrixWorld=lp,sd.raycast(e,Km);for(let m=0,y=Km.length;m<y;m++){const w=Km[m];w.instanceId=c,w.object=this,r.push(w)}Km.length=0}}setColorAt(e,r){null===this.instanceColor&&(this.instanceColor=new df(new Float32Array(3*this.instanceMatrix.count),3)),r.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,r){r.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class oa extends X{constructor(e){super(),this.type="LineBasicMaterial",this.color=new vt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}oa.prototype.isLineBasicMaterial=!0;const Zm=new pe,Jm=new pe,eg=new $n,Mc=new ao,Eh=new Aa;class Gu extends pi{constructor(e=new rn,r=new oa){super(),this.type="Line",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const r=e.attributes.position,s=[0];for(let a=1,c=r.count;a<c;a++)Zm.fromBufferAttribute(r,a-1),Jm.fromBufferAttribute(r,a),s[a]=s[a-1],s[a]+=Zm.distanceTo(Jm);e.setAttribute("lineDistance",new An(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,r){const s=this.geometry,a=this.matrixWorld,c=e.params.Line.threshold,m=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Eh.copy(s.boundingSphere),Eh.applyMatrix4(a),Eh.radius+=c,!1===e.ray.intersectsSphere(Eh))return;eg.copy(a).invert(),Mc.copy(e.ray).applyMatrix4(eg);const y=c/((this.scale.x+this.scale.y+this.scale.z)/3),w=y*y,M=new pe,A=new pe,P=new pe,R=new pe,O=this.isLineSegments?2:1;if(s.isBufferGeometry){const k=s.index,Z=s.attributes.position;if(null!==k)for(let ce=Math.max(0,m.start),le=Math.min(k.count,m.start+m.count)-1;ce<le;ce+=O){const Ee=k.getX(ce),Fe=k.getX(ce+1);if(M.fromBufferAttribute(Z,Ee),A.fromBufferAttribute(Z,Fe),Mc.distanceSqToSegment(M,A,R,P)>w)continue;R.applyMatrix4(this.matrixWorld);const Qe=e.ray.origin.distanceTo(R);Qe<e.near||Qe>e.far||r.push({distance:Qe,point:P.clone().applyMatrix4(this.matrixWorld),index:ce,face:null,faceIndex:null,object:this})}else for(let ce=Math.max(0,m.start),le=Math.min(Z.count,m.start+m.count)-1;ce<le;ce+=O){if(M.fromBufferAttribute(Z,ce),A.fromBufferAttribute(Z,ce+1),Mc.distanceSqToSegment(M,A,R,P)>w)continue;R.applyMatrix4(this.matrixWorld);const Fe=e.ray.origin.distanceTo(R);Fe<e.near||Fe>e.far||r.push({distance:Fe,point:P.clone().applyMatrix4(this.matrixWorld),index:ce,face:null,faceIndex:null,object:this})}}else s.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const r=e.morphAttributes,s=Object.keys(r);if(s.length>0){const a=r[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,m=a.length;c<m;c++){const y=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=c}}}}else{const r=e.morphTargets;void 0!==r&&r.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Gu.prototype.isLine=!0;const e0=new pe,d_=new pe;class Wl extends Gu{constructor(e,r){super(e,r),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const r=e.attributes.position,s=[];for(let a=0,c=r.count;a<c;a+=2)e0.fromBufferAttribute(r,a),d_.fromBufferAttribute(r,a+1),s[a]=0===a?0:s[a-1],s[a+1]=s[a]+e0.distanceTo(d_);e.setAttribute("lineDistance",new An(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Wl.prototype.isLineSegments=!0;(class extends Gu{constructor(e,r){super(e,r),this.type="LineLoop"}}).prototype.isLineLoop=!0;class Wc extends X{constructor(e){super(),this.type="PointsMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Wc.prototype.isPointsMaterial=!0;const pf=new $n,ng=new ao,mf=new Aa,od=new pe;function rg(p,e,r,s,a,c,m){const y=ng.distanceSqToPoint(p);if(y<r){const w=new pe;ng.closestPointToPoint(p,w),w.applyMatrix4(s);const M=a.ray.origin.distanceTo(w);if(M<a.near||M>a.far)return;c.push({distance:M,distanceToRay:Math.sqrt(y),point:w,index:e,face:null,object:m})}}(class extends pi{constructor(e=new rn,r=new Wc){super(),this.type="Points",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,r){const s=this.geometry,a=this.matrixWorld,c=e.params.Points.threshold,m=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),mf.copy(s.boundingSphere),mf.applyMatrix4(a),mf.radius+=c,!1===e.ray.intersectsSphere(mf))return;pf.copy(a).invert(),ng.copy(e.ray).applyMatrix4(pf);const y=c/((this.scale.x+this.scale.y+this.scale.z)/3),w=y*y;if(s.isBufferGeometry){const M=s.index,P=s.attributes.position;if(null!==M)for(let k=Math.max(0,m.start),W=Math.min(M.count,m.start+m.count);k<W;k++){const Z=M.getX(k);od.fromBufferAttribute(P,Z),rg(od,Z,w,a,e,r,this)}else for(let k=Math.max(0,m.start),W=Math.min(P.count,m.start+m.count);k<W;k++)od.fromBufferAttribute(P,k),rg(od,k,w,a,e,r,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const r=e.morphAttributes,s=Object.keys(r);if(s.length>0){const a=r[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,m=a.length;c<m;c++){const y=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=c}}}}else{const r=e.morphTargets;void 0!==r&&r.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class extends Li{constructor(e,r,s,a,c,m,y,w,M){super(e,r,s,a,c,m,y,w,M),this.format=void 0!==y?y:cs,this.minFilter=void 0!==m?m:Jn,this.magFilter=void 0!==c?c:Jn,this.generateMipmaps=!1;const A=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function P(){A.needsUpdate=!0,e.requestVideoFrameCallback(P)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0;(class extends Li{constructor(e,r,s,a,c,m,y,w,M,A,P,R){super(null,m,y,w,M,A,a,c,P,R),this.image={width:r,height:s},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class extends Li{constructor(e,r,s,a,c,m,y,w,M){super(e,r,s,a,c,m,y,w,M),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,class extends Li{constructor(e,r,s,a,c,m,y,w,M,A){if((A=void 0!==A?A:mo)!==mo&&A!==go)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&A===mo&&(s=1012),void 0===s&&A===go&&(s=Zo),super(null,a,c,m,y,w,A,s,M),this.image={width:e,height:r},this.magFilter=void 0!==y?y:Ji,this.minFilter=void 0!==w?w:Ji,this.flipY=!1,this.generateMipmaps=!1}}.prototype.isDepthTexture=!0;class hc extends rn{constructor(e=1,r=1,s=1,a=8,c=1,m=!1,y=0,w=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:r,height:s,radialSegments:a,heightSegments:c,openEnded:m,thetaStart:y,thetaLength:w};const M=this;a=Math.floor(a),c=Math.floor(c);const A=[],P=[],R=[],O=[];let k=0;const W=[],Z=s/2;let V=0;function ce(le){const Ee=k,Fe=new at,de=new pe;let Qe=0;const Pt=!0===le?e:r,ct=!0===le?1:-1;for(let hn=1;hn<=a;hn++)P.push(0,Z*ct,0),R.push(0,ct,0),O.push(.5,.5),k++;const Ke=k;for(let hn=0;hn<=a;hn++){const Ct=hn/a*w+y,Nt=Math.cos(Ct),Dt=Math.sin(Ct);de.x=Pt*Dt,de.y=Z*ct,de.z=Pt*Nt,P.push(de.x,de.y,de.z),R.push(0,ct,0),Fe.x=.5*Nt+.5,Fe.y=.5*Dt*ct+.5,O.push(Fe.x,Fe.y),k++}for(let hn=0;hn<a;hn++){const At=Ee+hn,Ct=Ke+hn;!0===le?A.push(Ct,Ct+1,At):A.push(Ct+1,Ct,At),Qe+=3}M.addGroup(V,Qe,!0===le?1:2),V+=Qe}(function(){const le=new pe,Ee=new pe;let Fe=0;const de=(r-e)/s;for(let Qe=0;Qe<=c;Qe++){const Pt=[],ct=Qe/c,Ke=ct*(r-e)+e;for(let hn=0;hn<=a;hn++){const At=hn/a,Ct=At*w+y,Nt=Math.sin(Ct),Dt=Math.cos(Ct);Ee.x=Ke*Nt,Ee.y=-ct*s+Z,Ee.z=Ke*Dt,P.push(Ee.x,Ee.y,Ee.z),le.set(Nt,de,Dt).normalize(),R.push(le.x,le.y,le.z),O.push(At,1-ct),Pt.push(k++)}W.push(Pt)}for(let Qe=0;Qe<a;Qe++)for(let Pt=0;Pt<c;Pt++){const Ke=W[Pt+1][Qe],hn=W[Pt+1][Qe+1],At=W[Pt][Qe+1];A.push(W[Pt][Qe],Ke,At),A.push(Ke,hn,At),Fe+=6}M.addGroup(V,Fe,0),V+=Fe})(),!1===m&&(e>0&&ce(!0),r>0&&ce(!1)),this.setIndex(A),this.setAttribute("position",new An(P,3)),this.setAttribute("normal",new An(R,3)),this.setAttribute("uv",new An(O,2))}static fromJSON(e){return new hc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gf extends hc{constructor(e=1,r=1,s=8,a=1,c=!1,m=0,y=2*Math.PI){super(0,e,r,s,a,c,m,y),this.type="ConeGeometry",this.parameters={radius:e,height:r,radialSegments:s,heightSegments:a,openEnded:c,thetaStart:m,thetaLength:y}}static fromJSON(e){return new gf(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}new pe,new pe,new pe,new N;class Sc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,r){const s=this.getUtoTmapping(e);return this.getPoint(s,r)}getPoints(e=5){const r=[];for(let s=0;s<=e;s++)r.push(this.getPoint(s/e));return r}getSpacedPoints(e=5){const r=[];for(let s=0;s<=e;s++)r.push(this.getPointAt(s/e));return r}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const r=[];let s,a=this.getPoint(0),c=0;r.push(0);for(let m=1;m<=e;m++)s=this.getPoint(m/e),c+=s.distanceTo(a),r.push(c),a=s;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,r){const s=this.getLengths();let a=0;const c=s.length;let m;m=r||e*s[c-1];let M,y=0,w=c-1;for(;y<=w;)if(a=Math.floor(y+(w-y)/2),M=s[a]-m,M<0)y=a+1;else{if(!(M>0)){w=a;break}w=a-1}if(a=w,s[a]===m)return a/(c-1);const A=s[a];return(a+(m-A)/(s[a+1]-A))/(c-1)}getTangent(e,r){const s=1e-4;let a=e-s,c=e+s;a<0&&(a=0),c>1&&(c=1);const m=this.getPoint(a),y=this.getPoint(c),w=r||(m.isVector2?new at:new pe);return w.copy(y).sub(m).normalize(),w}getTangentAt(e,r){const s=this.getUtoTmapping(e);return this.getTangent(s,r)}computeFrenetFrames(e,r){const s=new pe,a=[],c=[],m=[],y=new pe,w=new $n;for(let O=0;O<=e;O++)a[O]=this.getTangentAt(O/e,new pe),a[O].normalize();c[0]=new pe,m[0]=new pe;let M=Number.MAX_VALUE;const A=Math.abs(a[0].x),P=Math.abs(a[0].y),R=Math.abs(a[0].z);A<=M&&(M=A,s.set(1,0,0)),P<=M&&(M=P,s.set(0,1,0)),R<=M&&s.set(0,0,1),y.crossVectors(a[0],s).normalize(),c[0].crossVectors(a[0],y),m[0].crossVectors(a[0],c[0]);for(let O=1;O<=e;O++){if(c[O]=c[O-1].clone(),m[O]=m[O-1].clone(),y.crossVectors(a[O-1],a[O]),y.length()>Number.EPSILON){y.normalize();const k=Math.acos(ks(a[O-1].dot(a[O]),-1,1));c[O].applyMatrix4(w.makeRotationAxis(y,k))}m[O].crossVectors(a[O],c[O])}if(!0===r){let O=Math.acos(ks(c[0].dot(c[e]),-1,1));O/=e,a[0].dot(y.crossVectors(c[0],c[e]))>0&&(O=-O);for(let k=1;k<=e;k++)c[k].applyMatrix4(w.makeRotationAxis(a[k],O*k)),m[k].crossVectors(a[k],c[k])}return{tangents:a,normals:c,binormals:m}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class pp extends Sc{constructor(e=0,r=0,s=1,a=1,c=0,m=2*Math.PI,y=!1,w=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=r,this.xRadius=s,this.yRadius=a,this.aStartAngle=c,this.aEndAngle=m,this.aClockwise=y,this.aRotation=w}getPoint(e,r){const s=r||new at,a=2*Math.PI;let c=this.aEndAngle-this.aStartAngle;const m=Math.abs(c)<Number.EPSILON;for(;c<0;)c+=a;for(;c>a;)c-=a;c<Number.EPSILON&&(c=m?0:a),!0===this.aClockwise&&!m&&(c===a?c=-a:c-=a);const y=this.aStartAngle+e*c;let w=this.aX+this.xRadius*Math.cos(y),M=this.aY+this.yRadius*Math.sin(y);if(0!==this.aRotation){const A=Math.cos(this.aRotation),P=Math.sin(this.aRotation),R=w-this.aX,O=M-this.aY;w=R*A-O*P+this.aX,M=R*P+O*A+this.aY}return s.set(w,M)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}pp.prototype.isEllipseCurve=!0;class sg extends pp{constructor(e,r,s,a,c,m){super(e,r,s,s,a,c,m),this.type="ArcCurve"}}function ds(){let p=0,e=0,r=0,s=0;function a(c,m,y,w){p=c,e=y,r=-3*c+3*m-2*y-w,s=2*c-2*m+y+w}return{initCatmullRom:function(c,m,y,w,M){a(m,y,M*(y-c),M*(w-m))},initNonuniformCatmullRom:function(c,m,y,w,M,A,P){let R=(m-c)/M-(y-c)/(M+A)+(y-m)/A,O=(y-m)/A-(w-m)/(A+P)+(w-y)/P;R*=A,O*=A,a(m,y,R,O)},calc:function(c){const m=c*c;return p+e*c+r*m+s*(m*c)}}}sg.prototype.isArcCurve=!0;const yf=new pe,n0=new ds,Tc=new ds,ld=new ds;class mp extends Sc{constructor(e=[],r=!1,s="centripetal",a=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=r,this.curveType=s,this.tension=a}getPoint(e,r=new pe){const s=r,a=this.points,c=a.length,m=(c-(this.closed?0:1))*e;let M,A,y=Math.floor(m),w=m-y;this.closed?y+=y>0?0:(Math.floor(Math.abs(y)/c)+1)*c:0===w&&y===c-1&&(y=c-2,w=1),this.closed||y>0?M=a[(y-1)%c]:(yf.subVectors(a[0],a[1]).add(a[0]),M=yf);const P=a[y%c],R=a[(y+1)%c];if(this.closed||y+2<c?A=a[(y+2)%c]:(yf.subVectors(a[c-1],a[c-2]).add(a[c-1]),A=yf),"centripetal"===this.curveType||"chordal"===this.curveType){const O="chordal"===this.curveType?.5:.25;let k=Math.pow(M.distanceToSquared(P),O),W=Math.pow(P.distanceToSquared(R),O),Z=Math.pow(R.distanceToSquared(A),O);W<1e-4&&(W=1),k<1e-4&&(k=W),Z<1e-4&&(Z=W),n0.initNonuniformCatmullRom(M.x,P.x,R.x,A.x,k,W,Z),Tc.initNonuniformCatmullRom(M.y,P.y,R.y,A.y,k,W,Z),ld.initNonuniformCatmullRom(M.z,P.z,R.z,A.z,k,W,Z)}else"catmullrom"===this.curveType&&(n0.initCatmullRom(M.x,P.x,R.x,A.x,this.tension),Tc.initCatmullRom(M.y,P.y,R.y,A.y,this.tension),ld.initCatmullRom(M.z,P.z,R.z,A.z,this.tension));return s.set(n0.calc(w),Tc.calc(w),ld.calc(w)),s}copy(e){super.copy(e),this.points=[];for(let r=0,s=e.points.length;r<s;r++)this.points.push(e.points[r].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,s=this.points.length;r<s;r++)e.points.push(this.points[r].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,s=e.points.length;r<s;r++){const a=e.points[r];this.points.push((new pe).fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function y_(p,e,r,s,a){const c=.5*(s-e),m=.5*(a-r),y=p*p;return(2*r-2*s+c+m)*(p*y)+(-3*r+3*s-2*c-m)*y+c*p+r}function vf(p,e,r,s){return function(p,e){const r=1-p;return r*r*e}(p,e)+function(p,e){return 2*(1-p)*p*e}(p,r)+function(p,e){return p*p*e}(p,s)}function fu(p,e,r,s,a){return function(p,e){const r=1-p;return r*r*r*e}(p,e)+function(p,e){const r=1-p;return 3*r*r*p*e}(p,r)+function(p,e){return 3*(1-p)*p*p*e}(p,s)+function(p,e){return p*p*p*e}(p,a)}mp.prototype.isCatmullRomCurve3=!0;class cd extends Sc{constructor(e=new at,r=new at,s=new at,a=new at){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=r,this.v2=s,this.v3=a}getPoint(e,r=new at){const s=r,a=this.v0,c=this.v1,m=this.v2,y=this.v3;return s.set(fu(e,a.x,c.x,m.x,y.x),fu(e,a.y,c.y,m.y,y.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}cd.prototype.isCubicBezierCurve=!0;class gp extends Sc{constructor(e=new pe,r=new pe,s=new pe,a=new pe){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=r,this.v2=s,this.v3=a}getPoint(e,r=new pe){const s=r,a=this.v0,c=this.v1,m=this.v2,y=this.v3;return s.set(fu(e,a.x,c.x,m.x,y.x),fu(e,a.y,c.y,m.y,y.y),fu(e,a.z,c.z,m.z,y.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}gp.prototype.isCubicBezierCurve3=!0;class ud extends Sc{constructor(e=new at,r=new at){super(),this.type="LineCurve",this.v1=e,this.v2=r}getPoint(e,r=new at){const s=r;return 1===e?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r){const s=r||new at;return s.copy(this.v2).sub(this.v1).normalize(),s}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}ud.prototype.isLineCurve=!0;class yp extends Sc{constructor(e=new at,r=new at,s=new at){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=r,this.v2=s}getPoint(e,r=new at){const s=r,a=this.v0,c=this.v1,m=this.v2;return s.set(vf(e,a.x,c.x,m.x),vf(e,a.y,c.y,m.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}yp.prototype.isQuadraticBezierCurve=!0;class og extends Sc{constructor(e=new pe,r=new pe,s=new pe){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=r,this.v2=s}getPoint(e,r=new pe){const s=r,a=this.v0,c=this.v1,m=this.v2;return s.set(vf(e,a.x,c.x,m.x),vf(e,a.y,c.y,m.y),vf(e,a.z,c.z,m.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}og.prototype.isQuadraticBezierCurve3=!0;class ag extends Sc{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,r=new at){const s=r,a=this.points,c=(a.length-1)*e,m=Math.floor(c),y=c-m,w=a[0===m?m:m-1],M=a[m],A=a[m>a.length-2?a.length-1:m+1],P=a[m>a.length-3?a.length-1:m+2];return s.set(y_(y,w.x,M.x,A.x,P.x),y_(y,w.y,M.y,A.y,P.y)),s}copy(e){super.copy(e),this.points=[];for(let r=0,s=e.points.length;r<s;r++)this.points.push(e.points[r].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,s=this.points.length;r<s;r++)e.points.push(this.points[r].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,s=e.points.length;r<s;r++){const a=e.points[r];this.points.push((new at).fromArray(a))}return this}}ag.prototype.isSplineCurve=!0;var lg=Object.freeze({__proto__:null,ArcCurve:sg,CatmullRomCurve3:mp,CubicBezierCurve:cd,CubicBezierCurve3:gp,EllipseCurve:pp,LineCurve:ud,LineCurve3:class extends Sc{constructor(e=new pe,r=new pe){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=r}getPoint(e,r=new pe){const s=r;return 1===e?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,r){return this.getPoint(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:yp,QuadraticBezierCurve3:og,SplineCurve:ag});function cg(p,e,r,s,a){let c,m;if(a===function(p,e,r,s){let a=0;for(let c=e,m=r-s;c<r;c+=s)a+=(p[m]-p[c])*(p[c+1]+p[m+1]),m=c;return a}(p,e,r,s)>0)for(c=e;c<r;c+=s)m=f0(c,p[c],p[c+1],m);else for(c=r-s;c>=e;c-=s)m=f0(c,p[c],p[c+1],m);return m&&vp(m,m.next)&&(fd(m),m=m.next),m}function Mh(p,e){if(!p)return p;e||(e=p);let s,r=p;do{if(s=!1,r.steiner||!vp(r,r.next)&&0!==fo(r.prev,r,r.next))r=r.next;else{if(fd(r),r=e=r.prev,r===r.next)break;s=!0}}while(s||r!==e);return e}function _f(p,e,r,s,a,c,m){if(!p)return;!m&&c&&function(p,e,r,s){let a=p;do{null===a.z&&(a.z=c0(a.x,a.y,e,r,s)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==p);a.prevZ.nextZ=null,a.prevZ=null,function(p){let e,r,s,a,c,m,y,w,M=1;do{for(r=p,p=null,c=null,m=0;r;){for(m++,s=r,y=0,e=0;e<M&&(y++,s=s.nextZ,s);e++);for(w=M;y>0||w>0&&s;)0!==y&&(0===w||!s||r.z<=s.z)?(a=r,r=r.nextZ,y--):(a=s,s=s.nextZ,w--),c?c.nextZ=a:p=a,a.prevZ=c,c=a;r=s}c.nextZ=null,M*=2}while(m>1)}(a)}(p,s,a,c);let w,M,y=p;for(;p.prev!==p.next;)if(w=p.prev,M=p.next,c?M_(p,s,a,c):E_(p))e.push(w.i/r),e.push(p.i/r),e.push(M.i/r),fd(p),p=M.next,y=M.next;else if((p=M)===y){m?1===m?_f(p=Rx(Mh(p),e,r),e,r,s,a,c,2):2===m&&Px(p,e,r,s,a,c):_f(Mh(p),e,r,s,a,c,1);break}}function E_(p){const e=p.prev,r=p,s=p.next;if(fo(e,r,s)>=0)return!1;let a=p.next.next;for(;a!==p.prev;){if(Sh(e.x,e.y,r.x,r.y,s.x,s.y,a.x,a.y)&&fo(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function M_(p,e,r,s){const a=p.prev,c=p,m=p.next;if(fo(a,c,m)>=0)return!1;const M=a.x>c.x?a.x>m.x?a.x:m.x:c.x>m.x?c.x:m.x,A=a.y>c.y?a.y>m.y?a.y:m.y:c.y>m.y?c.y:m.y,P=c0(a.x<c.x?a.x<m.x?a.x:m.x:c.x<m.x?c.x:m.x,a.y<c.y?a.y<m.y?a.y:m.y:c.y<m.y?c.y:m.y,e,r,s),R=c0(M,A,e,r,s);let O=p.prevZ,k=p.nextZ;for(;O&&O.z>=P&&k&&k.z<=R;){if(O!==p.prev&&O!==p.next&&Sh(a.x,a.y,c.x,c.y,m.x,m.y,O.x,O.y)&&fo(O.prev,O,O.next)>=0||(O=O.prevZ,k!==p.prev&&k!==p.next&&Sh(a.x,a.y,c.x,c.y,m.x,m.y,k.x,k.y)&&fo(k.prev,k,k.next)>=0))return!1;k=k.nextZ}for(;O&&O.z>=P;){if(O!==p.prev&&O!==p.next&&Sh(a.x,a.y,c.x,c.y,m.x,m.y,O.x,O.y)&&fo(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;k&&k.z<=R;){if(k!==p.prev&&k!==p.next&&Sh(a.x,a.y,c.x,c.y,m.x,m.y,k.x,k.y)&&fo(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function Rx(p,e,r){let s=p;do{const a=s.prev,c=s.next.next;!vp(a,c)&&T_(a,s,s.next,c)&&Th(a,c)&&Th(c,a)&&(e.push(a.i/r),e.push(s.i/r),e.push(c.i/r),fd(s),fd(s.next),s=p=c),s=s.next}while(s!==p);return Mh(s)}function Px(p,e,r,s,a,c){let m=p;do{let y=m.next.next;for(;y!==m.prev;){if(m.i!==y.i&&u0(m,y)){let w=h0(m,y);return m=Mh(m,m.next),w=Mh(w,w.next),_f(m,e,r,s,a,c),void _f(w,e,r,s,a,c)}y=y.next}m=m.next}while(m!==p)}function S_(p,e){return p.x-e.x}function a0(p,e){if(e=function(p,e){let r=e;const s=p.x,a=p.y;let m,c=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){const R=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(R<=s&&R>c){if(c=R,R===s){if(a===r.y)return r;if(a===r.next.y)return r.next}m=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!m)return null;if(s===c)return m;const y=m,w=m.x,M=m.y;let P,A=1/0;r=m;do{s>=r.x&&r.x>=w&&s!==r.x&&Sh(a<M?s:c,a,w,M,a<M?c:s,a,r.x,r.y)&&(P=Math.abs(a-r.y)/(s-r.x),Th(r,p)&&(P<A||P===A&&(r.x>m.x||r.x===m.x&&Ix(m,r)))&&(m=r,A=P)),r=r.next}while(r!==y);return m}(p,e)){const r=h0(e,p);Mh(e,e.next),Mh(r,r.next)}}function Ix(p,e){return fo(p.prev,p,e.prev)<0&&fo(e.next,p,p.next)<0}function c0(p,e,r,s,a){return(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*(p-r)*a)|p<<8))|p<<4))|p<<2))|p<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)*a)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ox(p){let e=p,r=p;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==p);return r}function Sh(p,e,r,s,a,c,m,y){return(a-m)*(e-y)-(p-m)*(c-y)>=0&&(p-m)*(s-y)-(r-m)*(e-y)>=0&&(r-m)*(c-y)-(a-m)*(s-y)>=0}function u0(p,e){return p.next.i!==e.i&&p.prev.i!==e.i&&!function(p,e){let r=p;do{if(r.i!==p.i&&r.next.i!==p.i&&r.i!==e.i&&r.next.i!==e.i&&T_(r,r.next,p,e))return!0;r=r.next}while(r!==p);return!1}(p,e)&&(Th(p,e)&&Th(e,p)&&function(p,e){let r=p,s=!1;const a=(p.x+e.x)/2,c=(p.y+e.y)/2;do{r.y>c!=r.next.y>c&&r.next.y!==r.y&&a<(r.next.x-r.x)*(c-r.y)/(r.next.y-r.y)+r.x&&(s=!s),r=r.next}while(r!==p);return s}(p,e)&&(fo(p.prev,p,e.prev)||fo(p,e.prev,e))||vp(p,e)&&fo(p.prev,p,p.next)>0&&fo(e.prev,e,e.next)>0)}function fo(p,e,r){return(e.y-p.y)*(r.x-e.x)-(e.x-p.x)*(r.y-e.y)}function vp(p,e){return p.x===e.x&&p.y===e.y}function T_(p,e,r,s){const a=bf(fo(p,e,r)),c=bf(fo(p,e,s)),m=bf(fo(r,s,p)),y=bf(fo(r,s,e));return!!(a!==c&&m!==y||0===a&&hd(p,r,e)||0===c&&hd(p,s,e)||0===m&&hd(r,p,s)||0===y&&hd(r,e,s))}function hd(p,e,r){return e.x<=Math.max(p.x,r.x)&&e.x>=Math.min(p.x,r.x)&&e.y<=Math.max(p.y,r.y)&&e.y>=Math.min(p.y,r.y)}function bf(p){return p>0?1:p<0?-1:0}function Th(p,e){return fo(p.prev,p,p.next)<0?fo(p,e,p.next)>=0&&fo(p,p.prev,e)>=0:fo(p,e,p.prev)<0||fo(p,p.next,e)<0}function h0(p,e){const r=new hg(p.i,p.x,p.y),s=new hg(e.i,e.x,e.y),a=p.next,c=e.prev;return p.next=e,e.prev=p,r.next=a,a.prev=r,s.next=r,r.prev=s,c.next=s,s.prev=c,s}function f0(p,e,r,s){const a=new hg(p,e,r);return s?(a.next=s.next,a.prev=s,s.next.prev=a,s.next=a):(a.prev=a,a.next=a),a}function fd(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function hg(p,e,r){this.i=p,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class fc{static area(e){const r=e.length;let s=0;for(let a=r-1,c=0;c<r;a=c++)s+=e[a].x*e[c].y-e[c].x*e[a].y;return.5*s}static isClockWise(e){return fc.area(e)<0}static triangulateShape(e,r){const s=[],a=[],c=[];Ch(e),fg(s,e);let m=e.length;r.forEach(Ch);for(let w=0;w<r.length;w++)a.push(m),m+=r[w].length,fg(s,r[w]);const y=function(p,e,r=2){const s=e&&e.length,a=s?e[0]*r:p.length;let c=cg(p,0,a,r,!0);const m=[];if(!c||c.next===c.prev)return m;let y,w,M,A,P,R,O;if(s&&(c=function(p,e,r,s){const a=[];let c,m,y,w,M;for(c=0,m=e.length;c<m;c++)y=e[c]*s,w=c<m-1?e[c+1]*s:p.length,M=cg(p,y,w,s,!1),M===M.next&&(M.steiner=!0),a.push(Ox(M));for(a.sort(S_),c=0;c<a.length;c++)a0(a[c],r),r=Mh(r,r.next);return r}(p,e,c,r)),p.length>80*r){y=M=p[0],w=A=p[1];for(let k=r;k<a;k+=r)P=p[k],R=p[k+1],P<y&&(y=P),R<w&&(w=R),P>M&&(M=P),R>A&&(A=R);O=Math.max(M-y,A-w),O=0!==O?1/O:0}return _f(c,m,r,y,w,O),m}(s,a);for(let w=0;w<y.length;w+=3)c.push(y.slice(w,w+3));return c}}function Ch(p){const e=p.length;e>2&&p[e-1].equals(p[0])&&p.pop()}function fg(p,e){for(let r=0;r<e.length;r++)p.push(e[r].x),p.push(e[r].y)}class aa extends rn{constructor(e,r){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:r},e=Array.isArray(e)?e:[e];const s=this,a=[],c=[];for(let y=0,w=e.length;y<w;y++)m(e[y]);function m(y){const w=[],M=void 0!==r.curveSegments?r.curveSegments:12,A=void 0!==r.steps?r.steps:1;let P=void 0!==r.depth?r.depth:100,R=void 0===r.bevelEnabled||r.bevelEnabled,O=void 0!==r.bevelThickness?r.bevelThickness:6,k=void 0!==r.bevelSize?r.bevelSize:O-2,W=void 0!==r.bevelOffset?r.bevelOffset:0,Z=void 0!==r.bevelSegments?r.bevelSegments:3;const V=r.extrudePath,B=void 0!==r.UVGenerator?r.UVGenerator:dd;void 0!==r.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),P=r.amount);let ce,Ee,Fe,de,Qe,le=!1;V&&(ce=V.getSpacedPoints(A),le=!0,R=!1,Ee=V.computeFrenetFrames(A,!1),Fe=new pe,de=new pe,Qe=new pe),R||(Z=0,O=0,k=0,W=0);const Pt=y.extractPoints(M);let ct=Pt.shape;const Ke=Pt.holes;if(!fc.isClockWise(ct)){ct=ct.reverse();for(let Ut=0,yn=Ke.length;Ut<yn;Ut++){const In=Ke[Ut];fc.isClockWise(In)&&(Ke[Ut]=In.reverse())}}const At=fc.triangulateShape(ct,Ke),Ct=ct;for(let Ut=0,yn=Ke.length;Ut<yn;Ut++)ct=ct.concat(Ke[Ut]);function Nt(Ut,yn,In){return yn||console.error("THREE.ExtrudeGeometry: vec does not exist"),yn.clone().multiplyScalar(In).add(Ut)}const Dt=ct.length,Gt=At.length;function Pn(Ut,yn,In){let Sr,Wn,Pe;const we=Ut.x-yn.x,Vt=Ut.y-yn.y,an=In.x-Ut.x,Yn=In.y-Ut.y,ur=we*we+Vt*Vt;if(Math.abs(we*Yn-Vt*an)>Number.EPSILON){const Or=Math.sqrt(ur),Hr=Math.sqrt(an*an+Yn*Yn),Dr=yn.x-Vt/Or,it=yn.y+we/Or,fr=((In.x-Yn/Hr-Dr)*Yn-(In.y+an/Hr-it)*an)/(we*Yn-Vt*an);Sr=Dr+we*fr-Ut.x,Wn=it+Vt*fr-Ut.y;const xr=Sr*Sr+Wn*Wn;if(xr<=2)return new at(Sr,Wn);Pe=Math.sqrt(xr/2)}else{let Or=!1;we>Number.EPSILON?an>Number.EPSILON&&(Or=!0):we<-Number.EPSILON?an<-Number.EPSILON&&(Or=!0):Math.sign(Vt)===Math.sign(Yn)&&(Or=!0),Or?(Sr=-Vt,Wn=we,Pe=Math.sqrt(ur)):(Sr=we,Wn=Vt,Pe=Math.sqrt(ur/2))}return new at(Sr/Pe,Wn/Pe)}const vr=[];for(let Ut=0,yn=Ct.length,In=yn-1,Sr=Ut+1;Ut<yn;Ut++,In++,Sr++)In===yn&&(In=0),Sr===yn&&(Sr=0),vr[Ut]=Pn(Ct[Ut],Ct[In],Ct[Sr]);const Lr=[];let nr,Qr=vr.concat();for(let Ut=0,yn=Ke.length;Ut<yn;Ut++){const In=Ke[Ut];nr=[];for(let Sr=0,Wn=In.length,Pe=Wn-1,we=Sr+1;Sr<Wn;Sr++,Pe++,we++)Pe===Wn&&(Pe=0),we===Wn&&(we=0),nr[Sr]=Pn(In[Sr],In[Pe],In[we]);Lr.push(nr),Qr=Qr.concat(nr)}for(let Ut=0;Ut<Z;Ut++){const yn=Ut/Z,In=O*Math.cos(yn*Math.PI/2),Sr=k*Math.sin(yn*Math.PI/2)+W;for(let Wn=0,Pe=Ct.length;Wn<Pe;Wn++){const we=Nt(Ct[Wn],vr[Wn],Sr);Fr(we.x,we.y,-In)}for(let Wn=0,Pe=Ke.length;Wn<Pe;Wn++){const we=Ke[Wn];nr=Lr[Wn];for(let Vt=0,an=we.length;Vt<an;Vt++){const Yn=Nt(we[Vt],nr[Vt],Sr);Fr(Yn.x,Yn.y,-In)}}}const on=k+W;for(let Ut=0;Ut<Dt;Ut++){const yn=R?Nt(ct[Ut],Qr[Ut],on):ct[Ut];le?(de.copy(Ee.normals[0]).multiplyScalar(yn.x),Fe.copy(Ee.binormals[0]).multiplyScalar(yn.y),Qe.copy(ce[0]).add(de).add(Fe),Fr(Qe.x,Qe.y,Qe.z)):Fr(yn.x,yn.y,0)}for(let Ut=1;Ut<=A;Ut++)for(let yn=0;yn<Dt;yn++){const In=R?Nt(ct[yn],Qr[yn],on):ct[yn];le?(de.copy(Ee.normals[Ut]).multiplyScalar(In.x),Fe.copy(Ee.binormals[Ut]).multiplyScalar(In.y),Qe.copy(ce[Ut]).add(de).add(Fe),Fr(Qe.x,Qe.y,Qe.z)):Fr(In.x,In.y,P/A*Ut)}for(let Ut=Z-1;Ut>=0;Ut--){const yn=Ut/Z,In=O*Math.cos(yn*Math.PI/2),Sr=k*Math.sin(yn*Math.PI/2)+W;for(let Wn=0,Pe=Ct.length;Wn<Pe;Wn++){const we=Nt(Ct[Wn],vr[Wn],Sr);Fr(we.x,we.y,P+In)}for(let Wn=0,Pe=Ke.length;Wn<Pe;Wn++){const we=Ke[Wn];nr=Lr[Wn];for(let Vt=0,an=we.length;Vt<an;Vt++){const Yn=Nt(we[Vt],nr[Vt],Sr);le?Fr(Yn.x,Yn.y+ce[A-1].y,ce[A-1].x+In):Fr(Yn.x,Yn.y,P+In)}}}function St(Ut,yn){let In=Ut.length;for(;--In>=0;){const Sr=In;let Wn=In-1;Wn<0&&(Wn=Ut.length-1);for(let Pe=0,we=A+2*Z;Pe<we;Pe++){const Vt=Dt*Pe,an=Dt*(Pe+1);_r(yn+Sr+Vt,yn+Wn+Vt,yn+Wn+an,yn+Sr+an)}}}function Fr(Ut,yn,In){w.push(Ut),w.push(yn),w.push(In)}function oi(Ut,yn,In){Mr(Ut),Mr(yn),Mr(In);const Sr=a.length/3,Wn=B.generateTopUV(s,a,Sr-3,Sr-2,Sr-1);vi(Wn[0]),vi(Wn[1]),vi(Wn[2])}function _r(Ut,yn,In,Sr){Mr(Ut),Mr(yn),Mr(Sr),Mr(yn),Mr(In),Mr(Sr);const Wn=a.length/3,Pe=B.generateSideWallUV(s,a,Wn-6,Wn-3,Wn-2,Wn-1);vi(Pe[0]),vi(Pe[1]),vi(Pe[3]),vi(Pe[1]),vi(Pe[2]),vi(Pe[3])}function Mr(Ut){a.push(w[3*Ut+0]),a.push(w[3*Ut+1]),a.push(w[3*Ut+2])}function vi(Ut){c.push(Ut.x),c.push(Ut.y)}(function(){const Ut=a.length/3;if(R){let yn=0,In=Dt*yn;for(let Sr=0;Sr<Gt;Sr++){const Wn=At[Sr];oi(Wn[2]+In,Wn[1]+In,Wn[0]+In)}yn=A+2*Z,In=Dt*yn;for(let Sr=0;Sr<Gt;Sr++){const Wn=At[Sr];oi(Wn[0]+In,Wn[1]+In,Wn[2]+In)}}else{for(let yn=0;yn<Gt;yn++){const In=At[yn];oi(In[2],In[1],In[0])}for(let yn=0;yn<Gt;yn++){const In=At[yn];oi(In[0]+Dt*A,In[1]+Dt*A,In[2]+Dt*A)}}s.addGroup(Ut,a.length/3-Ut,0)})(),function(){const Ut=a.length/3;let yn=0;St(Ct,yn),yn+=Ct.length;for(let In=0,Sr=Ke.length;In<Sr;In++){const Wn=Ke[In];St(Wn,yn),yn+=Wn.length}s.addGroup(Ut,a.length/3-Ut,1)}()}this.setAttribute("position",new An(a,3)),this.setAttribute("uv",new An(c,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(p,e,r){if(r.shapes=[],Array.isArray(p))for(let s=0,a=p.length;s<a;s++)r.shapes.push(p[s].uuid);else r.shapes.push(p.uuid);return void 0!==e.extrudePath&&(r.options.extrudePath=e.extrudePath.toJSON()),r}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,r){const s=[];for(let c=0,m=e.shapes.length;c<m;c++)s.push(r[e.shapes[c]]);const a=e.options.extrudePath;return void 0!==a&&(e.options.extrudePath=(new lg[a.type]).fromJSON(a)),new aa(s,e.options)}}const dd={generateTopUV:function(p,e,r,s,a){const y=e[3*s],w=e[3*s+1],M=e[3*a],A=e[3*a+1];return[new at(e[3*r],e[3*r+1]),new at(y,w),new at(M,A)]},generateSideWallUV:function(p,e,r,s,a,c){const m=e[3*r],y=e[3*r+1],w=e[3*r+2],M=e[3*s],A=e[3*s+1],P=e[3*s+2],R=e[3*a],O=e[3*a+1],k=e[3*a+2],W=e[3*c],Z=e[3*c+1],V=e[3*c+2];return Math.abs(y-A)<Math.abs(m-M)?[new at(m,1-w),new at(M,1-P),new at(R,1-k),new at(W,1-V)]:[new at(y,1-w),new at(A,1-P),new at(O,1-k),new at(Z,1-V)]}};class Ac extends rn{constructor(e,r=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:r};const s=[],a=[],c=[],m=[];let y=0,w=0;if(!1===Array.isArray(e))M(e);else for(let A=0;A<e.length;A++)M(e[A]),this.addGroup(y,w,A),y+=w,w=0;function M(A){const P=a.length/3,R=A.extractPoints(r);let O=R.shape;const k=R.holes;!1===fc.isClockWise(O)&&(O=O.reverse());for(let Z=0,V=k.length;Z<V;Z++){const B=k[Z];!0===fc.isClockWise(B)&&(k[Z]=B.reverse())}const W=fc.triangulateShape(O,k);for(let Z=0,V=k.length;Z<V;Z++)O=O.concat(k[Z]);for(let Z=0,V=O.length;Z<V;Z++){const B=O[Z];a.push(B.x,B.y,0),c.push(0,0,1),m.push(B.x,B.y)}for(let Z=0,V=W.length;Z<V;Z++){const B=W[Z];s.push(B[0]+P,B[1]+P,B[2]+P),w+=3}}this.setIndex(s),this.setAttribute("position",new An(a,3)),this.setAttribute("normal",new An(c,3)),this.setAttribute("uv",new An(m,2))}toJSON(){const e=super.toJSON();return function(p,e){if(e.shapes=[],Array.isArray(p))for(let r=0,s=p.length;r<s;r++)e.shapes.push(p[r].uuid);else e.shapes.push(p.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,r){const s=[];for(let a=0,c=e.shapes.length;a<c;a++)s.push(r[e.shapes[a]]);return new Ac(s,e.curveSegments)}}class ga extends rn{constructor(e=1,r=32,s=16,a=0,c=2*Math.PI,m=0,y=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:s,phiStart:a,phiLength:c,thetaStart:m,thetaLength:y},r=Math.max(3,Math.floor(r)),s=Math.max(2,Math.floor(s));const w=Math.min(m+y,Math.PI);let M=0;const A=[],P=new pe,R=new pe,O=[],k=[],W=[],Z=[];for(let V=0;V<=s;V++){const B=[],ce=V/s;let le=0;0==V&&0==m?le=.5/r:V==s&&w==Math.PI&&(le=-.5/r);for(let Ee=0;Ee<=r;Ee++){const Fe=Ee/r;P.x=-e*Math.cos(a+Fe*c)*Math.sin(m+ce*y),P.y=e*Math.cos(m+ce*y),P.z=e*Math.sin(a+Fe*c)*Math.sin(m+ce*y),k.push(P.x,P.y,P.z),R.copy(P).normalize(),W.push(R.x,R.y,R.z),Z.push(Fe+le,1-ce),B.push(M++)}A.push(B)}for(let V=0;V<s;V++)for(let B=0;B<r;B++){const ce=A[V][B+1],le=A[V][B],Ee=A[V+1][B],Fe=A[V+1][B+1];(0!==V||m>0)&&O.push(ce,le,Fe),(V!==s-1||w<Math.PI)&&O.push(le,Ee,Fe)}this.setIndex(O),this.setAttribute("position",new An(k,3)),this.setAttribute("normal",new An(W,3)),this.setAttribute("uv",new An(Z,2))}static fromJSON(e){return new ga(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class $c extends rn{constructor(e,r=64,s=1,a=8,c=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:r,radius:s,radialSegments:a,closed:c};const m=e.computeFrenetFrames(r,c);this.tangents=m.tangents,this.normals=m.normals,this.binormals=m.binormals;const y=new pe,w=new pe,M=new at;let A=new pe;const P=[],R=[],O=[],k=[];function Z(ce){A=e.getPointAt(ce/r,A);const le=m.normals[ce],Ee=m.binormals[ce];for(let Fe=0;Fe<=a;Fe++){const de=Fe/a*Math.PI*2,Qe=Math.sin(de),Pt=-Math.cos(de);w.x=Pt*le.x+Qe*Ee.x,w.y=Pt*le.y+Qe*Ee.y,w.z=Pt*le.z+Qe*Ee.z,w.normalize(),R.push(w.x,w.y,w.z),y.x=A.x+s*w.x,y.y=A.y+s*w.y,y.z=A.z+s*w.z,P.push(y.x,y.y,y.z)}}(function(){for(let ce=0;ce<r;ce++)Z(ce);Z(!1===c?r:0),function(){for(let ce=0;ce<=r;ce++)for(let le=0;le<=a;le++)M.x=ce/r,M.y=le/a,O.push(M.x,M.y)}(),function(){for(let ce=1;ce<=r;ce++)for(let le=1;le<=a;le++){const Fe=(a+1)*ce+(le-1),de=(a+1)*ce+le,Qe=(a+1)*(ce-1)+le;k.push((a+1)*(ce-1)+(le-1),Fe,Qe),k.push(Fe,de,Qe)}}()})(),this.setIndex(k),this.setAttribute("position",new An(P,3)),this.setAttribute("normal",new An(R,3)),this.setAttribute("uv",new An(O,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new $c((new lg[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}(class extends X{constructor(e){super(),this.type="ShadowMaterial",this.color=new vt(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class Wu extends X{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Wu.prototype.isMeshStandardMaterial=!0;(class extends Wu{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new at(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ks(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.sheenTint=new vt(0),this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new vt(1,1,1),this.specularTintMap=null,this._clearcoat=0,this._transmission=0,this.setValues(e)}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheenTint.copy(e.sheenTint),this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}).prototype.isMeshPhysicalMaterial=!0;(class extends X{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class extends X{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class extends X{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;class xp extends X{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}xp.prototype.isMeshLambertMaterial=!0;(class extends X{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends oa{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const eo={arraySlice:function(p,e,r){return eo.isTypedArray(p)?new p.constructor(p.subarray(e,void 0!==r?r:p.length)):p.slice(e,r)},convertArray:function(p,e,r){return!p||!r&&p.constructor===e?p:"number"==typeof e.BYTES_PER_ELEMENT?new e(p):Array.prototype.slice.call(p)},isTypedArray:function(p){return ArrayBuffer.isView(p)&&!(p instanceof DataView)},getKeyframeOrder:function(p){const r=p.length,s=new Array(r);for(let a=0;a!==r;++a)s[a]=a;return s.sort(function(a,c){return p[a]-p[c]}),s},sortedArray:function(p,e,r){const s=p.length,a=new p.constructor(s);for(let c=0,m=0;m!==s;++c){const y=r[c]*e;for(let w=0;w!==e;++w)a[m++]=p[y+w]}return a},flattenJSON:function(p,e,r,s){let a=1,c=p[0];for(;void 0!==c&&void 0===c[s];)c=p[a++];if(void 0===c)return;let m=c[s];if(void 0!==m)if(Array.isArray(m))do{m=c[s],void 0!==m&&(e.push(c.time),r.push.apply(r,m)),c=p[a++]}while(void 0!==c);else if(void 0!==m.toArray)do{m=c[s],void 0!==m&&(e.push(c.time),m.toArray(r,r.length)),c=p[a++]}while(void 0!==c);else do{m=c[s],void 0!==m&&(e.push(c.time),r.push(m)),c=p[a++]}while(void 0!==c)},subclip:function(p,e,r,s,a=30){const c=p.clone();c.name=e;const m=[];for(let w=0;w<c.tracks.length;++w){const M=c.tracks[w],A=M.getValueSize(),P=[],R=[];for(let O=0;O<M.times.length;++O){const k=M.times[O]*a;if(!(k<r||k>=s)){P.push(M.times[O]);for(let W=0;W<A;++W)R.push(M.values[O*A+W])}}0!==P.length&&(M.times=eo.convertArray(P,M.times.constructor),M.values=eo.convertArray(R,M.values.constructor),m.push(M))}c.tracks=m;let y=1/0;for(let w=0;w<c.tracks.length;++w)y>c.tracks[w].times[0]&&(y=c.tracks[w].times[0]);for(let w=0;w<c.tracks.length;++w)c.tracks[w].shift(-1*y);return c.resetDuration(),c},makeClipAdditive:function(p,e=0,r=p,s=30){s<=0&&(s=30);const a=r.tracks.length,c=e/s;for(let m=0;m<a;++m){const y=r.tracks[m],w=y.ValueTypeName;if("bool"===w||"string"===w)continue;const M=p.tracks.find(function(V){return V.name===y.name&&V.ValueTypeName===w});if(void 0===M)continue;let A=0;const P=y.getValueSize();y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(A=P/3);let R=0;const O=M.getValueSize();M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(R=O/3);const k=y.times.length-1;let W;if(c<=y.times[0])W=eo.arraySlice(y.values,A,P-A);else if(c>=y.times[k]){const V=k*P+A;W=eo.arraySlice(y.values,V,V+P-A)}else{const V=y.createInterpolant(),B=A,ce=P-A;V.evaluate(c),W=eo.arraySlice(V.resultBuffer,B,ce)}"quaternion"===w&&(new Hi).fromArray(W).normalize().conjugate().toArray(W);const Z=M.times.length;for(let V=0;V<Z;++V){const B=V*O+R;if("quaternion"===w)Hi.multiplyQuaternionsFlat(M.values,B,W,0,M.values,B);else{const ce=O-2*R;for(let le=0;le<ce;++le)M.values[B+le]-=W[le]}}}return p.blendMode=2501,p}};class $u{constructor(e,r,s,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new r.constructor(s),this.sampleValues=r,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(e){const r=this.parameterPositions;let s=this._cachedIndex,a=r[s],c=r[s-1];e:{t:{let m;n:{r:if(!(e<a)){for(let y=s+2;;){if(void 0===a){if(e<c)break r;return s=r.length,this._cachedIndex=s,this.afterEnd_(s-1,e,c)}if(s===y)break;if(c=a,a=r[++s],e<a)break t}m=r.length;break n}if(e>=c)break e;{const y=r[1];e<y&&(s=2,c=y);for(let w=s-2;;){if(void 0===c)return this._cachedIndex=0,this.beforeStart_(0,e,a);if(s===w)break;if(a=c,c=r[--s-1],e>=c)break t}m=s,s=0}}for(;s<m;){const y=s+m>>>1;e<r[y]?m=y:s=y+1}if(a=r[s],c=r[s-1],void 0===c)return this._cachedIndex=0,this.beforeStart_(0,e,a);if(void 0===a)return s=r.length,this._cachedIndex=s,this.afterEnd_(s-1,c,e)}this._cachedIndex=s,this.intervalChanged_(s,c,a)}return this.interpolate_(s,c,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a;for(let m=0;m!==a;++m)r[m]=s[c+m];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}$u.prototype.beforeStart_=$u.prototype.copySampleValue_,$u.prototype.afterEnd_=$u.prototype.copySampleValue_;class p0 extends $u{constructor(e,r,s,a){super(e,r,s,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:so,endingEnd:so}}intervalChanged_(e,r,s){const a=this.parameterPositions;let c=e-2,m=e+1,y=a[c],w=a[m];if(void 0===y)switch(this.getSettings_().endingStart){case wa:c=e,y=2*r-s;break;case 2402:c=a.length-2,y=r+a[c]-a[c+1];break;default:c=e,y=s}if(void 0===w)switch(this.getSettings_().endingEnd){case wa:m=e,w=2*s-r;break;case 2402:m=1,w=s+a[1]-a[0];break;default:m=e-1,w=r}const M=.5*(s-r),A=this.valueSize;this._weightPrev=M/(r-y),this._weightNext=M/(w-s),this._offsetPrev=c*A,this._offsetNext=m*A}interpolate_(e,r,s,a){const c=this.resultBuffer,m=this.sampleValues,y=this.valueSize,w=e*y,M=w-y,A=this._offsetPrev,P=this._offsetNext,R=this._weightPrev,O=this._weightNext,k=(s-r)/(a-r),W=k*k,Z=W*k,V=-R*Z+2*R*W-R*k,B=(1+R)*Z+(-1.5-2*R)*W+(-.5+R)*k+1,ce=(-1-O)*Z+(1.5+O)*W+.5*k,le=O*Z-O*W;for(let Ee=0;Ee!==y;++Ee)c[Ee]=V*m[A+Ee]+B*m[M+Ee]+ce*m[w+Ee]+le*m[P+Ee];return c}}class m0 extends $u{constructor(e,r,s,a){super(e,r,s,a)}interpolate_(e,r,s,a){const c=this.resultBuffer,m=this.sampleValues,y=this.valueSize,w=e*y,M=w-y,A=(s-r)/(a-r),P=1-A;for(let R=0;R!==y;++R)c[R]=m[M+R]*P+m[w+R]*A;return c}}class g0 extends $u{constructor(e,r,s,a){super(e,r,s,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class Dc{constructor(e,r,s,a){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===r||0===r.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=eo.convertArray(r,this.TimeBufferType),this.values=eo.convertArray(s,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const r=e.constructor;let s;if(r.toJSON!==this.toJSON)s=r.toJSON(e);else{s={name:e.name,times:eo.convertArray(e.times,Array),values:eo.convertArray(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(s.interpolation=a)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new g0(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new m0(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new p0(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let r;switch(e){case 2300:r=this.InterpolantFactoryMethodDiscrete;break;case 2301:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const r=this.times;for(let s=0,a=r.length;s!==a;++s)r[s]+=e}return this}scale(e){if(1!==e){const r=this.times;for(let s=0,a=r.length;s!==a;++s)r[s]*=e}return this}trim(e,r){const s=this.times,a=s.length;let c=0,m=a-1;for(;c!==a&&s[c]<e;)++c;for(;-1!==m&&s[m]>r;)--m;if(++m,0!==c||m!==a){c>=m&&(m=Math.max(m,1),c=m-1);const y=this.getValueSize();this.times=eo.arraySlice(s,c,m),this.values=eo.arraySlice(this.values,c*y,m*y)}return this}validate(){let e=!0;const r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const s=this.times,a=this.values,c=s.length;0===c&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let m=null;for(let y=0;y!==c;y++){const w=s[y];if("number"==typeof w&&isNaN(w)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,y,w),e=!1;break}if(null!==m&&m>w){console.error("THREE.KeyframeTrack: Out of order keys.",this,y,w,m),e=!1;break}m=w}if(void 0!==a&&eo.isTypedArray(a))for(let y=0,w=a.length;y!==w;++y){const M=a[y];if(isNaN(M)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,y,M),e=!1;break}}return e}optimize(){const e=eo.arraySlice(this.times),r=eo.arraySlice(this.values),s=this.getValueSize(),a=2302===this.getInterpolation(),c=e.length-1;let m=1;for(let y=1;y<c;++y){let w=!1;const M=e[y];if(M!==e[y+1]&&(1!==y||M!==e[0]))if(a)w=!0;else{const P=y*s,R=P-s,O=P+s;for(let k=0;k!==s;++k){const W=r[P+k];if(W!==r[R+k]||W!==r[O+k]){w=!0;break}}}if(w){if(y!==m){e[m]=e[y];const P=y*s,R=m*s;for(let O=0;O!==s;++O)r[R+O]=r[P+O]}++m}}if(c>0){e[m]=e[c];for(let y=c*s,w=m*s,M=0;M!==s;++M)r[w+M]=r[y+M];++m}return m!==e.length?(this.times=eo.arraySlice(e,0,m),this.values=eo.arraySlice(r,0,m*s)):(this.times=e,this.values=r),this}clone(){const e=eo.arraySlice(this.times,0),r=eo.arraySlice(this.values,0),a=new(0,this.constructor)(this.name,e,r);return a.createInterpolant=this.createInterpolant,a}}Dc.prototype.TimeBufferType=Float32Array,Dc.prototype.ValueBufferType=Float32Array,Dc.prototype.DefaultInterpolation=2301;class Mf extends Dc{}Mf.prototype.ValueTypeName="bool",Mf.prototype.ValueBufferType=Array,Mf.prototype.DefaultInterpolation=2300,Mf.prototype.InterpolantFactoryMethodLinear=void 0,Mf.prototype.InterpolantFactoryMethodSmooth=void 0;class P_ extends Dc{}P_.prototype.ValueTypeName="color";class wp extends Dc{}wp.prototype.ValueTypeName="number";class y0 extends $u{constructor(e,r,s,a){super(e,r,s,a)}interpolate_(e,r,s,a){const c=this.resultBuffer,m=this.sampleValues,y=this.valueSize,w=(s-r)/(a-r);let M=e*y;for(let A=M+y;M!==A;M+=4)Hi.slerpFlat(c,0,m,M-y,m,M,w);return c}}class pd extends Dc{InterpolantFactoryMethodLinear(e){return new y0(this.times,this.values,this.getValueSize(),e)}}pd.prototype.ValueTypeName="quaternion",pd.prototype.DefaultInterpolation=2301,pd.prototype.InterpolantFactoryMethodSmooth=void 0;class Lh extends Dc{}Lh.prototype.ValueTypeName="string",Lh.prototype.ValueBufferType=Array,Lh.prototype.DefaultInterpolation=2300,Lh.prototype.InterpolantFactoryMethodLinear=void 0,Lh.prototype.InterpolantFactoryMethodSmooth=void 0;class Ep extends Dc{}Ep.prototype.ValueTypeName="vector";class Mp{constructor(e,r=-1,s,a=2500){this.name=e,this.tracks=s,this.duration=r,this.blendMode=a,this.uuid=er(),this.duration<0&&this.resetDuration()}static parse(e){const r=[],s=e.tracks,a=1/(e.fps||1);for(let m=0,y=s.length;m!==y;++m)r.push(I_(s[m]).scale(a));const c=new this(e.name,e.duration,r,e.blendMode);return c.uuid=e.uuid,c}static toJSON(e){const r=[],s=e.tracks,a={name:e.name,duration:e.duration,tracks:r,uuid:e.uuid,blendMode:e.blendMode};for(let c=0,m=s.length;c!==m;++c)r.push(Dc.toJSON(s[c]));return a}static CreateFromMorphTargetSequence(e,r,s,a){const c=r.length,m=[];for(let y=0;y<c;y++){let w=[],M=[];w.push((y+c-1)%c,y,(y+1)%c),M.push(0,1,0);const A=eo.getKeyframeOrder(w);w=eo.sortedArray(w,1,A),M=eo.sortedArray(M,1,A),!a&&0===w[0]&&(w.push(c),M.push(M[0])),m.push(new wp(".morphTargetInfluences["+r[y].name+"]",w,M).scale(1/s))}return new this(e,-1,m)}static findByName(e,r){let s=e;if(!Array.isArray(e)){const a=e;s=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<s.length;a++)if(s[a].name===r)return s[a];return null}static CreateClipsFromMorphTargetSequences(e,r,s){const a={},c=/^([\w-]*?)([\d]+)$/;for(let y=0,w=e.length;y<w;y++){const M=e[y],A=M.name.match(c);if(A&&A.length>1){const P=A[1];let R=a[P];R||(a[P]=R=[]),R.push(M)}}const m=[];for(const y in a)m.push(this.CreateFromMorphTargetSequence(y,a[y],r,s));return m}static parseAnimation(e,r){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(P,R,O,k,W){if(0!==O.length){const Z=[],V=[];eo.flattenJSON(O,Z,V,k),0!==Z.length&&W.push(new P(R,Z,V))}},a=[],c=e.name||"default",m=e.fps||30,y=e.blendMode;let w=e.length||-1;const M=e.hierarchy||[];for(let P=0;P<M.length;P++){const R=M[P].keys;if(R&&0!==R.length)if(R[0].morphTargets){const O={};let k;for(k=0;k<R.length;k++)if(R[k].morphTargets)for(let W=0;W<R[k].morphTargets.length;W++)O[R[k].morphTargets[W]]=-1;for(const W in O){const Z=[],V=[];for(let B=0;B!==R[k].morphTargets.length;++B){const ce=R[k];Z.push(ce.time),V.push(ce.morphTarget===W?1:0)}a.push(new wp(".morphTargetInfluence["+W+"]",Z,V))}w=O.length*(m||1)}else{const O=".bones["+r[P].name+"]";s(Ep,O+".position",R,"pos",a),s(pd,O+".quaternion",R,"rot",a),s(Ep,O+".scale",R,"scl",a)}}return 0===a.length?null:new this(c,w,a,y)}resetDuration(){let r=0;for(let s=0,a=this.tracks.length;s!==a;++s){const c=this.tracks[s];r=Math.max(r,c.times[c.times.length-1])}return this.duration=r,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let r=0;r<this.tracks.length;r++)e=e&&this.tracks[r].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function I_(p){if(void 0===p.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(p){switch(p.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return wp;case"vector":case"vector2":case"vector3":case"vector4":return Ep;case"color":return P_;case"quaternion":return pd;case"bool":case"boolean":return Mf;case"string":return Lh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+p)}(p.type);if(void 0===p.times){const r=[],s=[];eo.flattenJSON(p.keys,r,s,"value"),p.times=r,p.values=s}return void 0!==e.parse?e.parse(p):new e(p.name,p.times,p.values,p.interpolation)}const Oh={enabled:!1,files:{},add:function(p,e){!1!==this.enabled&&(this.files[p]=e)},get:function(p){if(!1!==this.enabled)return this.files[p]},remove:function(p){delete this.files[p]},clear:function(){this.files={}}};const Fx=new class{constructor(e,r,s){const a=this;let w,c=!1,m=0,y=0;const M=[];this.onStart=void 0,this.onLoad=e,this.onProgress=r,this.onError=s,this.itemStart=function(A){y++,!1===c&&void 0!==a.onStart&&a.onStart(A,m,y),c=!0},this.itemEnd=function(A){m++,void 0!==a.onProgress&&a.onProgress(A,m,y),m===y&&(c=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(A){void 0!==a.onError&&a.onError(A)},this.resolveURL=function(A){return w?w(A):A},this.setURLModifier=function(A){return w=A,this},this.addHandler=function(A,P){return M.push(A,P),this},this.removeHandler=function(A){const P=M.indexOf(A);return-1!==P&&M.splice(P,2),this},this.getHandler=function(A){for(let P=0,R=M.length;P<R;P+=2){const O=M[P],k=M[P+1];if(O.global&&(O.lastIndex=0),O.test(A))return k}return null}}};class Nh{constructor(e){this.manager=void 0!==e?e:Fx,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,r){const s=this;return new Promise(function(a,c){s.load(e,a,r,c)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Rc={};class mu extends Nh{constructor(e){super(e)}load(e,r,s,a){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,m=Oh.get(e);if(void 0!==m)return c.manager.itemStart(e),setTimeout(function(){r&&r(m),c.manager.itemEnd(e)},0),m;if(void 0!==Rc[e])return void Rc[e].push({onLoad:r,onProgress:s,onError:a});const w=e.match(/^data:(.*?)(;base64)?,(.*)$/);let M;if(w){const A=w[1],P=!!w[2];let R=w[3];R=decodeURIComponent(R),P&&(R=atob(R));try{let O;const k=(this.responseType||"").toLowerCase();switch(k){case"arraybuffer":case"blob":const W=new Uint8Array(R.length);for(let V=0;V<R.length;V++)W[V]=R.charCodeAt(V);O="blob"===k?new Blob([W.buffer],{type:A}):W.buffer;break;case"document":O=(new DOMParser).parseFromString(R,A);break;case"json":O=JSON.parse(R);break;default:O=R}setTimeout(function(){r&&r(O),c.manager.itemEnd(e)},0)}catch(O){setTimeout(function(){a&&a(O),c.manager.itemError(e),c.manager.itemEnd(e)},0)}}else{Rc[e]=[],Rc[e].push({onLoad:r,onProgress:s,onError:a}),M=new XMLHttpRequest,M.open("GET",e,!0),M.addEventListener("load",function(A){const P=this.response,R=Rc[e];if(delete Rc[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Oh.add(e,P);for(let O=0,k=R.length;O<k;O++){const W=R[O];W.onLoad&&W.onLoad(P)}c.manager.itemEnd(e)}else{for(let O=0,k=R.length;O<k;O++){const W=R[O];W.onError&&W.onError(A)}c.manager.itemError(e),c.manager.itemEnd(e)}},!1),M.addEventListener("progress",function(A){const P=Rc[e];for(let R=0,O=P.length;R<O;R++){const k=P[R];k.onProgress&&k.onProgress(A)}},!1),M.addEventListener("error",function(A){const P=Rc[e];delete Rc[e];for(let R=0,O=P.length;R<O;R++){const k=P[R];k.onError&&k.onError(A)}c.manager.itemError(e),c.manager.itemEnd(e)},!1),M.addEventListener("abort",function(A){const P=Rc[e];delete Rc[e];for(let R=0,O=P.length;R<O;R++){const k=P[R];k.onError&&k.onError(A)}c.manager.itemError(e),c.manager.itemEnd(e)},!1),void 0!==this.responseType&&(M.responseType=this.responseType),void 0!==this.withCredentials&&(M.withCredentials=this.withCredentials),M.overrideMimeType&&M.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const A in this.requestHeader)M.setRequestHeader(A,this.requestHeader[A]);M.send(null)}return c.manager.itemStart(e),M}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Sf extends Nh{constructor(e){super(e)}load(e,r,s,a){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,m=Oh.get(e);if(void 0!==m)return c.manager.itemStart(e),setTimeout(function(){r&&r(m),c.manager.itemEnd(e)},0),m;const y=document.createElementNS("http://www.w3.org/1999/xhtml","img");function w(){y.removeEventListener("load",w,!1),y.removeEventListener("error",M,!1),Oh.add(e,this),r&&r(this),c.manager.itemEnd(e)}function M(A){y.removeEventListener("load",w,!1),y.removeEventListener("error",M,!1),a&&a(A),c.manager.itemError(e),c.manager.itemEnd(e)}return y.addEventListener("load",w,!1),y.addEventListener("error",M,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(y.crossOrigin=this.crossOrigin),c.manager.itemStart(e),y.src=e,y}}class _g extends Nh{constructor(e){super(e)}load(e,r,s,a){const c=new Nc,m=new Sf(this.manager);m.setCrossOrigin(this.crossOrigin),m.setPath(this.path);let y=0;function w(M){m.load(e[M],function(A){c.images[M]=A,y++,6===y&&(c.needsUpdate=!0,r&&r(c))},void 0,a)}for(let M=0;M<e.length;++M)w(M);return c}}class N_ extends Nh{constructor(e){super(e)}load(e,r,s,a){const c=new Li,m=new Sf(this.manager);return m.setCrossOrigin(this.crossOrigin),m.setPath(this.path),m.load(e,function(y){c.image=y;const w=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);c.format=w?cs:Is,c.needsUpdate=!0,void 0!==r&&r(c)},s,a),c}}class Ux extends Sc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);e.equals(r)||this.curves.push(new ud(r,e))}getPoint(e){const r=e*this.getLength(),s=this.getCurveLengths();let a=0;for(;a<s.length;){if(s[a]>=r){const c=s[a]-r,m=this.curves[a],y=m.getLength();return m.getPointAt(0===y?0:1-c/y)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let r=0;for(let s=0,a=this.curves.length;s<a;s++)r+=this.curves[s].getLength(),e.push(r);return this.cacheLengths=e,e}getSpacedPoints(e=40){const r=[];for(let s=0;s<=e;s++)r.push(this.getPoint(s/e));return this.autoClose&&r.push(r[0]),r}getPoints(e=12){const r=[];let s;for(let a=0,c=this.curves;a<c.length;a++){const m=c[a],w=m.getPoints(m&&m.isEllipseCurve?2*e:m&&(m.isLineCurve||m.isLineCurve3)?1:m&&m.isSplineCurve?e*m.points.length:e);for(let M=0;M<w.length;M++){const A=w[M];s&&s.equals(A)||(r.push(A),s=A)}}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r}copy(e){super.copy(e),this.curves=[];for(let r=0,s=e.curves.length;r<s;r++)this.curves.push(e.curves[r].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let r=0,s=this.curves.length;r<s;r++)e.curves.push(this.curves[r].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let r=0,s=e.curves.length;r<s;r++){const a=e.curves[r];this.curves.push((new lg[a.type]).fromJSON(a))}return this}}class bg extends Ux{constructor(e){super(),this.type="Path",this.currentPoint=new at,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let r=1,s=e.length;r<s;r++)this.lineTo(e[r].x,e[r].y);return this}moveTo(e,r){return this.currentPoint.set(e,r),this}lineTo(e,r){const s=new ud(this.currentPoint.clone(),new at(e,r));return this.curves.push(s),this.currentPoint.set(e,r),this}quadraticCurveTo(e,r,s,a){const c=new yp(this.currentPoint.clone(),new at(e,r),new at(s,a));return this.curves.push(c),this.currentPoint.set(s,a),this}bezierCurveTo(e,r,s,a,c,m){const y=new cd(this.currentPoint.clone(),new at(e,r),new at(s,a),new at(c,m));return this.curves.push(y),this.currentPoint.set(c,m),this}splineThru(e){const r=[this.currentPoint.clone()].concat(e),s=new ag(r);return this.curves.push(s),this.currentPoint.copy(e[e.length-1]),this}arc(e,r,s,a,c,m){return this.absarc(e+this.currentPoint.x,r+this.currentPoint.y,s,a,c,m),this}absarc(e,r,s,a,c,m){return this.absellipse(e,r,s,s,a,c,m),this}ellipse(e,r,s,a,c,m,y,w){return this.absellipse(e+this.currentPoint.x,r+this.currentPoint.y,s,a,c,m,y,w),this}absellipse(e,r,s,a,c,m,y,w){const M=new pp(e,r,s,a,c,m,y,w);if(this.curves.length>0){const P=M.getPoint(0);P.equals(this.currentPoint)||this.lineTo(P.x,P.y)}this.curves.push(M);const A=M.getPoint(1);return this.currentPoint.copy(A),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Fh extends bg{constructor(e){super(e),this.uuid=er(),this.type="Shape",this.holes=[]}getPointsHoles(e){const r=[];for(let s=0,a=this.holes.length;s<a;s++)r[s]=this.holes[s].getPoints(e);return r}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let r=0,s=e.holes.length;r<s;r++)this.holes.push(e.holes[r].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let r=0,s=this.holes.length;r<s;r++)e.holes.push(this.holes[r].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let r=0,s=e.holes.length;r<s;r++){const a=e.holes[r];this.holes.push((new bg).fromJSON(a))}return this}}class Pc extends pi{constructor(e,r=1){super(),this.type="Light",this.color=new vt(e),this.intensity=r}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const r=super.toJSON(e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,void 0!==this.groundColor&&(r.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(r.object.distance=this.distance),void 0!==this.angle&&(r.object.angle=this.angle),void 0!==this.decay&&(r.object.decay=this.decay),void 0!==this.penumbra&&(r.object.penumbra=this.penumbra),void 0!==this.shadow&&(r.object.shadow=this.shadow.toJSON()),r}}Pc.prototype.isLight=!0;(class extends Pc{constructor(e,r,s){super(e,s),this.type="HemisphereLight",this.position.copy(pi.DefaultUp),this.updateMatrix(),this.groundColor=new vt(r)}copy(e){return Pc.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const v0=new $n,kh=new pe,_0=new pe;class Sp{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new at(512,512),this.map=null,this.mapPass=null,this.matrix=new $n,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Pd,this._frameExtents=new at(1,1),this._viewportCount=1,this._viewports=[new ci(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const r=this.camera,s=this.matrix;kh.setFromMatrixPosition(e.matrixWorld),r.position.copy(kh),_0.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(_0),r.updateMatrixWorld(),v0.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(v0),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(r.projectionMatrix),s.multiply(r.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class b0 extends Sp{constructor(){super(new co(50,1,.5,500)),this.focus=1}updateMatrices(e){const r=this.camera,s=2*Wa*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,c=e.distance||r.far;(s!==r.fov||a!==r.aspect||c!==r.far)&&(r.fov=s,r.aspect=a,r.far=c,r.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}b0.prototype.isSpotLightShadow=!0;(class extends Pc{constructor(e,r,s=0,a=Math.PI/3,c=0,m=1){super(e,r),this.type="SpotLight",this.position.copy(pi.DefaultUp),this.updateMatrix(),this.target=new pi,this.distance=s,this.angle=a,this.penumbra=c,this.decay=m,this.shadow=new b0}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const md=new $n,gd=new pe,Tp=new pe;class x0 extends Sp{constructor(){super(new co(90,1,.5,500)),this._frameExtents=new at(4,2),this._viewportCount=6,this._viewports=[new ci(2,1,1,1),new ci(0,1,1,1),new ci(3,1,1,1),new ci(1,1,1,1),new ci(3,0,1,1),new ci(1,0,1,1)],this._cubeDirections=[new pe(1,0,0),new pe(-1,0,0),new pe(0,0,1),new pe(0,0,-1),new pe(0,1,0),new pe(0,-1,0)],this._cubeUps=[new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,0,1),new pe(0,0,-1)]}updateMatrices(e,r=0){const s=this.camera,a=this.matrix,c=e.distance||s.far;c!==s.far&&(s.far=c,s.updateProjectionMatrix()),gd.setFromMatrixPosition(e.matrixWorld),s.position.copy(gd),Tp.copy(s.position),Tp.add(this._cubeDirections[r]),s.up.copy(this._cubeUps[r]),s.lookAt(Tp),s.updateMatrixWorld(),a.makeTranslation(-gd.x,-gd.y,-gd.z),md.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(md)}}x0.prototype.isPointLightShadow=!0;(class extends Pc{constructor(e,r,s=0,a=1){super(e,r),this.type="PointLight",this.distance=s,this.decay=a,this.shadow=new x0}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class E0 extends Sp{constructor(){super(new Co(-5,5,5,-5,.5,500))}}E0.prototype.isDirectionalLightShadow=!0;class wg extends Pc{constructor(e,r){super(e,r),this.type="DirectionalLight",this.position.copy(pi.DefaultUp),this.updateMatrix(),this.target=new pi,this.shadow=new E0}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}wg.prototype.isDirectionalLight=!0;class Eg extends Pc{constructor(e,r){super(e,r),this.type="AmbientLight"}}Eg.prototype.isAmbientLight=!0;(class extends Pc{constructor(e,r,s=10,a=10){super(e,r),this.type="RectAreaLight",this.width=s,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const r=super.toJSON(e);return r.object.width=this.width,r.object.height=this.height,r}}).prototype.isRectAreaLight=!0;class M0{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new pe)}set(e){for(let r=0;r<9;r++)this.coefficients[r].copy(e[r]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,r){const s=e.x,a=e.y,c=e.z,m=this.coefficients;return r.copy(m[0]).multiplyScalar(.282095),r.addScaledVector(m[1],.488603*a),r.addScaledVector(m[2],.488603*c),r.addScaledVector(m[3],.488603*s),r.addScaledVector(m[4],s*a*1.092548),r.addScaledVector(m[5],a*c*1.092548),r.addScaledVector(m[6],.315392*(3*c*c-1)),r.addScaledVector(m[7],s*c*1.092548),r.addScaledVector(m[8],.546274*(s*s-a*a)),r}getIrradianceAt(e,r){const s=e.x,a=e.y,c=e.z,m=this.coefficients;return r.copy(m[0]).multiplyScalar(.886227),r.addScaledVector(m[1],1.023328*a),r.addScaledVector(m[2],1.023328*c),r.addScaledVector(m[3],1.023328*s),r.addScaledVector(m[4],.858086*s*a),r.addScaledVector(m[5],.858086*a*c),r.addScaledVector(m[6],.743125*c*c-.247708),r.addScaledVector(m[7],.858086*s*c),r.addScaledVector(m[8],.429043*(s*s-a*a)),r}add(e){for(let r=0;r<9;r++)this.coefficients[r].add(e.coefficients[r]);return this}addScaledSH(e,r){for(let s=0;s<9;s++)this.coefficients[s].addScaledVector(e.coefficients[s],r);return this}scale(e){for(let r=0;r<9;r++)this.coefficients[r].multiplyScalar(e);return this}lerp(e,r){for(let s=0;s<9;s++)this.coefficients[s].lerp(e.coefficients[s],r);return this}equals(e){for(let r=0;r<9;r++)if(!this.coefficients[r].equals(e.coefficients[r]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,r=0){const s=this.coefficients;for(let a=0;a<9;a++)s[a].fromArray(e,r+3*a);return this}toArray(e=[],r=0){const s=this.coefficients;for(let a=0;a<9;a++)s[a].toArray(e,r+3*a);return e}static getBasisAt(e,r){const s=e.x,a=e.y,c=e.z;r[0]=.282095,r[1]=.488603*a,r[2]=.488603*c,r[3]=.488603*s,r[4]=1.092548*s*a,r[5]=1.092548*a*c,r[6]=.315392*(3*c*c-1),r[7]=1.092548*s*c,r[8]=.546274*(s*s-a*a)}}M0.prototype.isSphericalHarmonics3=!0;class yd extends Pc{constructor(e=new M0,r=1){super(void 0,r),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const r=super.toJSON(e);return r.object.sh=this.sh.toArray(),r}}yd.prototype.isLightProbe=!0;(class extends rn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class extends Nh{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,r,s,a){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,m=Oh.get(e);if(void 0!==m)return c.manager.itemStart(e),setTimeout(function(){r&&r(m),c.manager.itemEnd(e)},0),m;const y={};y.credentials="anonymous"===this.crossOrigin?"same-origin":"include",y.headers=this.requestHeader,fetch(e,y).then(function(w){return w.blob()}).then(function(w){return createImageBitmap(w,Object.assign(c.options,{colorSpaceConversion:"none"}))}).then(function(w){Oh.add(e,w),r&&r(w),c.manager.itemEnd(e)}).catch(function(w){a&&a(w),c.manager.itemError(e),c.manager.itemEnd(e)}),c.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;let Rg;class D0 extends Nh{constructor(e){super(e)}load(e,r,s,a){const c=this,m=new mu(this.manager);m.setResponseType("arraybuffer"),m.setPath(this.path),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(e,function(y){try{const w=y.slice(0);(void 0===Rg&&(Rg=new(window.AudioContext||window.webkitAudioContext)),Rg).decodeAudioData(w,function(A){r(A)})}catch(w){a?a(w):console.error(w),c.manager.itemError(e)}},s,a)}}(class extends yd{constructor(e,r,s=1){super(void 0,s);const a=(new vt).set(e),c=(new vt).set(r),m=new pe(a.r,a.g,a.b),y=new pe(c.r,c.g,c.b),w=Math.sqrt(Math.PI),M=w*Math.sqrt(.75);this.sh.coefficients[0].copy(m).add(y).multiplyScalar(w),this.sh.coefficients[1].copy(m).sub(y).multiplyScalar(M)}}).prototype.isHemisphereLightProbe=!0,class extends yd{constructor(e,r=1){super(void 0,r);const s=(new vt).set(e);this.sh.coefficients[0].set(s.r,s.g,s.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class Ap{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Dp(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=Dp();e=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=e}return e}}function Dp(){return("undefined"==typeof performance?Date:performance).now()}class B0{constructor(e,r,s){let a,c,m;switch(this.binding=e,this.valueSize=s,r){case"quaternion":a=this._slerp,c=this._slerpAdditive,m=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*s),this._workIndex=5;break;case"string":case"bool":a=this._select,c=this._select,m=this._setAdditiveIdentityOther,this.buffer=new Array(5*s);break;default:a=this._lerp,c=this._lerpAdditive,m=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*s)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=c,this._setIdentity=m,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,r){const s=this.buffer,a=this.valueSize,c=e*a+a;let m=this.cumulativeWeight;if(0===m){for(let y=0;y!==a;++y)s[c+y]=s[y];m=r}else m+=r,this._mixBufferRegion(s,c,0,r/m,a);this.cumulativeWeight=m}accumulateAdditive(e){const r=this.buffer,s=this.valueSize,a=s*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,a,0,e,s),this.cumulativeWeightAdditive+=e}apply(e){const r=this.valueSize,s=this.buffer,a=e*r+r,c=this.cumulativeWeight,m=this.cumulativeWeightAdditive,y=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,c<1&&this._mixBufferRegion(s,a,r*this._origIndex,1-c,r),m>0&&this._mixBufferRegionAdditive(s,a,this._addIndex*r,1,r);for(let w=r,M=r+r;w!==M;++w)if(s[w]!==s[w+r]){y.setValue(s,a);break}}saveOriginalState(){const r=this.buffer,s=this.valueSize,a=s*this._origIndex;this.binding.getValue(r,a);for(let c=s,m=a;c!==m;++c)r[c]=r[a+c%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,r=e+this.valueSize;for(let s=e;s<r;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[r+s]=this.buffer[e+s]}_select(e,r,s,a,c){if(a>=.5)for(let m=0;m!==c;++m)e[r+m]=e[s+m]}_slerp(e,r,s,a){Hi.slerpFlat(e,r,e,r,e,s,a)}_slerpAdditive(e,r,s,a,c){const m=this._workIndex*c;Hi.multiplyQuaternionsFlat(e,m,e,r,e,s),Hi.slerpFlat(e,r,e,r,e,m,a)}_lerp(e,r,s,a,c){const m=1-a;for(let y=0;y!==c;++y){const w=r+y;e[w]=e[w]*m+e[s+y]*a}}_lerpAdditive(e,r,s,a,c){for(let m=0;m!==c;++m){const y=r+m;e[y]=e[y]+e[s+m]*a}}}const Rp="\\[\\]\\.:\\/",U0=new RegExp("["+Rp+"]","g"),Pp="[^"+Rp+"]",V0="[^"+Rp.replace("\\.","")+"]",z0=/((?:WC+[\/:])*)/.source.replace("WC",Pp),H0=/(WCOD+)?/.source.replace("WCOD",V0),Hx=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Pp),H_=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Pp),G_=new RegExp("^"+z0+H0+Hx+H_+"$"),G0=["material","materials","bones"];class j_{constructor(e,r,s){const a=s||yi.parseTrackName(r);this._targetGroup=e,this._bindings=e.subscribe_(r,a)}getValue(e,r){this.bind();const a=this._bindings[this._targetGroup.nCachedObjects_];void 0!==a&&a.getValue(e,r)}setValue(e,r){const s=this._bindings;for(let a=this._targetGroup.nCachedObjects_,c=s.length;a!==c;++a)s[a].setValue(e,r)}bind(){const e=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=e.length;r!==s;++r)e[r].bind()}unbind(){const e=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=e.length;r!==s;++r)e[r].unbind()}}let yi=(()=>{class p{constructor(r,s,a){this.path=s,this.parsedPath=a||p.parseTrackName(s),this.node=p.findNode(r,this.parsedPath.nodeName)||r,this.rootNode=r,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(r,s,a){return r&&r.isAnimationObjectGroup?new p.Composite(r,s,a):new p(r,s,a)}static sanitizeNodeName(r){return r.replace(/\s/g,"_").replace(U0,"")}static parseTrackName(r){const s=G_.exec(r);if(!s)throw new Error("PropertyBinding: Cannot parse trackName: "+r);const a={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},c=a.nodeName&&a.nodeName.lastIndexOf(".");if(void 0!==c&&-1!==c){const m=a.nodeName.substring(c+1);-1!==G0.indexOf(m)&&(a.nodeName=a.nodeName.substring(0,c),a.objectName=m)}if(null===a.propertyName||0===a.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+r);return a}static findNode(r,s){if(!s||""===s||"."===s||-1===s||s===r.name||s===r.uuid)return r;if(r.skeleton){const a=r.skeleton.getBoneByName(s);if(void 0!==a)return a}if(r.children){const a=function(m){for(let y=0;y<m.length;y++){const w=m[y];if(w.name===s||w.uuid===s)return w;const M=a(w.children);if(M)return M}return null},c=a(r.children);if(c)return c}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(r,s){r[s]=this.targetObject[this.propertyName]}_getValue_array(r,s){const a=this.resolvedProperty;for(let c=0,m=a.length;c!==m;++c)r[s++]=a[c]}_getValue_arrayElement(r,s){r[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(r,s){this.resolvedProperty.toArray(r,s)}_setValue_direct(r,s){this.targetObject[this.propertyName]=r[s]}_setValue_direct_setNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(r,s){const a=this.resolvedProperty;for(let c=0,m=a.length;c!==m;++c)a[c]=r[s++]}_setValue_array_setNeedsUpdate(r,s){const a=this.resolvedProperty;for(let c=0,m=a.length;c!==m;++c)a[c]=r[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(r,s){const a=this.resolvedProperty;for(let c=0,m=a.length;c!==m;++c)a[c]=r[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(r,s){this.resolvedProperty[this.propertyIndex]=r[s]}_setValue_arrayElement_setNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(r,s){this.resolvedProperty.fromArray(r,s)}_setValue_fromArray_setNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(r,s){this.bind(),this.getValue(r,s)}_setValue_unbound(r,s){this.bind(),this.setValue(r,s)}bind(){let r=this.node;const s=this.parsedPath,a=s.objectName,c=s.propertyName;let m=s.propertyIndex;if(r||(r=p.findNode(this.rootNode,s.nodeName)||this.rootNode,this.node=r),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!r)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(a){let A=s.objectIndex;switch(a){case"materials":if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);r=r.material.materials;break;case"bones":if(!r.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);r=r.skeleton.bones;for(let P=0;P<r.length;P++)if(r[P].name===A){A=P;break}break;default:if(void 0===r[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);r=r[a]}if(void 0!==A){if(void 0===r[A])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);r=r[A]}}const y=r[c];if(void 0===y)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+c+" but it wasn't found.",r);let w=this.Versioning.None;this.targetObject=r,void 0!==r.needsUpdate?w=this.Versioning.NeedsUpdate:void 0!==r.matrixWorldNeedsUpdate&&(w=this.Versioning.MatrixWorldNeedsUpdate);let M=this.BindingType.Direct;if(void 0!==m){if("morphTargetInfluences"===c){if(!r.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!r.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!r.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==r.morphTargetDictionary[m]&&(m=r.morphTargetDictionary[m])}M=this.BindingType.ArrayElement,this.resolvedProperty=y,this.propertyIndex=m}else void 0!==y.fromArray&&void 0!==y.toArray?(M=this.BindingType.HasFromToArray,this.resolvedProperty=y):Array.isArray(y)?(M=this.BindingType.EntireArray,this.resolvedProperty=y):this.propertyName=c;this.getValue=this.GetterByBindingType[M],this.setValue=this.SetterByBindingTypeAndVersioning[M][w]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return p.Composite=j_,p})();yi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},yi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},yi.prototype.GetterByBindingType=[yi.prototype._getValue_direct,yi.prototype._getValue_array,yi.prototype._getValue_arrayElement,yi.prototype._getValue_toArray],yi.prototype.SetterByBindingTypeAndVersioning=[[yi.prototype._setValue_direct,yi.prototype._setValue_direct_setNeedsUpdate,yi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[yi.prototype._setValue_array,yi.prototype._setValue_array_setNeedsUpdate,yi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[yi.prototype._setValue_arrayElement,yi.prototype._setValue_arrayElement_setNeedsUpdate,yi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[yi.prototype._setValue_fromArray,yi.prototype._setValue_fromArray_setNeedsUpdate,yi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class W_{constructor(e,r,s=null,a=r.blendMode){this._mixer=e,this._clip=r,this._localRoot=s,this.blendMode=a;const c=r.tracks,m=c.length,y=new Array(m),w={endingStart:so,endingEnd:so};for(let M=0;M!==m;++M){const A=c[M].createInterpolant(null);y[M]=A,A.settings=w}this._interpolantSettings=w,this._interpolants=y,this._propertyBindings=new Array(m),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,r){return this.loop=e,this.repetitions=r,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,r,s){if(e.fadeOut(r),this.fadeIn(r),s){const a=this._clip.duration,c=e._clip.duration,y=a/c;e.warp(1,c/a,r),this.warp(y,1,r)}return this}crossFadeTo(e,r,s){return e.crossFadeFrom(this,r,s)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,r,s){const a=this._mixer,c=a.time,m=this.timeScale;let y=this._timeScaleInterpolant;null===y&&(y=a._lendControlInterpolant(),this._timeScaleInterpolant=y);const w=y.parameterPositions,M=y.sampleValues;return w[0]=c,w[1]=c+s,M[0]=e/m,M[1]=r/m,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,r,s,a){if(!this.enabled)return void this._updateWeight(e);const c=this._startTime;if(null!==c){const w=(e-c)*s;if(w<0||0===s)return;this._startTime=null,r=s*w}r*=this._updateTimeScale(e);const m=this._updateTime(r),y=this._updateWeight(e);if(y>0){const w=this._interpolants,M=this._propertyBindings;switch(this.blendMode){case 2501:for(let A=0,P=w.length;A!==P;++A)w[A].evaluate(m),M[A].accumulateAdditive(y);break;case 2500:default:for(let A=0,P=w.length;A!==P;++A)w[A].evaluate(m),M[A].accumulate(a,y)}}}_updateWeight(e){let r=0;if(this.enabled){r=this.weight;const s=this._weightInterpolant;if(null!==s){const a=s.evaluate(e)[0];r*=a,e>s.parameterPositions[1]&&(this.stopFading(),0===a&&(this.enabled=!1))}}return this._effectiveWeight=r,r}_updateTimeScale(e){let r=0;if(!this.paused){r=this.timeScale;const s=this._timeScaleInterpolant;null!==s&&(r*=s.evaluate(e)[0],e>s.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}_updateTime(e){const r=this._clip.duration,s=this.loop;let a=this.time+e,c=this._loopCount;const m=2202===s;if(0===e)return-1===c?a:m&&1==(1&c)?r-a:a;if(2200===s){-1===c&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=r)a=r;else{if(!(a<0)){this.time=a;break e}a=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===c&&(e>=0?(c=0,this._setEndings(!0,0===this.repetitions,m)):this._setEndings(0===this.repetitions,!0,m)),a>=r||a<0){const y=Math.floor(a/r);a-=r*y,c+=Math.abs(y);const w=this.repetitions-c;if(w<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?r:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===w){const M=e<0;this._setEndings(M,!M,m)}else this._setEndings(!1,!1,m);this._loopCount=c,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:y})}}else this.time=a;if(m&&1==(1&c))return r-a}return a}_setEndings(e,r,s){const a=this._interpolantSettings;s?(a.endingStart=wa,a.endingEnd=wa):(a.endingStart=e?this.zeroSlopeAtStart?wa:so:2402,a.endingEnd=r?this.zeroSlopeAtEnd?wa:so:2402)}_scheduleFading(e,r,s){const a=this._mixer,c=a.time;let m=this._weightInterpolant;null===m&&(m=a._lendControlInterpolant(),this._weightInterpolant=m);const y=m.parameterPositions,w=m.sampleValues;return y[0]=c,w[0]=r,y[1]=c+e,w[1]=s,this}}(class extends wo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,r){const s=e._localRoot||this._root,a=e._clip.tracks,c=a.length,m=e._propertyBindings,y=e._interpolants,w=s.uuid,M=this._bindingsByRootAndName;let A=M[w];void 0===A&&(A={},M[w]=A);for(let P=0;P!==c;++P){const R=a[P],O=R.name;let k=A[O];if(void 0!==k)m[P]=k;else{if(k=m[P],void 0!==k){null===k._cacheIndex&&(++k.referenceCount,this._addInactiveBinding(k,w,O));continue}k=new B0(yi.create(s,O,r&&r._propertyBindings[P].binding.parsedPath),R.ValueTypeName,R.getValueSize()),++k.referenceCount,this._addInactiveBinding(k,w,O),m[P]=k}y[P].resultBuffer=k.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const s=(e._localRoot||this._root).uuid,a=e._clip.uuid,c=this._actionsByClip[a];this._bindAction(e,c&&c.knownActions[0]),this._addInactiveAction(e,a,s)}const r=e._propertyBindings;for(let s=0,a=r.length;s!==a;++s){const c=r[s];0==c.useCount++&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const r=e._propertyBindings;for(let s=0,a=r.length;s!==a;++s){const c=r[s];0==--c.useCount&&(c.restoreOriginalState(),this._takeBackBinding(c))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const r=e._cacheIndex;return null!==r&&r<this._nActiveActions}_addInactiveAction(e,r,s){const a=this._actions,c=this._actionsByClip;let m=c[r];if(void 0===m)m={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,c[r]=m;else{const y=m.knownActions;e._byClipCacheIndex=y.length,y.push(e)}e._cacheIndex=a.length,a.push(e),m.actionByRoot[s]=e}_removeInactiveAction(e){const r=this._actions,s=r[r.length-1],a=e._cacheIndex;s._cacheIndex=a,r[a]=s,r.pop(),e._cacheIndex=null;const c=e._clip.uuid,m=this._actionsByClip,y=m[c],w=y.knownActions,M=w[w.length-1],A=e._byClipCacheIndex;M._byClipCacheIndex=A,w[A]=M,w.pop(),e._byClipCacheIndex=null,delete y.actionByRoot[(e._localRoot||this._root).uuid],0===w.length&&delete m[c],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const r=e._propertyBindings;for(let s=0,a=r.length;s!==a;++s){const c=r[s];0==--c.referenceCount&&this._removeInactiveBinding(c)}}_lendAction(e){const r=this._actions,s=e._cacheIndex,a=this._nActiveActions++,c=r[a];e._cacheIndex=a,r[a]=e,c._cacheIndex=s,r[s]=c}_takeBackAction(e){const r=this._actions,s=e._cacheIndex,a=--this._nActiveActions,c=r[a];e._cacheIndex=a,r[a]=e,c._cacheIndex=s,r[s]=c}_addInactiveBinding(e,r,s){const a=this._bindingsByRootAndName,c=this._bindings;let m=a[r];void 0===m&&(m={},a[r]=m),m[s]=e,e._cacheIndex=c.length,c.push(e)}_removeInactiveBinding(e){const r=this._bindings,s=e.binding,a=s.rootNode.uuid,c=s.path,m=this._bindingsByRootAndName,y=m[a],w=r[r.length-1],M=e._cacheIndex;w._cacheIndex=M,r[M]=w,r.pop(),delete y[c],0===Object.keys(y).length&&delete m[a]}_lendBinding(e){const r=this._bindings,s=e._cacheIndex,a=this._nActiveBindings++,c=r[a];e._cacheIndex=a,r[a]=e,c._cacheIndex=s,r[s]=c}_takeBackBinding(e){const r=this._bindings,s=e._cacheIndex,a=--this._nActiveBindings,c=r[a];e._cacheIndex=a,r[a]=e,c._cacheIndex=s,r[s]=c}_lendControlInterpolant(){const e=this._controlInterpolants,r=this._nActiveControlInterpolants++;let s=e[r];return void 0===s&&(s=new m0(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),s.__cacheIndex=r,e[r]=s),s}_takeBackControlInterpolant(e){const r=this._controlInterpolants,s=e.__cacheIndex,a=--this._nActiveControlInterpolants,c=r[a];e.__cacheIndex=a,r[a]=e,c.__cacheIndex=s,r[s]=c}clipAction(e,r,s){const a=r||this._root,c=a.uuid;let m="string"==typeof e?Mp.findByName(a,e):e;const y=null!==m?m.uuid:e,w=this._actionsByClip[y];let M=null;if(void 0===s&&(s=null!==m?m.blendMode:2500),void 0!==w){const P=w.actionByRoot[c];if(void 0!==P&&P.blendMode===s)return P;M=w.knownActions[0],null===m&&(m=M._clip)}if(null===m)return null;const A=new W_(this,m,r,s);return this._bindAction(A,M),this._addInactiveAction(A,y,c),A}existingAction(e,r){const s=r||this._root,a=s.uuid,c="string"==typeof e?Mp.findByName(s,e):e,y=this._actionsByClip[c?c.uuid:e];return void 0!==y&&y.actionByRoot[a]||null}stopAllAction(){const e=this._actions;for(let s=this._nActiveActions-1;s>=0;--s)e[s].stop();return this}update(e){const r=this._actions,s=this._nActiveActions,a=this.time+=e*=this.timeScale,c=Math.sign(e),m=this._accuIndex^=1;for(let M=0;M!==s;++M)r[M]._update(a,e,c,m);const y=this._bindings,w=this._nActiveBindings;for(let M=0;M!==w;++M)y[M].apply(m);return this}setTime(e){this.time=0;for(let r=0;r<this._actions.length;r++)this._actions[r].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const r=this._actions,s=e.uuid,a=this._actionsByClip,c=a[s];if(void 0!==c){const m=c.knownActions;for(let y=0,w=m.length;y!==w;++y){const M=m[y];this._deactivateAction(M);const A=M._cacheIndex,P=r[r.length-1];M._cacheIndex=null,M._byClipCacheIndex=null,P._cacheIndex=A,r[A]=P,r.pop(),this._removeInactiveBindingsForAction(M)}delete a[s]}}uncacheRoot(e){const r=e.uuid,s=this._actionsByClip;for(const m in s){const w=s[m].actionByRoot[r];void 0!==w&&(this._deactivateAction(w),this._removeInactiveAction(w))}const c=this._bindingsByRootAndName[r];if(void 0!==c)for(const m in c){const y=c[m];y.restoreOriginalState(),this._removeInactiveBinding(y)}}uncacheAction(e,r){const s=this.existingAction(e,r);null!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Ip{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Ip(void 0===this.value.clone?this.value:this.value.clone())}}(class extends td{constructor(e,r,s=1){super(e,r),this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const r=super.clone(e);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(e){const r=super.toJSON(e);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}).prototype.isInstancedInterleavedBuffer=!0;class $0{constructor(e,r,s=0,a=1/0){this.ray=new ao(e,r),this.near=s,this.far=a,this.camera=null,this.layers=new Ya,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,r){this.ray.set(e,r)}setFromCamera(e,r){r&&r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r&&r.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}intersectObject(e,r=!1,s=[]){return Ig(e,this,s,r),s.sort(Uh),s}intersectObjects(e,r=!1,s=[]){for(let a=0,c=e.length;a<c;a++)Ig(e[a],this,s,r);return s.sort(Uh),s}}function Uh(p,e){return p.distance-e.distance}function Ig(p,e,r,s){if(p.layers.test(e.layers)&&p.raycast(e,r),!0===s){const a=p.children;for(let c=0,m=a.length;c<m;c++)Ig(a[c],e,r,!0)}}class Y_{constructor(e=1,r=0,s=0){return this.radius=e,this.phi=r,this.theta=s,this}set(e,r,s){return this.radius=e,this.phi=r,this.theta=s,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,s){return this.radius=Math.sqrt(e*e+r*r+s*s),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,s),this.phi=Math.acos(ks(r/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const q0=new at;class Cf{constructor(e=new at(1/0,1/0),r=new at(-1/0,-1/0)){this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromPoints(e){this.makeEmpty();for(let r=0,s=e.length;r<s;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const s=q0.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return q0.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Cf.prototype.isBox2=!0,class extends pi{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}.prototype.isImmediateRenderObject=!0;const Fa=new pe,Dl=new $n,$l=new $n;function Lg(p){const e=[];p&&p.isBone&&e.push(p);for(let r=0;r<p.children.length;r++)e.push.apply(e,Lg(p.children[r]));return e}const Bg=new Float32Array(1);new Int32Array(Bg.buffer),Sc.create=function(p,e){return console.log("THREE.Curve.create() has been deprecated"),p.prototype=Object.create(Sc.prototype),p.prototype.constructor=p,p.prototype.getPoint=e,p},bg.prototype.fromPoints=function(p){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(p)},class extends Wl{constructor(e=10,r=10,s=4473924,a=8947848){s=new vt(s),a=new vt(a);const c=r/2,m=e/r,y=e/2,w=[],M=[];for(let R=0,O=0,k=-y;R<=r;R++,k+=m){w.push(-y,0,k,y,0,k),w.push(k,0,-y,k,0,y);const W=R===c?s:a;W.toArray(M,O),O+=3,W.toArray(M,O),O+=3,W.toArray(M,O),O+=3,W.toArray(M,O),O+=3}const A=new rn;A.setAttribute("position",new An(w,3)),A.setAttribute("color",new An(M,3)),super(A,new oa({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends Wl{constructor(e){const r=Lg(e),s=new rn,a=[],c=[],m=new vt(0,0,1),y=new vt(0,1,0);for(let M=0;M<r.length;M++){const A=r[M];A.parent&&A.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),c.push(m.r,m.g,m.b),c.push(y.r,y.g,y.b))}s.setAttribute("position",new An(a,3)),s.setAttribute("color",new An(c,3)),super(s,new oa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=r,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const r=this.bones,s=this.geometry,a=s.getAttribute("position");$l.copy(this.root.matrixWorld).invert();for(let c=0,m=0;c<r.length;c++){const y=r[c];y.parent&&y.parent.isBone&&(Dl.multiplyMatrices($l,y.matrixWorld),Fa.setFromMatrixPosition(Dl),a.setXYZ(m,Fa.x,Fa.y,Fa.z),Dl.multiplyMatrices($l,y.parent.matrixWorld),Fa.setFromMatrixPosition(Dl),a.setXYZ(m+1,Fa.x,Fa.y,Fa.z),m+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Nh.prototype.extractUrlBase=function(p){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let r="";for(let s=0,a=e.length;s<a;s++)r+=String.fromCharCode(e[s]);try{return decodeURIComponent(escape(r))}catch(s){return r}}static extractUrlBase(e){const r=e.lastIndexOf("/");return-1===r?"./":e.substr(0,r+1)}}.extractUrlBase(p)},Nh.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Cf.prototype.center=function(p){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(p)},Cf.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Cf.prototype.isIntersectionBox=function(p){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(p)},Cf.prototype.size=function(p){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(p)},ts.prototype.center=function(p){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(p)},ts.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ts.prototype.isIntersectionBox=function(p){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(p)},ts.prototype.isIntersectionSphere=function(p){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(p)},ts.prototype.size=function(p){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(p)},Aa.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Pd.prototype.setFromMatrix=function(p){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(p)},On.prototype.flattenToArrayOffset=function(p,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(p,e)},On.prototype.multiplyVector3=function(p){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),p.applyMatrix3(this)},On.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},On.prototype.applyToBufferAttribute=function(p){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),p.applyMatrix3(this)},On.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},On.prototype.getInverse=function(p){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(p).invert()},$n.prototype.extractPosition=function(p){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(p)},$n.prototype.flattenToArrayOffset=function(p,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(p,e)},$n.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new pe).setFromMatrixColumn(this,3)},$n.prototype.setRotationFromQuaternion=function(p){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(p)},$n.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},$n.prototype.multiplyVector3=function(p){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},$n.prototype.multiplyVector4=function(p){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},$n.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},$n.prototype.rotateAxis=function(p){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),p.transformDirection(this)},$n.prototype.crossVector=function(p){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},$n.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},$n.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},$n.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},$n.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},$n.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},$n.prototype.applyToBufferAttribute=function(p){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},$n.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},$n.prototype.makeFrustum=function(p,e,r,s,a,c){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(p,e,s,r,a,c)},$n.prototype.getInverse=function(p){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(p).invert()},vc.prototype.isIntersectionLine=function(p){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(p)},Hi.prototype.multiplyVector3=function(p){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),p.applyQuaternion(this)},Hi.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},ao.prototype.isIntersectionBox=function(p){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(p)},ao.prototype.isIntersectionPlane=function(p){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(p)},ao.prototype.isIntersectionSphere=function(p){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(p)},N.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},N.prototype.barycoordFromPoint=function(p,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(p,e)},N.prototype.midpoint=function(p){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(p)},N.prototypenormal=function(p){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(p)},N.prototype.plane=function(p){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(p)},N.barycoordFromPoint=function(p,e,r,s,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),N.getBarycoord(p,e,r,s,a)},N.normal=function(p,e,r,s){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),N.getNormal(p,e,r,s)},Fh.prototype.extractAllPoints=function(p){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(p)},Fh.prototype.extrude=function(p){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new aa(this,p)},Fh.prototype.makeGeometry=function(p){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ac(this,p)},at.prototype.fromAttribute=function(p,e,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(p,e,r)},at.prototype.distanceToManhattan=function(p){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(p)},at.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},pe.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},pe.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},pe.prototype.getPositionFromMatrix=function(p){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(p)},pe.prototype.getScaleFromMatrix=function(p){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(p)},pe.prototype.getColumnFromMatrix=function(p,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,p)},pe.prototype.applyProjection=function(p){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(p)},pe.prototype.fromAttribute=function(p,e,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(p,e,r)},pe.prototype.distanceToManhattan=function(p){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(p)},pe.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ci.prototype.fromAttribute=function(p,e,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(p,e,r)},ci.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},pi.prototype.getChildByName=function(p){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(p)},pi.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},pi.prototype.translate=function(p,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,p)},pi.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},pi.prototype.applyMatrix=function(p){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(p)},Object.defineProperties(pi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(p){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=p}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Ws.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Ws.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),hf.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},co.prototype.setLens=function(p,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(p)},Object.defineProperties(Pc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(p){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=p}},shadowCameraLeft:{set:function(p){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=p}},shadowCameraRight:{set:function(p){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=p}},shadowCameraTop:{set:function(p){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=p}},shadowCameraBottom:{set:function(p){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=p}},shadowCameraNear:{set:function(p){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=p}},shadowCameraFar:{set:function(p){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=p}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(p){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=p}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(p){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=p}},shadowMapHeight:{set:function(p){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=p}}}),Object.defineProperties(Bt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===kr},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(kr)}}}),Bt.prototype.setDynamic=function(p){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===p?kr:Gr),this},Bt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Bt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},rn.prototype.addIndex=function(p){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(p)},rn.prototype.addAttribute=function(p,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===p?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(p,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(p,new Bt(arguments[1],arguments[2])))},rn.prototype.addDrawCall=function(p,e,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(p,e)},rn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},rn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},rn.prototype.removeAttribute=function(p){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(p)},rn.prototype.applyMatrix=function(p){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(p)},Object.defineProperties(rn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),td.prototype.setDynamic=function(p){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===p?kr:Gr),this},td.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},aa.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},aa.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},aa.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},ed.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Ip.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(X.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new vt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(p){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===p}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(p){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=p}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(El.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(p){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=p}}}),Ds.prototype.clearTarget=function(p,e,r,s){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(p),this.clear(e,r,s)},Ds.prototype.animate=function(p){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(p)},Ds.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Ds.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Ds.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Ds.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Ds.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Ds.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Ds.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Ds.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Ds.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Ds.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Ds.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Ds.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Ds.prototype.enableScissorTest=function(p){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(p)},Ds.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Ds.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Ds.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Ds.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Ds.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Ds.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Ds.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Ds.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Ds.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Ds.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Ds.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(p){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=p}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(p){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=p}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(p){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===p?3001:Ns}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Jf.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Cs.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(p){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=p}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(p){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=p}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(p){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=p}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(p){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=p}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(p){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=p}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(p){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=p}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(p){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=p}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(p){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=p}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(p){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=p}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(p){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=p}}}),class extends pi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const r=this.context.createBufferSource();return r.buffer=this.buffer,r.loop=this.loop,r.loopStart=this.loopStart,r.loopEnd=this.loopEnd,r.onended=this.onEnded.bind(this),r.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=r,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,r=this.filters.length;e<r;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,r=this.filters.length;e<r;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(p){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new D0).load(p,function(s){e.setBuffer(s)}),this},Dd.prototype.updateCubeMap=function(p,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(p,e)},Dd.prototype.clear=function(p,e,r,s){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(p,e,r,s)},Ci.crossOrigin=void 0,Ci.loadTexture=function(p,e,r,s){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const a=new N_;a.setCrossOrigin(this.crossOrigin);const c=a.load(p,r,void 0,s);return e&&(c.mapping=e),c},Ci.loadTextureCube=function(p,e,r,s){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const a=new _g;a.setCrossOrigin(this.crossOrigin);const c=a.load(p,r,void 0,s);return e&&(c.mapping=e),c},Ci.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ci.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"132"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="132")},4902:(jt,mt,ae)=>{var G;!function(Y){var Be=/^\s+/,Je=/\s+$/,_e=0,Me=Y.round,Re=Y.min,Ne=Y.max,ze=Y.random;function ne(ye,qe){if(qe=qe||{},(ye=ye||"")instanceof ne)return ye;if(!(this instanceof ne))return new ne(ye,qe);var Se=function(ye){var qe={r:0,g:0,b:0},Se=1,$t=null,Cn=null,Kt=null,Ir=!1,fi=!1;return"string"==typeof ye&&(ye=function(ye){ye=ye.replace(Be,"").replace(Je,"").toLowerCase();var Se,qe=!1;if(ki[ye])ye=ki[ye],qe=!0;else if("transparent"==ye)return{r:0,g:0,b:0,a:0,format:"name"};return(Se=ln.rgb.exec(ye))?{r:Se[1],g:Se[2],b:Se[3]}:(Se=ln.rgba.exec(ye))?{r:Se[1],g:Se[2],b:Se[3],a:Se[4]}:(Se=ln.hsl.exec(ye))?{h:Se[1],s:Se[2],l:Se[3]}:(Se=ln.hsla.exec(ye))?{h:Se[1],s:Se[2],l:Se[3],a:Se[4]}:(Se=ln.hsv.exec(ye))?{h:Se[1],s:Se[2],v:Se[3]}:(Se=ln.hsva.exec(ye))?{h:Se[1],s:Se[2],v:Se[3],a:Se[4]}:(Se=ln.hex8.exec(ye))?{r:Ai(Se[1]),g:Ai(Se[2]),b:Ai(Se[3]),a:jn(Se[4]),format:qe?"name":"hex8"}:(Se=ln.hex6.exec(ye))?{r:Ai(Se[1]),g:Ai(Se[2]),b:Ai(Se[3]),format:qe?"name":"hex"}:(Se=ln.hex4.exec(ye))?{r:Ai(Se[1]+""+Se[1]),g:Ai(Se[2]+""+Se[2]),b:Ai(Se[3]+""+Se[3]),a:jn(Se[4]+""+Se[4]),format:qe?"name":"hex8"}:!!(Se=ln.hex3.exec(ye))&&{r:Ai(Se[1]+""+Se[1]),g:Ai(Se[2]+""+Se[2]),b:Ai(Se[3]+""+Se[3]),format:qe?"name":"hex"}}(ye)),"object"==typeof ye&&(ai(ye.r)&&ai(ye.g)&&ai(ye.b)?(qe=function(ye,qe,Se){return{r:255*gr(ye,255),g:255*gr(qe,255),b:255*gr(Se,255)}}(ye.r,ye.g,ye.b),Ir=!0,fi="%"===String(ye.r).substr(-1)?"prgb":"rgb"):ai(ye.h)&&ai(ye.s)&&ai(ye.v)?($t=kt(ye.s),Cn=kt(ye.v),qe=function(ye,qe,Se){ye=6*gr(ye,360),qe=gr(qe,100),Se=gr(Se,100);var $t=Y.floor(ye),Cn=ye-$t,Kt=Se*(1-qe),Ir=Se*(1-Cn*qe),fi=Se*(1-(1-Cn)*qe),Jr=$t%6;return{r:255*[Se,Ir,Kt,Kt,fi,Se][Jr],g:255*[fi,Se,Se,Ir,Kt,Kt][Jr],b:255*[Kt,Kt,fi,Se,Se,Ir][Jr]}}(ye.h,$t,Cn),Ir=!0,fi="hsv"):ai(ye.h)&&ai(ye.s)&&ai(ye.l)&&($t=kt(ye.s),Kt=kt(ye.l),qe=function(ye,qe,Se){var $t,Cn,Kt;function Ir(Ti,Vs,Ni){return Ni<0&&(Ni+=1),Ni>1&&(Ni-=1),Ni<1/6?Ti+6*(Vs-Ti)*Ni:Ni<.5?Vs:Ni<2/3?Ti+(Vs-Ti)*(2/3-Ni)*6:Ti}if(ye=gr(ye,360),qe=gr(qe,100),Se=gr(Se,100),0===qe)$t=Cn=Kt=Se;else{var fi=Se<.5?Se*(1+qe):Se+qe-Se*qe,Jr=2*Se-fi;$t=Ir(Jr,fi,ye+1/3),Cn=Ir(Jr,fi,ye),Kt=Ir(Jr,fi,ye-1/3)}return{r:255*$t,g:255*Cn,b:255*Kt}}(ye.h,$t,Kt),Ir=!0,fi="hsl"),ye.hasOwnProperty("a")&&(Se=ye.a)),Se=Zn(Se),{ok:Ir,format:ye.format||fi,r:Re(255,Ne(qe.r,0)),g:Re(255,Ne(qe.g,0)),b:Re(255,Ne(qe.b,0)),a:Se}}(ye);this._originalInput=ye,this._r=Se.r,this._g=Se.g,this._b=Se.b,this._a=Se.a,this._roundA=Me(100*this._a)/100,this._format=qe.format||Se.format,this._gradientType=qe.gradientType,this._r<1&&(this._r=Me(this._r)),this._g<1&&(this._g=Me(this._g)),this._b<1&&(this._b=Me(this._b)),this._ok=Se.ok,this._tc_id=_e++}function Ue(ye,qe,Se){ye=gr(ye,255),qe=gr(qe,255),Se=gr(Se,255);var Kt,Ir,$t=Ne(ye,qe,Se),Cn=Re(ye,qe,Se),fi=($t+Cn)/2;if($t==Cn)Kt=Ir=0;else{var Jr=$t-Cn;switch(Ir=fi>.5?Jr/(2-$t-Cn):Jr/($t+Cn),$t){case ye:Kt=(qe-Se)/Jr+(qe<Se?6:0);break;case qe:Kt=(Se-ye)/Jr+2;break;case Se:Kt=(ye-qe)/Jr+4}Kt/=6}return{h:Kt,s:Ir,l:fi}}function tt(ye,qe,Se){ye=gr(ye,255),qe=gr(qe,255),Se=gr(Se,255);var Kt,Ir,$t=Ne(ye,qe,Se),Cn=Re(ye,qe,Se),fi=$t,Jr=$t-Cn;if(Ir=0===$t?0:Jr/$t,$t==Cn)Kt=0;else{switch($t){case ye:Kt=(qe-Se)/Jr+(qe<Se?6:0);break;case qe:Kt=(Se-ye)/Jr+2;break;case Se:Kt=(ye-qe)/Jr+4}Kt/=6}return{h:Kt,s:Ir,v:fi}}function gt(ye,qe,Se,$t){var Cn=[wn(Me(ye).toString(16)),wn(Me(qe).toString(16)),wn(Me(Se).toString(16))];return $t&&Cn[0].charAt(0)==Cn[0].charAt(1)&&Cn[1].charAt(0)==Cn[1].charAt(1)&&Cn[2].charAt(0)==Cn[2].charAt(1)?Cn[0].charAt(0)+Cn[1].charAt(0)+Cn[2].charAt(0):Cn.join("")}function Yt(ye,qe,Se,$t){return[wn(mn($t)),wn(Me(ye).toString(16)),wn(Me(qe).toString(16)),wn(Me(Se).toString(16))].join("")}function qt(ye,qe){qe=0===qe?0:qe||10;var Se=ne(ye).toHsl();return Se.s-=qe/100,Se.s=ss(Se.s),ne(Se)}function Ot(ye,qe){qe=0===qe?0:qe||10;var Se=ne(ye).toHsl();return Se.s+=qe/100,Se.s=ss(Se.s),ne(Se)}function dt(ye){return ne(ye).desaturate(100)}function Mn(ye,qe){qe=0===qe?0:qe||10;var Se=ne(ye).toHsl();return Se.l+=qe/100,Se.l=ss(Se.l),ne(Se)}function fn(ye,qe){qe=0===qe?0:qe||10;var Se=ne(ye).toRgb();return Se.r=Ne(0,Re(255,Se.r-Me(-qe/100*255))),Se.g=Ne(0,Re(255,Se.g-Me(-qe/100*255))),Se.b=Ne(0,Re(255,Se.b-Me(-qe/100*255))),ne(Se)}function Gn(ye,qe){qe=0===qe?0:qe||10;var Se=ne(ye).toHsl();return Se.l-=qe/100,Se.l=ss(Se.l),ne(Se)}function ut(ye,qe){var Se=ne(ye).toHsl(),$t=(Se.h+qe)%360;return Se.h=$t<0?360+$t:$t,ne(Se)}function Wt(ye){var qe=ne(ye).toHsl();return qe.h=(qe.h+180)%360,ne(qe)}function Tn(ye){var qe=ne(ye).toHsl(),Se=qe.h;return[ne(ye),ne({h:(Se+120)%360,s:qe.s,l:qe.l}),ne({h:(Se+240)%360,s:qe.s,l:qe.l})]}function br(ye){var qe=ne(ye).toHsl(),Se=qe.h;return[ne(ye),ne({h:(Se+90)%360,s:qe.s,l:qe.l}),ne({h:(Se+180)%360,s:qe.s,l:qe.l}),ne({h:(Se+270)%360,s:qe.s,l:qe.l})]}function qn(ye){var qe=ne(ye).toHsl(),Se=qe.h;return[ne(ye),ne({h:(Se+72)%360,s:qe.s,l:qe.l}),ne({h:(Se+216)%360,s:qe.s,l:qe.l})]}function Fn(ye,qe,Se){qe=qe||6,Se=Se||30;var $t=ne(ye).toHsl(),Cn=360/Se,Kt=[ne(ye)];for($t.h=($t.h-(Cn*qe>>1)+720)%360;--qe;)$t.h=($t.h+Cn)%360,Kt.push(ne($t));return Kt}function tn(ye,qe){qe=qe||6;for(var Se=ne(ye).toHsv(),$t=Se.h,Cn=Se.s,Kt=Se.v,Ir=[],fi=1/qe;qe--;)Ir.push(ne({h:$t,s:Cn,v:Kt})),Kt=(Kt+fi)%1;return Ir}ne.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ye=this.toRgb();return(299*ye.r+587*ye.g+114*ye.b)/1e3},getLuminance:function(){var qe,Se,$t,ye=this.toRgb();return Se=ye.g/255,$t=ye.b/255,.2126*((qe=ye.r/255)<=.03928?qe/12.92:Y.pow((qe+.055)/1.055,2.4))+.7152*(Se<=.03928?Se/12.92:Y.pow((Se+.055)/1.055,2.4))+.0722*($t<=.03928?$t/12.92:Y.pow(($t+.055)/1.055,2.4))},setAlpha:function(ye){return this._a=Zn(ye),this._roundA=Me(100*this._a)/100,this},toHsv:function(){var ye=tt(this._r,this._g,this._b);return{h:360*ye.h,s:ye.s,v:ye.v,a:this._a}},toHsvString:function(){var ye=tt(this._r,this._g,this._b),qe=Me(360*ye.h),Se=Me(100*ye.s),$t=Me(100*ye.v);return 1==this._a?"hsv("+qe+", "+Se+"%, "+$t+"%)":"hsva("+qe+", "+Se+"%, "+$t+"%, "+this._roundA+")"},toHsl:function(){var ye=Ue(this._r,this._g,this._b);return{h:360*ye.h,s:ye.s,l:ye.l,a:this._a}},toHslString:function(){var ye=Ue(this._r,this._g,this._b),qe=Me(360*ye.h),Se=Me(100*ye.s),$t=Me(100*ye.l);return 1==this._a?"hsl("+qe+", "+Se+"%, "+$t+"%)":"hsla("+qe+", "+Se+"%, "+$t+"%, "+this._roundA+")"},toHex:function(ye){return gt(this._r,this._g,this._b,ye)},toHexString:function(ye){return"#"+this.toHex(ye)},toHex8:function(ye){return function(ye,qe,Se,$t,Cn){var Kt=[wn(Me(ye).toString(16)),wn(Me(qe).toString(16)),wn(Me(Se).toString(16)),wn(mn($t))];return Cn&&Kt[0].charAt(0)==Kt[0].charAt(1)&&Kt[1].charAt(0)==Kt[1].charAt(1)&&Kt[2].charAt(0)==Kt[2].charAt(1)&&Kt[3].charAt(0)==Kt[3].charAt(1)?Kt[0].charAt(0)+Kt[1].charAt(0)+Kt[2].charAt(0)+Kt[3].charAt(0):Kt.join("")}(this._r,this._g,this._b,this._a,ye)},toHex8String:function(ye){return"#"+this.toHex8(ye)},toRgb:function(){return{r:Me(this._r),g:Me(this._g),b:Me(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Me(this._r)+", "+Me(this._g)+", "+Me(this._b)+")":"rgba("+Me(this._r)+", "+Me(this._g)+", "+Me(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Me(100*gr(this._r,255))+"%",g:Me(100*gr(this._g,255))+"%",b:Me(100*gr(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Me(100*gr(this._r,255))+"%, "+Me(100*gr(this._g,255))+"%, "+Me(100*gr(this._b,255))+"%)":"rgba("+Me(100*gr(this._r,255))+"%, "+Me(100*gr(this._g,255))+"%, "+Me(100*gr(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(en[gt(this._r,this._g,this._b,!0)]||!1)},toFilter:function(ye){var qe="#"+Yt(this._r,this._g,this._b,this._a),Se=qe,$t=this._gradientType?"GradientType = 1, ":"";if(ye){var Cn=ne(ye);Se="#"+Yt(Cn._r,Cn._g,Cn._b,Cn._a)}return"progid:DXImageTransform.Microsoft.gradient("+$t+"startColorstr="+qe+",endColorstr="+Se+")"},toString:function(ye){var qe=!!ye;ye=ye||this._format;var Se=!1;return!qe&&this._a<1&&this._a>=0&&("hex"===ye||"hex6"===ye||"hex3"===ye||"hex4"===ye||"hex8"===ye||"name"===ye)?"name"===ye&&0===this._a?this.toName():this.toRgbString():("rgb"===ye&&(Se=this.toRgbString()),"prgb"===ye&&(Se=this.toPercentageRgbString()),("hex"===ye||"hex6"===ye)&&(Se=this.toHexString()),"hex3"===ye&&(Se=this.toHexString(!0)),"hex4"===ye&&(Se=this.toHex8String(!0)),"hex8"===ye&&(Se=this.toHex8String()),"name"===ye&&(Se=this.toName()),"hsl"===ye&&(Se=this.toHslString()),"hsv"===ye&&(Se=this.toHsvString()),Se||this.toHexString())},clone:function(){return ne(this.toString())},_applyModification:function(ye,qe){var Se=ye.apply(null,[this].concat([].slice.call(qe)));return this._r=Se._r,this._g=Se._g,this._b=Se._b,this.setAlpha(Se._a),this},lighten:function(){return this._applyModification(Mn,arguments)},brighten:function(){return this._applyModification(fn,arguments)},darken:function(){return this._applyModification(Gn,arguments)},desaturate:function(){return this._applyModification(qt,arguments)},saturate:function(){return this._applyModification(Ot,arguments)},greyscale:function(){return this._applyModification(dt,arguments)},spin:function(){return this._applyModification(ut,arguments)},_applyCombination:function(ye,qe){return ye.apply(null,[this].concat([].slice.call(qe)))},analogous:function(){return this._applyCombination(Fn,arguments)},complement:function(){return this._applyCombination(Wt,arguments)},monochromatic:function(){return this._applyCombination(tn,arguments)},splitcomplement:function(){return this._applyCombination(qn,arguments)},triad:function(){return this._applyCombination(Tn,arguments)},tetrad:function(){return this._applyCombination(br,arguments)}},ne.fromRatio=function(ye,qe){if("object"==typeof ye){var Se={};for(var $t in ye)ye.hasOwnProperty($t)&&(Se[$t]="a"===$t?ye[$t]:kt(ye[$t]));ye=Se}return ne(ye,qe)},ne.equals=function(ye,qe){return!(!ye||!qe)&&ne(ye).toRgbString()==ne(qe).toRgbString()},ne.random=function(){return ne.fromRatio({r:ze(),g:ze(),b:ze()})},ne.mix=function(ye,qe,Se){Se=0===Se?0:Se||50;var $t=ne(ye).toRgb(),Cn=ne(qe).toRgb(),Kt=Se/100;return ne({r:(Cn.r-$t.r)*Kt+$t.r,g:(Cn.g-$t.g)*Kt+$t.g,b:(Cn.b-$t.b)*Kt+$t.b,a:(Cn.a-$t.a)*Kt+$t.a})},ne.readability=function(ye,qe){var Se=ne(ye),$t=ne(qe);return(Y.max(Se.getLuminance(),$t.getLuminance())+.05)/(Y.min(Se.getLuminance(),$t.getLuminance())+.05)},ne.isReadable=function(ye,qe,Se){var Cn,Kt,$t=ne.readability(ye,qe);switch(Kt=!1,(Cn=function(ye){var qe,Se;return"AA"!==(qe=((ye=ye||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==qe&&(qe="AA"),"small"!==(Se=(ye.size||"small").toLowerCase())&&"large"!==Se&&(Se="small"),{level:qe,size:Se}}(Se)).level+Cn.size){case"AAsmall":case"AAAlarge":Kt=$t>=4.5;break;case"AAlarge":Kt=$t>=3;break;case"AAAsmall":Kt=$t>=7}return Kt},ne.mostReadable=function(ye,qe,Se){var Kt,Ir,fi,Jr,$t=null,Cn=0;Ir=(Se=Se||{}).includeFallbackColors,fi=Se.level,Jr=Se.size;for(var Ti=0;Ti<qe.length;Ti++)(Kt=ne.readability(ye,qe[Ti]))>Cn&&(Cn=Kt,$t=ne(qe[Ti]));return ne.isReadable(ye,$t,{level:fi,size:Jr})||!Ir?$t:(Se.includeFallbackColors=!1,ne.mostReadable(ye,["#fff","#000"],Se))};var ki=ne.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},en=ne.hexNames=function(ye){var qe={};for(var Se in ye)ye.hasOwnProperty(Se)&&(qe[ye[Se]]=Se);return qe}(ki);function Zn(ye){return ye=parseFloat(ye),(isNaN(ye)||ye<0||ye>1)&&(ye=1),ye}function gr(ye,qe){(function(ye){return"string"==typeof ye&&-1!=ye.indexOf(".")&&1===parseFloat(ye)})(ye)&&(ye="100%");var Se=function(ye){return"string"==typeof ye&&-1!=ye.indexOf("%")}(ye);return ye=Re(qe,Ne(0,parseFloat(ye))),Se&&(ye=parseInt(ye*qe,10)/100),Y.abs(ye-qe)<1e-6?1:ye%qe/parseFloat(qe)}function ss(ye){return Re(1,Ne(0,ye))}function Ai(ye){return parseInt(ye,16)}function wn(ye){return 1==ye.length?"0"+ye:""+ye}function kt(ye){return ye<=1&&(ye=100*ye+"%"),ye}function mn(ye){return Y.round(255*parseFloat(ye)).toString(16)}function jn(ye){return Ai(ye)/255}var Se,$t,Cn,ln=($t="[\\s|\\(]+("+(Se="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?",Cn="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?",{CSS_UNIT:new RegExp(Se),rgb:new RegExp("rgb"+$t),rgba:new RegExp("rgba"+Cn),hsl:new RegExp("hsl"+$t),hsla:new RegExp("hsla"+Cn),hsv:new RegExp("hsv"+$t),hsva:new RegExp("hsva"+Cn),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function ai(ye){return!!ln.CSS_UNIT.exec(ye)}jt.exports?jt.exports=ne:void 0!==(G=function(){return ne}.call(mt,ae,mt,jt))&&(jt.exports=G)}(Math)},6995:(jt,mt,ae)=>{"use strict";ae.d(mt,{Z:()=>Re});var G={value:()=>{}};function Y(){for(var te,Ne=0,ze=arguments.length,ne={};Ne<ze;++Ne){if(!(te=arguments[Ne]+"")||te in ne||/[\s.]/.test(te))throw new Error("illegal type: "+te);ne[te]=[]}return new Be(ne)}function Be(Ne){this._=Ne}function Je(Ne,ze){return Ne.trim().split(/^|\s+/).map(function(ne){var te="",xe=ne.indexOf(".");if(xe>=0&&(te=ne.slice(xe+1),ne=ne.slice(0,xe)),ne&&!ze.hasOwnProperty(ne))throw new Error("unknown type: "+ne);return{type:ne,name:te}})}function _e(Ne,ze){for(var xe,ne=0,te=Ne.length;ne<te;++ne)if((xe=Ne[ne]).name===ze)return xe.value}function Me(Ne,ze,ne){for(var te=0,xe=Ne.length;te<xe;++te)if(Ne[te].name===ze){Ne[te]=G,Ne=Ne.slice(0,te).concat(Ne.slice(te+1));break}return null!=ne&&Ne.push({name:ze,value:ne}),Ne}Be.prototype=Y.prototype={constructor:Be,on:function(Ne,ze){var xe,ne=this._,te=Je(Ne+"",ne),Ue=-1,He=te.length;if(!(arguments.length<2)){if(null!=ze&&"function"!=typeof ze)throw new Error("invalid callback: "+ze);for(;++Ue<He;)if(xe=(Ne=te[Ue]).type)ne[xe]=Me(ne[xe],Ne.name,ze);else if(null==ze)for(xe in ne)ne[xe]=Me(ne[xe],Ne.name,null);return this}for(;++Ue<He;)if((xe=(Ne=te[Ue]).type)&&(xe=_e(ne[xe],Ne.name)))return xe},copy:function(){var Ne={},ze=this._;for(var ne in ze)Ne[ne]=ze[ne].slice();return new Be(Ne)},call:function(Ne,ze){if((xe=arguments.length-2)>0)for(var xe,Ue,ne=new Array(xe),te=0;te<xe;++te)ne[te]=arguments[te+2];if(!this._.hasOwnProperty(Ne))throw new Error("unknown type: "+Ne);for(te=0,xe=(Ue=this._[Ne]).length;te<xe;++te)Ue[te].value.apply(ze,ne)},apply:function(Ne,ze,ne){if(!this._.hasOwnProperty(Ne))throw new Error("unknown type: "+Ne);for(var te=this._[Ne],xe=0,Ue=te.length;xe<Ue;++xe)te[xe].value.apply(ze,ne)}};const Re=Y},2357:(jt,mt,ae)=>{"use strict";function G(Y){for(var Be=Y.length/6|0,Je=new Array(Be),_e=0;_e<Be;)Je[_e]="#"+Y.slice(6*_e,6*++_e);return Je}ae.d(mt,{Z:()=>G})},965:(jt,mt,ae)=>{"use strict";ae.d(mt,{Z:()=>ne});class G extends Map{constructor(xe,Ue=Me){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:Ue}}),null!=xe)for(const[He,tt]of xe)this.set(He,tt)}get(xe){return super.get(Be(this,xe))}has(xe){return super.has(Be(this,xe))}set(xe,Ue){return super.set(function({_intern:te,_key:xe},Ue){const He=xe(Ue);return te.has(He)?te.get(He):(te.set(He,Ue),Ue)}(this,xe),Ue)}delete(xe){return super.delete(function({_intern:te,_key:xe},Ue){const He=xe(Ue);return te.has(He)&&(Ue=te.get(Ue),te.delete(He)),Ue}(this,xe))}}function Be({_intern:te,_key:xe},Ue){const He=xe(Ue);return te.has(He)?te.get(He):Ue}function Me(te){return null!==te&&"object"==typeof te?te.valueOf():te}function Re(te,xe){switch(arguments.length){case 0:break;case 1:this.range(te);break;default:this.range(xe).domain(te)}return this}Set;const ze=Symbol("implicit");function ne(){var te=new G,xe=[],Ue=[],He=ze;function tt(We){let gt=te.get(We);if(void 0===gt){if(He!==ze)return He;te.set(We,gt=xe.push(We)-1)}return Ue[gt%Ue.length]}return tt.domain=function(We){if(!arguments.length)return xe.slice();xe=[],te=new G;for(const gt of We)te.has(gt)||te.set(gt,xe.push(gt)-1);return tt},tt.range=function(We){return arguments.length?(Ue=Array.from(We),tt):Ue.slice()},tt.unknown=function(We){return arguments.length?(He=We,tt):He},tt.copy=function(){return ne(xe,Ue).unknown(He)},Re.apply(tt,arguments),tt}},6804:(jt,mt,ae)=>{"use strict";ae.d(mt,{zO:()=>xe,B7:()=>He,HT:()=>tt});var _e,Me,G=0,Y=0,Be=0,Re=0,Ne=0,ze=0,ne="object"==typeof performance&&performance.now?performance:Date,te="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Ot){setTimeout(Ot,17)};function xe(){return Ne||(te(Ue),Ne=ne.now()+ze)}function Ue(){Ne=0}function He(){this._call=this._time=this._next=null}function tt(Ot,dt,Mn){var fn=new He;return fn.restart(Ot,dt,Mn),fn}function gt(){Ne=(Re=ne.now())+ze,G=Y=0;try{!function(){xe(),++G;for(var dt,Ot=_e;Ot;)(dt=Ne-Ot._time)>=0&&Ot._call.call(void 0,dt),Ot=Ot._next;--G}()}finally{G=0,function(){for(var Ot,Mn,dt=_e,fn=1/0;dt;)dt._call?(fn>dt._time&&(fn=dt._time),Ot=dt,dt=dt._next):(Mn=dt._next,dt._next=null,dt=Ot?Ot._next=Mn:_e=Mn);Me=Ot,qt(fn)}(),Ne=0}}function Jt(){var Ot=ne.now(),dt=Ot-Re;dt>1e3&&(ze-=dt,Re=Ot)}function qt(Ot){G||(Y&&(Y=clearTimeout(Y)),Ot-Ne>24?(Ot<1/0&&(Y=setTimeout(gt,Ot-ne.now()-ze)),Be&&(Be=clearInterval(Be))):(Be||(Re=ne.now(),Be=setInterval(Jt,1e3)),G=1,te(gt)))}He.prototype=tt.prototype={constructor:He,restart:function(Ot,dt,Mn){if("function"!=typeof Ot)throw new TypeError("callback is not a function");Mn=(null==Mn?xe():+Mn)+(null==dt?0:+dt),!this._next&&Me!==this&&(Me?Me._next=this:_e=this,Me=this),this._call=Ot,this._time=Mn,qt()},stop:function(){this._call&&(this._call=null,this._time=1/0,qt())}}},4330:(jt,mt,ae)=>{"use strict";function G(){}function Y(u){return null==u?G:function(){return this.querySelector(u)}}function Je(u){return null==u?[]:Array.isArray(u)?u:Array.from(u)}function _e(){return[]}function Me(u){return null==u?_e:function(){return this.querySelectorAll(u)}}function ze(u){return function(){return this.matches(u)}}function ne(u){return function(_){return _.matches(u)}}ae.d(mt,{$_Y:()=>Ma,PKp:()=>eh.Z,KrL:()=>fl});var te=Array.prototype.find;function Ue(){return this.firstElementChild}var tt=Array.prototype.filter;function We(){return Array.from(this.children)}function qt(u){return new Array(u.length)}function dt(u,_){this.ownerDocument=u.ownerDocument,this.namespaceURI=u.namespaceURI,this._next=null,this._parent=u,this.__data__=_}function Mn(u){return function(){return u}}function fn(u,_,T,N,$,X){for(var Ae,ie=0,$e=_.length,ot=X.length;ie<ot;++ie)(Ae=_[ie])?(Ae.__data__=X[ie],N[ie]=Ae):T[ie]=new dt(u,X[ie]);for(;ie<$e;++ie)(Ae=_[ie])&&($[ie]=Ae)}function Gn(u,_,T,N,$,X,ie){var Ae,$e,Vn,ot=new Map,pt=_.length,Xt=X.length,vt=new Array(pt);for(Ae=0;Ae<pt;++Ae)($e=_[Ae])&&(vt[Ae]=Vn=ie.call($e,$e.__data__,Ae,_)+"",ot.has(Vn)?$[Ae]=$e:ot.set(Vn,$e));for(Ae=0;Ae<Xt;++Ae)Vn=ie.call(u,X[Ae],Ae,X)+"",($e=ot.get(Vn))?(N[Ae]=$e,$e.__data__=X[Ae],ot.delete(Vn)):T[Ae]=new dt(u,X[Ae]);for(Ae=0;Ae<pt;++Ae)($e=_[Ae])&&ot.get(vt[Ae])===$e&&($[Ae]=$e)}function ut(u){return u.__data__}function Tn(u){return"object"==typeof u&&"length"in u?u:Array.from(u)}function en(u,_){return u<_?-1:u>_?1:u>=_?0:NaN}dt.prototype={constructor:dt,appendChild:function(u){return this._parent.insertBefore(u,this._next)},insertBefore:function(u,_){return this._parent.insertBefore(u,_)},querySelector:function(u){return this._parent.querySelector(u)},querySelectorAll:function(u){return this._parent.querySelectorAll(u)}};var Us="http://www.w3.org/1999/xhtml";const wn={svg:"http://www.w3.org/2000/svg",xhtml:Us,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kt(u){var _=u+="",T=_.indexOf(":");return T>=0&&"xmlns"!==(_=u.slice(0,T))&&(u=u.slice(T+1)),wn.hasOwnProperty(_)?{space:wn[_],local:u}:u}function mn(u){return function(){this.removeAttribute(u)}}function jn(u){return function(){this.removeAttributeNS(u.space,u.local)}}function ln(u,_){return function(){this.setAttribute(u,_)}}function ai(u,_){return function(){this.setAttributeNS(u.space,u.local,_)}}function wr(u,_){return function(){var T=_.apply(this,arguments);null==T?this.removeAttribute(u):this.setAttribute(u,T)}}function to(u,_){return function(){var T=_.apply(this,arguments);null==T?this.removeAttributeNS(u.space,u.local):this.setAttributeNS(u.space,u.local,T)}}function qe(u){return u.ownerDocument&&u.ownerDocument.defaultView||u.document&&u||u.defaultView}function Se(u){return function(){this.style.removeProperty(u)}}function $t(u,_,T){return function(){this.style.setProperty(u,_,T)}}function Cn(u,_,T){return function(){var N=_.apply(this,arguments);null==N?this.style.removeProperty(u):this.style.setProperty(u,N,T)}}function Ir(u,_){return u.style.getPropertyValue(_)||qe(u).getComputedStyle(u,null).getPropertyValue(_)}function fi(u){return function(){delete this[u]}}function Jr(u,_){return function(){this[u]=_}}function Ti(u,_){return function(){var T=_.apply(this,arguments);null==T?delete this[u]:this[u]=T}}function Ni(u){return u.trim().split(/^|\s+/)}function Xn(u){return u.classList||new Di(u)}function Di(u){this._node=u,this._names=Ni(u.getAttribute("class")||"")}function kn(u,_){for(var T=Xn(u),N=-1,$=_.length;++N<$;)T.add(_[N])}function Ln(u,_){for(var T=Xn(u),N=-1,$=_.length;++N<$;)T.remove(_[N])}function Po(u){return function(){kn(this,u)}}function Ji(u){return function(){Ln(this,u)}}function ls(u,_){return function(){(_.apply(this,arguments)?kn:Ln)(this,u)}}function Mi(){this.textContent=""}function ml(u){return function(){this.textContent=u}}function Jn(u){return function(){var _=u.apply(this,arguments);this.textContent=null==_?"":_}}function Ri(){this.innerHTML=""}function Io(u){return function(){this.innerHTML=u}}function Rr(u){return function(){var _=u.apply(this,arguments);this.innerHTML=null==_?"":_}}function zo(){this.nextSibling&&this.parentNode.appendChild(this)}function no(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ro(u){return function(){var _=this.ownerDocument,T=this.namespaceURI;return T===Us&&_.documentElement.namespaceURI===Us?_.createElement(u):_.createElementNS(T,u)}}function po(u){return function(){return this.ownerDocument.createElementNS(u.space,u.local)}}function Ui(u){var _=kt(u);return(_.local?po:ro)(_)}function Ba(){return null}function Zo(){var u=this.parentNode;u&&u.removeChild(this)}function cs(){var u=this.cloneNode(!1),_=this.parentNode;return _?_.insertBefore(u,this.nextSibling):u}function Is(){var u=this.cloneNode(!0),_=this.parentNode;return _?_.insertBefore(u,this.nextSibling):u}function mo(u){return u.trim().split(/^|\s+/).map(function(_){var T="",N=_.indexOf(".");return N>=0&&(T=_.slice(N+1),_=_.slice(0,N)),{type:_,name:T}})}function go(u){return function(){var _=this.__on;if(_){for(var X,T=0,N=-1,$=_.length;T<$;++T)X=_[T],u.type&&X.type!==u.type||X.name!==u.name?_[++N]=X:this.removeEventListener(X.type,X.listener,X.options);++N?_.length=N:delete this.__on}}}function Ho(u,_,T){return function(){var $,N=this.__on,X=function(u){return function(_){u.call(this,_,this.__data__)}}(_);if(N)for(var ie=0,Ae=N.length;ie<Ae;++ie)if(($=N[ie]).type===u.type&&$.name===u.name)return this.removeEventListener($.type,$.listener,$.options),this.addEventListener($.type,$.listener=X,$.options=T),void($.value=_);this.addEventListener(u.type,X,T),$={type:u.type,name:u.name,value:_,listener:X,options:T},N?N.push($):this.__on=[$]}}function Ua(u,_,T){var N=qe(u),$=N.CustomEvent;"function"==typeof $?$=new $(_,T):($=N.document.createEvent("Event"),T?($.initEvent(_,T.bubbles,T.cancelable),$.detail=T.detail):$.initEvent(_,!1,!1)),u.dispatchEvent($)}function us(u,_){return function(){return Ua(this,u,_)}}function Ys(u,_){return function(){return Ua(this,u,_.apply(this,arguments))}}Di.prototype={add:function(u){this._names.indexOf(u)<0&&(this._names.push(u),this._node.setAttribute("class",this._names.join(" ")))},remove:function(u){var _=this._names.indexOf(u);_>=0&&(this._names.splice(_,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(u){return this._names.indexOf(u)>=0}};var sl=[null];function Pi(u,_){this._groups=u,this._parents=_}function _n(){return new Pi([[document.documentElement]],sl)}Pi.prototype=_n.prototype={constructor:Pi,select:function(u){"function"!=typeof u&&(u=Y(u));for(var _=this._groups,T=_.length,N=new Array(T),$=0;$<T;++$)for(var $e,ot,X=_[$],ie=X.length,Ae=N[$]=new Array(ie),pt=0;pt<ie;++pt)($e=X[pt])&&(ot=u.call($e,$e.__data__,pt,X))&&("__data__"in $e&&(ot.__data__=$e.__data__),Ae[pt]=ot);return new Pi(N,this._parents)},selectAll:function(u){u="function"==typeof u?function(u){return function(){return Je(u.apply(this,arguments))}}(u):Me(u);for(var _=this._groups,T=_.length,N=[],$=[],X=0;X<T;++X)for(var $e,ie=_[X],Ae=ie.length,ot=0;ot<Ae;++ot)($e=ie[ot])&&(N.push(u.call($e,$e.__data__,ot,ie)),$.push($e));return new Pi(N,$)},selectChild:function(u){return this.select(null==u?Ue:function(u){return function(){return te.call(this.children,u)}}("function"==typeof u?u:ne(u)))},selectChildren:function(u){return this.selectAll(null==u?We:function(u){return function(){return tt.call(this.children,u)}}("function"==typeof u?u:ne(u)))},filter:function(u){"function"!=typeof u&&(u=ze(u));for(var _=this._groups,T=_.length,N=new Array(T),$=0;$<T;++$)for(var $e,X=_[$],ie=X.length,Ae=N[$]=[],ot=0;ot<ie;++ot)($e=X[ot])&&u.call($e,$e.__data__,ot,X)&&Ae.push($e);return new Pi(N,this._parents)},data:function(u,_){if(!arguments.length)return Array.from(this,ut);var T=_?Gn:fn,N=this._parents,$=this._groups;"function"!=typeof u&&(u=Mn(u));for(var X=$.length,ie=new Array(X),Ae=new Array(X),$e=new Array(X),ot=0;ot<X;++ot){var pt=N[ot],Xt=$[ot],vt=Xt.length,Vn=Tn(u.call(pt,pt&&pt.__data__,ot,N)),tr=Vn.length,rs=Ae[ot]=new Array(tr),Bt=ie[ot]=new Array(tr),nn=$e[ot]=new Array(vt);T(pt,Xt,rs,Bt,nn,Vn,_);for(var mr,Ei,Ar=0,pr=0;Ar<tr;++Ar)if(mr=rs[Ar]){for(Ar>=pr&&(pr=Ar+1);!(Ei=Bt[pr])&&++pr<tr;);mr._next=Ei||null}}return(ie=new Pi(ie,N))._enter=Ae,ie._exit=$e,ie},enter:function(){return new Pi(this._enter||this._groups.map(qt),this._parents)},exit:function(){return new Pi(this._exit||this._groups.map(qt),this._parents)},join:function(u,_,T){var N=this.enter(),$=this,X=this.exit();return"function"==typeof u?(N=u(N))&&(N=N.selection()):N=N.append(u+""),null!=_&&($=_($))&&($=$.selection()),null==T?X.remove():T(X),N&&$?N.merge($).order():$},merge:function(u){for(var _=u.selection?u.selection():u,T=this._groups,N=_._groups,$=T.length,ie=Math.min($,N.length),Ae=new Array($),$e=0;$e<ie;++$e)for(var Vn,ot=T[$e],pt=N[$e],Xt=ot.length,vt=Ae[$e]=new Array(Xt),tr=0;tr<Xt;++tr)(Vn=ot[tr]||pt[tr])&&(vt[tr]=Vn);for(;$e<$;++$e)Ae[$e]=T[$e];return new Pi(Ae,this._parents)},selection:function(){return this},order:function(){for(var u=this._groups,_=-1,T=u.length;++_<T;)for(var ie,N=u[_],$=N.length-1,X=N[$];--$>=0;)(ie=N[$])&&(X&&4^ie.compareDocumentPosition(X)&&X.parentNode.insertBefore(ie,X),X=ie);return this},sort:function(u){function _(Xt,vt){return Xt&&vt?u(Xt.__data__,vt.__data__):!Xt-!vt}u||(u=en);for(var T=this._groups,N=T.length,$=new Array(N),X=0;X<N;++X){for(var ot,ie=T[X],Ae=ie.length,$e=$[X]=new Array(Ae),pt=0;pt<Ae;++pt)(ot=ie[pt])&&($e[pt]=ot);$e.sort(_)}return new Pi($,this._parents).order()},call:function(){var u=arguments[0];return arguments[0]=this,u.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var u=this._groups,_=0,T=u.length;_<T;++_)for(var N=u[_],$=0,X=N.length;$<X;++$){var ie=N[$];if(ie)return ie}return null},size:function(){let u=0;for(const _ of this)++u;return u},empty:function(){return!this.node()},each:function(u){for(var _=this._groups,T=0,N=_.length;T<N;++T)for(var Ae,$=_[T],X=0,ie=$.length;X<ie;++X)(Ae=$[X])&&u.call(Ae,Ae.__data__,X,$);return this},attr:function(u,_){var T=kt(u);if(arguments.length<2){var N=this.node();return T.local?N.getAttributeNS(T.space,T.local):N.getAttribute(T)}return this.each((null==_?T.local?jn:mn:"function"==typeof _?T.local?to:wr:T.local?ai:ln)(T,_))},style:function(u,_,T){return arguments.length>1?this.each((null==_?Se:"function"==typeof _?Cn:$t)(u,_,null==T?"":T)):Ir(this.node(),u)},property:function(u,_){return arguments.length>1?this.each((null==_?fi:"function"==typeof _?Ti:Jr)(u,_)):this.node()[u]},classed:function(u,_){var T=Ni(u+"");if(arguments.length<2){for(var N=Xn(this.node()),$=-1,X=T.length;++$<X;)if(!N.contains(T[$]))return!1;return!0}return this.each(("function"==typeof _?ls:_?Po:Ji)(T,_))},text:function(u){return arguments.length?this.each(null==u?Mi:("function"==typeof u?Jn:ml)(u)):this.node().textContent},html:function(u){return arguments.length?this.each(null==u?Ri:("function"==typeof u?Rr:Io)(u)):this.node().innerHTML},raise:function(){return this.each(zo)},lower:function(){return this.each(no)},append:function(u){var _="function"==typeof u?u:Ui(u);return this.select(function(){return this.appendChild(_.apply(this,arguments))})},insert:function(u,_){var T="function"==typeof u?u:Ui(u),N=null==_?Ba:"function"==typeof _?_:Y(_);return this.select(function(){return this.insertBefore(T.apply(this,arguments),N.apply(this,arguments)||null)})},remove:function(){return this.each(Zo)},clone:function(u){return this.select(u?Is:cs)},datum:function(u){return arguments.length?this.property("__data__",u):this.node().__data__},on:function(u,_,T){var $,ie,N=mo(u+""),X=N.length;if(!(arguments.length<2)){for(Ae=_?Ho:go,$=0;$<X;++$)this.each(Ae(N[$],_,T));return this}var Ae=this.node().__on;if(Ae)for(var pt,$e=0,ot=Ae.length;$e<ot;++$e)for($=0,pt=Ae[$e];$<X;++$)if((ie=N[$]).type===pt.type&&ie.name===pt.name)return pt.value},dispatch:function(u,_){return this.each(("function"==typeof _?Ys:us)(u,_))},[Symbol.iterator]:function*(){for(var u=this._groups,_=0,T=u.length;_<T;++_)for(var ie,N=u[_],$=0,X=N.length;$<X;++$)(ie=N[$])&&(yield ie)}};const li=_n;var Xe=ae(6995),je=ae(6804);function ve(u,_,T){var N=new je.B7;return N.restart($=>{N.stop(),u($+_)},_=null==_?0:+_,T),N}var rt=(0,Xe.Z)("start","end","cancel","interrupt"),xt=[];function Ss(u,_,T,N,$,X){var ie=u.__transition;if(ie){if(T in ie)return}else u.__transition={};!function(u,_,T){var $,N=u.__transition;function ie(ot){var pt,Xt,vt,Vn;if(1!==T.state)return $e();for(pt in N)if((Vn=N[pt]).name===T.name){if(3===Vn.state)return ve(ie);4===Vn.state?(Vn.state=6,Vn.timer.stop(),Vn.on.call("interrupt",u,u.__data__,Vn.index,Vn.group),delete N[pt]):+pt<_&&(Vn.state=6,Vn.timer.stop(),Vn.on.call("cancel",u,u.__data__,Vn.index,Vn.group),delete N[pt])}if(ve(function(){3===T.state&&(T.state=4,T.timer.restart(Ae,T.delay,T.time),Ae(ot))}),T.state=2,T.on.call("start",u,u.__data__,T.index,T.group),2===T.state){for(T.state=3,$=new Array(vt=T.tween.length),pt=0,Xt=-1;pt<vt;++pt)(Vn=T.tween[pt].value.call(u,u.__data__,T.index,T.group))&&($[++Xt]=Vn);$.length=Xt+1}}function Ae(ot){for(var pt=ot<T.duration?T.ease.call(null,ot/T.duration):(T.timer.restart($e),T.state=5,1),Xt=-1,vt=$.length;++Xt<vt;)$[Xt].call(u,pt);5===T.state&&(T.on.call("end",u,u.__data__,T.index,T.group),$e())}function $e(){for(var ot in T.state=6,T.timer.stop(),delete N[_],N)return;delete u.__transition}N[_]=T,T.timer=(0,je.HT)(function(ot){T.state=1,T.timer.restart(ie,T.delay,T.time),T.delay<=ot&&ie(ot-T.delay)},0,T.time)}(u,T,{name:_,index:N,group:$,on:rt,tween:xt,time:X.time,delay:X.delay,duration:X.duration,ease:X.ease,timer:null,state:0})}function xo(u,_){var T=es(u,_);if(T.state>0)throw new Error("too late; already scheduled");return T}function Ls(u,_){var T=es(u,_);if(T.state>3)throw new Error("too late; already running");return T}function es(u,_){var T=u.__transition;if(!T||!(T=T[_]))throw new Error("transition not found");return T}function Ki(u,_){return u=+u,_=+_,function(T){return u*(1-T)+_*T}}var yo,ha=180/Math.PI,io={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xs(u,_,T,N,$,X){var ie,Ae,$e;return(ie=Math.sqrt(u*u+_*_))&&(u/=ie,_/=ie),($e=u*T+_*N)&&(T-=u*$e,N-=_*$e),(Ae=Math.sqrt(T*T+N*N))&&(T/=Ae,N/=Ae,$e/=Ae),u*N<_*T&&(u=-u,_=-_,$e=-$e,ie=-ie),{translateX:$,translateY:X,rotate:Math.atan2(_,u)*ha,skewX:Math.atan($e)*ha,scaleX:ie,scaleY:Ae}}function Lo(u,_,T,N){function $(ot){return ot.length?ot.pop()+" ":""}return function(ot,pt){var Xt=[],vt=[];return ot=u(ot),pt=u(pt),function(ot,pt,Xt,vt,Vn,tr){if(ot!==Xt||pt!==vt){var rs=Vn.push("translate(",null,_,null,T);tr.push({i:rs-4,x:Ki(ot,Xt)},{i:rs-2,x:Ki(pt,vt)})}else(Xt||vt)&&Vn.push("translate("+Xt+_+vt+T)}(ot.translateX,ot.translateY,pt.translateX,pt.translateY,Xt,vt),function(ot,pt,Xt,vt){ot!==pt?(ot-pt>180?pt+=360:pt-ot>180&&(ot+=360),vt.push({i:Xt.push($(Xt)+"rotate(",null,N)-2,x:Ki(ot,pt)})):pt&&Xt.push($(Xt)+"rotate("+pt+N)}(ot.rotate,pt.rotate,Xt,vt),function(ot,pt,Xt,vt){ot!==pt?vt.push({i:Xt.push($(Xt)+"skewX(",null,N)-2,x:Ki(ot,pt)}):pt&&Xt.push($(Xt)+"skewX("+pt+N)}(ot.skewX,pt.skewX,Xt,vt),function(ot,pt,Xt,vt,Vn,tr){if(ot!==Xt||pt!==vt){var rs=Vn.push($(Vn)+"scale(",null,",",null,")");tr.push({i:rs-4,x:Ki(ot,Xt)},{i:rs-2,x:Ki(pt,vt)})}else(1!==Xt||1!==vt)&&Vn.push($(Vn)+"scale("+Xt+","+vt+")")}(ot.scaleX,ot.scaleY,pt.scaleX,pt.scaleY,Xt,vt),ot=pt=null,function(Vn){for(var Bt,tr=-1,rs=vt.length;++tr<rs;)Xt[(Bt=vt[tr]).i]=Bt.x(Vn);return Xt.join("")}}}var Os=Lo(function(u){const _=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(u+"");return _.isIdentity?io:Xs(_.a,_.b,_.c,_.d,_.e,_.f)},"px, ","px)","deg)"),ba=Lo(function(u){return null!=u&&(yo||(yo=document.createElementNS("http://www.w3.org/2000/svg","g")),yo.setAttribute("transform",u),u=yo.transform.baseVal.consolidate())?Xs((u=u.matrix).a,u.b,u.c,u.d,u.e,u.f):io},", ",")",")");function al(u,_){var T,N;return function(){var $=Ls(this,u),X=$.tween;if(X!==T)for(var ie=0,Ae=(N=T=X).length;ie<Ae;++ie)if(N[ie].name===_){(N=N.slice()).splice(ie,1);break}$.tween=N}}function Jo(u,_,T){var N,$;if("function"!=typeof T)throw new Error;return function(){var X=Ls(this,u),ie=X.tween;if(ie!==N){$=(N=ie).slice();for(var Ae={name:_,value:T},$e=0,ot=$.length;$e<ot;++$e)if($[$e].name===_){$[$e]=Ae;break}$e===ot&&$.push(Ae)}X.tween=$}}function za(u,_,T){var N=u._id;return u.each(function(){var $=Ls(this,N);($.value||($.value={}))[_]=T.apply(this,arguments)}),function($){return es($,N).value[_]}}function Ha(u,_,T){u.prototype=_.prototype=T,T.constructor=u}function Ol(u,_){var T=Object.create(u.prototype);for(var N in _)T[N]=_[N];return T}function Ts(){}var Oo=1/.7,ea="\\s*([+-]?\\d+)\\s*",xa="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",so="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wa=/^#([0-9a-f]{3,8})$/,ta=new RegExp("^rgb\\("+[ea,ea,ea]+"\\)$"),Ea=new RegExp("^rgb\\("+[so,so,so]+"\\)$"),fa=new RegExp("^rgba\\("+[ea,ea,ea,xa]+"\\)$"),ll=new RegExp("^rgba\\("+[so,so,so,xa]+"\\)$"),Kl=new RegExp("^hsl\\("+[xa,so,so]+"\\)$"),Qc=new RegExp("^hsla\\("+[xa,so,so,xa]+"\\)$"),Ns={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ga(){return this.rgb().formatHex()}function na(){return this.rgb().formatRgb()}function Ma(u){var _,T;return u=(u+"").trim().toLowerCase(),(_=wa.exec(u))?(T=_[1].length,_=parseInt(_[1],16),6===T?Sa(_):3===T?new Fs(_>>8&15|_>>4&240,_>>4&15|240&_,(15&_)<<4|15&_,1):8===T?Nl(_>>24&255,_>>16&255,_>>8&255,(255&_)/255):4===T?Nl(_>>12&15|_>>8&240,_>>8&15|_>>4&240,_>>4&15|240&_,((15&_)<<4|15&_)/255):null):(_=ta.exec(u))?new Fs(_[1],_[2],_[3],1):(_=Ea.exec(u))?new Fs(255*_[1]/100,255*_[2]/100,255*_[3]/100,1):(_=fa.exec(u))?Nl(_[1],_[2],_[3],_[4]):(_=ll.exec(u))?Nl(255*_[1]/100,255*_[2]/100,255*_[3]/100,_[4]):(_=Kl.exec(u))?da(_[1],_[2]/100,_[3]/100,1):(_=Qc.exec(u))?da(_[1],_[2]/100,_[3]/100,_[4]):Ns.hasOwnProperty(u)?Sa(Ns[u]):"transparent"===u?new Fs(NaN,NaN,NaN,0):null}function Sa(u){return new Fs(u>>16&255,u>>8&255,255&u,1)}function Nl(u,_,T,N){return N<=0&&(u=_=T=NaN),new Fs(u,_,T,N)}function vo(u){return u instanceof Ts||(u=Ma(u)),u?new Fs((u=u.rgb()).r,u.g,u.b,u.opacity):new Fs}function ra(u,_,T,N){return 1===arguments.length?vo(u):new Fs(u,_,T,null==N?1:N)}function Fs(u,_,T,N){this.r=+u,this.g=+_,this.b=+T,this.opacity=+N}function oo(){return"#"+Ql(this.r)+Ql(this.g)+Ql(this.b)}function gl(){var u=this.opacity;return(1===(u=isNaN(u)?1:Math.max(0,Math.min(1,u)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===u?")":", "+u+")")}function Ql(u){return((u=Math.max(0,Math.min(255,Math.round(u)||0)))<16?"0":"")+u.toString(16)}function da(u,_,T,N){return N<=0?u=_=T=NaN:T<=0||T>=1?u=_=NaN:_<=0&&(u=NaN),new ys(u,_,T,N)}function Zl(u){if(u instanceof ys)return new ys(u.h,u.s,u.l,u.opacity);if(u instanceof Ts||(u=Ma(u)),!u)return new ys;if(u instanceof ys)return u;var _=(u=u.rgb()).r/255,T=u.g/255,N=u.b/255,$=Math.min(_,T,N),X=Math.max(_,T,N),ie=NaN,Ae=X-$,$e=(X+$)/2;return Ae?(ie=_===X?(T-N)/Ae+6*(T<N):T===X?(N-_)/Ae+2:(_-T)/Ae+4,Ae/=$e<.5?X+$:2-X-$,ie*=60):Ae=$e>0&&$e<1?0:ie,new ys(ie,Ae,$e,u.opacity)}function ys(u,_,T,N){this.h=+u,this.s=+_,this.l=+T,this.opacity=+N}function H(u,_,T){return 255*(u<60?_+(T-_)*u/60:u<180?T:u<240?_+(T-_)*(240-u)/60:_)}function ee(u,_,T,N,$){var X=u*u,ie=X*u;return((1-3*u+3*X-ie)*_+(4-6*X+3*ie)*T+(1+3*u+3*X-3*ie)*N+ie*$)/6}Ha(Ts,Ma,{copy:function(u){return Object.assign(new this.constructor,this,u)},displayable:function(){return this.rgb().displayable()},hex:Ga,formatHex:Ga,formatHsl:function(){return Zl(this).formatHsl()},formatRgb:na,toString:na}),Ha(Fs,ra,Ol(Ts,{brighter:function(u){return u=null==u?Oo:Math.pow(Oo,u),new Fs(this.r*u,this.g*u,this.b*u,this.opacity)},darker:function(u){return u=null==u?.7:Math.pow(.7,u),new Fs(this.r*u,this.g*u,this.b*u,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oo,formatHex:oo,formatRgb:gl,toString:gl})),Ha(ys,function(u,_,T,N){return 1===arguments.length?Zl(u):new ys(u,_,T,null==N?1:N)},Ol(Ts,{brighter:function(u){return u=null==u?Oo:Math.pow(Oo,u),new ys(this.h,this.s,this.l*u,this.opacity)},darker:function(u){return u=null==u?.7:Math.pow(.7,u),new ys(this.h,this.s,this.l*u,this.opacity)},rgb:function(){var u=this.h%360+360*(this.h<0),_=isNaN(u)||isNaN(this.s)?0:this.s,T=this.l,N=T+(T<.5?T:1-T)*_,$=2*T-N;return new Fs(H(u>=240?u-240:u+120,$,N),H(u,$,N),H(u<120?u+240:u-120,$,N),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var u=this.opacity;return(1===(u=isNaN(u)?1:Math.max(0,Math.min(1,u)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===u?")":", "+u+")")}}));const Ve=u=>()=>u;function Qi(u,_){var T=_-u;return T?function(u,_){return function(T){return u+T*_}}(u,T):Ve(isNaN(u)?_:u)}const zi=function u(_){var T=function(u){return 1==(u=+u)?Qi:function(_,T){return T-_?function(u,_,T){return u=Math.pow(u,T),_=Math.pow(_,T)-u,T=1/T,function(N){return Math.pow(u+N*_,T)}}(_,T,u):Ve(isNaN(_)?T:_)}}(_);function N($,X){var ie=T(($=ra($)).r,(X=ra(X)).r),Ae=T($.g,X.g),$e=T($.b,X.b),ot=Qi($.opacity,X.opacity);return function(pt){return $.r=ie(pt),$.g=Ae(pt),$.b=$e(pt),$.opacity=ot(pt),$+""}}return N.gamma=u,N}(1);function Gr(u){return function(_){var ie,Ae,T=_.length,N=new Array(T),$=new Array(T),X=new Array(T);for(ie=0;ie<T;++ie)Ae=ra(_[ie]),N[ie]=Ae.r||0,$[ie]=Ae.g||0,X[ie]=Ae.b||0;return N=u(N),$=u($),X=u(X),Ae.opacity=1,function($e){return Ae.r=N($e),Ae.g=$($e),Ae.b=X($e),Ae+""}}}var kr=Gr(function(u){var _=u.length-1;return function(T){var N=T<=0?T=0:T>=1?(T=1,_-1):Math.floor(T*_),$=u[N],X=u[N+1];return ee((T-N/_)*_,N>0?u[N-1]:2*$-X,$,X,N<_-1?u[N+2]:2*X-$)}}),vs=(Gr(function(u){var _=u.length;return function(T){var N=Math.floor(((T%=1)<0?++T:T)*_);return ee((T-N/_)*_,u[(N+_-1)%_],u[N%_],u[(N+1)%_],u[(N+2)%_])}}),/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g),No=new RegExp(vs.source,"g");function pa(u,_){var N,$,X,T=vs.lastIndex=No.lastIndex=0,ie=-1,Ae=[],$e=[];for(u+="",_+="";(N=vs.exec(u))&&($=No.exec(_));)(X=$.index)>T&&(X=_.slice(T,X),Ae[ie]?Ae[ie]+=X:Ae[++ie]=X),(N=N[0])===($=$[0])?Ae[ie]?Ae[ie]+=$:Ae[++ie]=$:(Ae[++ie]=null,$e.push({i:ie,x:Ki(N,$)})),T=No.lastIndex;return T<_.length&&(X=_.slice(T),Ae[ie]?Ae[ie]+=X:Ae[++ie]=X),Ae.length<2?$e[0]?function(u){return function(_){return u(_)+""}}($e[0].x):function(u){return function(){return u}}(_):(_=$e.length,function(ot){for(var Xt,pt=0;pt<_;++pt)Ae[(Xt=$e[pt]).i]=Xt.x(ot);return Ae.join("")})}function ar(u,_){var T;return("number"==typeof _?Ki:_ instanceof Ma?zi:(T=Ma(_))?(_=T,zi):pa)(u,_)}function Hs(u){return function(){this.removeAttribute(u)}}function yl(u){return function(){this.removeAttributeNS(u.space,u.local)}}function wo(u,_,T){var N,X,$=T+"";return function(){var ie=this.getAttribute(u);return ie===$?null:ie===N?X:X=_(N=ie,T)}}function _s(u,_,T){var N,X,$=T+"";return function(){var ie=this.getAttributeNS(u.space,u.local);return ie===$?null:ie===N?X:X=_(N=ie,T)}}function $o(u,_,T){var N,$,X;return function(){var ie,$e,Ae=T(this);return null==Ae?void this.removeAttribute(u):(ie=this.getAttribute(u))===($e=Ae+"")?null:ie===N&&$e===$?X:($=$e,X=_(N=ie,Ae))}}function qo(u,_,T){var N,$,X;return function(){var ie,$e,Ae=T(this);return null==Ae?void this.removeAttributeNS(u.space,u.local):(ie=this.getAttributeNS(u.space,u.local))===($e=Ae+"")?null:ie===N&&$e===$?X:($=$e,X=_(N=ie,Ae))}}function er(u,_){return function(T){this.setAttribute(u,_.call(this,T))}}function ks(u,_){return function(T){this.setAttributeNS(u.space,u.local,_.call(this,T))}}function vl(u,_){var T,N;function $(){var X=_.apply(this,arguments);return X!==N&&(T=(N=X)&&ks(u,X)),T}return $._value=_,$}function ec(u,_){var T,N;function $(){var X=_.apply(this,arguments);return X!==N&&(T=(N=X)&&er(u,X)),T}return $._value=_,$}function _l(u,_){return function(){xo(this,u).delay=+_.apply(this,arguments)}}function Zc(u,_){return _=+_,function(){xo(this,u).delay=_}}function x(u,_){return function(){Ls(this,u).duration=+_.apply(this,arguments)}}function S(u,_){return _=+_,function(){Ls(this,u).duration=_}}function K(u,_){if("function"!=typeof _)throw new Error;return function(){Ls(this,u).ease=_}}function zn(u,_,T){var N,$,X=function(u){return(u+"").trim().split(/^|\s+/).every(function(_){var T=_.indexOf(".");return T>=0&&(_=_.slice(0,T)),!_||"start"===_})}(_)?xo:Ls;return function(){var ie=X(this,u),Ae=ie.on;Ae!==N&&($=(N=Ae).copy()).on(_,T),ie.on=$}}var Ci=li.prototype.constructor;function bs(u){return function(){this.style.removeProperty(u)}}function Hi(u,_,T){return function(N){this.style.setProperty(u,_.call(this,N),T)}}function pe(u,_,T){var N,$;function X(){var ie=_.apply(this,arguments);return ie!==$&&(N=($=ie)&&Hi(u,ie,T)),N}return X._value=_,X}function $a(u){return function(_){this.textContent=u.call(this,_)}}function Hn(u){var _,T;function N(){var $=u.apply(this,arguments);return $!==T&&(_=(T=$)&&$a($)),_}return N._value=u,N}var ns=0;function Wr(u,_,T,N){this._groups=u,this._parents=_,this._name=T,this._id=N}function di(){return++ns}var Si=li.prototype;Wr.prototype=function(u){return li().transition(u)}.prototype={constructor:Wr,select:function(u){var _=this._name,T=this._id;"function"!=typeof u&&(u=Y(u));for(var N=this._groups,$=N.length,X=new Array($),ie=0;ie<$;++ie)for(var pt,Xt,Ae=N[ie],$e=Ae.length,ot=X[ie]=new Array($e),vt=0;vt<$e;++vt)(pt=Ae[vt])&&(Xt=u.call(pt,pt.__data__,vt,Ae))&&("__data__"in pt&&(Xt.__data__=pt.__data__),ot[vt]=Xt,Ss(ot[vt],_,T,vt,ot,es(pt,T)));return new Wr(X,this._parents,_,T)},selectAll:function(u){var _=this._name,T=this._id;"function"!=typeof u&&(u=Me(u));for(var N=this._groups,$=N.length,X=[],ie=[],Ae=0;Ae<$;++Ae)for(var pt,$e=N[Ae],ot=$e.length,Xt=0;Xt<ot;++Xt)if(pt=$e[Xt]){for(var Vn,vt=u.call(pt,pt.__data__,Xt,$e),tr=es(pt,T),rs=0,Bt=vt.length;rs<Bt;++rs)(Vn=vt[rs])&&Ss(Vn,_,T,rs,vt,tr);X.push(vt),ie.push(pt)}return new Wr(X,ie,_,T)},selectChild:Si.selectChild,selectChildren:Si.selectChildren,filter:function(u){"function"!=typeof u&&(u=ze(u));for(var _=this._groups,T=_.length,N=new Array(T),$=0;$<T;++$)for(var $e,X=_[$],ie=X.length,Ae=N[$]=[],ot=0;ot<ie;++ot)($e=X[ot])&&u.call($e,$e.__data__,ot,X)&&Ae.push($e);return new Wr(N,this._parents,this._name,this._id)},merge:function(u){if(u._id!==this._id)throw new Error;for(var _=this._groups,T=u._groups,N=_.length,X=Math.min(N,T.length),ie=new Array(N),Ae=0;Ae<X;++Ae)for(var vt,$e=_[Ae],ot=T[Ae],pt=$e.length,Xt=ie[Ae]=new Array(pt),Vn=0;Vn<pt;++Vn)(vt=$e[Vn]||ot[Vn])&&(Xt[Vn]=vt);for(;Ae<N;++Ae)ie[Ae]=_[Ae];return new Wr(ie,this._parents,this._name,this._id)},selection:function(){return new Ci(this._groups,this._parents)},transition:function(){for(var u=this._name,_=this._id,T=di(),N=this._groups,$=N.length,X=0;X<$;++X)for(var $e,ie=N[X],Ae=ie.length,ot=0;ot<Ae;++ot)if($e=ie[ot]){var pt=es($e,_);Ss($e,u,T,ot,ie,{time:pt.time+pt.delay+pt.duration,delay:0,duration:pt.duration,ease:pt.ease})}return new Wr(N,this._parents,u,T)},call:Si.call,nodes:Si.nodes,node:Si.node,size:Si.size,empty:Si.empty,each:Si.each,on:function(u,_){var T=this._id;return arguments.length<2?es(this.node(),T).on.on(u):this.each(zn(T,u,_))},attr:function(u,_){var T=kt(u),N="transform"===T?ba:ar;return this.attrTween(u,"function"==typeof _?(T.local?qo:$o)(T,N,za(this,"attr."+u,_)):null==_?(T.local?yl:Hs)(T):(T.local?_s:wo)(T,N,_))},attrTween:function(u,_){var T="attr."+u;if(arguments.length<2)return(T=this.tween(T))&&T._value;if(null==_)return this.tween(T,null);if("function"!=typeof _)throw new Error;var N=kt(u);return this.tween(T,(N.local?vl:ec)(N,_))},style:function(u,_,T){var N="transform"==(u+="")?Os:ar;return null==_?this.styleTween(u,function(u,_){var T,N,$;return function(){var X=Ir(this,u),ie=(this.style.removeProperty(u),Ir(this,u));return X===ie?null:X===T&&ie===N?$:$=_(T=X,N=ie)}}(u,N)).on("end.style."+u,bs(u)):"function"==typeof _?this.styleTween(u,function(u,_,T){var N,$,X;return function(){var ie=Ir(this,u),Ae=T(this),$e=Ae+"";return null==Ae&&(this.style.removeProperty(u),$e=Ae=Ir(this,u)),ie===$e?null:ie===N&&$e===$?X:($=$e,X=_(N=ie,Ae))}}(u,N,za(this,"style."+u,_))).each(function(u,_){var T,N,$,Ae,X="style."+_,ie="end."+X;return function(){var $e=Ls(this,u),ot=$e.on,pt=null==$e.value[X]?Ae||(Ae=bs(_)):void 0;(ot!==T||$!==pt)&&(N=(T=ot).copy()).on(ie,$=pt),$e.on=N}}(this._id,u)):this.styleTween(u,function(u,_,T){var N,X,$=T+"";return function(){var ie=Ir(this,u);return ie===$?null:ie===N?X:X=_(N=ie,T)}}(u,N,_),T).on("end.style."+u,null)},styleTween:function(u,_,T){var N="style."+(u+="");if(arguments.length<2)return(N=this.tween(N))&&N._value;if(null==_)return this.tween(N,null);if("function"!=typeof _)throw new Error;return this.tween(N,pe(u,_,null==T?"":T))},text:function(u){return this.tween("text","function"==typeof u?function(u){return function(){var _=u(this);this.textContent=null==_?"":_}}(za(this,"text",u)):function(u){return function(){this.textContent=u}}(null==u?"":u+""))},textTween:function(u){var _="text";if(arguments.length<1)return(_=this.tween(_))&&_._value;if(null==u)return this.tween(_,null);if("function"!=typeof u)throw new Error;return this.tween(_,Hn(u))},remove:function(){return this.on("end.remove",(u=this._id,function(){var _=this.parentNode;for(var T in this.__transition)if(+T!==u)return;_&&_.removeChild(this)}));var u},tween:function(u,_){var T=this._id;if(u+="",arguments.length<2){for(var ie,N=es(this.node(),T).tween,$=0,X=N.length;$<X;++$)if((ie=N[$]).name===u)return ie.value;return null}return this.each((null==_?al:Jo)(T,u,_))},delay:function(u){var _=this._id;return arguments.length?this.each(("function"==typeof u?_l:Zc)(_,u)):es(this.node(),_).delay},duration:function(u){var _=this._id;return arguments.length?this.each(("function"==typeof u?x:S)(_,u)):es(this.node(),_).duration},ease:function(u){var _=this._id;return arguments.length?this.each(K(_,u)):es(this.node(),_).ease},easeVarying:function(u){if("function"!=typeof u)throw new Error;return this.each(function(u,_){return function(){var T=_.apply(this,arguments);if("function"!=typeof T)throw new Error;Ls(this,u).ease=T}}(this._id,u))},end:function(){var u,_,T=this,N=T._id,$=T.size();return new Promise(function(X,ie){var Ae={value:ie},$e={value:function(){0==--$&&X()}};T.each(function(){var ot=Ls(this,N),pt=ot.on;pt!==u&&((_=(u=pt).copy())._.cancel.push(Ae),_._.interrupt.push(Ae),_._.end.push($e)),ot.on=_}),0===$&&X()})},[Symbol.iterator]:Si[Symbol.iterator]};var nc={time:null,delay:0,duration:250,ease:function(u){return((u*=2)<=1?u*u*u:(u-=2)*u*u+2)/2}};function Eo(u,_){for(var T;!(T=u.__transition)||!(T=T[_]);)if(!(u=u.parentNode))throw new Error(`transition ${_} not found`);return T}li.prototype.interrupt=function(u){return this.each(function(){!function(u,_){var N,$,ie,T=u.__transition,X=!0;if(T){for(ie in _=null==_?null:_+"",T)(N=T[ie]).name===_?($=N.state>2&&N.state<5,N.state=6,N.timer.stop(),N.on.call($?"interrupt":"cancel",u,u.__data__,N.index,N.group),delete T[ie]):X=!1;X&&delete u.__transition}}(this,u)})},li.prototype.transition=function(u){var _,T;u instanceof Wr?(_=u._id,u=u._name):(_=di(),(T=nc).time=(0,je.zO)(),u=null==u?null:u+"");for(var N=this._groups,$=N.length,X=0;X<$;++X)for(var $e,ie=N[X],Ae=ie.length,ot=0;ot<Ae;++ot)($e=ie[ot])&&Ss($e,u,_,ot,ie,T||Eo($e,_));return new Wr(N,this._parents,u,_)};Math;function Gs(u){return{type:u}}["w","e"].map(Gs),["n","s"].map(Gs),["n","w","e","s","nw","ne","sw","se"].map(Gs);var u,eh=ae(965),th=ae(2357),fl=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(th.Z);function Bl(u,_,T){this.k=u,this.x=_,this.y=T}kr((u=fl)[u.length-1]),Bl.prototype={constructor:Bl,scale:function(u){return 1===u?this:new Bl(this.k*u,this.x,this.y)},translate:function(u,_){return 0===u&0===_?this:new Bl(this.k,this.x+this.k*u,this.y+this.k*_)},apply:function(u){return[u[0]*this.k+this.x,u[1]*this.k+this.y]},applyX:function(u){return u*this.k+this.x},applyY:function(u){return u*this.k+this.y},invert:function(u){return[(u[0]-this.x)/this.k,(u[1]-this.y)/this.k]},invertX:function(u){return(u-this.x)/this.k},invertY:function(u){return(u-this.y)/this.k},rescaleX:function(u){return u.copy().domain(u.range().map(this.invertX,this).map(u.invert,u))},rescaleY:function(u){return u.copy().domain(u.range().map(this.invertY,this).map(u.invert,u))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Bl(1,0,0)},2004:(jt,mt,ae)=>{"use strict";ae.d(mt,{j:()=>Y,M:()=>Ne});var G=ae(7758);class Y extends G.Tme{constructor(ne){super(),this.element=ne||document.createElement("div"),this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(te){te.element instanceof Element&&null!==te.element.parentNode&&te.element.parentNode.removeChild(te.element)})})}copy(ne,te){return super.copy(ne,te),this.element=ne.element.cloneNode(!0),this}}Y.prototype.isCSS2DObject=!0;const Be=new G.Pa4,Je=new G.yGw,_e=new G.yGw,Me=new G.Pa4,Re=new G.Pa4;class Ne{constructor(){const ne=this;let te,xe,Ue,He;const tt={objects:new WeakMap},We=document.createElement("div");function gt(Ot,dt,Mn){if(Ot.isCSS2DObject){Ot.onBeforeRender(ne,dt,Mn),Be.setFromMatrixPosition(Ot.matrixWorld),Be.applyMatrix4(_e);const fn=Ot.element;fn.style.transform=/apple/i.test(navigator.vendor)?"translate(-50%,-50%) translate("+Math.round(Be.x*Ue+Ue)+"px,"+Math.round(-Be.y*He+He)+"px)":"translate(-50%,-50%) translate("+(Be.x*Ue+Ue)+"px,"+(-Be.y*He+He)+"px)",fn.style.display=Ot.visible&&Be.z>=-1&&Be.z<=1?"":"none";const Gn={distanceToCameraSquared:Jt(Mn,Ot)};tt.objects.set(Ot,Gn),fn.parentNode!==We&&We.appendChild(fn),Ot.onAfterRender(ne,dt,Mn)}for(let fn=0,Gn=Ot.children.length;fn<Gn;fn++)gt(Ot.children[fn],dt,Mn)}function Jt(Ot,dt){return Me.setFromMatrixPosition(Ot.matrixWorld),Re.setFromMatrixPosition(dt.matrixWorld),Me.distanceToSquared(Re)}We.style.overflow="hidden",this.domElement=We,this.getSize=function(){return{width:te,height:xe}},this.render=function(Ot,dt){!0===Ot.autoUpdate&&Ot.updateMatrixWorld(),null===dt.parent&&dt.updateMatrixWorld(),Je.copy(dt.matrixWorldInverse),_e.multiplyMatrices(dt.projectionMatrix,Je),gt(Ot,Ot,dt),function(Ot){const dt=function(Ot){const dt=[];return Ot.traverse(function(Mn){Mn.isCSS2DObject&&dt.push(Mn)}),dt}(Ot).sort(function(fn,Gn){return tt.objects.get(fn).distanceToCameraSquared-tt.objects.get(Gn).distanceToCameraSquared}),Mn=dt.length;for(let fn=0,Gn=dt.length;fn<Gn;fn++)dt[fn].element.style.zIndex=Mn-fn}(Ot)},this.setSize=function(Ot,dt){te=Ot,xe=dt,Ue=te/2,He=xe/2,We.style.width=Ot+"px",We.style.height=dt+"px"}}}},8239:(jt,mt,ae)=>{"use strict";function G(Be,Je,_e,Me,Re,Ne,ze){try{var ne=Be[Ne](ze),te=ne.value}catch(xe){return void _e(xe)}ne.done?Je(te):Promise.resolve(te).then(Me,Re)}function Y(Be){return function(){var Je=this,_e=arguments;return new Promise(function(Me,Re){var Ne=Be.apply(Je,_e);function ze(te){G(Ne,Me,Re,ze,ne,"next",te)}function ne(te){G(Ne,Me,Re,ze,ne,"throw",te)}ze(void 0)})}}ae.d(mt,{Z:()=>Y})}}]);